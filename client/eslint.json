[{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(auth)\\forget-password\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1152,1155],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1152,1155],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":91,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3433,3580],"text":"\r\n                        Enter your email address and we&apos;ll send you a link to\r\n                        reset your password.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3433,3580],"text":"\r\n                        Enter your email address and we&lsquo;ll send you a link to\r\n                        reset your password.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3433,3580],"text":"\r\n                        Enter your email address and we&#39;ll send you a link to\r\n                        reset your password.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3433,3580],"text":"\r\n                        Enter your email address and we&rsquo;ll send you a link to\r\n                        reset your password.\r\n                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Loader, ArrowLeft } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { requestPasswordReset } from '@/lib/auth-client';\r\nimport Link from 'next/link';\r\n\r\nexport default function ForgetPasswordPage() {\r\n    const [email, setEmail] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isSuccess, setIsSuccess] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            await requestPasswordReset({\r\n                email,\r\n                redirectTo: `${process.env\r\n                    .NEXT_PUBLIC_FRONTEND_URL!}/reset-password`,\r\n            });\r\n            setIsSuccess(true);\r\n            toast.success('Reset link sent to your email!');\r\n        } catch (error: any) {\r\n            toast.error(error?.message || 'Failed to send reset link');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    if (isSuccess) {\r\n        return (\r\n            <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\r\n                <Card className=\"w-full max-w-md\">\r\n                    <CardHeader>\r\n                        <CardTitle>Check Your Email</CardTitle>\r\n                        <CardDescription>\r\n                            We sent a password reset link to{' '}\r\n                            <span className=\"font-medium text-foreground\">\r\n                                {email}\r\n                            </span>\r\n                            . Please check your inbox (and spam folder) to\r\n                            proceed.\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <Link href=\"/sign-in\">\r\n                            <Button variant=\"outline\" className=\"w-full\">\r\n                                Back to Sign In\r\n                            </Button>\r\n                        </Link>\r\n                        <Button\r\n                            variant=\"link\"\r\n                            className=\"w-full\"\r\n                            onClick={() => setIsSuccess(false)}\r\n                        >\r\n                            Try another email\r\n                        </Button>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\r\n            <Card className=\"w-full max-w-md\">\r\n                <CardHeader>\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                        <Link\r\n                            href=\"/sign-in\"\r\n                            className=\"text-muted-foreground hover:text-foreground transition-colors\"\r\n                        >\r\n                            <ArrowLeft className=\"h-4 w-4\" />\r\n                        </Link>\r\n                        <CardTitle>Forgot Password?</CardTitle>\r\n                    </div>\r\n                    <CardDescription>\r\n                        Enter your email address and we'll send you a link to\r\n                        reset your password.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"email\">Email</Label>\r\n                            <Input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                placeholder=\"name@example.com\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader className=\" h-4 w-4 animate-spin\" />\r\n                                    Sending Link...\r\n                                </>\r\n                            ) : (\r\n                                'Send Reset Link'\r\n                            )}\r\n                        </Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(auth)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(auth)\\reset-password\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1253,1256],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1253,1256],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Loader } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { authClient } from '@/lib/auth-client';\r\n\r\nexport default function ResetPasswordPage() {\r\n    const router = useRouter();\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (password !== confirmPassword) {\r\n            toast.error('Passwords do not match');\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            await authClient.resetPassword({\r\n                newPassword: password,\r\n            });\r\n            toast.success('Password reset successfully! Please login.');\r\n            router.push('/sign-in');\r\n        } catch (error: any) {\r\n            toast.error(error?.message || 'Failed to reset password');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex min-h-svh w-full items-center justify-center p-6 md:p-10\">\r\n            <Card className=\"w-full max-w-md\">\r\n                <CardHeader>\r\n                    <CardTitle>Reset Password</CardTitle>\r\n                    <CardDescription>\r\n                        Enter your new password below.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"password\">New Password</Label>\r\n                            <Input\r\n                                id=\"password\"\r\n                                type=\"password\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"confirmPassword\">\r\n                                Confirm New Password\r\n                            </Label>\r\n                            <Input\r\n                                id=\"confirmPassword\"\r\n                                type=\"password\"\r\n                                value={confirmPassword}\r\n                                onChange={(e) =>\r\n                                    setConfirmPassword(e.target.value)\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader className=\" h-4 w-4 animate-spin\" />\r\n                                    Resetting Password...\r\n                                </>\r\n                            ) : (\r\n                                'Reset Password'\r\n                            )}\r\n                        </Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(auth)\\sign-in\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(auth)\\sign-up\\[token]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1793,1796],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1793,1796],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2496,2499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2496,2499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":113,"column":28,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3581,3638],"text":"\r\n                        You&apos;ve been invited to join as "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3581,3638],"text":"\r\n                        You&lsquo;ve been invited to join as "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3581,3638],"text":"\r\n                        You&#39;ve been invited to join as "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3581,3638],"text":"\r\n                        You&rsquo;ve been invited to join as "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n    useValidateTokenQuery,\r\n    useAcceptInvitationMutation,\r\n} from '@/redux/features/invitation/invitationApi';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Loader } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function SignupPage() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const token = params.token as string;\r\n\r\n    const { data, isLoading, error } = useValidateTokenQuery(token);\r\n    const [acceptInvitation, { isLoading: isAccepting }] =\r\n        useAcceptInvitationMutation();\r\n\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        phone: '',\r\n        address: '',\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (formData.password !== formData.confirmPassword) {\r\n            toast.error('Passwords do not match');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await acceptInvitation({\r\n                token,\r\n                data: {\r\n                    name: formData.name,\r\n                    password: formData.password,\r\n                    phone: formData.phone,\r\n                    address: formData.address,\r\n                },\r\n            }).unwrap();\r\n\r\n            toast.success('Account created successfully! Please login.');\r\n            router.push('/login');\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to create account');\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n                <Loader className=\"h-8 w-8 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (error || !data?.success) {\r\n        let errorMessage = 'This invitation link is invalid or has expired.';\r\n\r\n        if (error) {\r\n            if (\r\n                'data' in error &&\r\n                typeof error.data === 'object' &&\r\n                error.data &&\r\n                'message' in error.data\r\n            ) {\r\n                errorMessage = (error.data as any).message;\r\n            } else if ('message' in error) {\r\n                errorMessage = error.message as string; // SerializedError\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className=\"flex items-center justify-center min-h-screen\">\r\n                <Card className=\"w-full max-w-md\">\r\n                    <CardHeader>\r\n                        <CardTitle className=\"text-destructive\">\r\n                            Invalid Invitation\r\n                        </CardTitle>\r\n                        <CardDescription className=\"text-destructive font-medium\">\r\n                            {errorMessage}\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const invitation = data.data;\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center min-h-screen p-4\">\r\n            <Card className=\"w-full max-w-md\">\r\n                <CardHeader>\r\n                    <CardTitle>Complete Your Registration</CardTitle>\r\n                    <CardDescription>\r\n                        You've been invited to join as {invitation.designation}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <div className=\"mb-6 p-4 bg-muted rounded-lg\">\r\n                        <h3 className=\"font-semibold mb-2\">Position Details</h3>\r\n                        <div className=\"space-y-1 text-sm\">\r\n                            <p>\r\n                                <span className=\"font-medium\">Role:</span>{' '}\r\n                                {invitation.role}\r\n                            </p>\r\n                            <p>\r\n                                <span className=\"font-medium\">Department:</span>{' '}\r\n                                {invitation.department || 'N/A'}\r\n                            </p>\r\n                            <p>\r\n                                <span className=\"font-medium\">\r\n                                    Designation:\r\n                                </span>{' '}\r\n                                {invitation.designation}\r\n                            </p>\r\n                            <p>\r\n                                <span className=\"font-medium\">Salary:</span> ৳\r\n                                {invitation.salary.toLocaleString()}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                        <div>\r\n                            <Label htmlFor=\"name\">Full Name *</Label>\r\n                            <Input\r\n                                id=\"name\"\r\n                                value={formData.name}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        name: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label htmlFor=\"phone\">Phone Number *</Label>\r\n                            <Input\r\n                                id=\"phone\"\r\n                                value={formData.phone}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        phone: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label htmlFor=\"password\">Password *</Label>\r\n                            <Input\r\n                                id=\"password\"\r\n                                type=\"password\"\r\n                                value={formData.password}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        password: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label htmlFor=\"confirmPassword\">\r\n                                Confirm Password *\r\n                            </Label>\r\n                            <Input\r\n                                id=\"confirmPassword\"\r\n                                type=\"password\"\r\n                                value={formData.confirmPassword}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        confirmPassword: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label htmlFor=\"address\">Address</Label>\r\n                            <Input\r\n                                id=\"address\"\r\n                                value={formData.address}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        address: e.target.value,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </div>\r\n\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full\"\r\n                            disabled={isAccepting}\r\n                        >\r\n                            {isAccepting ? (\r\n                                <>\r\n                                    <Loader className=\" h-4 w-4 animate-spin\" />\r\n                                    Creating Account...\r\n                                </>\r\n                            ) : (\r\n                                'Create Account'\r\n                            )}\r\n                        </Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(auth)\\sign-up\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\account\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\analytics\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\analytics\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ResponsiveContainer' is defined but never used.","line":35,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Pie' is defined but never used.","line":36,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PieChart' is defined but never used.","line":37,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Cell' is defined but never used.","line":38,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Legend' is defined but never used.","line":39,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":50,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":65,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'COLORS' is assigned a value but never used.","line":72,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pieChartConfig' is assigned a value but never used.","line":95,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    useGetAnalyticsYearsQuery,\r\n    useGetFinanceAnalyticsQuery,\r\n} from '@/redux/features/analytics/analyticsApi';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport {\r\n    ChartConfig,\r\n    ChartContainer,\r\n    ChartTooltip,\r\n    ChartTooltipContent,\r\n} from '@/components/ui/chart';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport {\r\n    Bar,\r\n    BarChart,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    ResponsiveContainer,\r\n    Pie,\r\n    PieChart,\r\n    Cell,\r\n    Legend,\r\n    Line,\r\n    LineChart,\r\n} from 'recharts';\r\nimport {\r\n    DollarSign,\r\n    TrendingUp,\r\n    TrendingDown,\r\n    Receipt,\r\n    Package,\r\n    Wallet,\r\n    Users,\r\n} from 'lucide-react';\r\n\r\nconst formatCurrency = (amount: number, currency: string = 'BDT') => {\r\n    try {\r\n        if (currency === 'BDT') {\r\n            return `৳${amount.toLocaleString('en-IN', {\r\n                minimumFractionDigits: 2,\r\n                maximumFractionDigits: 2,\r\n            })}`;\r\n        }\r\n        return amount.toLocaleString('en-US', {\r\n            style: 'currency',\r\n            currency: currency,\r\n        });\r\n    } catch (e) {\r\n        // Fallback for invalid currency codes\r\n        console.error('Invalid currency code:', currency);\r\n        return `${currency} ${amount.toFixed(2)}`;\r\n    }\r\n};\r\n\r\nconst COLORS = [\r\n    'hsl(var(--chart-1))',\r\n    'hsl(var(--chart-2))',\r\n    'hsl(var(--chart-3))',\r\n    'hsl(var(--chart-4))',\r\n    'hsl(var(--chart-5))',\r\n];\r\n\r\nconst barChartConfig = {\r\n    earnings: {\r\n        label: 'Earnings',\r\n        color: 'hsl(142, 76%, 36%)',\r\n    },\r\n    expenses: {\r\n        label: 'Expenses',\r\n        color: 'hsl(0, 84%, 60%)',\r\n    },\r\n    profit: {\r\n        label: 'Profit',\r\n        color: 'hsl(217, 91%, 60%)',\r\n    },\r\n} satisfies ChartConfig;\r\n\r\nconst pieChartConfig = {\r\n    category: {\r\n        label: 'Category',\r\n    },\r\n} satisfies ChartConfig;\r\n\r\nexport default function FinanceAnalyticsPage() {\r\n    const currentYear = new Date().getFullYear();\r\n    const [selectedYear, setSelectedYear] = useState<string>(\r\n        currentYear.toString(),\r\n    );\r\n    const [selectedMonth, setSelectedMonth] = useState<string>('all');\r\n\r\n    // Fetch available years\r\n    const { data: availableYears = [] } = useGetAnalyticsYearsQuery();\r\n\r\n    // Combine fetched years with current year and unique them\r\n    const years = Array.from(new Set([currentYear, ...availableYears])).sort(\r\n        (a, b) => b - a,\r\n    );\r\n\r\n    const { data, isLoading } = useGetFinanceAnalyticsQuery({\r\n        year: parseInt(selectedYear),\r\n        month: selectedMonth === 'all' ? undefined : parseInt(selectedMonth),\r\n        months: 12, // Default for compatibility, though service might ignore it if year is set\r\n    });\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"space-y-6\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <Skeleton className=\"h-8 w-48\" />\r\n                    <Skeleton className=\"h-10 w-32\" />\r\n                </div>\r\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n                    {[...Array(4)].map((_, i) => (\r\n                        <Card key={i}>\r\n                            <CardHeader className=\"pb-2\">\r\n                                <Skeleton className=\"h-4 w-24\" />\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <Skeleton className=\"h-8 w-32\" />\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n                <div className=\"grid gap-6 md:grid-cols-2\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <Skeleton className=\"h-6 w-40\" />\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <Skeleton className=\"h-[300px] w-full\" />\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <Skeleton className=\"h-6 w-40\" />\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <Skeleton className=\"h-[300px] w-full\" />\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!data) {\r\n        return <div>No analytics data available</div>;\r\n    }\r\n\r\n    const { summary, monthlyTrends, clientBreakdown, expensesByCategory } =\r\n        data;\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold\">Finance Analytics</h1>\r\n                    <p className=\"text-muted-foreground\">\r\n                        Track your earnings, expenses, and profit trends\r\n                    </p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <Select\r\n                        value={selectedMonth}\r\n                        onValueChange={setSelectedMonth}\r\n                    >\r\n                        <SelectTrigger className=\"w-[140px]\">\r\n                            <SelectValue placeholder=\"Month\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Months</SelectItem>\r\n                            {Array.from({ length: 12 }, (_, i) => i + 1).map(\r\n                                (m) => (\r\n                                    <SelectItem key={m} value={m.toString()}>\r\n                                        {new Date(0, m - 1).toLocaleString(\r\n                                            'default',\r\n                                            { month: 'long' },\r\n                                        )}\r\n                                    </SelectItem>\r\n                                ),\r\n                            )}\r\n                        </SelectContent>\r\n                    </Select>\r\n\r\n                    <Select\r\n                        value={selectedYear}\r\n                        onValueChange={setSelectedYear}\r\n                    >\r\n                        <SelectTrigger className=\"w-[100px]\">\r\n                            <SelectValue placeholder=\"Year\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            {years.map((y) => (\r\n                                <SelectItem key={y} value={y.toString()}>\r\n                                    {y}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Summary Stats */}\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Total Earnings\r\n                        </CardTitle>\r\n                        <DollarSign className=\"h-4 w-4 text-green-600\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold text-green-600\">\r\n                            {formatCurrency(summary.totalEarnings)}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            From {summary.deliveredOrders} orders\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Total Expenses\r\n                        </CardTitle>\r\n                        <Receipt className=\"h-4 w-4 text-red-600\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold text-red-600\">\r\n                            {formatCurrency(summary.totalExpenses)}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            All categories\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Net Profit\r\n                        </CardTitle>\r\n                        {summary.totalProfit >= 0 ? (\r\n                            <TrendingUp className=\"h-4 w-4 text-blue-600\" />\r\n                        ) : (\r\n                            <TrendingDown className=\"h-4 w-4 text-red-600\" />\r\n                        )}\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div\r\n                            className={`text-2xl font-bold ${\r\n                                summary.totalProfit >= 0\r\n                                    ? 'text-blue-600'\r\n                                    : 'text-red-600'\r\n                            }`}\r\n                        >\r\n                            {formatCurrency(summary.totalProfit)}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Earnings - Expenses\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Unpaid Revenue\r\n                        </CardTitle>\r\n                        <Wallet className=\"h-4 w-4 text-orange-600\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold text-orange-600\">\r\n                            {formatCurrency(summary.unpaidRevenue)}\r\n                        </div>\r\n\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Not yet withdrawn\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Shared Amount\r\n                        </CardTitle>\r\n                        <Package className=\"h-4 w-4 text-purple-600\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold text-purple-600\">\r\n                            {formatCurrency(summary.totalShared || 0)}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Transferred to external\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-950/30 dark:to-teal-950/30 border-emerald-200 dark:border-emerald-800\">\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Final Amount\r\n                        </CardTitle>\r\n                        <TrendingUp className=\"h-4 w-4 text-emerald-600\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div\r\n                            className={`text-2xl font-bold ${(summary.finalAmount || 0) >= 0 ? 'text-emerald-600' : 'text-red-600'}`}\r\n                        >\r\n                            {formatCurrency(summary.finalAmount || 0)}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Profit - Shared + Debit\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Charts Row 1 - Monthly Trends */}\r\n            <div className=\"grid gap-6 md:grid-cols-2\">\r\n                {/* Earnings vs Expenses Bar Chart */}\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Earnings vs Expenses</CardTitle>\r\n                        <CardDescription>\r\n                            Monthly comparison for {selectedYear}\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <ChartContainer\r\n                            config={barChartConfig}\r\n                            className=\"h-[300px] w-full\"\r\n                        >\r\n                            <BarChart data={monthlyTrends}>\r\n                                <CartesianGrid\r\n                                    strokeDasharray=\"3 3\"\r\n                                    className=\"stroke-muted\"\r\n                                />\r\n                                <XAxis\r\n                                    dataKey=\"monthName\"\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                    className=\"text-xs\"\r\n                                />\r\n                                <YAxis\r\n                                    tickFormatter={(v) => formatCurrency(v)}\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                    className=\"text-xs\"\r\n                                />\r\n                                <ChartTooltip\r\n                                    content={\r\n                                        <ChartTooltipContent\r\n                                            formatter={(value) =>\r\n                                                formatCurrency(Number(value))\r\n                                            }\r\n                                        />\r\n                                    }\r\n                                />\r\n                                <Bar\r\n                                    dataKey=\"earnings\"\r\n                                    fill=\"hsl(142, 76%, 36%)\"\r\n                                    radius={[4, 4, 0, 0]}\r\n                                    name=\"Earnings\"\r\n                                />\r\n                                <Bar\r\n                                    dataKey=\"expenses\"\r\n                                    fill=\"hsl(0, 84%, 60%)\"\r\n                                    radius={[4, 4, 0, 0]}\r\n                                    name=\"Expenses\"\r\n                                />\r\n                            </BarChart>\r\n                        </ChartContainer>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Profit Trend Line Chart */}\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Profit Trend</CardTitle>\r\n                        <CardDescription>\r\n                            Monthly profit for {selectedYear}\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <ChartContainer\r\n                            config={barChartConfig}\r\n                            className=\"h-[300px] w-full\"\r\n                        >\r\n                            <LineChart data={monthlyTrends}>\r\n                                <CartesianGrid\r\n                                    strokeDasharray=\"3 3\"\r\n                                    className=\"stroke-muted\"\r\n                                />\r\n                                <XAxis\r\n                                    dataKey=\"monthName\"\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                    className=\"text-xs\"\r\n                                />\r\n                                <YAxis\r\n                                    tickFormatter={(v) => formatCurrency(v)}\r\n                                    tickLine={false}\r\n                                    axisLine={false}\r\n                                    className=\"text-xs\"\r\n                                />\r\n                                <ChartTooltip\r\n                                    content={\r\n                                        <ChartTooltipContent\r\n                                            formatter={(value) =>\r\n                                                formatCurrency(Number(value))\r\n                                            }\r\n                                        />\r\n                                    }\r\n                                />\r\n                                <Line\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"profit\"\r\n                                    stroke=\"hsl(217, 91%, 60%)\"\r\n                                    strokeWidth={2}\r\n                                    dot={{ fill: 'hsl(217, 91%, 60%)' }}\r\n                                    name=\"Profit\"\r\n                                />\r\n                            </LineChart>\r\n                        </ChartContainer>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Charts Row 2 - Breakdown */}\r\n            <div className=\"grid gap-6 md:grid-cols-2\">\r\n                {/* Expenses by Category - Clean Bar Chart */}\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Expenses by Category</CardTitle>\r\n                        <CardDescription>\r\n                            Top expense categories\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        {expensesByCategory.length === 0 ? (\r\n                            <div className=\"flex h-[300px] items-center justify-center text-muted-foreground\">\r\n                                No expense data available\r\n                            </div>\r\n                        ) : (\r\n                            (() => {\r\n                                // Group into top 5 + Others\r\n                                const top5 = expensesByCategory.slice(0, 5);\r\n                                const othersTotal = expensesByCategory\r\n                                    .slice(5)\r\n                                    .reduce((sum, cat) => sum + cat.total, 0);\r\n                                const chartData =\r\n                                    othersTotal > 0\r\n                                        ? [\r\n                                              ...top5,\r\n                                              {\r\n                                                  categoryId: 'others',\r\n                                                  categoryName: 'Others',\r\n                                                  total: othersTotal,\r\n                                              },\r\n                                          ]\r\n                                        : top5;\r\n\r\n                                return (\r\n                                    <ChartContainer\r\n                                        config={barChartConfig}\r\n                                        className=\"h-[300px] w-full\"\r\n                                    >\r\n                                        <BarChart\r\n                                            data={chartData}\r\n                                            layout=\"vertical\"\r\n                                        >\r\n                                            <CartesianGrid\r\n                                                strokeDasharray=\"3 3\"\r\n                                                className=\"stroke-muted\"\r\n                                            />\r\n                                            <XAxis\r\n                                                type=\"number\"\r\n                                                tickFormatter={(v) =>\r\n                                                    formatCurrency(v)\r\n                                                }\r\n                                                tickLine={false}\r\n                                                axisLine={false}\r\n                                                className=\"text-xs\"\r\n                                            />\r\n                                            <YAxis\r\n                                                type=\"category\"\r\n                                                dataKey=\"categoryName\"\r\n                                                tickLine={false}\r\n                                                axisLine={false}\r\n                                                className=\"text-xs\"\r\n                                                width={100}\r\n                                            />\r\n                                            <ChartTooltip\r\n                                                content={\r\n                                                    <ChartTooltipContent\r\n                                                        formatter={(value) =>\r\n                                                            formatCurrency(\r\n                                                                Number(value),\r\n                                                            )\r\n                                                        }\r\n                                                    />\r\n                                                }\r\n                                            />\r\n                                            <Bar\r\n                                                dataKey=\"total\"\r\n                                                fill=\"hsl(0, 84%, 60%)\"\r\n                                                radius={[0, 4, 4, 0]}\r\n                                                name=\"Amount\"\r\n                                            />\r\n                                        </BarChart>\r\n                                    </ChartContainer>\r\n                                );\r\n                            })()\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Top Clients Bar Chart */}\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Top Clients by Earnings</CardTitle>\r\n                        <CardDescription>\r\n                            Your highest earning clients\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        {clientBreakdown.length === 0 ? (\r\n                            <div className=\"flex h-[300px] items-center justify-center text-muted-foreground\">\r\n                                No client data available\r\n                            </div>\r\n                        ) : (\r\n                            <ChartContainer\r\n                                config={barChartConfig}\r\n                                className=\"h-[300px] w-full\"\r\n                            >\r\n                                <BarChart\r\n                                    data={clientBreakdown.slice(0, 5)}\r\n                                    layout=\"vertical\"\r\n                                >\r\n                                    <CartesianGrid\r\n                                        strokeDasharray=\"3 3\"\r\n                                        className=\"stroke-muted\"\r\n                                    />\r\n                                    <XAxis\r\n                                        type=\"number\"\r\n                                        tickFormatter={(v) => formatCurrency(v)}\r\n                                        tickLine={false}\r\n                                        axisLine={false}\r\n                                        className=\"text-xs\"\r\n                                    />\r\n                                    <YAxis\r\n                                        type=\"category\"\r\n                                        dataKey=\"clientName\"\r\n                                        tickLine={false}\r\n                                        axisLine={false}\r\n                                        className=\"text-xs\"\r\n                                        width={80}\r\n                                    />\r\n                                    <ChartTooltip\r\n                                        content={\r\n                                            <ChartTooltipContent\r\n                                                formatter={(value) =>\r\n                                                    formatCurrency(\r\n                                                        Number(value),\r\n                                                    )\r\n                                                }\r\n                                            />\r\n                                        }\r\n                                    />\r\n                                    <Bar\r\n                                        dataKey=\"totalEarnings\"\r\n                                        fill=\"hsl(142, 76%, 36%)\"\r\n                                        radius={[0, 4, 4, 0]}\r\n                                        name=\"Earnings\"\r\n                                    />\r\n                                </BarChart>\r\n                            </ChartContainer>\r\n                        )}\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Orders Stats */}\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>Order Revenue Trend</CardTitle>\r\n                    <CardDescription>\r\n                        Monthly order count and revenue\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <ChartContainer\r\n                        config={barChartConfig}\r\n                        className=\"h-[250px] w-full\"\r\n                    >\r\n                        <BarChart data={monthlyTrends}>\r\n                            <CartesianGrid\r\n                                strokeDasharray=\"3 3\"\r\n                                className=\"stroke-muted\"\r\n                            />\r\n                            <XAxis\r\n                                dataKey=\"monthName\"\r\n                                tickLine={false}\r\n                                axisLine={false}\r\n                                className=\"text-xs\"\r\n                            />\r\n                            <YAxis\r\n                                yAxisId=\"left\"\r\n                                tickFormatter={(v) => formatCurrency(v)}\r\n                                tickLine={false}\r\n                                axisLine={false}\r\n                                className=\"text-xs\"\r\n                            />\r\n                            <YAxis\r\n                                yAxisId=\"right\"\r\n                                orientation=\"right\"\r\n                                tickLine={false}\r\n                                axisLine={false}\r\n                                className=\"text-xs\"\r\n                            />\r\n                            <ChartTooltip content={<ChartTooltipContent />} />\r\n                            <Bar\r\n                                yAxisId=\"left\"\r\n                                dataKey=\"orderRevenue\"\r\n                                fill=\"hsl(var(--chart-4))\"\r\n                                radius={[4, 4, 0, 0]}\r\n                                name=\"Revenue (BDT)\"\r\n                            />\r\n                            <Line\r\n                                yAxisId=\"right\"\r\n                                type=\"monotone\"\r\n                                dataKey=\"orderCount\"\r\n                                stroke=\"hsl(var(--chart-5))\"\r\n                                strokeWidth={2}\r\n                                dot={{ fill: 'hsl(var(--chart-5))' }}\r\n                                name=\"Orders\"\r\n                            />\r\n                        </BarChart>\r\n                    </ChartContainer>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\attendance\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\attendance\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":744,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":744,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[42609,42612],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[42609,42612],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\careers\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\careers\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\clients\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\clients\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\clients\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialog' is defined but never used.","line":43,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogAction' is defined but never used.","line":44,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogCancel' is defined but never used.","line":45,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogContent' is defined but never used.","line":46,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogDescription' is defined but never used.","line":47,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogFooter' is defined but never used.","line":48,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogHeader' is defined but never used.","line":49,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogTitle' is defined but never used.","line":50,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader' is defined but never used.","line":53,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":59,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ScrollArea' is defined but never used.","line":73,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    useGetClientsQuery,\r\n    useCreateClientMutation,\r\n    useUpdateClientMutation,\r\n} from '@/redux/features/client/clientApi';\r\nimport type { Client } from '@/types/client.type';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport {\r\n    Loader,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    ChevronsLeft,\r\n    ChevronsRight,\r\n    Plus,\r\n    Trash2,\r\n    Edit2,\r\n    Users,\r\n    Eye,\r\n    UserCheck,\r\n    UserX,\r\n} from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { toast } from 'sonner';\r\nimport {\r\n    ClientForm,\r\n    type ClientFormData,\r\n} from '@/components/client/ClientForm';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\n\r\nconst statusOptions = [\r\n    { value: 'active', label: 'Active', color: 'text-green-600 bg-green-100' },\r\n    {\r\n        value: 'inactive',\r\n        label: 'Inactive',\r\n        color: 'text-gray-600 bg-gray-100',\r\n    },\r\n];\r\n\r\nconst perPageOptions = [10, 25, 50, 100];\r\n\r\ninterface ApiErrorResponse {\r\n    data?: {\r\n        message?: string;\r\n        errors?: Record<string, string[]>;\r\n    };\r\n}\r\n\r\nexport default function ClientsPage() {\r\n    const [page, setPage] = useState(1);\r\n    const [filters, setFilters] = useState({\r\n        search: '',\r\n        status: '',\r\n        limit: 10,\r\n        sortBy: 'createdAt',\r\n        sortOrder: 'desc' as 'asc' | 'desc',\r\n    });\r\n    const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\r\n    const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\r\n\r\n    const [selectedClient, setSelectedClient] = useState<Client | null>(null);\r\n\r\n    // Server errors state for displaying in forms\r\n    const [createServerErrors, setCreateServerErrors] = useState<\r\n        Record<string, string[]> | undefined\r\n    >(undefined);\r\n    const [updateServerErrors, setUpdateServerErrors] = useState<\r\n        Record<string, string[]> | undefined\r\n    >(undefined);\r\n\r\n    // Default form values for edit\r\n    const [editDefaultValues, setEditDefaultValues] = useState<\r\n        ClientFormData | undefined\r\n    >(undefined);\r\n\r\n    // Queries\r\n    const {\r\n        data: clientData,\r\n        isLoading,\r\n        isFetching,\r\n    } = useGetClientsQuery({\r\n        ...filters,\r\n        page,\r\n    });\r\n\r\n    // Mutations\r\n    const [createClient, { isLoading: isCreating }] = useCreateClientMutation();\r\n    const [updateClient, { isLoading: isUpdating }] = useUpdateClientMutation();\r\n\r\n    const clients = clientData?.clients || [];\r\n    const pagination = clientData?.pagination;\r\n    const totalPages = pagination?.pages || 1;\r\n\r\n    // Count active and inactive clients from current data\r\n    const activeClients = clients.filter((c) => c.status === 'active').length;\r\n    const inactiveClients = clients.filter(\r\n        (c) => c.status === 'inactive',\r\n    ).length;\r\n\r\n    // Generate pagination numbers\r\n    const getPaginationNumbers = () => {\r\n        const pages: (number | string)[] = [];\r\n\r\n        if (totalPages <= 7) {\r\n            for (let i = 1; i <= totalPages; i++) pages.push(i);\r\n        } else {\r\n            pages.push(1);\r\n            if (page > 3) pages.push('...');\r\n            const start = Math.max(2, page - 1);\r\n            const end = Math.min(totalPages - 1, page + 1);\r\n            for (let i = start; i <= end; i++) {\r\n                if (!pages.includes(i)) pages.push(i);\r\n            }\r\n            if (page < totalPages - 2) pages.push('...');\r\n            if (!pages.includes(totalPages)) pages.push(totalPages);\r\n        }\r\n        return pages;\r\n    };\r\n\r\n    const handleFilterChange = (key: string, value: string | number) => {\r\n        setFilters((prev) => ({ ...prev, [key]: value }));\r\n        setPage(1);\r\n    };\r\n\r\n    const handleCreateClient = async (data: ClientFormData) => {\r\n        setCreateServerErrors(undefined);\r\n        try {\r\n            await createClient(data).unwrap();\r\n            toast.success('Client created successfully');\r\n            setIsAddDialogOpen(false);\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            // Check if it's a validation error with field errors\r\n            if (err?.data?.errors) {\r\n                setCreateServerErrors(err.data.errors);\r\n            } else {\r\n                toast.error(err?.data?.message || 'Failed to create client');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleUpdateClient = async (data: ClientFormData) => {\r\n        if (!selectedClient) return;\r\n        setUpdateServerErrors(undefined);\r\n        try {\r\n            await updateClient({\r\n                id: selectedClient._id,\r\n                ...data,\r\n            }).unwrap();\r\n            toast.success('Client updated successfully');\r\n            setIsEditDialogOpen(false);\r\n            setSelectedClient(null);\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            // Check if it's a validation error with field errors\r\n            if (err?.data?.errors) {\r\n                setUpdateServerErrors(err.data.errors);\r\n            } else {\r\n                toast.error(err?.data?.message || 'Failed to update client');\r\n            }\r\n        }\r\n    };\r\n\r\n    const openEditDialog = (client: Client) => {\r\n        setSelectedClient(client);\r\n        setUpdateServerErrors(undefined);\r\n        setEditDefaultValues({\r\n            clientId: client.clientId,\r\n            name: client.name,\r\n            email: client.email,\r\n            phone: client.phone || '',\r\n            address: client.address || '',\r\n            officeAddress: client.officeAddress || '',\r\n            description: client.description || '',\r\n            currency: client.currency || '',\r\n            status: client.status,\r\n        });\r\n        setIsEditDialogOpen(true);\r\n    };\r\n\r\n    const handleAddDialogChange = (open: boolean) => {\r\n        setIsAddDialogOpen(open);\r\n        if (!open) {\r\n            setCreateServerErrors(undefined);\r\n        }\r\n    };\r\n\r\n    const handleEditDialogChange = (open: boolean) => {\r\n        setIsEditDialogOpen(open);\r\n        if (!open) {\r\n            setUpdateServerErrors(undefined);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                {/* Total Clients */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-slate-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-slate-500/5 hover:border-slate-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-slate-500/10 blur-2xl transition-all duration-300 group-hover:bg-slate-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-500/10 text-slate-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-slate-500/20\">\r\n                                <Users className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-slate-600 dark:text-slate-300\">\r\n                            {pagination?.total || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Total Clients\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Active Clients */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-green-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/5 hover:border-green-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-green-500/10 blur-2xl transition-all duration-300 group-hover:bg-green-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-green-500/10 text-green-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-green-500/20\">\r\n                                <UserCheck className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-green-600 dark:text-green-400\">\r\n                            {activeClients}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Active (this page)\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Inactive Clients */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-gray-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-gray-500/5 hover:border-gray-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-gray-500/10 blur-2xl transition-all duration-300 group-hover:bg-gray-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-gray-500/10 text-gray-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-gray-500/20\">\r\n                                <UserX className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-gray-600 dark:text-gray-400\">\r\n                            {inactiveClients}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Inactive (this page)\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Card */}\r\n            <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between\">\r\n                    <div>\r\n                        <CardTitle className=\"text-2xl\">\r\n                            Client Management\r\n                        </CardTitle>\r\n                        <CardDescription>\r\n                            Manage your clients and their information\r\n                        </CardDescription>\r\n                    </div>\r\n                    <Dialog\r\n                        open={isAddDialogOpen}\r\n                        onOpenChange={handleAddDialogChange}\r\n                    >\r\n                        <DialogTrigger asChild>\r\n                            <Button>\r\n                                <Plus />\r\n                                Add Client\r\n                            </Button>\r\n                        </DialogTrigger>\r\n                        <DialogContent className=\"max-w-md max-h-[90vh] overflow-y-auto\">\r\n                            <DialogHeader>\r\n                                <DialogTitle>Add New Client</DialogTitle>\r\n                                <DialogDescription>\r\n                                    Fill in the details to add a new client\r\n                                </DialogDescription>\r\n                            </DialogHeader>\r\n                            <ClientForm\r\n                                onSubmit={handleCreateClient}\r\n                                isSubmitting={isCreating}\r\n                                submitLabel=\"Create\"\r\n                                onCancel={() => setIsAddDialogOpen(false)}\r\n                                serverErrors={createServerErrors}\r\n                            />\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    {/* Filters */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 w-full\">\r\n                        <Input\r\n                            placeholder=\"Search by name, email, or ID...\"\r\n                            value={filters.search}\r\n                            onChange={(e) =>\r\n                                handleFilterChange('search', e.target.value)\r\n                            }\r\n                            className=\"w-full\"\r\n                        />\r\n                        <Select\r\n                            value={filters.status}\r\n                            onValueChange={(value) =>\r\n                                handleFilterChange('status', value)\r\n                            }\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"All statuses\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {statusOptions.map((opt) => (\r\n                                    <SelectItem\r\n                                        key={opt.value}\r\n                                        value={opt.value}\r\n                                    >\r\n                                        {opt.label}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        <Select\r\n                            value={filters.limit.toString()}\r\n                            onValueChange={(value) =>\r\n                                handleFilterChange('limit', parseInt(value))\r\n                            }\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {perPageOptions.map((opt) => (\r\n                                    <SelectItem\r\n                                        key={opt}\r\n                                        value={opt.toString()}\r\n                                    >\r\n                                        {opt}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => {\r\n                                setFilters({\r\n                                    search: '',\r\n                                    status: '',\r\n                                    limit: 10,\r\n                                    sortBy: 'createdAt',\r\n                                    sortOrder: 'desc',\r\n                                });\r\n                                setPage(1);\r\n                            }}\r\n                        >\r\n                            Clear Filters\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {/* Table */}\r\n                    <div className=\"border\">\r\n                        {isLoading ? (\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Client ID\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Name\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Email\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Phone\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Status\r\n                                        </TableHead>\r\n                                        <TableHead className=\"text-center\">\r\n                                            Actions\r\n                                        </TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {[...Array(5)].map((_, i) => (\r\n                                        <TableRow key={i}>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-20\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-32\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-40\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-24\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-6 w-16 rounded-full\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-right\">\r\n                                                <div className=\"flex justify-end gap-2\">\r\n                                                    <Skeleton className=\"h-8 w-8\" />\r\n                                                    <Skeleton className=\"h-8 w-8\" />\r\n                                                </div>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        ) : (\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Client ID\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Name\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Email\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Phone\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Status\r\n                                        </TableHead>\r\n                                        <TableHead className=\"text-center\">\r\n                                            Actions\r\n                                        </TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {clients.length === 0 ? (\r\n                                        <TableRow>\r\n                                            <TableCell\r\n                                                colSpan={6}\r\n                                                className=\"text-center py-8 text-muted-foreground\"\r\n                                            >\r\n                                                No clients found\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ) : (\r\n                                        clients.map((client: Client) => {\r\n                                            const statusOpt =\r\n                                                statusOptions.find(\r\n                                                    (s) =>\r\n                                                        s.value ===\r\n                                                        client.status,\r\n                                                );\r\n                                            return (\r\n                                                <TableRow key={client._id}>\r\n                                                    <TableCell className=\"border-r font-mono\">\r\n                                                        {client.clientId}\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"font-medium border-r\">\r\n                                                        {client.name}\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"border-r\">\r\n                                                        {client.email}\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"border-r\">\r\n                                                        {client.phone || '-'}\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"border-r text-center\">\r\n                                                        <span\r\n                                                            className={`px-2 py-1 rounded-full text-xs font-medium ${statusOpt?.color}`}\r\n                                                        >\r\n                                                            {statusOpt?.label}\r\n                                                        </span>\r\n                                                    </TableCell>\r\n                                                    <TableCell className=\"text-right\">\r\n                                                        <div className=\"flex items-center justify-center gap-2\">\r\n                                                            <Button\r\n                                                                variant=\"ghost\"\r\n                                                                size=\"icon\"\r\n                                                                asChild\r\n                                                            >\r\n                                                                <Link\r\n                                                                    href={`/clients/${client._id}`}\r\n                                                                >\r\n                                                                    <Eye className=\"h-4 w-4\" />\r\n                                                                </Link>\r\n                                                            </Button>\r\n                                                            <Button\r\n                                                                variant=\"ghost\"\r\n                                                                size=\"icon\"\r\n                                                                onClick={() =>\r\n                                                                    openEditDialog(\r\n                                                                        client,\r\n                                                                    )\r\n                                                                }\r\n                                                            >\r\n                                                                <Edit2 />\r\n                                                            </Button>\r\n                                                        </div>\r\n                                                    </TableCell>\r\n                                                </TableRow>\r\n                                            );\r\n                                        })\r\n                                    )}\r\n                                </TableBody>\r\n                            </Table>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Pagination */}\r\n                    {pagination && totalPages > 1 && (\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"text-sm text-muted-foreground\">\r\n                                Showing {(page - 1) * filters.limit + 1} to{' '}\r\n                                {Math.min(\r\n                                    page * filters.limit,\r\n                                    pagination.total,\r\n                                )}{' '}\r\n                                of {pagination.total} clients\r\n                            </div>\r\n                            <div className=\"flex items-center gap-1\">\r\n                                {/* First Page */}\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() => setPage(1)}\r\n                                    disabled={page === 1 || isFetching}\r\n                                >\r\n                                    <ChevronsLeft className=\"h-4 w-4\" />\r\n                                </Button>\r\n\r\n                                {/* Previous */}\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() =>\r\n                                        setPage((p) => Math.max(1, p - 1))\r\n                                    }\r\n                                    disabled={page === 1 || isFetching}\r\n                                >\r\n                                    <ChevronLeft className=\"h-4 w-4\" />\r\n                                </Button>\r\n\r\n                                {/* Page Numbers */}\r\n                                {getPaginationNumbers().map((pageNum, idx) =>\r\n                                    pageNum === '...' ? (\r\n                                        <span\r\n                                            key={`ellipsis-${idx}`}\r\n                                            className=\"px-2 text-muted-foreground\"\r\n                                        >\r\n                                            ...\r\n                                        </span>\r\n                                    ) : (\r\n                                        <Button\r\n                                            key={pageNum}\r\n                                            variant={\r\n                                                page === pageNum\r\n                                                    ? 'default'\r\n                                                    : 'outline'\r\n                                            }\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8\"\r\n                                            onClick={() =>\r\n                                                setPage(pageNum as number)\r\n                                            }\r\n                                            disabled={isFetching}\r\n                                        >\r\n                                            {pageNum}\r\n                                        </Button>\r\n                                    ),\r\n                                )}\r\n\r\n                                {/* Next */}\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() =>\r\n                                        setPage((p) =>\r\n                                            Math.min(totalPages, p + 1),\r\n                                        )\r\n                                    }\r\n                                    disabled={page === totalPages || isFetching}\r\n                                >\r\n                                    <ChevronRight className=\"h-4 w-4\" />\r\n                                </Button>\r\n\r\n                                {/* Last Page */}\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() => setPage(totalPages)}\r\n                                    disabled={page === totalPages || isFetching}\r\n                                >\r\n                                    <ChevronsRight className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Edit Dialog */}\r\n            <Dialog\r\n                open={isEditDialogOpen}\r\n                onOpenChange={handleEditDialogChange}\r\n            >\r\n                <DialogContent className=\"max-w-md \">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Edit Client</DialogTitle>\r\n                        <DialogDescription>\r\n                            Update the client details\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    {editDefaultValues && (\r\n                        <ClientForm\r\n                            key={selectedClient?._id}\r\n                            defaultValues={editDefaultValues}\r\n                            onSubmit={handleUpdateClient}\r\n                            isSubmitting={isUpdating}\r\n                            submitLabel=\"Update\"\r\n                            onCancel={() => setIsEditDialogOpen(false)}\r\n                            serverErrors={updateServerErrors}\r\n                            isEditMode={true}\r\n                        />\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\debit\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\debit\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\earnings\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\earnings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\expense\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\expense\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\invitations\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\invitations\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport InvitationList from '@/components/admin/invitation-list';\r\nimport MetadataSettings from '@/components/admin/metadata-settings';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Mail, Settings, Users } from 'lucide-react';\r\n\r\nexport default function InvitationsPage() {\r\n    return (\r\n        <div className=\"container mx-auto py-6 space-y-6\">\r\n            <div className=\"flex flex-col gap-1\">\r\n                <h1 className=\"text-3xl font-bold tracking-tight\">Employee Invitations</h1>\r\n                <p className=\"text-muted-foreground\">\r\n                    Invite new employees and manage pending invitations\r\n                </p>\r\n            </div>\r\n\r\n            <Tabs defaultValue=\"invitations\" className=\"w-full\">\r\n                <TabsList className=\"grid w-full max-w-md grid-cols-2\">\r\n                    <TabsTrigger value=\"invitations\" className=\"gap-2\">\r\n                        <Users className=\"h-4 w-4\" />\r\n                        Invitations\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"settings\" className=\"gap-2\">\r\n                        <Settings className=\"h-4 w-4\" />\r\n                        Settings\r\n                    </TabsTrigger>\r\n                </TabsList>\r\n\r\n                <TabsContent value=\"invitations\" className=\"mt-6\">\r\n                    <InvitationList />\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"settings\" className=\"mt-6\">\r\n                    <MetadataSettings />\r\n                </TabsContent>\r\n            </Tabs>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\leave\\apply\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'workingDates' is assigned a value but never used.","line":77,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":77,"endColumn":24},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\leave\\apply\\page.tsx:95:23\n  93 |     });\n  94 |\n> 95 |     const leaveType = watch('leaveType');\n     |                       ^^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  96 |\n  97 |     // Fetch staff list for admin\n  98 |     const { data: staffsData } = useGetStaffsQuery(","line":95,"column":23,"nodeType":null,"endLine":95,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":214,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6892,6895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6892,6895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":236,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":236,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7828,7831],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7828,7831],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":252,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":252,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8419,8422],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8419,8422],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":261,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":261,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8729,8732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8729,8732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":464,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":464,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20625,20628],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20625,20628],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { format } from 'date-fns';\r\nimport {\r\n    Calendar as CalendarIcon,\r\n    Loader,\r\n    FileCheck,\r\n    Clock,\r\n    CheckCircle2,\r\n    XCircle,\r\n    AlertCircle,\r\n    Upload,\r\n    X,\r\n    CalendarDays,\r\n    Briefcase,\r\n    ThermometerSun,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSession } from '@/lib/auth-client';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport { cn } from '@/lib/utils';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport {\r\n    useApplyForLeaveMutation,\r\n    useGetLeaveBalanceQuery,\r\n    useGetMyLeaveApplicationsQuery,\r\n    useLazyCalculateWorkingDaysQuery,\r\n    useCancelLeaveApplicationMutation,\r\n    useUploadMedicalDocumentMutation,\r\n} from '@/redux/features/leave/leaveApi';\r\nimport { useGetStaffsQuery } from '@/redux/features/staff/staffApi';\r\nimport type { LeaveType, ILeaveApplication } from '@/types/leave.type';\r\nimport { LEAVE_TYPE_LABELS, LEAVE_STATUS_LABELS } from '@/types/leave.type';\r\n\r\ninterface FormData {\r\n    leaveType: LeaveType;\r\n    reason: string;\r\n}\r\n\r\nconst ADMIN_ROLES = ['admin', 'super_admin', 'hr_admin'];\r\n\r\nexport default function LeaveApplyPage() {\r\n    const { data: session } = useSession();\r\n    const userRole = session?.user?.role as string | undefined;\r\n    const isAdmin = userRole && ADMIN_ROLES.includes(userRole);\r\n\r\n    const [startDate, setStartDate] = useState<Date | undefined>();\r\n    const [endDate, setEndDate] = useState<Date | undefined>();\r\n    const [workingDaysCount, setWorkingDaysCount] = useState(0);\r\n    const [workingDates, setWorkingDates] = useState<string[]>([]);\r\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n    const [selectedStaffId, setSelectedStaffId] = useState<string>('');\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        reset,\r\n        watch,\r\n        setValue,\r\n        formState: { errors },\r\n    } = useForm<FormData>({\r\n        defaultValues: {\r\n            leaveType: 'annual',\r\n            reason: '',\r\n        },\r\n    });\r\n\r\n    const leaveType = watch('leaveType');\r\n\r\n    // Fetch staff list for admin\r\n    const { data: staffsData } = useGetStaffsQuery(\r\n        { limit: 200 },\r\n        { skip: !isAdmin },\r\n    );\r\n    const staffs = staffsData?.data || [];\r\n\r\n    const { data: balanceData, isLoading: isLoadingBalance } =\r\n        useGetLeaveBalanceQuery();\r\n    const { data: myApplicationsData, isLoading: isLoadingApplications } =\r\n        useGetMyLeaveApplicationsQuery({ limit: 10 });\r\n    const [calculateWorkingDays] = useLazyCalculateWorkingDaysQuery();\r\n    const [applyForLeave, { isLoading: isApplying }] =\r\n        useApplyForLeaveMutation();\r\n    const [cancelApplication, { isLoading: isCancelling }] =\r\n        useCancelLeaveApplicationMutation();\r\n    const [uploadDocument, { isLoading: isUploading }] =\r\n        useUploadMedicalDocumentMutation();\r\n\r\n    const balance = balanceData?.data;\r\n    const myApplications = myApplicationsData?.data || [];\r\n\r\n    // Calculate working days when dates change\r\n    useEffect(() => {\r\n        const fetchWorkingDays = async () => {\r\n            if (startDate && endDate) {\r\n                try {\r\n                    const result = await calculateWorkingDays({\r\n                        startDate: format(startDate, 'yyyy-MM-dd'),\r\n                        endDate: format(endDate, 'yyyy-MM-dd'),\r\n                    }).unwrap();\r\n                    setWorkingDaysCount(result.data.count);\r\n                    setWorkingDates(result.data.dates);\r\n                } catch (error) {\r\n                    console.error('Error calculating working days:', error);\r\n                }\r\n            } else {\r\n                setWorkingDaysCount(0);\r\n                setWorkingDates([]);\r\n            }\r\n        };\r\n\r\n        fetchWorkingDays();\r\n    }, [startDate, endDate, calculateWorkingDays]);\r\n\r\n    const handleStartDateSelect = (date: Date | undefined) => {\r\n        setStartDate(date);\r\n        // If end date is before start date, reset it\r\n        if (date && endDate && endDate < date) {\r\n            setEndDate(undefined);\r\n        }\r\n    };\r\n\r\n    const handleEndDateSelect = (date: Date | undefined) => {\r\n        setEndDate(date);\r\n    };\r\n\r\n    const onDrop = useCallback((acceptedFiles: File[]) => {\r\n        if (acceptedFiles && acceptedFiles.length > 0) {\r\n            setSelectedFile(acceptedFiles[0]);\r\n        }\r\n    }, []);\r\n\r\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n        onDrop,\r\n        accept: {\r\n            'application/pdf': ['.pdf'],\r\n            'image/jpeg': ['.jpg', '.jpeg'],\r\n            'image/png': ['.png'],\r\n        },\r\n        maxFiles: 1,\r\n        maxSize: 5 * 1024 * 1024, // 5MB\r\n    });\r\n\r\n    const onSubmit = async (data: FormData) => {\r\n        if (!startDate || !endDate) {\r\n            toast.error('Please select start and end dates');\r\n            return;\r\n        }\r\n\r\n        if (workingDaysCount === 0) {\r\n            toast.error('No working days in the selected range');\r\n            return;\r\n        }\r\n\r\n        // Admin must select a staff member\r\n        if (isAdmin && !selectedStaffId) {\r\n            toast.error('Please select a staff member');\r\n            return;\r\n        }\r\n\r\n        // Check balance (only for non-admin applying for themselves)\r\n        if (!isAdmin) {\r\n            if (\r\n                data.leaveType === 'annual' &&\r\n                balance &&\r\n                workingDaysCount > balance.annualLeaveRemaining\r\n            ) {\r\n                toast.error(\r\n                    `Insufficient annual leave. Remaining: ${balance.annualLeaveRemaining}`,\r\n                );\r\n                return;\r\n            }\r\n\r\n            if (\r\n                data.leaveType === 'sick' &&\r\n                balance &&\r\n                workingDaysCount > balance.sickLeaveRemaining\r\n            ) {\r\n                toast.error(\r\n                    `Insufficient sick leave. Remaining: ${balance.sickLeaveRemaining}`,\r\n                );\r\n                return;\r\n            }\r\n        }\r\n\r\n        try {\r\n            const payload: any = {\r\n                leaveType: data.leaveType,\r\n                startDate: format(startDate, 'yyyy-MM-dd'),\r\n                endDate: format(endDate, 'yyyy-MM-dd'),\r\n                reason: data.reason,\r\n            };\r\n\r\n            // Add staffId if admin is applying on behalf of someone\r\n            if (isAdmin && selectedStaffId) {\r\n                payload.staffId = selectedStaffId;\r\n            }\r\n\r\n            const result = await applyForLeave(payload).unwrap();\r\n\r\n            // If sick leave and file selected, upload document\r\n            if (data.leaveType === 'sick' && selectedFile && result.data._id) {\r\n                try {\r\n                    await uploadDocument({\r\n                        id: result.data._id,\r\n                        file: selectedFile,\r\n                    }).unwrap();\r\n                    toast.success('Medical document uploaded successfully');\r\n                } catch (uploadError: any) {\r\n                    console.error('Document upload failed:', uploadError);\r\n                    toast.error(\r\n                        'Application submitted but document upload failed. Please contact HR.',\r\n                    );\r\n                }\r\n            }\r\n\r\n            toast.success(\r\n                'Leave application submitted! Admin will review it shortly.',\r\n            );\r\n            reset();\r\n            setStartDate(undefined);\r\n            setEndDate(undefined);\r\n            setSelectedFile(null);\r\n            setSelectedStaffId('');\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Failed to submit application');\r\n        }\r\n    };\r\n\r\n    const handleCancel = async (id: string) => {\r\n        try {\r\n            await cancelApplication(id).unwrap();\r\n            toast.success('Leave application cancelled');\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Failed to cancel application');\r\n        }\r\n    };\r\n\r\n    const getStatusIcon = (status: string) => {\r\n        switch (status) {\r\n            case 'approved':\r\n                return <CheckCircle2 className=\"h-4 w-4 text-green-500\" />;\r\n            case 'partially_approved':\r\n                return <CheckCircle2 className=\"h-4 w-4 text-yellow-500\" />;\r\n            case 'pending':\r\n                return <Clock className=\"h-4 w-4 text-blue-500\" />;\r\n            case 'rejected':\r\n            case 'expired':\r\n            case 'revoked':\r\n                return <XCircle className=\"h-4 w-4 text-red-500\" />;\r\n            default:\r\n                return <AlertCircle className=\"h-4 w-4\" />;\r\n        }\r\n    };\r\n\r\n    const getStatusBadgeVariant = (status: string) => {\r\n        switch (status) {\r\n            case 'approved':\r\n                return 'default';\r\n            case 'partially_approved':\r\n                return 'secondary';\r\n            case 'pending':\r\n                return 'outline';\r\n            case 'rejected':\r\n            case 'expired':\r\n            case 'revoked':\r\n                return 'destructive';\r\n            default:\r\n                return 'outline';\r\n        }\r\n    };\r\n\r\n    // Calculate progress percentages\r\n    const annualProgress = balance\r\n        ? (balance.annualLeaveUsed / balance.annualLeaveTotal) * 100\r\n        : 0;\r\n    const sickProgress = balance\r\n        ? (balance.sickLeaveUsed / balance.sickLeaveTotal) * 100\r\n        : 0;\r\n\r\n    return (\r\n        <div className=\"container mx-auto p-6 max-w-7xl\">\r\n            {/* Header */}\r\n            <div className=\"mb-8\">\r\n                <h1 className=\"text-3xl font-bold tracking-tight\">\r\n                    Leave Application\r\n                </h1>\r\n                <p className=\"text-muted-foreground mt-1\">\r\n                    {isAdmin\r\n                        ? 'Apply for leave on behalf of staff members'\r\n                        : 'Request time off and track your applications'}\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-6\">\r\n                {/* Left Column - Balance & Form */}\r\n                <div className=\"xl:col-span-2 space-y-6\">\r\n                    {/* Leave Balance Cards - Only show for non-admin */}\r\n                    {!isAdmin && (\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                            {/* Annual Leave Card */}\r\n                            <Card className=\"relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 w-32 h-32 -mr-8 -mt-8 bg-gradient-to-br from-blue-500/20 to-transparent rounded-full\" />\r\n                                <CardContent className=\"p-6\">\r\n                                    <div className=\"flex items-start justify-between\">\r\n                                        <div className=\"space-y-3\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\r\n                                                    <Briefcase className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\r\n                                                </div>\r\n                                                <span className=\"font-medium\">\r\n                                                    Annual Leave\r\n                                                </span>\r\n                                            </div>\r\n                                            {isLoadingBalance ? (\r\n                                                <Skeleton className=\"h-10 w-24\" />\r\n                                            ) : (\r\n                                                <>\r\n                                                    <div className=\"flex items-baseline gap-1\">\r\n                                                        <span className=\"text-4xl font-bold text-blue-600 dark:text-blue-400\">\r\n                                                            {balance?.annualLeaveRemaining ||\r\n                                                                0}\r\n                                                        </span>\r\n                                                        <span className=\"text-muted-foreground text-sm\">\r\n                                                            /{' '}\r\n                                                            {balance?.annualLeaveTotal ||\r\n                                                                12}{' '}\r\n                                                            days left\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <div className=\"space-y-1\">\r\n                                                        <Progress\r\n                                                            value={\r\n                                                                annualProgress\r\n                                                            }\r\n                                                            className=\"h-2\"\r\n                                                        />\r\n                                                        <p className=\"text-xs text-muted-foreground\">\r\n                                                            {balance?.annualLeaveUsed ||\r\n                                                                0}{' '}\r\n                                                            days used this year\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n\r\n                            {/* Sick Leave Card */}\r\n                            <Card className=\"relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 w-32 h-32 -mr-8 -mt-8 bg-gradient-to-br from-orange-500/20 to-transparent rounded-full\" />\r\n                                <CardContent className=\"p-6\">\r\n                                    <div className=\"flex items-start justify-between\">\r\n                                        <div className=\"space-y-3\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <div className=\"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg\">\r\n                                                    <ThermometerSun className=\"h-5 w-5 text-orange-600 dark:text-orange-400\" />\r\n                                                </div>\r\n                                                <span className=\"font-medium\">\r\n                                                    Sick Leave\r\n                                                </span>\r\n                                            </div>\r\n                                            {isLoadingBalance ? (\r\n                                                <Skeleton className=\"h-10 w-24\" />\r\n                                            ) : (\r\n                                                <>\r\n                                                    <div className=\"flex items-baseline gap-1\">\r\n                                                        <span className=\"text-4xl font-bold text-orange-600 dark:text-orange-400\">\r\n                                                            {balance?.sickLeaveRemaining ||\r\n                                                                0}\r\n                                                        </span>\r\n                                                        <span className=\"text-muted-foreground text-sm\">\r\n                                                            /{' '}\r\n                                                            {balance?.sickLeaveTotal ||\r\n                                                                14}{' '}\r\n                                                            days left\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <div className=\"space-y-1\">\r\n                                                        <Progress\r\n                                                            value={sickProgress}\r\n                                                            className=\"h-2 [&>div]:bg-orange-500\"\r\n                                                        />\r\n                                                        <p className=\"text-xs text-muted-foreground\">\r\n                                                            {balance?.sickLeaveUsed ||\r\n                                                                0}{' '}\r\n                                                            days used this year\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Application Form */}\r\n                    <Card>\r\n                        <CardHeader className=\"pb-4\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n                                    <FileCheck className=\"h-5 w-5 text-primary\" />\r\n                                </div>\r\n                                <div>\r\n                                    <CardTitle>Request Leave</CardTitle>\r\n                                    <CardDescription>\r\n                                        {isAdmin\r\n                                            ? 'Select a staff member and submit leave application on their behalf'\r\n                                            : 'Fill in the details below to submit your leave request'}\r\n                                    </CardDescription>\r\n                                </div>\r\n                            </div>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <form\r\n                                onSubmit={handleSubmit(onSubmit)}\r\n                                className=\"space-y-6\"\r\n                            >\r\n                                {/* Staff Selection - Only for Admin */}\r\n                                {isAdmin && (\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label className=\"text-base\">\r\n                                            Staff Member\r\n                                        </Label>\r\n                                        <Select\r\n                                            value={selectedStaffId}\r\n                                            onValueChange={setSelectedStaffId}\r\n                                        >\r\n                                            <SelectTrigger className=\"h-12\">\r\n                                                <SelectValue placeholder=\"Select a staff member\" />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {staffs.map((staff: any) => (\r\n                                                    <SelectItem\r\n                                                        key={staff._id}\r\n                                                        value={staff._id}\r\n                                                    >\r\n                                                        {staff.user?.name} (\r\n                                                        {staff.staffId})\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Leave Type Selection as Buttons */}\r\n                                <div className=\"space-y-3\">\r\n                                    <Label className=\"text-base\">\r\n                                        Leave Type\r\n                                    </Label>\r\n                                    <div className=\"grid grid-cols-2 gap-3\">\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() =>\r\n                                                setValue('leaveType', 'annual')\r\n                                            }\r\n                                            className={cn(\r\n                                                'p-4 rounded-xl border-2 transition-all duration-200 text-left',\r\n                                                leaveType === 'annual'\r\n                                                    ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\r\n                                                    : 'border-border hover:border-blue-300 hover:bg-muted/50',\r\n                                            )}\r\n                                        >\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div\r\n                                                    className={cn(\r\n                                                        'p-2 rounded-lg',\r\n                                                        leaveType === 'annual'\r\n                                                            ? 'bg-blue-100 dark:bg-blue-800'\r\n                                                            : 'bg-muted',\r\n                                                    )}\r\n                                                >\r\n                                                    <Briefcase\r\n                                                        className={cn(\r\n                                                            'h-5 w-5',\r\n                                                            leaveType ===\r\n                                                                'annual'\r\n                                                                ? 'text-blue-600'\r\n                                                                : 'text-muted-foreground',\r\n                                                        )}\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"font-semibold\">\r\n                                                        Annual Leave\r\n                                                    </p>\r\n                                                    <p className=\"text-sm text-muted-foreground\">\r\n                                                        Vacation, personal days\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </button>\r\n\r\n                                        <button\r\n                                            type=\"button\"\r\n                                            onClick={() =>\r\n                                                setValue('leaveType', 'sick')\r\n                                            }\r\n                                            className={cn(\r\n                                                'p-4 rounded-xl border-2 transition-all duration-200 text-left',\r\n                                                leaveType === 'sick'\r\n                                                    ? 'border-orange-500 bg-orange-50 dark:bg-orange-900/20'\r\n                                                    : 'border-border hover:border-orange-300 hover:bg-muted/50',\r\n                                            )}\r\n                                        >\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div\r\n                                                    className={cn(\r\n                                                        'p-2 rounded-lg',\r\n                                                        leaveType === 'sick'\r\n                                                            ? 'bg-orange-100 dark:bg-orange-800'\r\n                                                            : 'bg-muted',\r\n                                                    )}\r\n                                                >\r\n                                                    <ThermometerSun\r\n                                                        className={cn(\r\n                                                            'h-5 w-5',\r\n                                                            leaveType === 'sick'\r\n                                                                ? 'text-orange-600'\r\n                                                                : 'text-muted-foreground',\r\n                                                        )}\r\n                                                    />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"font-semibold\">\r\n                                                        Sick Leave\r\n                                                    </p>\r\n                                                    <p className=\"text-sm text-muted-foreground\">\r\n                                                        Medical reasons\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Date Range */}\r\n                                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label className=\"text-base\">\r\n                                            From\r\n                                        </Label>\r\n                                        <Popover>\r\n                                            <PopoverTrigger asChild>\r\n                                                <Button\r\n                                                    variant=\"outline\"\r\n                                                    className={cn(\r\n                                                        'w-full h-12 justify-start text-left font-normal',\r\n                                                        !startDate &&\r\n                                                            'text-muted-foreground',\r\n                                                    )}\r\n                                                >\r\n                                                    <CalendarIcon className=\" h-4 w-4\" />\r\n                                                    {startDate\r\n                                                        ? format(\r\n                                                              startDate,\r\n                                                              'PPP',\r\n                                                          )\r\n                                                        : 'Select start date'}\r\n                                                </Button>\r\n                                            </PopoverTrigger>\r\n                                            <PopoverContent\r\n                                                className=\"w-auto p-0\"\r\n                                                align=\"start\"\r\n                                            >\r\n                                                <Calendar\r\n                                                    mode=\"single\"\r\n                                                    selected={startDate}\r\n                                                    onSelect={\r\n                                                        handleStartDateSelect\r\n                                                    }\r\n                                                    initialFocus\r\n                                                />\r\n                                            </PopoverContent>\r\n                                        </Popover>\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label className=\"text-base\">To</Label>\r\n                                        <Popover>\r\n                                            <PopoverTrigger asChild>\r\n                                                <Button\r\n                                                    variant=\"outline\"\r\n                                                    className={cn(\r\n                                                        'w-full h-12 justify-start text-left font-normal',\r\n                                                        !endDate &&\r\n                                                            'text-muted-foreground',\r\n                                                    )}\r\n                                                >\r\n                                                    <CalendarIcon className=\" h-4 w-4\" />\r\n                                                    {endDate\r\n                                                        ? format(endDate, 'PPP')\r\n                                                        : 'Select end date'}\r\n                                                </Button>\r\n                                            </PopoverTrigger>\r\n                                            <PopoverContent\r\n                                                className=\"w-auto p-0\"\r\n                                                align=\"start\"\r\n                                            >\r\n                                                <Calendar\r\n                                                    mode=\"single\"\r\n                                                    selected={endDate}\r\n                                                    onSelect={\r\n                                                        handleEndDateSelect\r\n                                                    }\r\n                                                    disabled={(date) =>\r\n                                                        !!startDate &&\r\n                                                        date < startDate\r\n                                                    }\r\n                                                    initialFocus\r\n                                                />\r\n                                            </PopoverContent>\r\n                                        </Popover>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Working Days Info */}\r\n                                {workingDaysCount > 0 && (\r\n                                    <div className=\"flex items-center gap-4 p-4 bg-gradient-to-r from-primary/5 to-primary/10 rounded-xl border border-primary/20\">\r\n                                        <div className=\"p-3 bg-primary/10 rounded-full\">\r\n                                            <CalendarDays className=\"h-6 w-6 text-primary\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-lg\">\r\n                                                {workingDaysCount} Working{' '}\r\n                                                {workingDaysCount === 1\r\n                                                    ? 'Day'\r\n                                                    : 'Days'}\r\n                                            </p>\r\n                                            <p className=\"text-sm text-muted-foreground\">\r\n                                                Weekends based on your shift are\r\n                                                excluded\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Document Upload for Sick Leave */}\r\n                                {leaveType === 'sick' && (\r\n                                    <div className=\"space-y-3\">\r\n                                        <Label className=\"text-base\">\r\n                                            Medical Document (Optional)\r\n                                        </Label>\r\n                                        <div\r\n                                            {...getRootProps()}\r\n                                            className={cn(\r\n                                                'border-2 border-dashed rounded-xl p-8 flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-200',\r\n                                                isDragActive\r\n                                                    ? 'border-primary bg-primary/5 scale-[1.02]'\r\n                                                    : 'border-muted-foreground/25 hover:border-primary/50 hover:bg-muted/30',\r\n                                            )}\r\n                                        >\r\n                                            <input {...getInputProps()} />\r\n                                            {selectedFile ? (\r\n                                                <div className=\"flex items-center gap-3\">\r\n                                                    <div className=\"p-3 bg-green-100 dark:bg-green-900/30 rounded-full\">\r\n                                                        <FileCheck className=\"h-6 w-6 text-green-600\" />\r\n                                                    </div>\r\n                                                    <div className=\"text-left\">\r\n                                                        <p className=\"font-medium\">\r\n                                                            {selectedFile.name}\r\n                                                        </p>\r\n                                                        <p className=\"text-sm text-muted-foreground\">\r\n                                                            {(\r\n                                                                selectedFile.size /\r\n                                                                1024\r\n                                                            ).toFixed(1)}{' '}\r\n                                                            KB\r\n                                                        </p>\r\n                                                    </div>\r\n                                                    <Button\r\n                                                        type=\"button\"\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"ml-2 h-8 w-8 text-destructive hover:bg-destructive/10\"\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            setSelectedFile(\r\n                                                                null,\r\n                                                            );\r\n                                                        }}\r\n                                                    >\r\n                                                        <X className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <>\r\n                                                    <div className=\"p-4 bg-muted rounded-full mb-3\">\r\n                                                        <Upload className=\"h-8 w-8 text-muted-foreground\" />\r\n                                                    </div>\r\n                                                    <p className=\"font-medium\">\r\n                                                        {isDragActive\r\n                                                            ? 'Drop the file here'\r\n                                                            : 'Drop file here or click to upload'}\r\n                                                    </p>\r\n                                                    <p className=\"text-sm text-muted-foreground mt-1\">\r\n                                                        PDF, JPG, PNG (Max 5MB)\r\n                                                    </p>\r\n                                                </>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Reason */}\r\n                                <div className=\"space-y-2\">\r\n                                    <Label className=\"text-base\">Reason</Label>\r\n                                    <Textarea\r\n                                        {...register('reason', {\r\n                                            required:\r\n                                                'Please provide a reason for your leave',\r\n                                        })}\r\n                                        placeholder=\"Please describe the reason for your leave request...\"\r\n                                        className=\"min-h-[120px] resize-none\"\r\n                                    />\r\n                                    {errors.reason && (\r\n                                        <p className=\"text-sm text-destructive flex items-center gap-1\">\r\n                                            <AlertCircle className=\"h-3.5 w-3.5\" />\r\n                                            {errors.reason.message}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    disabled={\r\n                                        isApplying ||\r\n                                        isUploading ||\r\n                                        !startDate ||\r\n                                        !endDate\r\n                                    }\r\n                                    className=\"w-full h-12 text-base font-semibold\"\r\n                                    size=\"lg\"\r\n                                >\r\n                                    {isApplying || isUploading ? (\r\n                                        <>\r\n                                            <Loader className=\" h-5 w-5 animate-spin\" />\r\n                                            {isApplying\r\n                                                ? 'Submitting...'\r\n                                                : 'Uploading...'}\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            <FileCheck className=\" h-5 w-5\" />\r\n                                            Submit Leave Request\r\n                                        </>\r\n                                    )}\r\n                                </Button>\r\n                            </form>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Right Column - My Applications */}\r\n                {!isAdmin && (\r\n                    <div className=\"xl:col-span-1\">\r\n                        <Card className=\"sticky top-6\">\r\n                            <CardHeader className=\"pb-4\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"p-2 bg-primary/10 rounded-lg\">\r\n                                        <Clock className=\"h-5 w-5 text-primary\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <CardTitle className=\"text-lg\">\r\n                                            My Applications\r\n                                        </CardTitle>\r\n                                        <CardDescription>\r\n                                            Recent leave requests\r\n                                        </CardDescription>\r\n                                    </div>\r\n                                </div>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                {isLoadingApplications ? (\r\n                                    <div className=\"space-y-3\">\r\n                                        <Skeleton className=\"h-24 w-full rounded-xl\" />\r\n                                        <Skeleton className=\"h-24 w-full rounded-xl\" />\r\n                                        <Skeleton className=\"h-24 w-full rounded-xl\" />\r\n                                    </div>\r\n                                ) : myApplications.length === 0 ? (\r\n                                    <div className=\"text-center py-12\">\r\n                                        <div className=\"p-4 bg-muted rounded-full w-fit mx-auto mb-4\">\r\n                                            <CalendarDays className=\"h-10 w-10 text-muted-foreground\" />\r\n                                        </div>\r\n                                        <p className=\"font-medium text-muted-foreground\">\r\n                                            No applications yet\r\n                                        </p>\r\n                                        <p className=\"text-sm text-muted-foreground mt-1\">\r\n                                            Your leave requests will appear here\r\n                                        </p>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"space-y-3 max-h-[600px] overflow-y-auto pr-1\">\r\n                                        {myApplications.map(\r\n                                            (app: ILeaveApplication) => (\r\n                                                <div\r\n                                                    key={app._id}\r\n                                                    className=\"p-4 rounded-xl border bg-card hover:bg-muted/30 transition-colors\"\r\n                                                >\r\n                                                    <div className=\"flex items-start justify-between gap-2 mb-3\">\r\n                                                        <div className=\"flex items-center gap-2\">\r\n                                                            {getStatusIcon(\r\n                                                                app.status,\r\n                                                            )}\r\n                                                            <Badge\r\n                                                                variant={getStatusBadgeVariant(\r\n                                                                    app.status,\r\n                                                                )}\r\n                                                                className=\"text-xs\"\r\n                                                            >\r\n                                                                {\r\n                                                                    LEAVE_STATUS_LABELS[\r\n                                                                        app\r\n                                                                            .status\r\n                                                                    ]\r\n                                                                }\r\n                                                            </Badge>\r\n                                                        </div>\r\n                                                        <Badge\r\n                                                            variant=\"outline\"\r\n                                                            className=\"text-xs font-normal\"\r\n                                                        >\r\n                                                            {\r\n                                                                LEAVE_TYPE_LABELS[\r\n                                                                    app\r\n                                                                        .leaveType\r\n                                                                ]\r\n                                                            }\r\n                                                        </Badge>\r\n                                                    </div>\r\n\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <div className=\"flex items-center gap-2 text-sm\">\r\n                                                            <CalendarIcon className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                                            <span>\r\n                                                                {format(\r\n                                                                    new Date(\r\n                                                                        app.startDate,\r\n                                                                    ),\r\n                                                                    'MMM dd',\r\n                                                                )}{' '}\r\n                                                                -{' '}\r\n                                                                {format(\r\n                                                                    new Date(\r\n                                                                        app.endDate,\r\n                                                                    ),\r\n                                                                    'MMM dd, yyyy',\r\n                                                                )}\r\n                                                            </span>\r\n                                                        </div>\r\n                                                        <p className=\"text-sm font-medium\">\r\n                                                            {\r\n                                                                app\r\n                                                                    .requestedDates\r\n                                                                    .length\r\n                                                            }{' '}\r\n                                                            day\r\n                                                            {app.requestedDates\r\n                                                                .length > 1\r\n                                                                ? 's'\r\n                                                                : ''}\r\n                                                        </p>\r\n                                                    </div>\r\n\r\n                                                    {/* Status specific info */}\r\n                                                    {app.status ===\r\n                                                        'rejected' &&\r\n                                                        app.commentByApprover && (\r\n                                                            <p className=\"text-xs text-destructive mt-2 p-2 bg-destructive/10 rounded-lg\">\r\n                                                                Reason:{' '}\r\n                                                                {\r\n                                                                    app.commentByApprover\r\n                                                                }\r\n                                                            </p>\r\n                                                        )}\r\n\r\n                                                    {app.status ===\r\n                                                        'pending' && (\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"sm\"\r\n                                                            onClick={() =>\r\n                                                                handleCancel(\r\n                                                                    app._id,\r\n                                                                )\r\n                                                            }\r\n                                                            disabled={\r\n                                                                isCancelling\r\n                                                            }\r\n                                                            className=\"w-full mt-3 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                                        >\r\n                                                            Cancel Request\r\n                                                        </Button>\r\n                                                    )}\r\n\r\n                                                    <p className=\"text-xs text-muted-foreground mt-2\">\r\n                                                        Applied{' '}\r\n                                                        {format(\r\n                                                            new Date(\r\n                                                                app.createdAt,\r\n                                                            ),\r\n                                                            'MMM dd, yyyy',\r\n                                                        )}\r\n                                                    </p>\r\n                                                </div>\r\n                                            ),\r\n                                        )}\r\n                                    </div>\r\n                                )}\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\leave\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\leave\\manage\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RadioGroup' is defined but never used.","line":51,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RadioGroupItem' is defined but never used.","line":51,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":36},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\leave\\manage\\page.tsx:117:13\n  115 |                 }),\n  116 |             );\n> 117 |             setDateSelections(initialSelections);\n      |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  118 |             setApprovalMode('full');\n  119 |         }\n  120 |     }, [selectedApplication, showApproveDialog]);","line":117,"column":13,"nodeType":null,"endLine":117,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useMemo } from 'react';\r\nimport { format } from 'date-fns';\r\nimport {\r\n    Check,\r\n    X,\r\n    RotateCcw,\r\n    Eye,\r\n    Loader,\r\n    FileText,\r\n    ExternalLink,\r\n    Calendar,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport {\r\n    useGetLeaveApplicationsQuery,\r\n    useGetPendingLeavesQuery,\r\n    useApproveLeaveMutation,\r\n    useRejectLeaveMutation,\r\n    useRevokeLeaveMutation,\r\n} from '@/redux/features/leave/leaveApi';\r\nimport type { ILeaveApplication, LeaveStatus } from '@/types/leave.type';\r\nimport { LEAVE_TYPE_LABELS, LEAVE_STATUS_LABELS } from '@/types/leave.type';\r\n\r\ntype DateDecision = 'approve' | 'paid' | 'reject';\r\n\r\ninterface DateSelection {\r\n    date: string;\r\n    decision: DateDecision;\r\n}\r\n\r\nexport default function LeaveManagePage() {\r\n    const [statusFilter, setStatusFilter] = useState<LeaveStatus | 'all'>(\r\n        'all',\r\n    );\r\n    const [selectedApplication, setSelectedApplication] =\r\n        useState<ILeaveApplication | null>(null);\r\n    const [showApproveDialog, setShowApproveDialog] = useState(false);\r\n    const [showRejectDialog, setShowRejectDialog] = useState(false);\r\n    const [showRevokeDialog, setShowRevokeDialog] = useState(false);\r\n    const [showDetailsDialog, setShowDetailsDialog] = useState(false);\r\n    const [comment, setComment] = useState('');\r\n\r\n    // Approval states\r\n    const [approvalMode, setApprovalMode] = useState<'full' | 'partial'>(\r\n        'full',\r\n    );\r\n    const [dateSelections, setDateSelections] = useState<DateSelection[]>([]);\r\n\r\n    // Revoke states\r\n    const [revokeMode, setRevokeMode] = useState<'full' | 'partial'>('full');\r\n    const [datesToRevoke, setDatesToRevoke] = useState<string[]>([]);\r\n\r\n    const { data: pendingData } = useGetPendingLeavesQuery();\r\n    const { data: applicationsData, isLoading } = useGetLeaveApplicationsQuery(\r\n        statusFilter === 'all'\r\n            ? { limit: 50 }\r\n            : { status: statusFilter, limit: 50 },\r\n    );\r\n\r\n    const [approveLeave, { isLoading: isApproving }] =\r\n        useApproveLeaveMutation();\r\n    const [rejectLeave, { isLoading: isRejecting }] = useRejectLeaveMutation();\r\n    const [revokeLeave, { isLoading: isRevoking }] = useRevokeLeaveMutation();\r\n\r\n    const pendingCount = pendingData?.count || 0;\r\n    const applications = applicationsData?.data || [];\r\n\r\n    useEffect(() => {\r\n        if (selectedApplication && showApproveDialog) {\r\n            const initialSelections = selectedApplication.requestedDates.map(\r\n                (date) => ({\r\n                    date: new Date(date).toISOString(),\r\n                    decision: 'approve' as DateDecision,\r\n                }),\r\n            );\r\n            setDateSelections(initialSelections);\r\n            setApprovalMode('full');\r\n        }\r\n    }, [selectedApplication, showApproveDialog]);\r\n\r\n    const handleDateDecisionChange = (\r\n        dateStr: string,\r\n        decision: DateDecision,\r\n    ) => {\r\n        setDateSelections((prev) =>\r\n            prev.map((ds) => (ds.date === dateStr ? { ...ds, decision } : ds)),\r\n        );\r\n    };\r\n\r\n    const approvedDates = useMemo(\r\n        () =>\r\n            dateSelections\r\n                .filter((ds) => ds.decision === 'approve')\r\n                .map((ds) => ds.date),\r\n        [dateSelections],\r\n    );\r\n\r\n    const paidLeaveDates = useMemo(\r\n        () =>\r\n            dateSelections\r\n                .filter((ds) => ds.decision === 'paid')\r\n                .map((ds) => ds.date),\r\n        [dateSelections],\r\n    );\r\n\r\n    const handleApprove = async () => {\r\n        if (!selectedApplication) return;\r\n\r\n        try {\r\n            const payload: {\r\n                comment?: string;\r\n                approvedDates?: string[];\r\n                paidLeaveDates?: string[];\r\n            } = {};\r\n            if (comment) payload.comment = comment;\r\n\r\n            if (approvalMode === 'partial') {\r\n                payload.approvedDates = approvedDates;\r\n                payload.paidLeaveDates = paidLeaveDates;\r\n            }\r\n\r\n            await approveLeave({\r\n                id: selectedApplication._id,\r\n                data: payload,\r\n            }).unwrap();\r\n\r\n            toast.success('Leave approved successfully');\r\n            setShowApproveDialog(false);\r\n            setSelectedApplication(null);\r\n            setComment('');\r\n            setApprovalMode('full');\r\n        } catch (error: unknown) {\r\n            const err = error as { data?: { message?: string } };\r\n            toast.error(err?.data?.message || 'Failed to approve leave');\r\n        }\r\n    };\r\n\r\n    const handleReject = async () => {\r\n        if (!selectedApplication) return;\r\n\r\n        try {\r\n            await rejectLeave({\r\n                id: selectedApplication._id,\r\n                comment,\r\n            }).unwrap();\r\n            toast.success('Leave rejected');\r\n            setShowRejectDialog(false);\r\n            setSelectedApplication(null);\r\n            setComment('');\r\n        } catch (error: unknown) {\r\n            const err = error as { data?: { message?: string } };\r\n            toast.error(err?.data?.message || 'Failed to reject leave');\r\n        }\r\n    };\r\n\r\n    const handleRevoke = async () => {\r\n        if (!selectedApplication) return;\r\n\r\n        try {\r\n            const payload: { reason?: string; datesToRevoke?: string[] } = {};\r\n            if (comment) payload.reason = comment;\r\n            if (revokeMode === 'partial' && datesToRevoke.length > 0) {\r\n                payload.datesToRevoke = datesToRevoke;\r\n            }\r\n\r\n            await revokeLeave({\r\n                id: selectedApplication._id,\r\n                ...payload,\r\n            }).unwrap();\r\n\r\n            const msg =\r\n                revokeMode === 'partial'\r\n                    ? `${datesToRevoke.length} day(s) revoked. Balance restored.`\r\n                    : 'Leave fully revoked. Balance restored.';\r\n            toast.success(msg);\r\n            setShowRevokeDialog(false);\r\n            setSelectedApplication(null);\r\n            setComment('');\r\n            setRevokeMode('full');\r\n            setDatesToRevoke([]);\r\n        } catch (error: unknown) {\r\n            const err = error as { data?: { message?: string } };\r\n            toast.error(err?.data?.message || 'Failed to revoke leave');\r\n        }\r\n    };\r\n\r\n    const getStatusBadgeVariant = (status: string) => {\r\n        switch (status) {\r\n            case 'approved':\r\n                return 'default';\r\n            case 'partially_approved':\r\n                return 'secondary';\r\n            case 'pending':\r\n                return 'outline';\r\n            case 'rejected':\r\n            case 'expired':\r\n            case 'revoked':\r\n                return 'destructive';\r\n            case 'cancelled':\r\n                return 'secondary';\r\n            default:\r\n                return 'outline';\r\n        }\r\n    };\r\n\r\n    const openApproveDialog = (app: ILeaveApplication) => {\r\n        setSelectedApplication(app);\r\n        setComment('');\r\n        setShowApproveDialog(true);\r\n    };\r\n\r\n    const openRejectDialog = (app: ILeaveApplication) => {\r\n        setSelectedApplication(app);\r\n        setComment('');\r\n        setShowRejectDialog(true);\r\n    };\r\n\r\n    const openRevokeDialog = (app: ILeaveApplication) => {\r\n        setSelectedApplication(app);\r\n        setComment('');\r\n        setRevokeMode('full');\r\n        setDatesToRevoke([]);\r\n        setShowRevokeDialog(true);\r\n    };\r\n\r\n    const toggleDateToRevoke = (dateStr: string) => {\r\n        setDatesToRevoke((prev) =>\r\n            prev.includes(dateStr)\r\n                ? prev.filter((d) => d !== dateStr)\r\n                : [...prev, dateStr],\r\n        );\r\n    };\r\n\r\n    const openDetailsDialog = (app: ILeaveApplication) => {\r\n        setSelectedApplication(app);\r\n        setShowDetailsDialog(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold\">Leave Management</h1>\r\n                    <p className=\"text-muted-foreground\">\r\n                        Review and manage leave applications\r\n                    </p>\r\n                </div>\r\n                {pendingCount > 0 && (\r\n                    <Badge variant=\"destructive\" className=\"text-lg px-4 py-2\">\r\n                        {pendingCount} Pending\r\n                    </Badge>\r\n                )}\r\n            </div>\r\n\r\n            <Card>\r\n                <CardContent className=\"pt-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <Label>Filter by Status:</Label>\r\n                        <Select\r\n                            value={statusFilter}\r\n                            onValueChange={(value) =>\r\n                                setStatusFilter(value as LeaveStatus | 'all')\r\n                            }\r\n                        >\r\n                            <SelectTrigger className=\"w-[200px]\">\r\n                                <SelectValue />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"all\">\r\n                                    All Applications\r\n                                </SelectItem>\r\n                                <SelectItem value=\"pending\">Pending</SelectItem>\r\n                                <SelectItem value=\"approved\">\r\n                                    Approved\r\n                                </SelectItem>\r\n                                <SelectItem value=\"partially_approved\">\r\n                                    Partially Approved\r\n                                </SelectItem>\r\n                                <SelectItem value=\"rejected\">\r\n                                    Rejected\r\n                                </SelectItem>\r\n                                <SelectItem value=\"expired\">Expired</SelectItem>\r\n                                <SelectItem value=\"revoked\">Revoked</SelectItem>\r\n                                <SelectItem value=\"cancelled\">\r\n                                    Cancelled\r\n                                </SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>Leave Applications</CardTitle>\r\n                    <CardDescription>\r\n                        {statusFilter === 'all'\r\n                            ? 'All leave applications'\r\n                            : `${LEAVE_STATUS_LABELS[statusFilter as LeaveStatus]} applications`}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    {isLoading ? (\r\n                        <div className=\"space-y-2\">\r\n                            <Skeleton className=\"h-12 w-full\" />\r\n                            <Skeleton className=\"h-12 w-full\" />\r\n                            <Skeleton className=\"h-12 w-full\" />\r\n                        </div>\r\n                    ) : applications.length === 0 ? (\r\n                        <p className=\"text-center text-muted-foreground py-8\">\r\n                            No applications found\r\n                        </p>\r\n                    ) : (\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow>\r\n                                    <TableHead>Employee</TableHead>\r\n                                    <TableHead>Type</TableHead>\r\n                                    <TableHead>Dates</TableHead>\r\n                                    <TableHead>Days</TableHead>\r\n                                    <TableHead>Reason</TableHead>\r\n                                    <TableHead>Status</TableHead>\r\n                                    <TableHead>Applied</TableHead>\r\n                                    <TableHead>Actions</TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {applications.map((app: ILeaveApplication) => (\r\n                                    <TableRow key={app._id}>\r\n                                        <TableCell className=\"font-medium\">\r\n                                            {app.staffId?.userId?.name || 'N/A'}\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                {\r\n                                                    LEAVE_TYPE_LABELS[\r\n                                                        app.leaveType\r\n                                                    ]\r\n                                                }\r\n                                                {app.leaveType === 'sick' &&\r\n                                                    app.medicalDocuments &&\r\n                                                    app.medicalDocuments\r\n                                                        .length > 0 && (\r\n                                                        <Badge\r\n                                                            variant=\"outline\"\r\n                                                            className=\"text-xs\"\r\n                                                        >\r\n                                                            <FileText className=\"h-3 w-3 mr-1\" />\r\n                                                            {\r\n                                                                app\r\n                                                                    .medicalDocuments\r\n                                                                    .length\r\n                                                            }\r\n                                                        </Badge>\r\n                                                    )}\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            {format(\r\n                                                new Date(app.startDate),\r\n                                                'MMM dd',\r\n                                            )}{' '}\r\n                                            -{' '}\r\n                                            {format(\r\n                                                new Date(app.endDate),\r\n                                                'MMM dd',\r\n                                            )}\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            {app.requestedDates.length}\r\n                                        </TableCell>\r\n                                        <TableCell\r\n                                            className=\"max-w-[200px] truncate\"\r\n                                            title={app.reason}\r\n                                        >\r\n                                            {app.reason}\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Badge\r\n                                                variant={getStatusBadgeVariant(\r\n                                                    app.status,\r\n                                                )}\r\n                                            >\r\n                                                {\r\n                                                    LEAVE_STATUS_LABELS[\r\n                                                        app.status\r\n                                                    ]\r\n                                                }\r\n                                            </Badge>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            {format(\r\n                                                new Date(app.createdAt),\r\n                                                'MMM dd, HH:mm',\r\n                                            )}\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <div className=\"flex items-center gap-1\">\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"icon\"\r\n                                                    onClick={() =>\r\n                                                        openDetailsDialog(app)\r\n                                                    }\r\n                                                    title=\"View Details\"\r\n                                                >\r\n                                                    <Eye className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                                {app.status === 'pending' && (\r\n                                                    <>\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            onClick={() =>\r\n                                                                openApproveDialog(\r\n                                                                    app,\r\n                                                                )\r\n                                                            }\r\n                                                            className=\"text-green-600 hover:text-green-700\"\r\n                                                            title=\"Approve\"\r\n                                                        >\r\n                                                            <Check className=\"h-4 w-4\" />\r\n                                                        </Button>\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            onClick={() =>\r\n                                                                openRejectDialog(\r\n                                                                    app,\r\n                                                                )\r\n                                                            }\r\n                                                            className=\"text-red-600 hover:text-red-700\"\r\n                                                            title=\"Reject\"\r\n                                                        >\r\n                                                            <X className=\"h-4 w-4\" />\r\n                                                        </Button>\r\n                                                    </>\r\n                                                )}\r\n                                                {(app.status === 'approved' ||\r\n                                                    app.status ===\r\n                                                        'partially_approved') && (\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        onClick={() =>\r\n                                                            openRevokeDialog(\r\n                                                                app,\r\n                                                            )\r\n                                                        }\r\n                                                        className=\"text-orange-600 hover:text-orange-700\"\r\n                                                        title=\"Revoke\"\r\n                                                    >\r\n                                                        <RotateCcw className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                )}\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Enhanced Approve Dialog */}\r\n            <Dialog\r\n                open={showApproveDialog}\r\n                onOpenChange={setShowApproveDialog}\r\n            >\r\n                <DialogContent className=\"!max-w-[900px] w-[900px] max-h-[85vh] overflow-y-auto\">\r\n                    <DialogHeader className=\"pb-4 border-b\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className=\"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl\">\r\n                                <Check className=\"h-6 w-6 text-green-600\" />\r\n                            </div>\r\n                            <div>\r\n                                <DialogTitle className=\"text-xl\">\r\n                                    Approve Leave Request\r\n                                </DialogTitle>\r\n                                <DialogDescription className=\"mt-1\">\r\n                                    Review and approve leave application for{' '}\r\n                                    <span className=\"font-semibold text-foreground\">\r\n                                        {\r\n                                            selectedApplication?.staffId?.userId\r\n                                                ?.name\r\n                                        }\r\n                                    </span>\r\n                                </DialogDescription>\r\n                            </div>\r\n                        </div>\r\n                    </DialogHeader>\r\n\r\n                    <div className=\"space-y-5 py-4\">\r\n                        {/* Leave Info Card */}\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                            <div className=\"p-4 bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-900/20 dark:to-blue-800/10 rounded-xl border border-blue-200 dark:border-blue-800\">\r\n                                <p className=\"text-xs text-blue-600 dark:text-blue-400 font-medium uppercase tracking-wide\">\r\n                                    Leave Type\r\n                                </p>\r\n                                <p className=\"text-lg font-bold mt-1\">\r\n                                    {selectedApplication &&\r\n                                        LEAVE_TYPE_LABELS[\r\n                                            selectedApplication.leaveType\r\n                                        ]}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-gradient-to-br from-purple-50 to-purple-100/50 dark:from-purple-900/20 dark:to-purple-800/10 rounded-xl border border-purple-200 dark:border-purple-800\">\r\n                                <p className=\"text-xs text-purple-600 dark:text-purple-400 font-medium uppercase tracking-wide\">\r\n                                    Total Days\r\n                                </p>\r\n                                <p className=\"text-lg font-bold mt-1\">\r\n                                    {selectedApplication?.requestedDates.length}{' '}\r\n                                    days\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-900/20 dark:to-emerald-800/10 rounded-xl border border-emerald-200 dark:border-emerald-800\">\r\n                                <p className=\"text-xs text-emerald-600 dark:text-emerald-400 font-medium uppercase tracking-wide\">\r\n                                    From\r\n                                </p>\r\n                                <p className=\"text-lg font-bold mt-1\">\r\n                                    {selectedApplication &&\r\n                                        format(\r\n                                            new Date(\r\n                                                selectedApplication.startDate,\r\n                                            ),\r\n                                            'MMM dd',\r\n                                        )}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"p-4 bg-gradient-to-br from-amber-50 to-amber-100/50 dark:from-amber-900/20 dark:to-amber-800/10 rounded-xl border border-amber-200 dark:border-amber-800\">\r\n                                <p className=\"text-xs text-amber-600 dark:text-amber-400 font-medium uppercase tracking-wide\">\r\n                                    To\r\n                                </p>\r\n                                <p className=\"text-lg font-bold mt-1\">\r\n                                    {selectedApplication &&\r\n                                        format(\r\n                                            new Date(\r\n                                                selectedApplication.endDate,\r\n                                            ),\r\n                                            'MMM dd',\r\n                                        )}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Reason */}\r\n                        <div className=\"p-4 bg-muted/50 rounded-xl\">\r\n                            <p className=\"text-sm font-medium text-muted-foreground mb-2\">\r\n                                Reason for Leave\r\n                            </p>\r\n                            <p className=\"text-foreground\">\r\n                                {selectedApplication?.reason}\r\n                            </p>\r\n                        </div>\r\n\r\n                        <Separator />\r\n\r\n                        {/* Approval Mode Selection */}\r\n                        <div className=\"space-y-4\">\r\n                            <Label className=\"text-base font-semibold\">\r\n                                How would you like to approve?\r\n                            </Label>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div\r\n                                    onClick={() => setApprovalMode('full')}\r\n                                    className={`p-5 rounded-xl border-2 cursor-pointer transition-all ${\r\n                                        approvalMode === 'full'\r\n                                            ? 'border-green-500 bg-green-50 dark:bg-green-900/20 shadow-md'\r\n                                            : 'border-muted hover:border-green-300 hover:bg-muted/50'\r\n                                    }`}\r\n                                >\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div\r\n                                            className={`mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center ${approvalMode === 'full' ? 'border-green-500 bg-green-500' : 'border-muted-foreground'}`}\r\n                                        >\r\n                                            {approvalMode === 'full' && (\r\n                                                <Check className=\"w-3 h-3 text-white\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-base\">\r\n                                                Approve All Dates\r\n                                            </p>\r\n                                            <p className=\"text-sm text-muted-foreground mt-1\">\r\n                                                Approve the entire leave request\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div\r\n                                    onClick={() => setApprovalMode('partial')}\r\n                                    className={`p-5 rounded-xl border-2 cursor-pointer transition-all ${\r\n                                        approvalMode === 'partial'\r\n                                            ? 'border-green-500 bg-green-50 dark:bg-green-900/20 shadow-md'\r\n                                            : 'border-muted hover:border-green-300 hover:bg-muted/50'\r\n                                    }`}\r\n                                >\r\n                                    <div className=\"flex items-start gap-3\">\r\n                                        <div\r\n                                            className={`mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center ${approvalMode === 'partial' ? 'border-green-500 bg-green-500' : 'border-muted-foreground'}`}\r\n                                        >\r\n                                            {approvalMode === 'partial' && (\r\n                                                <Check className=\"w-3 h-3 text-white\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-semibold text-base\">\r\n                                                Partial Approval\r\n                                            </p>\r\n                                            <p className=\"text-sm text-muted-foreground mt-1\">\r\n                                                Approve selected dates only\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Partial Approval Date Selection */}\r\n                        {approvalMode === 'partial' && (\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"flex items-center justify-between\">\r\n                                    <Label className=\"text-base font-semibold flex items-center gap-2\">\r\n                                        <Calendar className=\"h-5 w-5\" />\r\n                                        Select Decision for Each Date\r\n                                    </Label>\r\n                                </div>\r\n                                <div className=\"border rounded-xl overflow-hidden\">\r\n                                    <ScrollArea className=\"h-[240px]\">\r\n                                        <div className=\"divide-y\">\r\n                                            {dateSelections.map((ds, index) => (\r\n                                                <div\r\n                                                    key={ds.date}\r\n                                                    className={`flex items-center justify-between p-4 ${index % 2 === 0 ? 'bg-muted/30' : ''}`}\r\n                                                >\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <div className=\"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center\">\r\n                                                            <span className=\"font-bold text-sm text-primary\">\r\n                                                                {format(\r\n                                                                    new Date(\r\n                                                                        ds.date,\r\n                                                                    ),\r\n                                                                    'dd',\r\n                                                                )}\r\n                                                            </span>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <p className=\"font-medium\">\r\n                                                                {format(\r\n                                                                    new Date(\r\n                                                                        ds.date,\r\n                                                                    ),\r\n                                                                    'EEEE',\r\n                                                                )}\r\n                                                            </p>\r\n                                                            <p className=\"text-sm text-muted-foreground\">\r\n                                                                {format(\r\n                                                                    new Date(\r\n                                                                        ds.date,\r\n                                                                    ),\r\n                                                                    'MMMM dd, yyyy',\r\n                                                                )}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <Button\r\n                                                            type=\"button\"\r\n                                                            variant={\r\n                                                                ds.decision ===\r\n                                                                'approve'\r\n                                                                    ? 'default'\r\n                                                                    : 'outline'\r\n                                                            }\r\n                                                            size=\"sm\"\r\n                                                            className={\r\n                                                                ds.decision ===\r\n                                                                'approve'\r\n                                                                    ? 'bg-green-600 hover:bg-green-700'\r\n                                                                    : ''\r\n                                                            }\r\n                                                            onClick={() =>\r\n                                                                handleDateDecisionChange(\r\n                                                                    ds.date,\r\n                                                                    'approve',\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            <Check className=\"h-4 w-4 mr-1\" />\r\n                                                            Approve\r\n                                                        </Button>\r\n                                                        <Button\r\n                                                            type=\"button\"\r\n                                                            variant={\r\n                                                                ds.decision ===\r\n                                                                'paid'\r\n                                                                    ? 'default'\r\n                                                                    : 'outline'\r\n                                                            }\r\n                                                            size=\"sm\"\r\n                                                            className={\r\n                                                                ds.decision ===\r\n                                                                'paid'\r\n                                                                    ? 'bg-blue-600 hover:bg-blue-700'\r\n                                                                    : ''\r\n                                                            }\r\n                                                            onClick={() =>\r\n                                                                handleDateDecisionChange(\r\n                                                                    ds.date,\r\n                                                                    'paid',\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            💰 Paid\r\n                                                        </Button>\r\n                                                        <Button\r\n                                                            type=\"button\"\r\n                                                            variant={\r\n                                                                ds.decision ===\r\n                                                                'reject'\r\n                                                                    ? 'destructive'\r\n                                                                    : 'outline'\r\n                                                            }\r\n                                                            size=\"sm\"\r\n                                                            onClick={() =>\r\n                                                                handleDateDecisionChange(\r\n                                                                    ds.date,\r\n                                                                    'reject',\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            <X className=\"h-4 w-4 mr-1\" />\r\n                                                            Reject\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </ScrollArea>\r\n                                </div>\r\n                                {/* Summary */}\r\n                                <div className=\"flex items-center justify-center gap-6 p-4 bg-muted/50 rounded-xl\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-3 h-3 rounded-full bg-green-500\" />\r\n                                        <span className=\"font-medium\">\r\n                                            {approvedDates.length} Approved\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-3 h-3 rounded-full bg-blue-500\" />\r\n                                        <span className=\"font-medium\">\r\n                                            {paidLeaveDates.length} Paid Leave\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-3 h-3 rounded-full bg-red-500\" />\r\n                                        <span className=\"font-medium\">\r\n                                            {\r\n                                                dateSelections.filter(\r\n                                                    (ds) =>\r\n                                                        ds.decision ===\r\n                                                        'reject',\r\n                                                ).length\r\n                                            }{' '}\r\n                                            Rejected\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Comment */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label className=\"text-base\">\r\n                                Add a Comment (Optional)\r\n                            </Label>\r\n                            <Textarea\r\n                                value={comment}\r\n                                onChange={(e) => setComment(e.target.value)}\r\n                                placeholder=\"Add any notes or comments for this approval...\"\r\n                                className=\"min-h-[100px] resize-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DialogFooter className=\"pt-4 border-t gap-3\">\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => setShowApproveDialog(false)}\r\n                            className=\"px-6\"\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleApprove}\r\n                            disabled={\r\n                                isApproving ||\r\n                                (approvalMode === 'partial' &&\r\n                                    approvedDates.length === 0 &&\r\n                                    paidLeaveDates.length === 0)\r\n                            }\r\n                            className=\"bg-green-600 hover:bg-green-700 px-8\"\r\n                            size=\"lg\"\r\n                        >\r\n                            {isApproving && (\r\n                                <Loader className=\" h-4 w-4 animate-spin\" />\r\n                            )}\r\n                            <Check className=\" h-4 w-4\" />\r\n                            {approvalMode === 'full'\r\n                                ? 'Approve All Days'\r\n                                : `Approve ${approvedDates.length + paidLeaveDates.length} Day(s)`}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Reject Dialog */}\r\n            <Dialog open={showRejectDialog} onOpenChange={setShowRejectDialog}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Reject Leave</DialogTitle>\r\n                        <DialogDescription>\r\n                            Reject leave application for{' '}\r\n                            {selectedApplication?.staffId?.userId?.name}\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Reason for Rejection</Label>\r\n                            <Textarea\r\n                                value={comment}\r\n                                onChange={(e) => setComment(e.target.value)}\r\n                                placeholder=\"Please provide a reason...\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => setShowRejectDialog(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleReject}\r\n                            disabled={isRejecting}\r\n                            variant=\"destructive\"\r\n                        >\r\n                            {isRejecting && (\r\n                                <Loader className=\" h-4 w-4 animate-spin\" />\r\n                            )}\r\n                            Reject\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Enhanced Revoke Dialog */}\r\n            <Dialog open={showRevokeDialog} onOpenChange={setShowRevokeDialog}>\r\n                <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"text-lg\">\r\n                            Revoke Leave\r\n                        </DialogTitle>\r\n                        <DialogDescription className=\"text-sm\">\r\n                            Revoke approved leave for{' '}\r\n                            {selectedApplication?.staffId?.userId?.name}\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        {/* Leave Info Card */}\r\n                        <div className=\"bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/30 dark:to-amber-950/30 p-3 rounded-lg border border-orange-200 dark:border-orange-800\">\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                <div>\r\n                                    <p className=\"text-xs text-muted-foreground\">\r\n                                        Leave Type\r\n                                    </p>\r\n                                    <p className=\"font-semibold\">\r\n                                        {selectedApplication &&\r\n                                            LEAVE_TYPE_LABELS[\r\n                                                selectedApplication.leaveType\r\n                                            ]}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-muted-foreground\">\r\n                                        Approved Days\r\n                                    </p>\r\n                                    <p className=\"font-semibold\">\r\n                                        {selectedApplication?.approvedDates\r\n                                            ?.length || 0}{' '}\r\n                                        days\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Revoke Mode Selection */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label className=\"text-sm font-semibold\">\r\n                                Choose Action\r\n                            </Label>\r\n                            <div className=\"grid grid-cols-2 gap-3\">\r\n                                <div\r\n                                    onClick={() => setRevokeMode('full')}\r\n                                    className={`p-3 rounded-lg border-2 cursor-pointer transition-all ${\r\n                                        revokeMode === 'full'\r\n                                            ? 'border-orange-500 bg-orange-50 dark:bg-orange-950/30'\r\n                                            : 'border-muted hover:border-orange-300'\r\n                                    }`}\r\n                                >\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div\r\n                                            className={`w-4 h-4 rounded-full border-2 flex items-center justify-center ${revokeMode === 'full' ? 'border-orange-500' : 'border-muted'}`}\r\n                                        >\r\n                                            {revokeMode === 'full' && (\r\n                                                <div className=\"w-2 h-2 rounded-full bg-orange-500\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-medium text-sm\">\r\n                                                Revoke All Dates\r\n                                            </p>\r\n                                            <p className=\"text-xs text-muted-foreground\">\r\n                                                Cancel entire leave\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div\r\n                                    onClick={() => setRevokeMode('partial')}\r\n                                    className={`p-3 rounded-lg border-2 cursor-pointer transition-all ${\r\n                                        revokeMode === 'partial'\r\n                                            ? 'border-orange-500 bg-orange-50 dark:bg-orange-950/30'\r\n                                            : 'border-muted hover:border-orange-300'\r\n                                    }`}\r\n                                >\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div\r\n                                            className={`w-4 h-4 rounded-full border-2 flex items-center justify-center ${revokeMode === 'partial' ? 'border-orange-500' : 'border-muted'}`}\r\n                                        >\r\n                                            {revokeMode === 'partial' && (\r\n                                                <div className=\"w-2 h-2 rounded-full bg-orange-500\" />\r\n                                            )}\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-medium text-sm\">\r\n                                                Select Specific Dates\r\n                                            </p>\r\n                                            <p className=\"text-xs text-muted-foreground\">\r\n                                                Choose which days to revoke\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Partial Revoke Date Selection */}\r\n                        {revokeMode === 'partial' &&\r\n                            selectedApplication?.approvedDates && (\r\n                                <div className=\"space-y-2\">\r\n                                    <div className=\"flex items-center justify-between\">\r\n                                        <Label className=\"text-sm font-semibold flex items-center gap-1.5\">\r\n                                            <Calendar className=\"h-4 w-4\" />\r\n                                            Select Dates to Revoke\r\n                                        </Label>\r\n                                        <Button\r\n                                            variant=\"outline\"\r\n                                            size=\"sm\"\r\n                                            className=\"h-7 text-xs\"\r\n                                            onClick={() => {\r\n                                                if (\r\n                                                    datesToRevoke.length ===\r\n                                                    selectedApplication\r\n                                                        .approvedDates.length\r\n                                                ) {\r\n                                                    setDatesToRevoke([]);\r\n                                                } else {\r\n                                                    setDatesToRevoke(\r\n                                                        selectedApplication.approvedDates.map(\r\n                                                            (d) =>\r\n                                                                new Date(\r\n                                                                    d,\r\n                                                                ).toISOString(),\r\n                                                        ),\r\n                                                    );\r\n                                                }\r\n                                            }}\r\n                                        >\r\n                                            {datesToRevoke.length ===\r\n                                            selectedApplication.approvedDates\r\n                                                .length\r\n                                                ? 'Deselect All'\r\n                                                : 'Select All'}\r\n                                        </Button>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-2 gap-2 max-h-[180px] overflow-y-auto p-1\">\r\n                                        {selectedApplication.approvedDates.map(\r\n                                            (date) => {\r\n                                                const dateStr = new Date(\r\n                                                    date,\r\n                                                ).toISOString();\r\n                                                const isSelected =\r\n                                                    datesToRevoke.includes(\r\n                                                        dateStr,\r\n                                                    );\r\n                                                return (\r\n                                                    <div\r\n                                                        key={date}\r\n                                                        onClick={() =>\r\n                                                            toggleDateToRevoke(\r\n                                                                dateStr,\r\n                                                            )\r\n                                                        }\r\n                                                        className={`flex items-center gap-3 p-2.5 rounded-lg border-2 cursor-pointer transition-all ${\r\n                                                            isSelected\r\n                                                                ? 'border-red-500 bg-red-50 dark:bg-red-950/30'\r\n                                                                : 'border-muted hover:border-red-300 bg-muted/30'\r\n                                                        }`}\r\n                                                    >\r\n                                                        <Checkbox\r\n                                                            checked={isSelected}\r\n                                                            className=\"h-4 w-4\"\r\n                                                        />\r\n                                                        <div>\r\n                                                            <p\r\n                                                                className={`font-medium text-sm ${isSelected ? 'text-red-700 dark:text-red-400' : ''}`}\r\n                                                            >\r\n                                                                {format(\r\n                                                                    new Date(\r\n                                                                        date,\r\n                                                                    ),\r\n                                                                    'EEE, MMM dd',\r\n                                                                )}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                );\r\n                                            },\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex items-center justify-between p-2 bg-red-50 dark:bg-red-950/20 rounded border border-red-200 dark:border-red-800\">\r\n                                        <span className=\"text-sm font-medium\">\r\n                                            Days to Revoke:\r\n                                        </span>\r\n                                        <span className=\"font-bold text-red-600\">\r\n                                            {datesToRevoke.length} day(s)\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                        {/* Reason */}\r\n                        <div className=\"space-y-1\">\r\n                            <Label className=\"text-sm\">Reason (Optional)</Label>\r\n                            <Textarea\r\n                                value={comment}\r\n                                onChange={(e) => setComment(e.target.value)}\r\n                                placeholder=\"Please provide a reason...\"\r\n                                className=\"min-h-[60px]\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter className=\"gap-2 sm:gap-0\">\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => setShowRevokeDialog(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleRevoke}\r\n                            disabled={\r\n                                isRevoking ||\r\n                                (revokeMode === 'partial' &&\r\n                                    datesToRevoke.length === 0)\r\n                            }\r\n                            className=\"bg-orange-600 hover:bg-orange-700 min-w-[140px]\"\r\n                        >\r\n                            {isRevoking && (\r\n                                <Loader className=\" h-4 w-4 animate-spin\" />\r\n                            )}\r\n                            {revokeMode === 'full'\r\n                                ? 'Revoke All'\r\n                                : `Revoke ${datesToRevoke.length} Day(s)`}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Details Dialog with Document Viewing */}\r\n            <Dialog\r\n                open={showDetailsDialog}\r\n                onOpenChange={setShowDetailsDialog}\r\n            >\r\n                <DialogContent className=\"max-w-lg\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Leave Application Details</DialogTitle>\r\n                    </DialogHeader>\r\n                    {selectedApplication && (\r\n                        <ScrollArea className=\"max-h-[70vh]\">\r\n                            <div className=\"space-y-4 pr-4\">\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Employee\r\n                                        </Label>\r\n                                        <p className=\"font-medium\">\r\n                                            {\r\n                                                selectedApplication.staffId\r\n                                                    ?.userId?.name\r\n                                            }\r\n                                        </p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Status\r\n                                        </Label>\r\n                                        <div>\r\n                                            <Badge\r\n                                                variant={getStatusBadgeVariant(\r\n                                                    selectedApplication.status,\r\n                                                )}\r\n                                            >\r\n                                                {\r\n                                                    LEAVE_STATUS_LABELS[\r\n                                                        selectedApplication\r\n                                                            .status\r\n                                                    ]\r\n                                                }\r\n                                            </Badge>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Leave Type\r\n                                        </Label>\r\n                                        <p className=\"font-medium\">\r\n                                            {\r\n                                                LEAVE_TYPE_LABELS[\r\n                                                    selectedApplication\r\n                                                        .leaveType\r\n                                                ]\r\n                                            }\r\n                                        </p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Days Requested\r\n                                        </Label>\r\n                                        <p className=\"font-medium\">\r\n                                            {\r\n                                                selectedApplication\r\n                                                    .requestedDates.length\r\n                                            }\r\n                                        </p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Start Date\r\n                                        </Label>\r\n                                        <p className=\"font-medium\">\r\n                                            {format(\r\n                                                new Date(\r\n                                                    selectedApplication.startDate,\r\n                                                ),\r\n                                                'PPP',\r\n                                            )}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            End Date\r\n                                        </Label>\r\n                                        <p className=\"font-medium\">\r\n                                            {format(\r\n                                                new Date(\r\n                                                    selectedApplication.endDate,\r\n                                                ),\r\n                                                'PPP',\r\n                                            )}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {(selectedApplication.status === 'approved' ||\r\n                                    selectedApplication.status ===\r\n                                        'partially_approved') && (\r\n                                    <div className=\"space-y-2\">\r\n                                        {selectedApplication.approvedDates &&\r\n                                            selectedApplication.approvedDates\r\n                                                .length > 0 && (\r\n                                                <div>\r\n                                                    <Label className=\"text-muted-foreground\">\r\n                                                        Approved Dates (\r\n                                                        {\r\n                                                            selectedApplication\r\n                                                                .approvedDates\r\n                                                                .length\r\n                                                        }\r\n                                                        )\r\n                                                    </Label>\r\n                                                    <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                                                        {selectedApplication.approvedDates.map(\r\n                                                            (date) => (\r\n                                                                <Badge\r\n                                                                    key={date}\r\n                                                                    variant=\"default\"\r\n                                                                    className=\"text-xs\"\r\n                                                                >\r\n                                                                    {format(\r\n                                                                        new Date(\r\n                                                                            date,\r\n                                                                        ),\r\n                                                                        'MMM dd',\r\n                                                                    )}\r\n                                                                </Badge>\r\n                                                            ),\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                        {selectedApplication.paidLeaveDates &&\r\n                                            selectedApplication.paidLeaveDates\r\n                                                .length > 0 && (\r\n                                                <div>\r\n                                                    <Label className=\"text-muted-foreground\">\r\n                                                        Paid Leave Dates (\r\n                                                        {\r\n                                                            selectedApplication\r\n                                                                .paidLeaveDates\r\n                                                                .length\r\n                                                        }\r\n                                                        )\r\n                                                    </Label>\r\n                                                    <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                                                        {selectedApplication.paidLeaveDates.map(\r\n                                                            (date) => (\r\n                                                                <Badge\r\n                                                                    key={date}\r\n                                                                    variant=\"secondary\"\r\n                                                                    className=\"text-xs bg-blue-100 text-blue-800\"\r\n                                                                >\r\n                                                                    {format(\r\n                                                                        new Date(\r\n                                                                            date,\r\n                                                                        ),\r\n                                                                        'MMM dd',\r\n                                                                    )}\r\n                                                                </Badge>\r\n                                                            ),\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                        {selectedApplication.rejectedDates &&\r\n                                            selectedApplication.rejectedDates\r\n                                                .length > 0 && (\r\n                                                <div>\r\n                                                    <Label className=\"text-muted-foreground\">\r\n                                                        Rejected Dates (\r\n                                                        {\r\n                                                            selectedApplication\r\n                                                                .rejectedDates\r\n                                                                .length\r\n                                                        }\r\n                                                        )\r\n                                                    </Label>\r\n                                                    <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                                                        {selectedApplication.rejectedDates.map(\r\n                                                            (date) => (\r\n                                                                <Badge\r\n                                                                    key={date}\r\n                                                                    variant=\"destructive\"\r\n                                                                    className=\"text-xs\"\r\n                                                                >\r\n                                                                    {format(\r\n                                                                        new Date(\r\n                                                                            date,\r\n                                                                        ),\r\n                                                                        'MMM dd',\r\n                                                                    )}\r\n                                                                </Badge>\r\n                                                            ),\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            )}\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div>\r\n                                    <Label className=\"text-muted-foreground\">\r\n                                        Reason\r\n                                    </Label>\r\n                                    <p className=\"mt-1 p-3 bg-muted rounded-lg\">\r\n                                        {selectedApplication.reason}\r\n                                    </p>\r\n                                </div>\r\n\r\n                                {selectedApplication.commentByApprover && (\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Approver Comment\r\n                                        </Label>\r\n                                        <p className=\"mt-1 p-3 bg-muted rounded-lg\">\r\n                                            {\r\n                                                selectedApplication.commentByApprover\r\n                                            }\r\n                                        </p>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {selectedApplication.revokeReason && (\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Revoke Reason\r\n                                        </Label>\r\n                                        <p className=\"mt-1 p-3 bg-muted rounded-lg\">\r\n                                            {selectedApplication.revokeReason}\r\n                                        </p>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Medical Documents */}\r\n                                {selectedApplication.leaveType === 'sick' &&\r\n                                    selectedApplication.medicalDocuments &&\r\n                                    selectedApplication.medicalDocuments\r\n                                        .length > 0 && (\r\n                                        <div>\r\n                                            <Label className=\"text-muted-foreground flex items-center gap-2\">\r\n                                                <FileText className=\"h-4 w-4\" />\r\n                                                Medical Documents (\r\n                                                {\r\n                                                    selectedApplication\r\n                                                        .medicalDocuments.length\r\n                                                }\r\n                                                )\r\n                                            </Label>\r\n                                            <div className=\"mt-2 space-y-2\">\r\n                                                {selectedApplication.medicalDocuments.map(\r\n                                                    (doc, index) => (\r\n                                                        <div\r\n                                                            key={index}\r\n                                                            className=\"flex items-center justify-between p-3 bg-muted rounded-lg\"\r\n                                                        >\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <FileText className=\"h-5 w-5 text-blue-600\" />\r\n                                                                <div>\r\n                                                                    <p className=\"font-medium text-sm\">\r\n                                                                        {doc.fileName ||\r\n                                                                            `Document ${index + 1}`}\r\n                                                                    </p>\r\n                                                                    {doc.uploadedAt && (\r\n                                                                        <p className=\"text-xs text-muted-foreground\">\r\n                                                                            Uploaded:{' '}\r\n                                                                            {format(\r\n                                                                                new Date(\r\n                                                                                    doc.uploadedAt,\r\n                                                                                ),\r\n                                                                                'PPP p',\r\n                                                                            )}\r\n                                                                        </p>\r\n                                                                    )}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <Button\r\n                                                                variant=\"outline\"\r\n                                                                size=\"sm\"\r\n                                                                onClick={() =>\r\n                                                                    window.open(\r\n                                                                        doc.url,\r\n                                                                        '_blank',\r\n                                                                    )\r\n                                                                }\r\n                                                            >\r\n                                                                <ExternalLink className=\"h-4 w-4 mr-1\" />\r\n                                                                View\r\n                                                            </Button>\r\n                                                        </div>\r\n                                                    ),\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Applied On\r\n                                        </Label>\r\n                                        <p>\r\n                                            {format(\r\n                                                new Date(\r\n                                                    selectedApplication.createdAt,\r\n                                                ),\r\n                                                'PPP p',\r\n                                            )}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div>\r\n                                        <Label className=\"text-muted-foreground\">\r\n                                            Expires At\r\n                                        </Label>\r\n                                        <p>\r\n                                            {format(\r\n                                                new Date(\r\n                                                    selectedApplication.expiresAt,\r\n                                                ),\r\n                                                'PPP p',\r\n                                            )}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </ScrollArea>\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\notices\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\notices\\manage\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":16,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":16,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":16,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2948,2951],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2948,2951],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":109,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3331,3334],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3331,3334],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3864,3867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3864,3867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":136,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4270,4273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4270,4273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { format } from 'date-fns';\r\nimport {\r\n    Plus,\r\n    Megaphone,\r\n    Pin,\r\n    Pencil,\r\n    Trash2,\r\n    Eye,\r\n    EyeOff,\r\n    BarChart3,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n    useGetAllNoticesQuery,\r\n    useCreateNoticeMutation,\r\n    useUpdateNoticeMutation,\r\n    usePublishNoticeMutation,\r\n    useUnpublishNoticeMutation,\r\n    useDeleteNoticeMutation,\r\n    useGetNoticeStatsQuery,\r\n} from '@/redux/features/notice/noticeApi';\r\nimport type {\r\n    INotice,\r\n    NoticeCategory,\r\n    NoticePriority,\r\n    CreateNoticeInput,\r\n} from '@/types/notice.type';\r\nimport {\r\n    NOTICE_PRIORITY_LABELS,\r\n    NOTICE_CATEGORY_LABELS,\r\n    NOTICE_PRIORITY_COLORS,\r\n    NOTICE_CATEGORY_COLORS,\r\n} from '@/types/notice.type';\r\n\r\nexport default function NoticeManagePage() {\r\n    const [isCreateOpen, setIsCreateOpen] = useState(false);\r\n    const [editingNotice, setEditingNotice] = useState<INotice | null>(null);\r\n    const [deleteNoticeId, setDeleteNoticeId] = useState<string | null>(null);\r\n    const [statsNoticeId, setStatsNoticeId] = useState<string | null>(null);\r\n\r\n    const { data, isLoading } = useGetAllNoticesQuery();\r\n    const [createNotice, { isLoading: isCreating }] = useCreateNoticeMutation();\r\n    const [updateNotice, { isLoading: isUpdating }] = useUpdateNoticeMutation();\r\n    const [publishNotice] = usePublishNoticeMutation();\r\n    const [unpublishNotice] = useUnpublishNoticeMutation();\r\n    const [deleteNotice] = useDeleteNoticeMutation();\r\n\r\n    const notices = data?.data || [];\r\n\r\n    const handleCreate = async (formData: CreateNoticeInput) => {\r\n        try {\r\n            await createNotice(formData).unwrap();\r\n            toast.success('Notice created successfully');\r\n            setIsCreateOpen(false);\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Failed to create notice');\r\n        }\r\n    };\r\n\r\n    const handleUpdate = async (id: string, formData: CreateNoticeInput) => {\r\n        try {\r\n            await updateNotice({ id, ...formData }).unwrap();\r\n            toast.success('Notice updated successfully');\r\n            setEditingNotice(null);\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Failed to update notice');\r\n        }\r\n    };\r\n\r\n    const handlePublishToggle = async (notice: INotice) => {\r\n        try {\r\n            if (notice.isPublished) {\r\n                await unpublishNotice(notice._id).unwrap();\r\n                toast.success('Notice unpublished');\r\n            } else {\r\n                await publishNotice(notice._id).unwrap();\r\n                toast.success('Notice published and notifications sent!');\r\n            }\r\n        } catch (error: any) {\r\n            toast.error(\r\n                error?.data?.message || 'Failed to update publish status',\r\n            );\r\n        }\r\n    };\r\n\r\n    const handleDelete = async () => {\r\n        if (!deleteNoticeId) return;\r\n        try {\r\n            await deleteNotice(deleteNoticeId).unwrap();\r\n            toast.success('Notice deleted');\r\n            setDeleteNoticeId(null);\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Failed to delete notice');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold flex items-center gap-2\">\r\n                        <Megaphone className=\"h-6 w-6\" />\r\n                        Notice Management\r\n                    </h1>\r\n                    <p className=\"text-muted-foreground\">\r\n                        Create and manage company notices\r\n                    </p>\r\n                </div>\r\n\r\n                <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\r\n                    <DialogTrigger asChild>\r\n                        <Button>\r\n                            <Plus className=\" h-4 w-4\" />\r\n                            Create Notice\r\n                        </Button>\r\n                    </DialogTrigger>\r\n                    <DialogContent className=\"max-w-xl\">\r\n                        <DialogHeader>\r\n                            <DialogTitle>Create New Notice</DialogTitle>\r\n                            <DialogDescription>\r\n                                Create a notice. You can publish it later to\r\n                                notify all users.\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n                        <NoticeForm\r\n                            onSubmit={handleCreate}\r\n                            isLoading={isCreating}\r\n                        />\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            {isLoading ? (\r\n                <div className=\"space-y-4\">\r\n                    {[1, 2, 3].map((i) => (\r\n                        <Skeleton key={i} className=\"h-20 w-full\" />\r\n                    ))}\r\n                </div>\r\n            ) : notices.length === 0 ? (\r\n                <Card className=\"p-12 text-center\">\r\n                    <Megaphone className=\"h-12 w-12 mx-auto text-muted-foreground/50 mb-4\" />\r\n                    <h3 className=\"text-lg font-medium\">No notices yet</h3>\r\n                    <p className=\"text-muted-foreground text-sm mt-1\">\r\n                        Create your first notice to get started\r\n                    </p>\r\n                </Card>\r\n            ) : (\r\n                <div className=\"border rounded-lg\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow>\r\n                                <TableHead>Title</TableHead>\r\n                                <TableHead>Category</TableHead>\r\n                                <TableHead>Priority</TableHead>\r\n                                <TableHead>Status</TableHead>\r\n                                <TableHead>Created</TableHead>\r\n                                <TableHead className=\"text-right\">\r\n                                    Actions\r\n                                </TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {notices.map((notice) => (\r\n                                <TableRow key={notice._id}>\r\n                                    <TableCell>\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            {notice.isPinned && (\r\n                                                <Pin className=\"h-4 w-4 text-amber-500\" />\r\n                                            )}\r\n                                            <span className=\"font-medium\">\r\n                                                {notice.title}\r\n                                            </span>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <Badge\r\n                                            className={\r\n                                                NOTICE_CATEGORY_COLORS[\r\n                                                    notice.category\r\n                                                ]\r\n                                            }\r\n                                            variant=\"outline\"\r\n                                        >\r\n                                            {\r\n                                                NOTICE_CATEGORY_LABELS[\r\n                                                    notice.category\r\n                                                ]\r\n                                            }\r\n                                        </Badge>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <Badge\r\n                                            className={\r\n                                                NOTICE_PRIORITY_COLORS[\r\n                                                    notice.priority\r\n                                                ]\r\n                                            }\r\n                                            variant=\"outline\"\r\n                                        >\r\n                                            {\r\n                                                NOTICE_PRIORITY_LABELS[\r\n                                                    notice.priority\r\n                                                ]\r\n                                            }\r\n                                        </Badge>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <Badge\r\n                                            variant={\r\n                                                notice.isPublished\r\n                                                    ? 'default'\r\n                                                    : 'secondary'\r\n                                            }\r\n                                        >\r\n                                            {notice.isPublished\r\n                                                ? 'Published'\r\n                                                : 'Draft'}\r\n                                        </Badge>\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-muted-foreground text-sm\">\r\n                                        {format(\r\n                                            new Date(notice.createdAt),\r\n                                            'MMM dd, yyyy',\r\n                                        )}\r\n                                    </TableCell>\r\n                                    <TableCell className=\"text-right\">\r\n                                        <div className=\"flex justify-end gap-1\">\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                onClick={() =>\r\n                                                    handlePublishToggle(notice)\r\n                                                }\r\n                                                title={\r\n                                                    notice.isPublished\r\n                                                        ? 'Unpublish'\r\n                                                        : 'Publish'\r\n                                                }\r\n                                            >\r\n                                                {notice.isPublished ? (\r\n                                                    <EyeOff className=\"h-4 w-4\" />\r\n                                                ) : (\r\n                                                    <Eye className=\"h-4 w-4\" />\r\n                                                )}\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                onClick={() =>\r\n                                                    setStatsNoticeId(notice._id)\r\n                                                }\r\n                                                title=\"View Stats\"\r\n                                            >\r\n                                                <BarChart3 className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                onClick={() =>\r\n                                                    setEditingNotice(notice)\r\n                                                }\r\n                                            >\r\n                                                <Pencil className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"text-destructive hover:text-destructive\"\r\n                                                onClick={() =>\r\n                                                    setDeleteNoticeId(\r\n                                                        notice._id,\r\n                                                    )\r\n                                                }\r\n                                            >\r\n                                                <Trash2 className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n            )}\r\n\r\n            {/* Edit Dialog */}\r\n            {editingNotice && (\r\n                <Dialog\r\n                    open={!!editingNotice}\r\n                    onOpenChange={(open) => !open && setEditingNotice(null)}\r\n                >\r\n                    <DialogContent className=\"max-w-xl\">\r\n                        <DialogHeader>\r\n                            <DialogTitle>Edit Notice</DialogTitle>\r\n                        </DialogHeader>\r\n                        <NoticeForm\r\n                            initialData={editingNotice}\r\n                            onSubmit={(data) =>\r\n                                handleUpdate(editingNotice._id, data)\r\n                            }\r\n                            isLoading={isUpdating}\r\n                        />\r\n                    </DialogContent>\r\n                </Dialog>\r\n            )}\r\n\r\n            {/* Delete Confirmation */}\r\n            <AlertDialog\r\n                open={!!deleteNoticeId}\r\n                onOpenChange={(open) => !open && setDeleteNoticeId(null)}\r\n            >\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete Notice?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={handleDelete}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                        >\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            {/* Stats Dialog */}\r\n            {statsNoticeId && (\r\n                <NoticeStatsDialog\r\n                    noticeId={statsNoticeId}\r\n                    onClose={() => setStatsNoticeId(null)}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// Notice Form Component\r\nfunction NoticeForm({\r\n    initialData,\r\n    onSubmit,\r\n    isLoading,\r\n}: {\r\n    initialData?: INotice;\r\n    onSubmit: (data: CreateNoticeInput) => void;\r\n    isLoading: boolean;\r\n}) {\r\n    const [title, setTitle] = useState(initialData?.title || '');\r\n    const [content, setContent] = useState(initialData?.content || '');\r\n    const [priority, setPriority] = useState<NoticePriority>(\r\n        initialData?.priority || 'medium',\r\n    );\r\n    const [category, setCategory] = useState<NoticeCategory>(\r\n        initialData?.category || 'general',\r\n    );\r\n    const [isPinned, setIsPinned] = useState(initialData?.isPinned || false);\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        onSubmit({ title, content, priority, category, isPinned });\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"space-y-2\">\r\n                <Label>Title</Label>\r\n                <Input\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    placeholder=\"Notice title\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                    <Label>Category</Label>\r\n                    <Select\r\n                        value={category}\r\n                        onValueChange={(v) => setCategory(v as NoticeCategory)}\r\n                    >\r\n                        <SelectTrigger>\r\n                            <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            {Object.entries(NOTICE_CATEGORY_LABELS).map(\r\n                                ([key, label]) => (\r\n                                    <SelectItem key={key} value={key}>\r\n                                        {label}\r\n                                    </SelectItem>\r\n                                ),\r\n                            )}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                    <Label>Priority</Label>\r\n                    <Select\r\n                        value={priority}\r\n                        onValueChange={(v) => setPriority(v as NoticePriority)}\r\n                    >\r\n                        <SelectTrigger>\r\n                            <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            {Object.entries(NOTICE_PRIORITY_LABELS).map(\r\n                                ([key, label]) => (\r\n                                    <SelectItem key={key} value={key}>\r\n                                        {label}\r\n                                    </SelectItem>\r\n                                ),\r\n                            )}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n                <Label>Content</Label>\r\n                <Textarea\r\n                    value={content}\r\n                    onChange={(e) => setContent(e.target.value)}\r\n                    placeholder=\"Notice content...\"\r\n                    rows={6}\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n                <Switch\r\n                    id=\"pinned\"\r\n                    checked={isPinned}\r\n                    onCheckedChange={setIsPinned}\r\n                />\r\n                <Label htmlFor=\"pinned\">Pin this notice (stays at top)</Label>\r\n            </div>\r\n\r\n            <Button type=\"submit\" disabled={isLoading} className=\"w-full\">\r\n                {isLoading\r\n                    ? 'Saving...'\r\n                    : initialData\r\n                      ? 'Update Notice'\r\n                      : 'Create Notice'}\r\n            </Button>\r\n        </form>\r\n    );\r\n}\r\n\r\n// Stats Dialog Component\r\nfunction NoticeStatsDialog({\r\n    noticeId,\r\n    onClose,\r\n}: {\r\n    noticeId: string;\r\n    onClose: () => void;\r\n}) {\r\n    const { data, isLoading } = useGetNoticeStatsQuery(noticeId);\r\n\r\n    return (\r\n        <Dialog open onOpenChange={(open) => !open && onClose()}>\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>Notice Statistics</DialogTitle>\r\n                </DialogHeader>\r\n                {isLoading ? (\r\n                    <Skeleton className=\"h-20 w-full\" />\r\n                ) : (\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"text-center p-4 bg-muted rounded-lg\">\r\n                            <p className=\"text-3xl font-bold\">\r\n                                {data?.data.totalViews || 0}\r\n                            </p>\r\n                            <p className=\"text-muted-foreground text-sm\">\r\n                                Total Views\r\n                            </p>\r\n                        </div>\r\n                        {data?.data.viewedBy &&\r\n                            data.data.viewedBy.length > 0 && (\r\n                                <div>\r\n                                    <h4 className=\"font-medium mb-2\">\r\n                                        Viewed By\r\n                                    </h4>\r\n                                    <div className=\"max-h-48 overflow-y-auto space-y-1\">\r\n                                        {data.data.viewedBy.map((user) => (\r\n                                            <div\r\n                                                key={user._id}\r\n                                                className=\"text-sm p-2 bg-muted/50 rounded\"\r\n                                            >\r\n                                                {user.name}{' '}\r\n                                                <span className=\"text-muted-foreground\">\r\n                                                    ({user.email})\r\n                                                </span>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                    </div>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\notices\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\orders\\invoice\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\orders\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\orders\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'orders' logical expression could make the dependencies of useMemo Hook (at line 268) change on every render. To fix this, wrap the initialization of 'orders' in its own useMemo() Hook.","line":260,"column":11,"nodeType":"VariableDeclarator","endLine":260,"endColumn":41},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'orders' logical expression could make the dependencies of useMemo Hook (at line 276) change on every render. To fix this, wrap the initialization of 'orders' in its own useMemo() Hook.","line":260,"column":11,"nodeType":"VariableDeclarator","endLine":260,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedOrders' is assigned a value but never used.","line":266,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":266,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport {\r\n    useGetOrdersQuery,\r\n    useCreateOrderMutation,\r\n    useUpdateOrderMutation,\r\n    useDeleteOrderMutation,\r\n    useGetOrderStatsQuery,\r\n    useUpdateOrderStatusMutation,\r\n    useExtendDeadlineMutation,\r\n    useAddRevisionMutation,\r\n    useLazyGetOrdersQuery,\r\n    useGetOrderYearsQuery,\r\n} from '@/redux/features/order/orderApi';\r\nimport { useGetClientsQuery } from '@/redux/features/client/clientApi';\r\nimport type {\r\n    IOrder,\r\n    OrderStatus,\r\n    OrderPriority,\r\n    OrderFilters,\r\n} from '@/types/order.type';\r\nimport { ORDER_STATUS_LABELS, ORDER_PRIORITY_LABELS } from '@/types/order.type';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n    DialogFooter,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport {\r\n    Loader,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    Plus,\r\n    Trash2,\r\n    Edit2,\r\n    Package,\r\n    Clock,\r\n    CheckCircle,\r\n    AlertCircle,\r\n    Eye,\r\n    Calendar,\r\n    RotateCcw,\r\n    AlertTriangle,\r\n    FileText,\r\n    History,\r\n    Search,\r\n    Filter,\r\n    X,\r\n    CheckSquare,\r\n} from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { toast } from 'sonner';\r\nimport { OrderForm, type OrderFormData } from '@/components/order/OrderForm';\r\nimport { DeadlineCountdown } from '@/components/order/DeadlineCountdown';\r\nimport { OrderTimeline } from '@/components/order/OrderTimeline';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    Tooltip,\r\n    TooltipContent,\r\n    TooltipProvider,\r\n    TooltipTrigger,\r\n} from '@/components/ui/tooltip';\r\nimport { format } from 'date-fns';\r\nimport { DateTimePicker } from '@/components/shared/DateTimePicker';\r\nimport { cn } from '@/lib/utils';\r\nimport { useSession } from '@/lib/auth-client';\r\n\r\nconst statusColors: Record<OrderStatus, string> = {\r\n    pending: 'bg-yellow-500/20 text-yellow-700 dark:text-yellow-400',\r\n    in_progress: 'bg-blue-500/20 text-blue-700 dark:text-blue-400',\r\n    quality_check: 'bg-purple-500/20 text-purple-700 dark:text-purple-400',\r\n    revision: 'bg-orange-500/20 text-orange-700 dark:text-orange-400',\r\n    completed: 'bg-green-500/20 text-green-700 dark:text-green-400',\r\n    delivered: 'bg-emerald-500/20 text-emerald-700 dark:text-emerald-400',\r\n    cancelled: 'bg-red-500/20 text-red-700 dark:text-red-400',\r\n};\r\n\r\nconst priorityColors: Record<OrderPriority, string> = {\r\n    low: 'bg-muted text-muted-foreground',\r\n    normal: 'bg-blue-500/20 text-blue-700 dark:text-blue-400',\r\n    high: 'bg-orange-500/20 text-orange-700 dark:text-orange-400',\r\n    urgent: 'bg-red-500/20 text-red-700 dark:text-red-400',\r\n};\r\n\r\n// Status workflow: defines which statuses can transition to which\r\n// Key = current status, Value = array of allowed next statuses\r\nconst statusWorkflow: Record<OrderStatus, OrderStatus[]> = {\r\n    pending: ['in_progress', 'cancelled'],\r\n    in_progress: ['quality_check', 'revision', 'cancelled'],\r\n    quality_check: ['completed', 'revision', 'in_progress'],\r\n    revision: ['in_progress', 'cancelled'],\r\n    completed: ['delivered', 'revision'],\r\n    delivered: [], // Final state - no transitions allowed\r\n    cancelled: [], // Final state - no transitions allowed\r\n};\r\n\r\n// Helper function to check if a status transition is allowed\r\nconst canTransitionTo = (\r\n    currentStatus: OrderStatus,\r\n    targetStatus: OrderStatus,\r\n): boolean => {\r\n    if (currentStatus === targetStatus) return false; // Can't transition to same status\r\n    return statusWorkflow[currentStatus]?.includes(targetStatus) || false;\r\n};\r\n\r\ninterface ApiErrorResponse {\r\n    data?: {\r\n        message?: string;\r\n        errors?: Record<string, string[]>;\r\n    };\r\n}\r\n\r\nexport default function OrdersPage() {\r\n    const { data: session } = useSession();\r\n    const [page, setPage] = useState(1);\r\n    const [filters, setFilters] = useState<OrderFilters>({\r\n        search: '',\r\n        status: undefined,\r\n        priority: undefined,\r\n        clientId: undefined,\r\n        limit: 10,\r\n    });\r\n    const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);\r\n    const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\r\n    const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\r\n    const [isViewDialogOpen, setIsViewDialogOpen] = useState(false);\r\n    const [isExtendDialogOpen, setIsExtendDialogOpen] = useState(false);\r\n    const [isRevisionDialogOpen, setIsRevisionDialogOpen] = useState(false);\r\n    const [isTimelineDialogOpen, setIsTimelineDialogOpen] = useState(false);\r\n    const [isStatusChangeDialogOpen, setIsStatusChangeDialogOpen] =\r\n        useState(false);\r\n    const [isBulkDeleteDialogOpen, setIsBulkDeleteDialogOpen] = useState(false);\r\n    const [isSelectionMode, setIsSelectionMode] = useState(false);\r\n    const [pendingStatusChange, setPendingStatusChange] = useState<{\r\n        orderId: string;\r\n        status: OrderStatus;\r\n    } | null>(null);\r\n    const [selectedOrder, setSelectedOrder] = useState<IOrder | null>(null);\r\n    const [selectedOrderIds, setSelectedOrderIds] = useState<Set<string>>(\r\n        new Set(),\r\n    );\r\n\r\n    const [serverErrors, setServerErrors] = useState<\r\n        Record<string, string[]> | undefined\r\n    >(undefined);\r\n    const [editDefaultValues, setEditDefaultValues] = useState<\r\n        OrderFormData | undefined\r\n    >(undefined);\r\n\r\n    // Extend deadline state\r\n    const [newDeadline, setNewDeadline] = useState<Date | undefined>(undefined);\r\n    const [extendReason, setExtendReason] = useState('');\r\n\r\n    // Revision state\r\n    const [revisionInstruction, setRevisionInstruction] = useState('');\r\n    const [statusChangeNote, setStatusChangeNote] = useState('');\r\n\r\n    // Date filter state\r\n    const [selectedMonth, setSelectedMonth] = useState<string>('');\r\n    const [selectedYear, setSelectedYear] = useState<string>('');\r\n    const [isBulkDeleting, setIsBulkDeleting] = useState(false);\r\n\r\n    // Queries\r\n    const { data: yearsData } = useGetOrderYearsQuery();\r\n    const sortedYears = useMemo(() => {\r\n        if (!yearsData?.data) {\r\n            const currentYear = new Date().getFullYear();\r\n            return Array.from(\r\n                { length: currentYear - 2020 + 2 },\r\n                (_, i) => 2020 + i,\r\n            );\r\n        }\r\n        return [...yearsData.data].sort((a, b) => b - a);\r\n    }, [yearsData]);\r\n\r\n    const months = [\r\n        { value: '1', label: 'January' },\r\n        { value: '2', label: 'February' },\r\n        { value: '3', label: 'March' },\r\n        { value: '4', label: 'April' },\r\n        { value: '5', label: 'May' },\r\n        { value: '6', label: 'June' },\r\n        { value: '7', label: 'July' },\r\n        { value: '8', label: 'August' },\r\n        { value: '9', label: 'September' },\r\n        { value: '10', label: 'October' },\r\n        { value: '11', label: 'November' },\r\n        { value: '12', label: 'December' },\r\n    ];\r\n\r\n    // Queries\r\n    const {\r\n        data: orderData,\r\n        isLoading,\r\n        isFetching,\r\n    } = useGetOrdersQuery({\r\n        ...filters,\r\n        page,\r\n        month: selectedMonth ? parseInt(selectedMonth) : undefined,\r\n        year: selectedYear ? parseInt(selectedYear) : undefined,\r\n    });\r\n    const { data: statsData } = useGetOrderStatsQuery();\r\n    const { data: clientsData } = useGetClientsQuery({ limit: 100 });\r\n\r\n    // Mutations\r\n    const [createOrder, { isLoading: isCreating }] = useCreateOrderMutation();\r\n    const [updateOrder, { isLoading: isUpdating }] = useUpdateOrderMutation();\r\n    const [deleteOrder, { isLoading: isDeleting }] = useDeleteOrderMutation();\r\n    const [updateOrderStatus, { isLoading: isUpdatingStatus }] =\r\n        useUpdateOrderStatusMutation();\r\n    const [extendDeadline, { isLoading: isExtending }] =\r\n        useExtendDeadlineMutation();\r\n    const [addRevision, { isLoading: isAddingRevision }] =\r\n        useAddRevisionMutation();\r\n    const [triggerGetAll, { isLoading: isLoadingAll }] =\r\n        useLazyGetOrdersQuery();\r\n\r\n    const orders = orderData?.data || [];\r\n    const meta = orderData?.meta;\r\n    const stats = statsData?.data;\r\n    const clients = clientsData?.clients || [];\r\n\r\n    // Get selected orders from IDs\r\n    const selectedOrders = useMemo(() => {\r\n        return orders.filter((order) => selectedOrderIds.has(order._id));\r\n    }, [orders, selectedOrderIds]);\r\n\r\n    // Check if all current page orders are selected\r\n    const allOrdersSelected = useMemo(() => {\r\n        return (\r\n            orders.length > 0 &&\r\n            orders.every((order) => selectedOrderIds.has(order._id))\r\n        );\r\n    }, [orders, selectedOrderIds]);\r\n\r\n    // Toggle single order selection\r\n    const toggleOrderSelection = (orderId: string) => {\r\n        setSelectedOrderIds((prev) => {\r\n            const newSet = new Set(prev);\r\n            if (newSet.has(orderId)) {\r\n                newSet.delete(orderId);\r\n            } else {\r\n                newSet.add(orderId);\r\n            }\r\n            return newSet;\r\n        });\r\n    };\r\n\r\n    // Toggle all orders on current page\r\n    const toggleAllOrders = (checked: boolean) => {\r\n        setSelectedOrderIds((prev) => {\r\n            const newSet = new Set(prev);\r\n            if (checked) {\r\n                orders.forEach((order) => newSet.add(order._id));\r\n            } else {\r\n                // If unchecking \"Select All Page\", we should probably clear specific page IDs\r\n                // But if \"All Total\" was selected, user expects to clear just this page?\r\n                // Standard behavior: Uncheck header = Uncheck all visible.\r\n                orders.forEach((order) => newSet.delete(order._id));\r\n            }\r\n            return newSet;\r\n        });\r\n    };\r\n\r\n    const handleSelectAllMatches = async () => {\r\n        if (!meta) return;\r\n        try {\r\n            const result = await triggerGetAll({\r\n                ...filters,\r\n                limit: meta.total,\r\n                month: selectedMonth ? parseInt(selectedMonth) : undefined,\r\n                year: selectedYear ? parseInt(selectedYear) : undefined,\r\n            }).unwrap();\r\n\r\n            if (result.data) {\r\n                const allIds = result.data.map((o) => o._id);\r\n                setSelectedOrderIds(new Set(allIds));\r\n                toast.success(`All ${allIds.length} orders selected`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to select all', error);\r\n            toast.error('Failed to select all orders');\r\n        }\r\n    };\r\n\r\n    // Clear selection and exit selection mode\r\n    const clearSelection = () => {\r\n        setSelectedOrderIds(new Set());\r\n        setIsSelectionMode(false);\r\n    };\r\n\r\n    const handleFilterChange = (\r\n        key: keyof OrderFilters,\r\n        value: string | number | undefined,\r\n    ) => {\r\n        setFilters((prev) => ({ ...prev, [key]: value || undefined }));\r\n        setPage(1);\r\n    };\r\n\r\n    const handleCreateOrder = async (data: OrderFormData) => {\r\n        setServerErrors(undefined);\r\n        try {\r\n            await createOrder(data).unwrap();\r\n            toast.success('Order created successfully');\r\n            setIsAddDialogOpen(false);\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            if (err?.data?.errors) {\r\n                setServerErrors(err.data.errors);\r\n            } else {\r\n                toast.error(err?.data?.message || 'Failed to create order');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleUpdateOrder = async (data: OrderFormData) => {\r\n        if (!selectedOrder) return;\r\n        setServerErrors(undefined);\r\n        try {\r\n            await updateOrder({\r\n                id: selectedOrder._id,\r\n                data,\r\n            }).unwrap();\r\n            toast.success('Order updated successfully');\r\n            setIsEditDialogOpen(false);\r\n            setSelectedOrder(null);\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            if (err?.data?.errors) {\r\n                setServerErrors(err.data.errors);\r\n            } else {\r\n                toast.error(err?.data?.message || 'Failed to update order');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteOrder = async () => {\r\n        if (!selectedOrder) return;\r\n        try {\r\n            await deleteOrder(selectedOrder._id).unwrap();\r\n            toast.success('Order deleted successfully');\r\n            setIsDeleteDialogOpen(false);\r\n            setSelectedOrder(null);\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            toast.error(err?.data?.message || 'Failed to delete order');\r\n        }\r\n    };\r\n\r\n    const handleBulkDeleteOrders = async () => {\r\n        if (selectedOrderIds.size === 0) return;\r\n        setIsBulkDeleting(true);\r\n        const orderIdsArray = Array.from(selectedOrderIds);\r\n\r\n        try {\r\n            const results = await Promise.allSettled(\r\n                orderIdsArray.map((id) => deleteOrder(id).unwrap()),\r\n            );\r\n\r\n            const successCount = results.filter(\r\n                (r) => r.status === 'fulfilled',\r\n            ).length;\r\n            const errorCount = results.filter(\r\n                (r) => r.status === 'rejected',\r\n            ).length;\r\n\r\n            if (successCount > 0) {\r\n                toast.success(`${successCount} order(s) deleted successfully`);\r\n            }\r\n            if (errorCount > 0) {\r\n                toast.error(`Failed to delete ${errorCount} order(s)`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Bulk delete error:', error);\r\n            toast.error('An unexpected error occurred during bulk deletion');\r\n        } finally {\r\n            setIsBulkDeleting(false);\r\n            setIsBulkDeleteDialogOpen(false);\r\n            clearSelection();\r\n        }\r\n    };\r\n\r\n    const handleStatusChange = async (\r\n        orderId: string,\r\n        newStatus: OrderStatus,\r\n    ) => {\r\n        // Guard against empty/undefined values\r\n        if (!newStatus) {\r\n            console.log('handleStatusChange - empty status, skipping');\r\n            return;\r\n        }\r\n\r\n        // If changing to revision, ask for optional instruction\r\n        if (newStatus === 'revision') {\r\n            setPendingStatusChange({ orderId, status: newStatus });\r\n            setStatusChangeNote('');\r\n            setIsStatusChangeDialogOpen(true);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await updateOrderStatus({\r\n                id: orderId,\r\n                data: { status: newStatus },\r\n            }).unwrap();\r\n            toast.success(\r\n                `Status updated to ${ORDER_STATUS_LABELS[newStatus]}`,\r\n            );\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            toast.error(err?.data?.message || 'Failed to update status');\r\n        }\r\n    };\r\n\r\n    const confirmStatusChange = async () => {\r\n        if (!pendingStatusChange) return;\r\n        try {\r\n            await updateOrderStatus({\r\n                id: pendingStatusChange.orderId,\r\n                data: {\r\n                    status: pendingStatusChange.status,\r\n                    note: statusChangeNote || undefined,\r\n                },\r\n            }).unwrap();\r\n            toast.success(\r\n                `Status updated to ${\r\n                    ORDER_STATUS_LABELS[pendingStatusChange.status]\r\n                }`,\r\n            );\r\n            setIsStatusChangeDialogOpen(false);\r\n            setPendingStatusChange(null);\r\n            setStatusChangeNote('');\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            toast.error(err?.data?.message || 'Failed to update status');\r\n        }\r\n    };\r\n\r\n    const handleExtendDeadline = async () => {\r\n        if (!selectedOrder || !newDeadline) return;\r\n        try {\r\n            await extendDeadline({\r\n                id: selectedOrder._id,\r\n                data: {\r\n                    newDeadline: newDeadline.toISOString(),\r\n                    reason: extendReason,\r\n                },\r\n            }).unwrap();\r\n            toast.success('Deadline extended successfully');\r\n            setIsExtendDialogOpen(false);\r\n            setNewDeadline(undefined);\r\n            setExtendReason('');\r\n            setSelectedOrder(null);\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            toast.error(err?.data?.message || 'Failed to extend deadline');\r\n        }\r\n    };\r\n\r\n    const handleAddRevision = async () => {\r\n        if (!selectedOrder || !revisionInstruction.trim()) return;\r\n        try {\r\n            await addRevision({\r\n                id: selectedOrder._id,\r\n                data: { instruction: revisionInstruction },\r\n            }).unwrap();\r\n            toast.success('Revision added successfully');\r\n            setIsRevisionDialogOpen(false);\r\n            setRevisionInstruction('');\r\n            setSelectedOrder(null);\r\n        } catch (error: unknown) {\r\n            const err = error as ApiErrorResponse;\r\n            toast.error(err?.data?.message || 'Failed to add revision');\r\n        }\r\n    };\r\n\r\n    const openEditDialog = (order: IOrder) => {\r\n        setSelectedOrder(order);\r\n        setServerErrors(undefined);\r\n        setEditDefaultValues({\r\n            orderName: order.orderName,\r\n            clientId: order.clientId._id,\r\n            orderDate: order.orderDate.split('T')[0],\r\n            deadline: order.deadline,\r\n            imageQuantity: order.imageQuantity,\r\n            perImagePrice: order.perImagePrice,\r\n            totalPrice: order.totalPrice,\r\n            services: order.services.map((s) => s._id),\r\n            returnFileFormat: order.returnFileFormat._id,\r\n            instruction: order.instruction || '',\r\n            priority: order.priority,\r\n            assignedTo: order.assignedTo?._id || '',\r\n            notes: order.notes || '',\r\n        });\r\n        setIsEditDialogOpen(true);\r\n    };\r\n\r\n    const openViewDialog = (order: IOrder) => {\r\n        setSelectedOrder(order);\r\n        setIsViewDialogOpen(true);\r\n    };\r\n\r\n    const openExtendDialog = (order: IOrder) => {\r\n        setSelectedOrder(order);\r\n        setNewDeadline(new Date(order.deadline));\r\n        setIsExtendDialogOpen(true);\r\n    };\r\n\r\n    const openRevisionDialog = (order: IOrder) => {\r\n        setSelectedOrder(order);\r\n        setIsRevisionDialogOpen(true);\r\n    };\r\n\r\n    const openTimelineDialog = (order: IOrder) => {\r\n        setSelectedOrder(order);\r\n        setIsTimelineDialogOpen(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Stats Cards - Row 1 */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                {/* Total Orders Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-slate-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-slate-500/5 hover:border-slate-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-slate-500/10 blur-2xl transition-all duration-300 group-hover:bg-slate-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-500/10 text-slate-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-slate-500/20\">\r\n                                <Package className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-slate-600 dark:text-slate-300\">\r\n                            {stats?.total || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Total Orders\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Pending Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-yellow-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-yellow-500/5 hover:border-yellow-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-yellow-500/10 blur-2xl transition-all duration-300 group-hover:bg-yellow-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-yellow-500/10 text-yellow-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-yellow-500/20\">\r\n                                <Clock className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-yellow-600 dark:text-yellow-400\">\r\n                            {stats?.pending || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Pending\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* In Progress Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-blue-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/5 hover:border-blue-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-blue-500/10 blur-2xl transition-all duration-300 group-hover:bg-blue-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10 text-blue-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-500/20\">\r\n                                <Loader className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-blue-600 dark:text-blue-400\">\r\n                            {stats?.inProgress || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            In Progress\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Quality Check Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-purple-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-purple-500/5 hover:border-purple-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-purple-500/10 blur-2xl transition-all duration-300 group-hover:bg-purple-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-purple-500/10 text-purple-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-purple-500/20\">\r\n                                <AlertCircle className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-purple-600 dark:text-purple-400\">\r\n                            {stats?.qualityCheck || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Quality Check\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Cards - Row 2 */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                {/* Revision Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-orange-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-orange-500/5 hover:border-orange-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-orange-500/10 blur-2xl transition-all duration-300 group-hover:bg-orange-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-orange-500/10 text-orange-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-orange-500/20\">\r\n                                <RotateCcw className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-orange-600 dark:text-orange-400\">\r\n                            {stats?.revision || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Revision\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Completed Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-green-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/5 hover:border-green-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-green-500/10 blur-2xl transition-all duration-300 group-hover:bg-green-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-green-500/10 text-green-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-green-500/20\">\r\n                                <CheckCircle className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-green-600 dark:text-green-400\">\r\n                            {stats?.completed || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Completed\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Delivered Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-emerald-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-emerald-500/5 hover:border-emerald-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-emerald-500/10 blur-2xl transition-all duration-300 group-hover:bg-emerald-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-emerald-500/10 text-emerald-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-emerald-500/20\">\r\n                                <CheckCircle className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-emerald-600 dark:text-emerald-400\">\r\n                            {stats?.delivered || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Delivered\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Overdue Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-linear-to-br from-red-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-red-500/5 hover:border-red-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-red-500/10 blur-2xl transition-all duration-300 group-hover:bg-red-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-red-500/10 text-red-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-red-500/20\">\r\n                                <AlertTriangle className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        <h3 className=\"text-3xl font-bold tracking-tight text-red-600 dark:text-red-400\">\r\n                            {stats?.overdue || 0}\r\n                        </h3>\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Overdue\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Card */}\r\n            <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between\">\r\n                    <div>\r\n                        <CardTitle className=\"text-2xl\">\r\n                            Order Management\r\n                        </CardTitle>\r\n                        <CardDescription>\r\n                            Manage graphic design orders and track their status\r\n                        </CardDescription>\r\n                    </div>\r\n                    {session?.user?.role !== 'team_leader' && (\r\n                        <div className=\"flex gap-3\">\r\n                            {/* Select Mode Toggle Button */}\r\n                            {!isSelectionMode ? (\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    onClick={() => setIsSelectionMode(true)}\r\n                                >\r\n                                    <CheckSquare className=\" h-4 w-4\" />\r\n                                    Select\r\n                                </Button>\r\n                            ) : (\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    onClick={clearSelection}\r\n                                >\r\n                                    <X className=\" h-4 w-4\" />\r\n                                    Cancel\r\n                                </Button>\r\n                            )}\r\n                            <Button variant=\"outline\" asChild>\r\n                                <Link href=\"/orders/invoice\">\r\n                                    <FileText className=\" h-4 w-4\" />\r\n                                    Generate Invoice\r\n                                </Link>\r\n                            </Button>\r\n                            <Dialog\r\n                                open={isAddDialogOpen}\r\n                                onOpenChange={(open) => {\r\n                                    setIsAddDialogOpen(open);\r\n                                    if (!open) setServerErrors(undefined);\r\n                                }}\r\n                            >\r\n                                <DialogTrigger asChild>\r\n                                    <Button>\r\n                                        <Plus />\r\n                                        Add Order\r\n                                    </Button>\r\n                                </DialogTrigger>\r\n                                <DialogContent className=\"max-w-2xl! max-h-[90vh] overflow-y-auto\">\r\n                                    <DialogHeader>\r\n                                        <DialogTitle>\r\n                                            Create New Order\r\n                                        </DialogTitle>\r\n                                        <DialogDescription>\r\n                                            Fill in the order details\r\n                                        </DialogDescription>\r\n                                    </DialogHeader>\r\n                                    <OrderForm\r\n                                        onSubmit={handleCreateOrder}\r\n                                        isSubmitting={isCreating}\r\n                                        submitLabel=\"Create Order\"\r\n                                        onCancel={() =>\r\n                                            setIsAddDialogOpen(false)\r\n                                        }\r\n                                        serverErrors={serverErrors}\r\n                                    />\r\n                                </DialogContent>\r\n                            </Dialog>\r\n                        </div>\r\n                    )}\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-4\">\r\n                    {/* Filters */}\r\n                    <div className=\"rounded-xl border bg-muted/30 p-4\">\r\n                        <div className=\"flex items-center gap-2 mb-4\">\r\n                            <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <span className=\"text-sm font-medium\">Filters</span>\r\n                        </div>\r\n                        <TooltipProvider>\r\n                            <div className=\"flex flex-wrap gap-4 items-center\">\r\n                                {/* Search */}\r\n                                <div className=\"relative flex-1 min-w-[200px]\">\r\n                                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                                    <Input\r\n                                        placeholder=\"Search...\"\r\n                                        value={filters.search || ''}\r\n                                        onChange={(e) =>\r\n                                            handleFilterChange(\r\n                                                'search',\r\n                                                e.target.value,\r\n                                            )\r\n                                        }\r\n                                        className=\"pl-9 bg-background\"\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* Month Filter */}\r\n                                <Select\r\n                                    value={selectedMonth}\r\n                                    onValueChange={(value) => {\r\n                                        setSelectedMonth(value);\r\n                                        setPage(1);\r\n                                    }}\r\n                                >\r\n                                    <SelectTrigger className=\"bg-background w-[140px]\">\r\n                                        <SelectValue placeholder=\"All Months\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {months.map((month) => (\r\n                                            <SelectItem\r\n                                                key={month.value}\r\n                                                value={month.value}\r\n                                            >\r\n                                                {month.label}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n\r\n                                {/* Year Filter */}\r\n                                <Select\r\n                                    value={selectedYear}\r\n                                    onValueChange={(value) => {\r\n                                        setSelectedYear(value);\r\n                                        setPage(1);\r\n                                    }}\r\n                                >\r\n                                    <SelectTrigger className=\"bg-background w-[120px]\">\r\n                                        <SelectValue placeholder=\"All Years\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {sortedYears.map((year) => (\r\n                                            <SelectItem\r\n                                                key={year}\r\n                                                value={year.toString()}\r\n                                            >\r\n                                                {year}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n\r\n                                {/* Status Filter */}\r\n                                <Select\r\n                                    value={filters.status || ''}\r\n                                    onValueChange={(value) =>\r\n                                        handleFilterChange(\r\n                                            'status',\r\n                                            value as OrderStatus,\r\n                                        )\r\n                                    }\r\n                                >\r\n                                    <SelectTrigger className=\"bg-background w-[140px]\">\r\n                                        <SelectValue placeholder=\"All Statuses\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {Object.entries(\r\n                                            ORDER_STATUS_LABELS,\r\n                                        ).map(([value, label]) => (\r\n                                            <SelectItem\r\n                                                key={value}\r\n                                                value={value}\r\n                                            >\r\n                                                {label}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n\r\n                                {/* Priority Filter */}\r\n                                <Select\r\n                                    value={filters.priority || ''}\r\n                                    onValueChange={(value) =>\r\n                                        handleFilterChange(\r\n                                            'priority',\r\n                                            value as OrderPriority,\r\n                                        )\r\n                                    }\r\n                                >\r\n                                    <SelectTrigger className=\"bg-background w-[140px]\">\r\n                                        <SelectValue placeholder=\"All Priorities\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {Object.entries(\r\n                                            ORDER_PRIORITY_LABELS,\r\n                                        ).map(([value, label]) => (\r\n                                            <SelectItem\r\n                                                key={value}\r\n                                                value={value}\r\n                                            >\r\n                                                {label}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n\r\n                                {/* Client Filter */}\r\n                                <Select\r\n                                    value={filters.clientId || ''}\r\n                                    onValueChange={(value) =>\r\n                                        handleFilterChange('clientId', value)\r\n                                    }\r\n                                >\r\n                                    <SelectTrigger className=\"bg-background w-[140px]\">\r\n                                        <SelectValue placeholder=\"All Clients\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {clients.map((client) => (\r\n                                            <SelectItem\r\n                                                key={client._id}\r\n                                                value={client._id}\r\n                                            >\r\n                                                {client.name}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n\r\n                                {/* Clear Filters Button */}\r\n                                <Tooltip>\r\n                                    <TooltipTrigger asChild>\r\n                                        <Button\r\n                                            variant=\"outline\"\r\n                                            size=\"icon\"\r\n                                            onClick={() => {\r\n                                                setFilters({\r\n                                                    search: '',\r\n                                                    status: undefined,\r\n                                                    priority: undefined,\r\n                                                    clientId: undefined,\r\n                                                    limit: 10,\r\n                                                });\r\n                                                setSelectedMonth('');\r\n                                                setSelectedYear('');\r\n                                                setPage(1);\r\n                                            }}\r\n                                            className=\"bg-background\"\r\n                                        >\r\n                                            <X className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </TooltipTrigger>\r\n                                    <TooltipContent>\r\n                                        <p>Clear Filters</p>\r\n                                    </TooltipContent>\r\n                                </Tooltip>\r\n                            </div>\r\n                        </TooltipProvider>\r\n                    </div>\r\n\r\n                    {/* Selection Action Bar */}\r\n                    {isSelectionMode && (\r\n                        <div className=\"flex items-center justify-between p-3 rounded-lg border bg-primary/5 border-primary/20\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <span className=\"text-sm font-medium\">\r\n                                    {selectedOrderIds.size} order\r\n                                    {selectedOrderIds.size !== 1\r\n                                        ? 's'\r\n                                        : ''}{' '}\r\n                                    selected\r\n                                </span>\r\n                                {selectedOrderIds.size > 0 && (\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        size=\"sm\"\r\n                                        onClick={() =>\r\n                                            setSelectedOrderIds(new Set())\r\n                                        }\r\n                                        className=\"h-7 text-xs\"\r\n                                    >\r\n                                        <X className=\"h-3 w-3 mr-1\" />\r\n                                        Clear Selection\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Button\r\n                                    variant=\"destructive\"\r\n                                    size=\"sm\"\r\n                                    onClick={() =>\r\n                                        setIsBulkDeleteDialogOpen(true)\r\n                                    }\r\n                                    disabled={selectedOrderIds.size === 0}\r\n                                >\r\n                                    <Trash2 className=\"h-4 w-4 mr-1\" />\r\n                                    Delete ({selectedOrderIds.size})\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Select All Matching Banner */}\r\n                    {isSelectionMode &&\r\n                        allOrdersSelected &&\r\n                        meta &&\r\n                        meta.total > selectedOrderIds.size && (\r\n                            <div className=\"flex items-center justify-center p-2 bg-blue-50/50 dark:bg-blue-950/20 border border-blue-100 dark:border-blue-900 rounded-lg text-sm text-blue-600 dark:text-blue-400\">\r\n                                <span>\r\n                                    All {orders.length} orders on this page are\r\n                                    selected.\r\n                                </span>\r\n                                <Button\r\n                                    variant=\"link\"\r\n                                    className=\"ml-2 h-auto p-0 font-semibold\"\r\n                                    onClick={handleSelectAllMatches}\r\n                                    disabled={isLoadingAll}\r\n                                >\r\n                                    {isLoadingAll ? (\r\n                                        <>\r\n                                            <Loader className=\" h-3 w-3 animate-spin\" />\r\n                                            Selecting all {meta.total} orders...\r\n                                        </>\r\n                                    ) : (\r\n                                        `Select all ${meta.total} orders`\r\n                                    )}\r\n                                </Button>\r\n                            </div>\r\n                        )}\r\n\r\n                    {/* Table */}\r\n                    <div className=\"border\">\r\n                        {isLoading ? (\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Name\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Client\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Time Left\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Qty\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Total\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Status\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Priority\r\n                                        </TableHead>\r\n                                        <TableHead>Actions</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {[...Array(5)].map((_, i) => (\r\n                                        <TableRow key={i}>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-32\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-24\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-16\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-10\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-4 w-16\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-6 w-20\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <Skeleton className=\"h-6 w-16\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <div className=\"flex gap-1\">\r\n                                                    <Skeleton className=\"h-8 w-8\" />\r\n                                                    <Skeleton className=\"h-8 w-8\" />\r\n                                                    <Skeleton className=\"h-8 w-8\" />\r\n                                                </div>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        ) : (\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow>\r\n                                        {isSelectionMode && (\r\n                                            <TableHead className=\"border-r w-[50px]\">\r\n                                                <Checkbox\r\n                                                    checked={allOrdersSelected}\r\n                                                    onCheckedChange={(\r\n                                                        checked,\r\n                                                    ) =>\r\n                                                        toggleAllOrders(\r\n                                                            !!checked,\r\n                                                        )\r\n                                                    }\r\n                                                    aria-label=\"Select all orders\"\r\n                                                />\r\n                                            </TableHead>\r\n                                        )}\r\n                                        <TableHead className=\"border-r\">\r\n                                            Order Date\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Client\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Name\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Time Left\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Qty\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Total\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r text-center\">\r\n                                            Status\r\n                                        </TableHead>\r\n                                        <TableHead className=\"border-r\">\r\n                                            Priority\r\n                                        </TableHead>\r\n                                        <TableHead className=\"text-center\">\r\n                                            Actions\r\n                                        </TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {orders.length === 0 ? (\r\n                                        <TableRow>\r\n                                            <TableCell\r\n                                                colSpan={\r\n                                                    isSelectionMode ? 10 : 9\r\n                                                }\r\n                                                className=\"text-center py-8 text-muted-foreground\"\r\n                                            >\r\n                                                No orders found\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ) : (\r\n                                        orders.map((order: IOrder) => (\r\n                                            <TableRow\r\n                                                key={order._id}\r\n                                                className={cn(\r\n                                                    isSelectionMode &&\r\n                                                        selectedOrderIds.has(\r\n                                                            order._id,\r\n                                                        ) &&\r\n                                                        'bg-muted/50',\r\n                                                )}\r\n                                            >\r\n                                                {isSelectionMode && (\r\n                                                    <TableCell className=\"border-r\">\r\n                                                        <Checkbox\r\n                                                            checked={selectedOrderIds.has(\r\n                                                                order._id,\r\n                                                            )}\r\n                                                            onCheckedChange={() =>\r\n                                                                toggleOrderSelection(\r\n                                                                    order._id,\r\n                                                                )\r\n                                                            }\r\n                                                            aria-label={`Select ${order.orderName}`}\r\n                                                        />\r\n                                                    </TableCell>\r\n                                                )}\r\n                                                <TableCell className=\"border-r\">\r\n                                                    {format(\r\n                                                        new Date(\r\n                                                            order.orderDate,\r\n                                                        ),\r\n                                                        'PPP',\r\n                                                    )}\r\n                                                </TableCell>\r\n                                                <TableCell className=\"border-r\">\r\n                                                    <div className=\"flex flex-col\">\r\n                                                        <span className=\"font-medium\">\r\n                                                            {\r\n                                                                order.clientId\r\n                                                                    ?.name\r\n                                                            }\r\n                                                        </span>\r\n                                                        <span className=\"text-xs text-muted-foreground\">\r\n                                                            {\r\n                                                                order.clientId\r\n                                                                    ?.clientId\r\n                                                            }\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </TableCell>\r\n                                                <TableCell className=\"border-r font-medium max-w-[200px] truncate\">\r\n                                                    {order.orderName}\r\n                                                    {order.revisionCount >\r\n                                                        0 && (\r\n                                                        <Badge\r\n                                                            variant=\"outline\"\r\n                                                            className=\"ml-2 text-xs\"\r\n                                                        >\r\n                                                            R\r\n                                                            {\r\n                                                                order.revisionCount\r\n                                                            }\r\n                                                        </Badge>\r\n                                                    )}\r\n                                                </TableCell>\r\n                                                <TableCell className=\"border-r\">\r\n                                                    <DeadlineCountdown\r\n                                                        deadline={\r\n                                                            order.deadline\r\n                                                        }\r\n                                                        status={order.status}\r\n                                                    />\r\n                                                </TableCell>\r\n                                                <TableCell className=\"border-r text-center\">\r\n                                                    {order.imageQuantity}\r\n                                                </TableCell>\r\n                                                <TableCell className=\"border-r\">\r\n                                                    $\r\n                                                    {order.totalPrice.toFixed(\r\n                                                        2,\r\n                                                    )}\r\n                                                </TableCell>\r\n                                                <TableCell className=\"border-r flex items-center justify-center w-auto\">\r\n                                                    <Select\r\n                                                        value={order.status}\r\n                                                        onValueChange={(\r\n                                                            value,\r\n                                                        ) =>\r\n                                                            handleStatusChange(\r\n                                                                order._id,\r\n                                                                value as OrderStatus,\r\n                                                            )\r\n                                                        }\r\n                                                        disabled={\r\n                                                            isUpdatingStatus ||\r\n                                                            statusWorkflow[\r\n                                                                order.status\r\n                                                            ].length === 0\r\n                                                        }\r\n                                                    >\r\n                                                        <SelectTrigger\r\n                                                            className={cn(\r\n                                                                statusColors[\r\n                                                                    order.status\r\n                                                                ],\r\n                                                            )}\r\n                                                        >\r\n                                                            <SelectValue />\r\n                                                        </SelectTrigger>\r\n                                                        <SelectContent>\r\n                                                            {Object.entries(\r\n                                                                ORDER_STATUS_LABELS,\r\n                                                            ).map(\r\n                                                                ([\r\n                                                                    value,\r\n                                                                    label,\r\n                                                                ]) => (\r\n                                                                    <SelectItem\r\n                                                                        key={\r\n                                                                            value\r\n                                                                        }\r\n                                                                        value={\r\n                                                                            value\r\n                                                                        }\r\n                                                                        disabled={\r\n                                                                            !canTransitionTo(\r\n                                                                                order.status,\r\n                                                                                value as OrderStatus,\r\n                                                                            )\r\n                                                                        }\r\n                                                                    >\r\n                                                                        {label}\r\n                                                                    </SelectItem>\r\n                                                                ),\r\n                                                            )}\r\n                                                        </SelectContent>\r\n                                                    </Select>\r\n                                                </TableCell>\r\n                                                <TableCell className=\"border-r\">\r\n                                                    <span\r\n                                                        className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                                                            priorityColors[\r\n                                                                order.priority\r\n                                                            ]\r\n                                                        }`}\r\n                                                    >\r\n                                                        {\r\n                                                            ORDER_PRIORITY_LABELS[\r\n                                                                order.priority\r\n                                                            ]\r\n                                                        }\r\n                                                    </span>\r\n                                                </TableCell>\r\n                                                <TableCell className=\"w-auto\">\r\n                                                    <TooltipProvider>\r\n                                                        <div className=\"flex items-center justify-center gap-1\">\r\n                                                            <Tooltip>\r\n                                                                <TooltipTrigger\r\n                                                                    asChild\r\n                                                                >\r\n                                                                    <Button\r\n                                                                        variant=\"ghost\"\r\n                                                                        size=\"icon\"\r\n                                                                        onClick={() =>\r\n                                                                            openViewDialog(\r\n                                                                                order,\r\n                                                                            )\r\n                                                                        }\r\n                                                                    >\r\n                                                                        <Eye className=\"h-4 w-4\" />\r\n                                                                    </Button>\r\n                                                                </TooltipTrigger>\r\n                                                                <TooltipContent>\r\n                                                                    <p>View</p>\r\n                                                                </TooltipContent>\r\n                                                            </Tooltip>\r\n                                                            <Tooltip>\r\n                                                                <TooltipTrigger\r\n                                                                    asChild\r\n                                                                >\r\n                                                                    <Button\r\n                                                                        variant=\"ghost\"\r\n                                                                        size=\"icon\"\r\n                                                                        onClick={() =>\r\n                                                                            openEditDialog(\r\n                                                                                order,\r\n                                                                            )\r\n                                                                        }\r\n                                                                    >\r\n                                                                        <Edit2 className=\"h-4 w-4\" />\r\n                                                                    </Button>\r\n                                                                </TooltipTrigger>\r\n                                                                <TooltipContent>\r\n                                                                    <p>Edit</p>\r\n                                                                </TooltipContent>\r\n                                                            </Tooltip>\r\n                                                            <Tooltip>\r\n                                                                <TooltipTrigger\r\n                                                                    asChild\r\n                                                                >\r\n                                                                    <Button\r\n                                                                        variant=\"ghost\"\r\n                                                                        size=\"icon\"\r\n                                                                        onClick={() =>\r\n                                                                            openExtendDialog(\r\n                                                                                order,\r\n                                                                            )\r\n                                                                        }\r\n                                                                    >\r\n                                                                        <Calendar className=\"h-4 w-4\" />\r\n                                                                    </Button>\r\n                                                                </TooltipTrigger>\r\n                                                                <TooltipContent>\r\n                                                                    <p>\r\n                                                                        Extend\r\n                                                                        Deadline\r\n                                                                    </p>\r\n                                                                </TooltipContent>\r\n                                                            </Tooltip>\r\n                                                            <Tooltip>\r\n                                                                <TooltipTrigger\r\n                                                                    asChild\r\n                                                                >\r\n                                                                    <Button\r\n                                                                        variant=\"ghost\"\r\n                                                                        size=\"icon\"\r\n                                                                        onClick={() =>\r\n                                                                            openRevisionDialog(\r\n                                                                                order,\r\n                                                                            )\r\n                                                                        }\r\n                                                                    >\r\n                                                                        <RotateCcw className=\"h-4 w-4\" />\r\n                                                                    </Button>\r\n                                                                </TooltipTrigger>\r\n                                                                <TooltipContent>\r\n                                                                    <p>\r\n                                                                        Add\r\n                                                                        Revision\r\n                                                                    </p>\r\n                                                                </TooltipContent>\r\n                                                            </Tooltip>\r\n                                                            <Tooltip>\r\n                                                                <TooltipTrigger\r\n                                                                    asChild\r\n                                                                >\r\n                                                                    <Button\r\n                                                                        variant=\"ghost\"\r\n                                                                        size=\"icon\"\r\n                                                                        onClick={() =>\r\n                                                                            openTimelineDialog(\r\n                                                                                order,\r\n                                                                            )\r\n                                                                        }\r\n                                                                    >\r\n                                                                        <History className=\"h-4 w-4\" />\r\n                                                                    </Button>\r\n                                                                </TooltipTrigger>\r\n                                                                <TooltipContent>\r\n                                                                    <p>\r\n                                                                        View\r\n                                                                        Timeline\r\n                                                                    </p>\r\n                                                                </TooltipContent>\r\n                                                            </Tooltip>\r\n                                                            <Tooltip>\r\n                                                                <TooltipTrigger\r\n                                                                    asChild\r\n                                                                >\r\n                                                                    <Button\r\n                                                                        variant=\"ghost\"\r\n                                                                        size=\"icon\"\r\n                                                                        onClick={() => {\r\n                                                                            setSelectedOrder(\r\n                                                                                order,\r\n                                                                            );\r\n                                                                            setIsDeleteDialogOpen(\r\n                                                                                true,\r\n                                                                            );\r\n                                                                        }}\r\n                                                                    >\r\n                                                                        <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                                                                    </Button>\r\n                                                                </TooltipTrigger>\r\n                                                                <TooltipContent>\r\n                                                                    <p>\r\n                                                                        Delete\r\n                                                                    </p>\r\n                                                                </TooltipContent>\r\n                                                            </Tooltip>\r\n                                                        </div>\r\n                                                    </TooltipProvider>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        ))\r\n                                    )}\r\n                                </TableBody>\r\n                            </Table>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Pagination */}\r\n                    {meta && (\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-6\">\r\n                                <div className=\"text-sm text-muted-foreground\">\r\n                                    Page {meta.page} of{' '}\r\n                                    {Math.max(1, meta.totalPages)} ({meta.total}{' '}\r\n                                    total)\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <p className=\"text-sm font-medium\">\r\n                                        Rows per page\r\n                                    </p>\r\n                                    <Select\r\n                                        value={`${filters.limit || 10}`}\r\n                                        onValueChange={(value) => {\r\n                                            handleFilterChange(\r\n                                                'limit',\r\n                                                Number(value),\r\n                                            );\r\n                                        }}\r\n                                    >\r\n                                        <SelectTrigger className=\"h-8 w-[70px]\">\r\n                                            <SelectValue\r\n                                                placeholder={\r\n                                                    filters.limit || 10\r\n                                                }\r\n                                            />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent side=\"top\">\r\n                                            {[10, 20, 30, 40, 50].map(\r\n                                                (pageSize) => (\r\n                                                    <SelectItem\r\n                                                        key={pageSize}\r\n                                                        value={`${pageSize}`}\r\n                                                    >\r\n                                                        {pageSize}\r\n                                                    </SelectItem>\r\n                                                ),\r\n                                            )}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-2\">\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"sm\"\r\n                                    onClick={() =>\r\n                                        setPage((p) => Math.max(1, p - 1))\r\n                                    }\r\n                                    disabled={page === 1 || isFetching}\r\n                                >\r\n                                    <ChevronLeft className=\"h-4 w-4 \" />\r\n                                    Previous\r\n                                </Button>\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"sm\"\r\n                                    onClick={() =>\r\n                                        setPage((p) =>\r\n                                            Math.min(meta.totalPages, p + 1),\r\n                                        )\r\n                                    }\r\n                                    disabled={\r\n                                        page >= meta.totalPages || isFetching\r\n                                    }\r\n                                >\r\n                                    Next\r\n                                    <ChevronRight className=\"h-4 w-4 ml-2\" />\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Edit Dialog */}\r\n            <Dialog\r\n                open={isEditDialogOpen}\r\n                onOpenChange={(open) => {\r\n                    setIsEditDialogOpen(open);\r\n                    if (!open) setServerErrors(undefined);\r\n                }}\r\n            >\r\n                <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Edit Order</DialogTitle>\r\n                        <DialogDescription>\r\n                            Update the order details\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    {editDefaultValues && (\r\n                        <OrderForm\r\n                            key={selectedOrder?._id}\r\n                            defaultValues={editDefaultValues}\r\n                            onSubmit={handleUpdateOrder}\r\n                            isSubmitting={isUpdating}\r\n                            submitLabel=\"Update Order\"\r\n                            onCancel={() => setIsEditDialogOpen(false)}\r\n                            serverErrors={serverErrors}\r\n                            isEditMode={true}\r\n                        />\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* View Dialog */}\r\n            <Dialog open={isViewDialogOpen} onOpenChange={setIsViewDialogOpen}>\r\n                <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Order Details</DialogTitle>\r\n                        <DialogDescription>\r\n                            {selectedOrder?.orderName}\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    {selectedOrder && (\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Client\r\n                                    </p>\r\n                                    <p className=\"font-medium\">\r\n                                        {selectedOrder.clientId?.name}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Status\r\n                                    </p>\r\n                                    <Badge\r\n                                        className={\r\n                                            statusColors[selectedOrder.status]\r\n                                        }\r\n                                    >\r\n                                        {\r\n                                            ORDER_STATUS_LABELS[\r\n                                                selectedOrder.status\r\n                                            ]\r\n                                        }\r\n                                    </Badge>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Order Date\r\n                                    </p>\r\n                                    <p className=\"font-medium\">\r\n                                        {format(\r\n                                            new Date(selectedOrder.orderDate),\r\n                                            'MMM dd, yyyy',\r\n                                        )}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Deadline\r\n                                    </p>\r\n                                    <p className=\"font-medium\">\r\n                                        {format(\r\n                                            new Date(selectedOrder.deadline),\r\n                                            'MMM dd, yyyy h:mm a',\r\n                                        )}\r\n                                    </p>\r\n                                    {selectedOrder.originalDeadline && (\r\n                                        <p className=\"text-xs text-muted-foreground\">\r\n                                            Original:{' '}\r\n                                            {format(\r\n                                                new Date(\r\n                                                    selectedOrder.originalDeadline,\r\n                                                ),\r\n                                                'MMM dd, yyyy',\r\n                                            )}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Image Quantity\r\n                                    </p>\r\n                                    <p className=\"font-medium\">\r\n                                        {selectedOrder.imageQuantity}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Total Price\r\n                                    </p>\r\n                                    <p className=\"font-medium text-lg\">\r\n                                        ${selectedOrder.totalPrice.toFixed(2)}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Revisions\r\n                                    </p>\r\n                                    <p className=\"font-medium\">\r\n                                        {selectedOrder.revisionCount}\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Priority\r\n                                    </p>\r\n                                    <Badge\r\n                                        className={\r\n                                            priorityColors[\r\n                                                selectedOrder.priority\r\n                                            ]\r\n                                        }\r\n                                    >\r\n                                        {\r\n                                            ORDER_PRIORITY_LABELS[\r\n                                                selectedOrder.priority\r\n                                            ]\r\n                                        }\r\n                                    </Badge>\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                    Services\r\n                                </p>\r\n                                <div className=\"flex flex-wrap gap-2 mt-1\">\r\n                                    {selectedOrder.services.map((service) => (\r\n                                        <Badge\r\n                                            key={service._id}\r\n                                            variant=\"outline\"\r\n                                        >\r\n                                            {service.name}\r\n                                        </Badge>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                            {selectedOrder.instruction && (\r\n                                <div>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Instructions\r\n                                    </p>\r\n                                    <p className=\"text-sm bg-muted p-3 rounded-md mt-1\">\r\n                                        {selectedOrder.instruction}\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                            {selectedOrder.revisionInstructions &&\r\n                                selectedOrder.revisionInstructions.length >\r\n                                    0 && (\r\n                                    <div>\r\n                                        <p className=\"text-sm text-muted-foreground mb-2\">\r\n                                            Revision Instructions\r\n                                        </p>\r\n                                        <div className=\"space-y-2\">\r\n                                            {selectedOrder.revisionInstructions.map(\r\n                                                (rev, idx) => (\r\n                                                    <div\r\n                                                        key={idx}\r\n                                                        className=\"text-sm bg-orange-500/10 dark:bg-orange-500/20 p-3 rounded-md border border-orange-500/30\"\r\n                                                    >\r\n                                                        <p>{rev.instruction}</p>\r\n                                                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                                                            {format(\r\n                                                                new Date(\r\n                                                                    rev.createdAt,\r\n                                                                ),\r\n                                                                'MMM dd, yyyy h:mm a',\r\n                                                            )}{' '}\r\n                                                            by Admin\r\n                                                        </p>\r\n                                                    </div>\r\n                                                ),\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                        </div>\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Extend Deadline Dialog */}\r\n            <Dialog\r\n                open={isExtendDialogOpen}\r\n                onOpenChange={(open) => {\r\n                    setIsExtendDialogOpen(open);\r\n                    if (!open) {\r\n                        setNewDeadline(undefined);\r\n                        setExtendReason('');\r\n                    }\r\n                }}\r\n            >\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Extend Deadline</DialogTitle>\r\n                        <DialogDescription>\r\n                            Set a new deadline for this order\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        <DateTimePicker\r\n                            label=\"New Deadline\"\r\n                            value={newDeadline}\r\n                            onChange={setNewDeadline}\r\n                            placeholder=\"Select new deadline\"\r\n                        />\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Reason (optional)</Label>\r\n                            <Textarea\r\n                                value={extendReason}\r\n                                onChange={(e) =>\r\n                                    setExtendReason(e.target.value)\r\n                                }\r\n                                placeholder=\"Why is the deadline being extended?\"\r\n                                rows={3}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => setIsExtendDialogOpen(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleExtendDeadline}\r\n                            disabled={!newDeadline || isExtending}\r\n                        >\r\n                            {isExtending && (\r\n                                <Loader className=\"h-4 w-4  animate-spin\" />\r\n                            )}\r\n                            Extend Deadline\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Add Revision Dialog */}\r\n            <Dialog\r\n                open={isRevisionDialogOpen}\r\n                onOpenChange={(open) => {\r\n                    setIsRevisionDialogOpen(open);\r\n                    if (!open) setRevisionInstruction('');\r\n                }}\r\n            >\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Add Revision</DialogTitle>\r\n                        <DialogDescription>\r\n                            Add revision instructions for this order\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Revision Instructions *</Label>\r\n                            <Textarea\r\n                                value={revisionInstruction}\r\n                                onChange={(e) =>\r\n                                    setRevisionInstruction(e.target.value)\r\n                                }\r\n                                placeholder=\"Describe what needs to be revised...\"\r\n                                rows={4}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => setIsRevisionDialogOpen(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleAddRevision}\r\n                            disabled={\r\n                                !revisionInstruction.trim() || isAddingRevision\r\n                            }\r\n                        >\r\n                            {isAddingRevision && (\r\n                                <Loader className=\"h-4 w-4  animate-spin\" />\r\n                            )}\r\n                            Add Revision\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Timeline Dialog */}\r\n            <Dialog\r\n                open={isTimelineDialogOpen}\r\n                onOpenChange={setIsTimelineDialogOpen}\r\n            >\r\n                <DialogContent className=\"max-w-lg\">\r\n                    <DialogHeader>\r\n                        <DialogTitle>Order Timeline</DialogTitle>\r\n                        <DialogDescription>\r\n                            {selectedOrder?.orderName}\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    {selectedOrder && selectedOrder.timeline && (\r\n                        <OrderTimeline timeline={selectedOrder.timeline} />\r\n                    )}\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Status Change Dialog (for revision) */}\r\n            <Dialog\r\n                open={isStatusChangeDialogOpen}\r\n                onOpenChange={(open) => {\r\n                    setIsStatusChangeDialogOpen(open);\r\n                    if (!open) {\r\n                        setPendingStatusChange(null);\r\n                        setStatusChangeNote('');\r\n                    }\r\n                }}\r\n            >\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Change to Revision</DialogTitle>\r\n                        <DialogDescription>\r\n                            Add optional revision instructions for the client\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Revision Instructions (optional)</Label>\r\n                            <Textarea\r\n                                value={statusChangeNote}\r\n                                onChange={(e) =>\r\n                                    setStatusChangeNote(e.target.value)\r\n                                }\r\n                                placeholder=\"What needs to be revised...\"\r\n                                rows={4}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <DialogFooter>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            onClick={() => setIsStatusChangeDialogOpen(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={confirmStatusChange}\r\n                            disabled={isUpdatingStatus}\r\n                        >\r\n                            {isUpdatingStatus && (\r\n                                <Loader className=\"h-4 w-4  animate-spin\" />\r\n                            )}\r\n                            Set to Revision\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            {/* Delete Confirmation */}\r\n            <AlertDialog\r\n                open={isDeleteDialogOpen}\r\n                onOpenChange={setIsDeleteDialogOpen}\r\n            >\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete Order</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Are you sure you want to delete order{' '}\r\n                            <strong>{selectedOrder?.orderName}</strong>? This\r\n                            action cannot be undone.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={handleDeleteOrder}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                            disabled={isDeleting}\r\n                        >\r\n                            {isDeleting && (\r\n                                <Loader className=\"h-4 w-4  animate-spin\" />\r\n                            )}\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            {/* Bulk Delete Confirmation */}\r\n            <AlertDialog\r\n                open={isBulkDeleteDialogOpen}\r\n                onOpenChange={setIsBulkDeleteDialogOpen}\r\n            >\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>\r\n                            Delete Selected Orders\r\n                        </AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Are you sure you want to delete{' '}\r\n                            <strong>{selectedOrderIds.size}</strong> selected\r\n                            order\r\n                            {selectedOrderIds.size !== 1 ? 's' : ''}? This\r\n                            action cannot be undone.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={(e) => {\r\n                                e.preventDefault();\r\n                                handleBulkDeleteOrders();\r\n                            }}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                            disabled={isBulkDeleting}\r\n                        >\r\n                            {isBulkDeleting && (\r\n                                <Loader className=\"h-4 w-4  animate-spin\" />\r\n                            )}\r\n                            Delete {selectedOrderIds.size} Order\r\n                            {selectedOrderIds.size !== 1 ? 's' : ''}\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\overtime\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\overtime\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\payroll\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\payroll\\payroll-client.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\profit-share\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\profit-share\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\shifting\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\[id]\\_components\\attendance-tab.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2532,2535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2532,2535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useGetAllAttendanceQuery } from '@/redux/features/attendance/attendanceApi';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\n\r\nexport function StaffAttendanceTab({ staffId }: { staffId: string }) {\r\n    const [page, setPage] = useState(1);\r\n    const [limit, setLimit] = useState(20);\r\n\r\n    const { data, isLoading, isFetching } = useGetAllAttendanceQuery({\r\n        staffId,\r\n        page,\r\n        limit,\r\n    });\r\n\r\n    const attendances = data?.data?.records || [];\r\n    const pagination = data?.data?.pagination;\r\n\r\n    const getStatusVariant = (status: string) => {\r\n        switch (status) {\r\n            case 'present':\r\n                return 'default';\r\n            case 'absent':\r\n                return 'destructive';\r\n            case 'late':\r\n                return 'secondary'; // yellow-ish usually, but shadcn secondary is gray\r\n            case 'leave':\r\n                return 'outline';\r\n            default:\r\n                return 'outline';\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"space-y-4\">\r\n                {[1, 2, 3].map((i) => (\r\n                    <Skeleton key={i} className=\"h-12 w-full\" />\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (attendances.length === 0) {\r\n        return (\r\n            <div className=\"text-center py-8 text-muted-foreground\">\r\n                No attendance records found.\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            <Table>\r\n                <TableHeader>\r\n                    <TableRow>\r\n                        <TableHead>Date</TableHead>\r\n                        <TableHead>Check In</TableHead>\r\n                        <TableHead>Check Out</TableHead>\r\n                        <TableHead>Status</TableHead>\r\n                        <TableHead>Total Time</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {attendances.map((rec: any) => (\r\n                        <TableRow key={rec._id}>\r\n                            <TableCell>\r\n                                {format(new Date(rec.date), 'PP')}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                {rec.checkInAt\r\n                                    ? format(\r\n                                          new Date(rec.checkInAt),\r\n                                          'hh:mm aa',\r\n                                      )\r\n                                    : '-'}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                {rec.checkOutAt\r\n                                    ? format(\r\n                                          new Date(rec.checkOutAt),\r\n                                          'hh:mm aa',\r\n                                      )\r\n                                    : '-'}\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                <Badge variant={getStatusVariant(rec.status)}>\r\n                                    {rec.status}\r\n                                </Badge>\r\n                            </TableCell>\r\n                            <TableCell>\r\n                                {rec.totalMinutes\r\n                                    ? `${Math.floor(rec.totalMinutes / 60)}h ${rec.totalMinutes % 60}m`\r\n                                    : '-'}\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))}\r\n                </TableBody>\r\n            </Table>\r\n\r\n            {/* Pagination */}\r\n            {pagination && (\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-6\">\r\n                        <div className=\"text-sm text-muted-foreground\">\r\n                            Page {pagination.page} of{' '}\r\n                            {Math.max(1, pagination.pages)} ({pagination.total}{' '}\r\n                            total)\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <p className=\"text-sm font-medium\">Rows per page</p>\r\n                            <Select\r\n                                value={`${limit}`}\r\n                                onValueChange={(value) => {\r\n                                    setLimit(Number(value));\r\n                                    setPage(1);\r\n                                }}\r\n                            >\r\n                                <SelectTrigger className=\"h-8 w-[70px]\">\r\n                                    <SelectValue placeholder={limit} />\r\n                                </SelectTrigger>\r\n                                <SelectContent side=\"top\">\r\n                                    {[10, 20, 30, 40, 50].map((pageSize) => (\r\n                                        <SelectItem\r\n                                            key={pageSize}\r\n                                            value={`${pageSize}`}\r\n                                        >\r\n                                            {pageSize}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n                            disabled={page === 1 || isFetching}\r\n                        >\r\n                            <ChevronLeft className=\"h-4 w-4\" />\r\n                            Previous\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            onClick={() =>\r\n                                setPage((p) =>\r\n                                    Math.min(pagination.pages, p + 1),\r\n                                )\r\n                            }\r\n                            disabled={page >= pagination.pages || isFetching}\r\n                        >\r\n                            Next\r\n                            <ChevronRight className=\"h-4 w-4 ml-2\" />\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\[id]\\_components\\overtime-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\[id]\\_components\\payment-history-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\[id]\\_components\\staff-leave-tab.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Avatar' is defined but never used.","line":26,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AvatarFallback' is defined but never used.","line":26,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AvatarImage' is defined but never used.","line":26,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader' is defined but never used.","line":28,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":36,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'format' is defined but never used.","line":48,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":123,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":123,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3210,3213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3210,3213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":265,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":265,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9637,9640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9637,9640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useGetStaffsQuery } from '@/redux/features/staff/staffApi';\r\nimport { useGetAllShiftsQuery } from '@/redux/features/shift/shiftApi';\r\nimport { useGetMetadataByTypeQuery } from '@/redux/features/metadata/metadataApi';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport {\r\n    Loader,\r\n    Search,\r\n    Eye,\r\n    User,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    ChevronsLeft,\r\n    ChevronsRight,\r\n    Filter,\r\n    X,\r\n} from 'lucide-react';\r\n\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport { format } from 'date-fns';\r\nimport { useDebounce } from '../../../hooks/use-debounce';\r\n\r\nconst statusColors: Record<string, string> = {\r\n    active: 'bg-green-500',\r\n    inactive: 'bg-red-500',\r\n    present: 'bg-green-500',\r\n    absent: 'bg-red-500',\r\n    late: 'bg-yellow-500',\r\n    half_day: 'bg-orange-500',\r\n    early_exit: 'bg-purple-500',\r\n    on_leave: 'bg-blue-500',\r\n    weekend: 'bg-gray-500',\r\n    holiday: 'bg-pink-500',\r\n};\r\n\r\nconst statusLabels: Record<string, string> = {\r\n    active: 'Active',\r\n    inactive: 'Inactive',\r\n    present: 'Present',\r\n    absent: 'Absent',\r\n    late: 'Late',\r\n    half_day: 'Half Day',\r\n    early_exit: 'Early Exit',\r\n    on_leave: 'On Leave',\r\n    weekend: 'Weekend',\r\n    holiday: 'Holiday',\r\n};\r\n\r\ninterface Staff {\r\n    _id: string;\r\n    staffId: string;\r\n    phone: string;\r\n    department: string;\r\n    designation: string;\r\n    joinDate: string;\r\n    status: string;\r\n    profileCompleted: boolean;\r\n    user?: {\r\n        _id: string;\r\n        name: string;\r\n        email: string;\r\n        image?: string;\r\n        role: string;\r\n    };\r\n    branch?: {\r\n        _id: string;\r\n        name: string;\r\n    };\r\n    todayAttendance?: {\r\n        status: string;\r\n        checkInAt?: string;\r\n        checkOutAt?: string;\r\n        lateMinutes?: number;\r\n    };\r\n    currentShift?: {\r\n        name: string;\r\n        startTime: string;\r\n        endTime: string;\r\n    };\r\n}\r\n\r\nexport default function StaffsPage() {\r\n    const [page, setPage] = useState(1);\r\n    const [limit, setLimit] = useState(20);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const debouncedSearch = useDebounce(searchQuery, 500);\r\n\r\n    // Filters\r\n    const [departmentFilter, setDepartmentFilter] = useState('');\r\n    const [designationFilter, setDesignationFilter] = useState('');\r\n    const [shiftFilter, setShiftFilter] = useState<string>('all');\r\n    const [statusFilter, setStatusFilter] = useState<string>('all');\r\n    const router = useRouter();\r\n\r\n    const queryParams: any = {\r\n        page,\r\n        limit,\r\n        search: debouncedSearch || undefined,\r\n        department: departmentFilter || undefined,\r\n        designation: designationFilter || undefined,\r\n        shiftId: shiftFilter !== 'all' ? shiftFilter : undefined,\r\n        status: statusFilter !== 'all' ? statusFilter : undefined,\r\n    };\r\n\r\n    const { data, isLoading, isFetching } = useGetStaffsQuery(queryParams);\r\n    const { data: shiftsData } = useGetAllShiftsQuery({});\r\n    const { data: departmentsData } = useGetMetadataByTypeQuery('department');\r\n    const { data: designationsData } = useGetMetadataByTypeQuery('designation');\r\n\r\n    const staffs: Staff[] = data?.staffs || [];\r\n    const meta = data?.meta;\r\n    const perPageOptions = [10, 20, 50, 100];\r\n    const shifts = shiftsData?.shifts || [];\r\n\r\n    const handleViewDetails = (staff: Staff) => {\r\n        router.push(`/staffs/${staff._id}`);\r\n    };\r\n\r\n    const getStatusBadge = (status?: string) => {\r\n        if (!status) {\r\n            return <Badge variant=\"outline\">No Record</Badge>;\r\n        }\r\n        return (\r\n            <Badge\r\n                className={`${statusColors[status] || 'bg-gray-400'} text-white hover:${statusColors[status]}`}\r\n            >\r\n                {statusLabels[status] || status}\r\n            </Badge>\r\n        );\r\n    };\r\n\r\n    const clearFilters = () => {\r\n        setSearchQuery('');\r\n        setDepartmentFilter('');\r\n        setDesignationFilter('');\r\n        setShiftFilter('all');\r\n        setStatusFilter('all');\r\n        setPage(1);\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-6 space-y-6\">\r\n            <Card>\r\n                <CardHeader>\r\n                    <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                        <div>\r\n                            <CardTitle>Staff Management</CardTitle>\r\n                            <CardDescription>\r\n                                View and manage staff members, attendance, and\r\n                                details.\r\n                            </CardDescription>\r\n                        </div>\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-6\">\r\n                    {/* Filters */}\r\n                    <div className=\"flex flex-wrap items-center gap-3 p-4 bg-muted/30 rounded-lg border border-border/50\">\r\n                        {/* Search */}\r\n                        <div className=\"relative w-full sm:w-72\">\r\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                            <Input\r\n                                placeholder=\"Search Name, ID...\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => {\r\n                                    setSearchQuery(e.target.value);\r\n                                    setPage(1);\r\n                                }}\r\n                                className=\"pl-9 h-9 bg-background/60\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Department Filter */}\r\n                        <Select\r\n                            value={departmentFilter}\r\n                            onValueChange={(v) => {\r\n                                setDepartmentFilter(v === 'all' ? '' : v);\r\n                                setPage(1);\r\n                            }}\r\n                        >\r\n                            <SelectTrigger className=\"w-full sm:w-40 h-9 bg-background/60\">\r\n                                <SelectValue placeholder=\"Department\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"all\">\r\n                                    All Departments\r\n                                </SelectItem>\r\n                                {departmentsData?.data?.map((dept) => (\r\n                                    <SelectItem\r\n                                        key={dept._id}\r\n                                        value={dept.value}\r\n                                    >\r\n                                        {dept.label}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {/* Designation Filter */}\r\n                        <Select\r\n                            value={designationFilter}\r\n                            onValueChange={(v) => {\r\n                                setDesignationFilter(v === 'all' ? '' : v);\r\n                                setPage(1);\r\n                            }}\r\n                        >\r\n                            <SelectTrigger className=\"w-full sm:w-40 h-9 bg-background/60\">\r\n                                <SelectValue placeholder=\"Designation\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"all\">\r\n                                    All Designations\r\n                                </SelectItem>\r\n                                {designationsData?.data?.map((desig) => (\r\n                                    <SelectItem\r\n                                        key={desig._id}\r\n                                        value={desig.value}\r\n                                    >\r\n                                        {desig.label}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {/* Shift Filter */}\r\n                        <Select\r\n                            value={shiftFilter}\r\n                            onValueChange={(v) => {\r\n                                setShiftFilter(v);\r\n                                setPage(1);\r\n                            }}\r\n                        >\r\n                            <SelectTrigger className=\"w-full sm:w-36 h-9 bg-background/60\">\r\n                                <SelectValue placeholder=\"Shift\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"all\">All Shifts</SelectItem>\r\n                                {shifts.map((shift: any) => (\r\n                                    <SelectItem\r\n                                        key={shift._id}\r\n                                        value={shift._id}\r\n                                    >\r\n                                        {shift.name} - {shift.title}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {/* Status Filter */}\r\n                        <Select\r\n                            value={statusFilter}\r\n                            onValueChange={(v) => {\r\n                                setStatusFilter(v);\r\n                                setPage(1);\r\n                            }}\r\n                        >\r\n                            <SelectTrigger className=\"w-full sm:w-36 h-9 bg-background/60\">\r\n                                <SelectValue placeholder=\"Status\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"all\">All Status</SelectItem>\r\n                                <SelectItem value=\"active\">Active</SelectItem>\r\n                                <SelectItem value=\"inactive\">\r\n                                    Inactive\r\n                                </SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n\r\n                        {(searchQuery ||\r\n                            departmentFilter ||\r\n                            designationFilter ||\r\n                            shiftFilter !== 'all' ||\r\n                            statusFilter !== 'all') && (\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={clearFilters}\r\n                                className=\"h-9 px-2 text-muted-foreground hover:text-foreground\"\r\n                            >\r\n                                <X className=\"h-4 w-4 mr-1\" />\r\n                                Clear\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"border rounded-lg overflow-hidden\">\r\n                        <Table>\r\n                            <TableHeader className=\"bg-muted/40\">\r\n                                <TableRow>\r\n                                    <TableHead>Staff Name</TableHead>\r\n                                    <TableHead>Staff ID</TableHead>\r\n                                    <TableHead>Department</TableHead>\r\n                                    <TableHead>Designation</TableHead>\r\n                                    <TableHead>Shift</TableHead>\r\n                                    <TableHead>Today Status</TableHead>\r\n                                    <TableHead>Action</TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {isLoading || isFetching ? (\r\n                                    [...Array(limit)].map((_, i) => (\r\n                                        <TableRow key={i}>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-32\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-20\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-24\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-24\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-8 w-full max-w-[150px]\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-6 w-20 rounded-full\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-8 w-16\" />\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))\r\n                                ) : staffs.length === 0 ? (\r\n                                    <TableRow>\r\n                                        <TableCell\r\n                                            colSpan={7}\r\n                                            className=\"text-center py-12 text-muted-foreground\"\r\n                                        >\r\n                                            <div className=\"flex flex-col items-center justify-center gap-2\">\r\n                                                <User className=\"h-8 w-8 opacity-20\" />\r\n                                                <p>\r\n                                                    No staff members found\r\n                                                    matching your criteria.\r\n                                                </p>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ) : (\r\n                                    staffs.map((staff) => (\r\n                                        <TableRow\r\n                                            key={staff._id}\r\n                                            className=\"hover:bg-muted/20\"\r\n                                        >\r\n                                            <TableCell className=\"font-medium\">\r\n                                                {staff.user?.name || 'N/A'}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"font-mono text-xs text-muted-foreground\">\r\n                                                {staff.staffId}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {staff.department || 'N/A'}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {staff.designation || 'N/A'}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {staff.currentShift ? (\r\n                                                    <div className=\"flex flex-col text-xs\">\r\n                                                        <span className=\"font-medium\">\r\n                                                            {\r\n                                                                staff\r\n                                                                    .currentShift\r\n                                                                    .name\r\n                                                            }\r\n                                                        </span>\r\n                                                        <span className=\"text-muted-foreground\">\r\n                                                            {\r\n                                                                staff\r\n                                                                    .currentShift\r\n                                                                    .startTime\r\n                                                            }{' '}\r\n                                                            -{' '}\r\n                                                            {\r\n                                                                staff\r\n                                                                    .currentShift\r\n                                                                    .endTime\r\n                                                            }\r\n                                                        </span>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-xs text-muted-foreground italic\">\r\n                                                        No Shift\r\n                                                    </span>\r\n                                                )}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {getStatusBadge(\r\n                                                    staff.todayAttendance\r\n                                                        ?.status,\r\n                                                )}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Button\r\n                                                    variant=\"outline\"\r\n                                                    size=\"sm\"\r\n                                                    onClick={() =>\r\n                                                        handleViewDetails(staff)\r\n                                                    }\r\n                                                    className=\"h-8\"\r\n                                                >\r\n                                                    <Eye className=\"h-3.5 w-3.5 mr-1.5\" />\r\n                                                    Details\r\n                                                </Button>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))\r\n                                )}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n\r\n                    {/* Pagination */}\r\n                    {meta && (\r\n                        <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4 pt-2\">\r\n                            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                                <span>Rows per page</span>\r\n                                <Select\r\n                                    value={limit.toString()}\r\n                                    onValueChange={(value) => {\r\n                                        setLimit(parseInt(value));\r\n                                        setPage(1);\r\n                                    }}\r\n                                >\r\n                                    <SelectTrigger className=\"h-8 w-[70px]\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {perPageOptions.map((option) => (\r\n                                            <SelectItem\r\n                                                key={option}\r\n                                                value={option.toString()}\r\n                                            >\r\n                                                {option}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                                <span>\r\n                                    Showing {(page - 1) * limit + 1} to{' '}\r\n                                    {Math.min(page * limit, meta.total)} of{' '}\r\n                                    {meta.total} entries\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-1\">\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() => setPage(1)}\r\n                                    disabled={page === 1 || isFetching}\r\n                                >\r\n                                    <ChevronsLeft className=\"h-4 w-4\" />\r\n                                </Button>\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() =>\r\n                                        setPage((p) => Math.max(1, p - 1))\r\n                                    }\r\n                                    disabled={page === 1 || isFetching}\r\n                                >\r\n                                    <ChevronLeft className=\"h-4 w-4\" />\r\n                                </Button>\r\n\r\n                                <span className=\"text-sm font-medium px-2\">\r\n                                    Page {meta.page} of {meta.totalPage}\r\n                                </span>\r\n\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() =>\r\n                                        setPage((p) =>\r\n                                            Math.min(meta.totalPage, p + 1),\r\n                                        )\r\n                                    }\r\n                                    disabled={\r\n                                        page === meta.totalPage || isFetching\r\n                                    }\r\n                                >\r\n                                    <ChevronRight className=\"h-4 w-4\" />\r\n                                </Button>\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    className=\"h-8 w-8\"\r\n                                    onClick={() => setPage(meta.totalPage)}\r\n                                    disabled={\r\n                                        page === meta.totalPage || isFetching\r\n                                    }\r\n                                >\r\n                                    <ChevronsRight className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\staffs\\reset-pin\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":57,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1852,1855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1852,1855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardFooter,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { useResetSalaryPinMutation } from '@/redux/features/staff/staffApi';\r\nimport { Loader2 } from 'lucide-react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useState, useEffect, Suspense } from 'react';\r\nimport { toast } from 'sonner';\r\n\r\nfunction ResetPinContent() {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const token = searchParams.get('token');\r\n\r\n    const [pin, setPin] = useState('');\r\n    const [confirmPin, setConfirmPin] = useState('');\r\n\r\n    const [resetSalaryPin, { isLoading }] = useResetSalaryPinMutation();\r\n\r\n    useEffect(() => {\r\n        if (!token) {\r\n            toast.error('Invalid or missing reset token');\r\n            router.push('/');\r\n        }\r\n    }, [token, router]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (pin.length < 4) {\r\n            return toast.error('PIN must be at least 4 digits');\r\n        }\r\n\r\n        if (pin !== confirmPin) {\r\n            return toast.error('PINs do not match');\r\n        }\r\n\r\n        if (!token) return;\r\n\r\n        try {\r\n            await resetSalaryPin({ token, pin }).unwrap();\r\n            toast.success('PIN reset successfully. Please log in again.');\r\n            router.push('/'); // Or dashboard? Probably dashboard if session is active?\r\n            // If they are resetting PIN, they might be logged in or out.\r\n            // If logged in, dashboard. If not, login.\r\n            // Let's assume dashboard.\r\n        } catch (error: any) {\r\n            toast.error(error.data?.message || 'Failed to reset PIN');\r\n        }\r\n    };\r\n\r\n    if (!token) return null;\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center p-4\">\r\n            <Card className=\"w-full max-w-md\">\r\n                <CardHeader>\r\n                    <CardTitle>Reset Salary PIN</CardTitle>\r\n                    <CardDescription>\r\n                        Enter a new 4-digit PIN for your salary account.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <form onSubmit={handleSubmit}>\r\n                    <CardContent className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"pin\">New PIN</Label>\r\n                            <Input\r\n                                id=\"pin\"\r\n                                type=\"password\"\r\n                                placeholder=\"Enter new PIN\"\r\n                                value={pin}\r\n                                onChange={(e) => setPin(e.target.value)}\r\n                                disabled={isLoading}\r\n                                required\r\n                                minLength={4}\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"confirmPin\">Confirm New PIN</Label>\r\n                            <Input\r\n                                id=\"confirmPin\"\r\n                                type=\"password\"\r\n                                placeholder=\"Confirm new PIN\"\r\n                                value={confirmPin}\r\n                                onChange={(e) => setConfirmPin(e.target.value)}\r\n                                disabled={isLoading}\r\n                                required\r\n                                minLength={4}\r\n                            />\r\n                        </div>\r\n                    </CardContent>\r\n                    <CardFooter>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isLoading && (\r\n                                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            )}\r\n                            Reset PIN\r\n                        </Button>\r\n                    </CardFooter>\r\n                </form>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function ResetPinPage() {\r\n    return (\r\n        <Suspense\r\n            fallback={\r\n                <div className=\"flex h-screen items-center justify-center\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin\" />\r\n                </div>\r\n            }\r\n        >\r\n            <ResetPinContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\account\\account.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\account\\change-password.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader' is defined but never used.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardFooter,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { changePassword, useSession } from '@/lib/auth-client';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { Loader } from 'lucide-react';\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { toast } from 'sonner';\r\nimport { Spinner } from '../ui/spinner';\r\n\r\nconst changePasswordSchema = z.object({\r\n    currentPassword: z.string().nonempty('Current Password is required.'),\r\n    newPassword: z.string().nonempty('New Password is required.'),\r\n});\r\n\r\nexport default function ChangePassword() {\r\n    const { refetch } = useSession();\r\n\r\n    const form = useForm({\r\n        resolver: zodResolver(changePasswordSchema),\r\n        defaultValues: {\r\n            currentPassword: '',\r\n            newPassword: '',\r\n        },\r\n    });\r\n\r\n    const [showCurrent, setShowCurrent] = useState(false);\r\n    const [showNew, setShowNew] = useState(false);\r\n\r\n    const isLoading = form.formState.isSubmitting;\r\n\r\n    const onSubmit = async (data: z.infer<typeof changePasswordSchema>) => {\r\n        try {\r\n            await changePassword({\r\n                newPassword: data.newPassword,\r\n                currentPassword: data.currentPassword,\r\n                revokeOtherSessions: true,\r\n            });\r\n\r\n            toast.success('Password updated successfully!');\r\n            refetch();\r\n            form.reset();\r\n        } catch (error) {\r\n            toast.error(\r\n                (error as Error).message || 'Failed to update password.'\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"col-span-2\">\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-2xl\">Change Password</CardTitle>\r\n                    <CardDescription className=\"\">\r\n                        Enter your current password and choose a new password.\r\n                    </CardDescription>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-6\">\r\n                    <div className=\"grid gap-3\">\r\n                        <Label htmlFor=\"currentPassword\">\r\n                            Current Password{' '}\r\n                            <span className=\"text-destructive\">*</span>\r\n                        </Label>\r\n                        <div className=\"relative\">\r\n                            <Input\r\n                                id=\"currentPassword\"\r\n                                type={showCurrent ? 'text' : 'password'}\r\n                                placeholder=\"Enter your current password\"\r\n                                {...form.register('currentPassword')}\r\n                            />\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"link\"\r\n                                onClick={() => setShowCurrent(!showCurrent)}\r\n                                className=\"absolute right-2 top-1/2 -translate-y-1/2\"\r\n                            >\r\n                                {showCurrent ? 'Hide' : 'Show'}\r\n                            </Button>\r\n                        </div>\r\n                        {form.formState.errors.currentPassword && (\r\n                            <span className=\"text-xs text-destructive\">\r\n                                {form.formState.errors.currentPassword.message}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-3\">\r\n                        <Label htmlFor=\"newPassword\">\r\n                            New Password{' '}\r\n                            <span className=\"text-destructive\">*</span>\r\n                        </Label>\r\n                        <div className=\"relative\">\r\n                            <Input\r\n                                id=\"newPassword\"\r\n                                type={showNew ? 'text' : 'password'}\r\n                                placeholder=\"Enter your new password\"\r\n                                {...form.register('newPassword')}\r\n                            />\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"link\"\r\n                                onClick={() => setShowNew(!showNew)}\r\n                                className=\"absolute right-2 top-1/2 -translate-y-1/2\"\r\n                            >\r\n                                {showNew ? 'Hide' : 'Show'}\r\n                            </Button>\r\n                        </div>\r\n                        {form.formState.errors.newPassword && (\r\n                            <span className=\"text-xs text-destructive\">\r\n                                {form.formState.errors.newPassword.message}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                </CardContent>\r\n\r\n                <CardFooter>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        className=\"w-full\"\r\n                        disabled={isLoading}\r\n                    >\r\n                        {isLoading ? <Spinner /> : 'Update Password'}\r\n                    </Button>\r\n                </CardFooter>\r\n            </Card>\r\n        </form>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\account\\edit-profile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\account\\profile-completion-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\account\\profile-image-upload-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\analytics-dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[368,371],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[368,371],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":54,"column":50,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1496,1579],"text":"\r\n                    Overview of your organization&apos;s key metrics\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1496,1579],"text":"\r\n                    Overview of your organization&lsquo;s key metrics\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1496,1579],"text":"\r\n                    Overview of your organization&#39;s key metrics\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1496,1579],"text":"\r\n                    Overview of your organization&rsquo;s key metrics\r\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":144,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5638,5641],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5638,5641],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":180,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7563,7566],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7563,7566],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Loader, Users, DollarSign, Building2, TrendingUp } from 'lucide-react';\r\n\r\nexport default function AnalyticsDashboard() {\r\n    const [analytics, setAnalytics] = useState<any>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchAnalytics();\r\n    }, []);\r\n\r\n    const fetchAnalytics = async () => {\r\n        try {\r\n            const response = await fetch('/api/analytics/dashboard', {\r\n                credentials: 'include',\r\n            });\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setAnalytics(data.data);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch analytics:', err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center py-10\">\r\n                <Loader className=\"h-8 w-8 animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!analytics) return null;\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold tracking-tight\">\r\n                    Analytics Dashboard\r\n                </h2>\r\n                <p className=\"text-muted-foreground\">\r\n                    Overview of your organization's key metrics\r\n                </p>\r\n            </div>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Total Staff\r\n                        </CardTitle>\r\n                        <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">\r\n                            {analytics.totalStaff}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Active employees\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Departments\r\n                        </CardTitle>\r\n                        <Building2 className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">\r\n                            {analytics.totalDepartments}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Active departments\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Avg Salary\r\n                        </CardTitle>\r\n                        <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">\r\n                            ৳\r\n                            {Math.round(\r\n                                analytics.salary?.avgSalary || 0,\r\n                            ).toLocaleString()}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Per employee\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle className=\"text-sm font-medium\">\r\n                            Total Payroll\r\n                        </CardTitle>\r\n                        <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"text-2xl font-bold\">\r\n                            ৳\r\n                            {Math.round(\r\n                                analytics.salary?.totalSalary || 0,\r\n                            ).toLocaleString()}\r\n                        </div>\r\n                        <p className=\"text-xs text-muted-foreground\">Monthly</p>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Department Distribution */}\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Department Distribution</CardTitle>\r\n                        <CardDescription>\r\n                            Staff count by department\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"space-y-4\">\r\n                            {analytics.departments?.map((dept: any) => (\r\n                                <div\r\n                                    key={dept._id}\r\n                                    className=\"flex items-center\"\r\n                                >\r\n                                    <div className=\"flex-1\">\r\n                                        <p className=\"text-sm font-medium\">\r\n                                            {dept._id || 'Unassigned'}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-32 h-2 bg-muted rounded-full overflow-hidden\">\r\n                                            <div\r\n                                                className=\"h-full bg-primary\"\r\n                                                style={{\r\n                                                    width: `${(dept.count / analytics.totalStaff) * 100}%`,\r\n                                                }}\r\n                                            />\r\n                                        </div>\r\n                                        <span className=\"text-sm font-medium w-8 text-right\">\r\n                                            {dept.count}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>Role Distribution</CardTitle>\r\n                        <CardDescription>Users by role</CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"space-y-4\">\r\n                            {analytics.roles?.map((role: any) => (\r\n                                <div\r\n                                    key={role._id}\r\n                                    className=\"flex items-center\"\r\n                                >\r\n                                    <div className=\"flex-1\">\r\n                                        <p className=\"text-sm font-medium capitalize\">\r\n                                            {role._id?.replace('_', ' ')}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <div className=\"w-32 h-2 bg-muted rounded-full overflow-hidden\">\r\n                                            <div\r\n                                                className=\"h-full bg-blue-500\"\r\n                                                style={{\r\n                                                    width: `${(role.count / analytics.totalStaff) * 100}%`,\r\n                                                }}\r\n                                            />\r\n                                        </div>\r\n                                        <span className=\"text-sm font-medium w-8 text-right\">\r\n                                            {role.count}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Salary Range */}\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle>Salary Range</CardTitle>\r\n                    <CardDescription>\r\n                        Minimum to maximum salary distribution\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                Minimum\r\n                            </p>\r\n                            <p className=\"text-2xl font-bold\">\r\n                                ৳\r\n                                {(\r\n                                    analytics.salary?.minSalary || 0\r\n                                ).toLocaleString()}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex-1 mx-8\">\r\n                            <div className=\"h-2 bg-gradient-to-r from-green-500 via-yellow-500 to-red-500 rounded-full\" />\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                Maximum\r\n                            </p>\r\n                            <p className=\"text-2xl font-bold\">\r\n                                ৳\r\n                                {(\r\n                                    analytics.salary?.maxSalary || 0\r\n                                ).toLocaleString()}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\audit-log-viewer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[684,687],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[684,687],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchLogs'. Either include it or remove the dependency array.","line":41,"column":8,"nodeType":"ArrayExpression","endLine":41,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchLogs, filters]","fix":{"range":[926,935],"text":"[fetchLogs, filters]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2875,2878],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2875,2878],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Loader, Download, Filter } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\n\r\nexport default function AuditLogViewer() {\r\n    const [logs, setLogs] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [filters, setFilters] = useState({\r\n        action: '',\r\n        entity: '',\r\n        limit: '100',\r\n    });\r\n\r\n    useEffect(() => {\r\n        fetchLogs();\r\n    }, [filters]);\r\n\r\n    const fetchLogs = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const params = new URLSearchParams();\r\n            if (filters.action) params.append('action', filters.action);\r\n            if (filters.entity) params.append('entity', filters.entity);\r\n            if (filters.limit) params.append('limit', filters.limit);\r\n\r\n            const response = await fetch(\r\n                `/api/analytics/audit-logs?${params}`,\r\n                {\r\n                    credentials: 'include',\r\n                },\r\n            );\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setLogs(data.data);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch logs:', err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const exportLogs = () => {\r\n        const csv = [\r\n            [\r\n                'Date',\r\n                'User ID',\r\n                'Action',\r\n                'Entity',\r\n                'Entity ID',\r\n                'IP Address',\r\n            ].join(','),\r\n            ...logs.map((log) =>\r\n                [\r\n                    format(new Date(log.createdAt), 'yyyy-MM-dd HH:mm:ss'),\r\n                    log.userId,\r\n                    log.action,\r\n                    log.entity,\r\n                    log.entityId || '',\r\n                    log.ipAddress || '',\r\n                ]\r\n                    .map((cell) => `\"${cell}\"`)\r\n                    .join(','),\r\n            ),\r\n        ].join('\\n');\r\n\r\n        const blob = new Blob([csv], { type: 'text/csv' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = `audit-logs-${Date.now()}.csv`;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const getActionBadge = (action: string) => {\r\n        const colors: any = {\r\n            CREATE: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',\r\n            UPDATE: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',\r\n            DELETE: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',\r\n            VIEW: 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200',\r\n            LOGIN: 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',\r\n        };\r\n\r\n        return (\r\n            <span\r\n                className={`px-2 py-1 rounded-full text-xs font-medium ${colors[action] || colors.VIEW}`}\r\n            >\r\n                {action}\r\n            </span>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <CardTitle>Audit Logs</CardTitle>\r\n                        <CardDescription>\r\n                            System activity and security logs\r\n                        </CardDescription>\r\n                    </div>\r\n                    <Button\r\n                        onClick={exportLogs}\r\n                        variant=\"outline\"\r\n                        disabled={logs.length === 0}\r\n                    >\r\n                        <Download className=\" h-4 w-4\" />\r\n                        Export CSV\r\n                    </Button>\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                {/* Filters */}\r\n                <div className=\"flex gap-4 mb-6\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Filter className=\"h-4 w-4 text-muted-foreground\" />\r\n                        <span className=\"text-sm font-medium\">Filters:</span>\r\n                    </div>\r\n\r\n                    <Select\r\n                        value={filters.action}\r\n                        onValueChange={(value) =>\r\n                            setFilters({ ...filters, action: value })\r\n                        }\r\n                    >\r\n                        <SelectTrigger className=\"w-[180px]\">\r\n                            <SelectValue placeholder=\"All Actions\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"\">All Actions</SelectItem>\r\n                            <SelectItem value=\"CREATE\">Create</SelectItem>\r\n                            <SelectItem value=\"UPDATE\">Update</SelectItem>\r\n                            <SelectItem value=\"DELETE\">Delete</SelectItem>\r\n                            <SelectItem value=\"VIEW\">View</SelectItem>\r\n                            <SelectItem value=\"LOGIN\">Login</SelectItem>\r\n                            <SelectItem value=\"LOGOUT\">Logout</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n\r\n                    <Select\r\n                        value={filters.entity}\r\n                        onValueChange={(value) =>\r\n                            setFilters({ ...filters, entity: value })\r\n                        }\r\n                    >\r\n                        <SelectTrigger className=\"w-[180px]\">\r\n                            <SelectValue placeholder=\"All Entities\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"\">All Entities</SelectItem>\r\n                            <SelectItem value=\"Staff\">Staff</SelectItem>\r\n                            <SelectItem value=\"User\">User</SelectItem>\r\n                            <SelectItem value=\"Invitation\">\r\n                                Invitation\r\n                            </SelectItem>\r\n                            <SelectItem value=\"Salary\">Salary</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n\r\n                    <Select\r\n                        value={filters.limit}\r\n                        onValueChange={(value) =>\r\n                            setFilters({ ...filters, limit: value })\r\n                        }\r\n                    >\r\n                        <SelectTrigger className=\"w-[120px]\">\r\n                            <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"50\">50 logs</SelectItem>\r\n                            <SelectItem value=\"100\">100 logs</SelectItem>\r\n                            <SelectItem value=\"200\">200 logs</SelectItem>\r\n                            <SelectItem value=\"500\">500 logs</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n\r\n                {/* Table */}\r\n                {isLoading ? (\r\n                    <div className=\"flex items-center justify-center py-10\">\r\n                        <Loader className=\"h-8 w-8 animate-spin\" />\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"rounded-md border\">\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow>\r\n                                    <TableHead>Date & Time</TableHead>\r\n                                    <TableHead>Action</TableHead>\r\n                                    <TableHead>Entity</TableHead>\r\n                                    <TableHead>User ID</TableHead>\r\n                                    <TableHead>IP Address</TableHead>\r\n                                    <TableHead>Details</TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {logs.length === 0 ? (\r\n                                    <TableRow>\r\n                                        <TableCell\r\n                                            colSpan={6}\r\n                                            className=\"text-center text-muted-foreground\"\r\n                                        >\r\n                                            No audit logs found\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ) : (\r\n                                    logs.map((log) => (\r\n                                        <TableRow key={log._id}>\r\n                                            <TableCell className=\"font-medium\">\r\n                                                {format(\r\n                                                    new Date(log.createdAt),\r\n                                                    'MMM dd, yyyy HH:mm:ss',\r\n                                                )}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {getActionBadge(log.action)}\r\n                                            </TableCell>\r\n                                            <TableCell>{log.entity}</TableCell>\r\n                                            <TableCell className=\"font-mono text-xs\">\r\n                                                {log.userId}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-sm\">\r\n                                                {log.ipAddress || 'N/A'}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-sm text-muted-foreground\">\r\n                                                {log.details\r\n                                                    ? JSON.stringify(\r\n                                                          log.details,\r\n                                                      ).substring(0, 50) + '...'\r\n                                                    : 'N/A'}\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))\r\n                                )}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\bulk-invite-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[666,669],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[666,669],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1781,1784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1781,1784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":77,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":77,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2751,2754],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2751,2754],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":199,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":199,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9241,9244],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9241,9244],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Upload, Download, Loader, CheckCircle2, XCircle } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { parse } from 'papaparse';\r\n\r\nexport default function BulkInviteDialog() {\r\n    const [open, setOpen] = useState(false);\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [results, setResults] = useState<any>(null);\r\n\r\n    const downloadTemplate = () => {\r\n        const template = `email,designation,department,role,salary,branchId,shiftId,expiryHours\r\njohn@example.com,Software Developer,IT,staff,50000,BRANCH_ID_HERE,,48\r\njane@example.com,Team Leader,HR,team_leader,60000,BRANCH_ID_HERE,SHIFT_ID_HERE,72`;\r\n\r\n        const blob = new Blob([template], { type: 'text/csv' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'bulk-invitation-template.csv';\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    };\r\n\r\n    const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        setIsUploading(true);\r\n\r\n        try {\r\n            const text = await file.text();\r\n            const parsed = parse(text, { header: true, skipEmptyLines: true });\r\n\r\n            if (parsed.errors.length > 0) {\r\n                throw new Error('Invalid CSV format');\r\n            }\r\n\r\n            const invitations = parsed.data.map((row: any) => ({\r\n                email: row.email,\r\n                designation: row.designation,\r\n                department: row.department || undefined,\r\n                role: row.role,\r\n                salary: Number(row.salary),\r\n                branchId: row.branchId,\r\n                shiftId: row.shiftId || undefined,\r\n                expiryHours: Number(row.expiryHours) || 48,\r\n            }));\r\n\r\n            const response = await fetch('/api/invitations/bulk', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                credentials: 'include',\r\n                body: JSON.stringify({ invitations }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!data.success) {\r\n                throw new Error(data.message || 'Failed to send invitations');\r\n            }\r\n\r\n            setResults(data.data);\r\n            toast.success(data.message);\r\n        } catch (err: any) {\r\n            toast.error(err.message || 'Failed to process file');\r\n        } finally {\r\n            setIsUploading(false);\r\n            e.target.value = '';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"outline\">\r\n                    <Upload className=\" h-4 w-4\" />\r\n                    Bulk Invite\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"max-w-2xl\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Bulk Employee Invitation</DialogTitle>\r\n                    <DialogDescription>\r\n                        Upload a CSV file to send multiple invitations at once\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-4\">\r\n                    <Card>\r\n                        <CardContent className=\"pt-6\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <h3 className=\"font-semibold\">\r\n                                        Step 1: Download Template\r\n                                    </h3>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Download the CSV template and fill in\r\n                                        employee details\r\n                                    </p>\r\n                                </div>\r\n                                <Button\r\n                                    onClick={downloadTemplate}\r\n                                    variant=\"outline\"\r\n                                >\r\n                                    <Download className=\" h-4 w-4\" />\r\n                                    Download\r\n                                </Button>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                        <CardContent className=\"pt-6\">\r\n                            <div className=\"flex items-center justify-between\">\r\n                                <div>\r\n                                    <h3 className=\"font-semibold\">\r\n                                        Step 2: Upload CSV\r\n                                    </h3>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Upload the filled CSV file to send\r\n                                        invitations\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\".csv\"\r\n                                        onChange={handleFileUpload}\r\n                                        disabled={isUploading}\r\n                                        className=\"hidden\"\r\n                                        id=\"csv-upload\"\r\n                                    />\r\n                                    <label htmlFor=\"csv-upload\">\r\n                                        <Button asChild disabled={isUploading}>\r\n                                            <span>\r\n                                                {isUploading ? (\r\n                                                    <>\r\n                                                        <Loader className=\" h-4 w-4 animate-spin\" />\r\n                                                        Processing...\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <>\r\n                                                        <Upload className=\" h-4 w-4\" />\r\n                                                        Upload CSV\r\n                                                    </>\r\n                                                )}\r\n                                            </span>\r\n                                        </Button>\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {results && (\r\n                        <Card>\r\n                            <CardContent className=\"pt-6\">\r\n                                <h3 className=\"font-semibold mb-4\">\r\n                                    Upload Results\r\n                                </h3>\r\n                                <div className=\"space-y-2\">\r\n                                    <div className=\"flex items-center gap-2 text-green-600\">\r\n                                        <CheckCircle2 className=\"h-4 w-4\" />\r\n                                        <span>\r\n                                            {results.success.length} invitations\r\n                                            sent successfully\r\n                                        </span>\r\n                                    </div>\r\n                                    {results.failed.length > 0 && (\r\n                                        <div className=\"flex items-center gap-2 text-red-600\">\r\n                                            <XCircle className=\"h-4 w-4\" />\r\n                                            <span>\r\n                                                {results.failed.length}{' '}\r\n                                                invitations failed\r\n                                            </span>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                                {results.failed.length > 0 && (\r\n                                    <div className=\"mt-4 p-4 bg-red-50 dark:bg-red-900/10 rounded-lg border border-red-200 dark:border-red-800\">\r\n                                        <p className=\"text-sm font-semibold text-red-800 dark:text-red-200 mb-2\">\r\n                                            Failed Invitations:\r\n                                        </p>\r\n                                        <ul className=\"text-sm text-red-700 dark:text-red-300 space-y-1\">\r\n                                            {results.failed.map(\r\n                                                (fail: any, idx: number) => (\r\n                                                    <li key={idx}>\r\n                                                        {fail.email}:{' '}\r\n                                                        {fail.error}\r\n                                                    </li>\r\n                                                ),\r\n                                            )}\r\n                                        </ul>\r\n                                    </div>\r\n                                )}\r\n                            </CardContent>\r\n                        </Card>\r\n                    )}\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\export-staff-button.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[879,882],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[879,882],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport { Download } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function ExportStaffButton() {\r\n    const handleExport = async () => {\r\n        try {\r\n            const response = await fetch('/api/staffs/export', {\r\n                credentials: 'include',\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to export staff data');\r\n            }\r\n\r\n            const blob = await response.blob();\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `staff-export-${Date.now()}.csv`;\r\n            a.click();\r\n            URL.revokeObjectURL(url);\r\n\r\n            toast.success('Staff data exported successfully!');\r\n        } catch (err: any) {\r\n            toast.error(err.message || 'Failed to export data');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Button onClick={handleExport} variant=\"outline\">\r\n            <Download className=\" h-4 w-4\" />\r\n            Export to CSV\r\n        </Button>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\invitation-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TabsContent' is defined but never used.","line":26,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1827,1830],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1827,1830],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2260,2263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2260,2263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":105,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3150,3153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3150,3153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5020,5023],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5020,5023],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":423,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":423,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20738,20741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20738,20741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    useGetInvitationsQuery,\r\n    useResendInvitationMutation,\r\n    useCancelInvitationMutation,\r\n} from '@/redux/features/invitation/invitationApi';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport {\r\n    Tooltip,\r\n    TooltipContent,\r\n    TooltipProvider,\r\n    TooltipTrigger,\r\n} from '@/components/ui/tooltip';\r\nimport {\r\n    Loader,\r\n    Mail,\r\n    Trash2,\r\n    Clock,\r\n    CheckCircle2,\r\n    XCircle,\r\n    AlertTriangle,\r\n    RefreshCw,\r\n    Copy,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { format, formatDistanceToNow } from 'date-fns';\r\nimport InviteEmployeeDialog from './invite-employee-dialog';\r\n\r\nexport default function InvitationList() {\r\n    const [filter, setFilter] = useState<\r\n        'all' | 'pending' | 'used' | 'expired'\r\n    >('all');\r\n    const { data, isLoading, isFetching, refetch } = useGetInvitationsQuery(\r\n        filter === 'all' ? undefined : { isUsed: filter === 'used' },\r\n    );\r\n    const [resendInvitation, { isLoading: isResending }] =\r\n        useResendInvitationMutation();\r\n    const [cancelInvitation, { isLoading: isCanceling }] =\r\n        useCancelInvitationMutation();\r\n\r\n    const handleResend = async (id: string) => {\r\n        try {\r\n            await resendInvitation(id).unwrap();\r\n            toast.success('Invitation resent successfully!');\r\n            refetch();\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to resend invitation');\r\n        }\r\n    };\r\n\r\n    const handleCancel = async (id: string) => {\r\n        if (!confirm('Are you sure you want to cancel this invitation?'))\r\n            return;\r\n\r\n        try {\r\n            await cancelInvitation(id).unwrap();\r\n            toast.success('Invitation cancelled successfully!');\r\n            refetch();\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to cancel invitation');\r\n        }\r\n    };\r\n\r\n    const invitations = data?.data || [];\r\n    const pendingInvitations = invitations.filter(\r\n        (inv) => !inv.isUsed && new Date(inv.expiresAt) > new Date(),\r\n    );\r\n    const usedInvitations = invitations.filter((inv) => inv.isUsed);\r\n    const expiredInvitations = invitations.filter(\r\n        (inv) => !inv.isUsed && new Date(inv.expiresAt) <= new Date(),\r\n    );\r\n\r\n    const getFilteredInvitations = () => {\r\n        switch (filter) {\r\n            case 'pending':\r\n                return pendingInvitations;\r\n            case 'used':\r\n                return usedInvitations;\r\n            case 'expired':\r\n                return expiredInvitations;\r\n            default:\r\n                return invitations;\r\n        }\r\n    };\r\n\r\n    const getStatusBadge = (invitation: any) => {\r\n        if (invitation.isUsed) {\r\n            return (\r\n                <Badge\r\n                    variant=\"default\"\r\n                    className=\"gap-1 bg-emerald-500 hover:bg-emerald-600\"\r\n                >\r\n                    <CheckCircle2 className=\"h-3 w-3\" />\r\n                    Accepted\r\n                </Badge>\r\n            );\r\n        }\r\n        if (new Date(invitation.expiresAt) <= new Date()) {\r\n            return (\r\n                <Badge variant=\"destructive\" className=\"gap-1\">\r\n                    <XCircle className=\"h-3 w-3\" />\r\n                    Expired\r\n                </Badge>\r\n            );\r\n        }\r\n        return (\r\n            <Badge\r\n                variant=\"secondary\"\r\n                className=\"gap-1 bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-500\"\r\n            >\r\n                <Clock className=\"h-3 w-3\" />\r\n                Pending\r\n            </Badge>\r\n        );\r\n    };\r\n\r\n    const getRoleBadge = (role: string) => {\r\n        const roleColors: Record<string, string> = {\r\n            super_admin:\r\n                'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400',\r\n            admin: 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400',\r\n            hr_manager:\r\n                'bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400',\r\n            team_leader:\r\n                'bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400',\r\n            staff: 'bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-300',\r\n        };\r\n\r\n        return (\r\n            <Badge\r\n                variant=\"outline\"\r\n                className={`font-medium ${roleColors[role] || ''}`}\r\n            >\r\n                {role.replace('_', ' ')}\r\n            </Badge>\r\n        );\r\n    };\r\n\r\n    const renderTable = (invitations: any[]) => (\r\n        <div className=\"rounded-lg border\">\r\n            <Table>\r\n                <TableHeader>\r\n                    <TableRow className=\"bg-muted/50\">\r\n                        <TableHead className=\"font-semibold\">\r\n                            Employee Details\r\n                        </TableHead>\r\n                        <TableHead className=\"font-semibold\">\r\n                            Role & Salary\r\n                        </TableHead>\r\n                        <TableHead className=\"font-semibold\">Status</TableHead>\r\n                        <TableHead className=\"font-semibold\">Expires</TableHead>\r\n                        <TableHead className=\"text-right font-semibold\">\r\n                            Actions\r\n                        </TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {invitations.length === 0 ? (\r\n                        <TableRow>\r\n                            <TableCell colSpan={5} className=\"h-32 text-center\">\r\n                                <div className=\"flex flex-col items-center gap-2 text-muted-foreground\">\r\n                                    <Mail className=\"h-8 w-8 opacity-50\" />\r\n                                    <p>No invitations found</p>\r\n                                    <p className=\"text-sm\">\r\n                                        Click &quot;Invite Employee&quot; to\r\n                                        send a new invitation\r\n                                    </p>\r\n                                </div>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ) : (\r\n                        invitations.map((invitation) => (\r\n                            <TableRow\r\n                                key={invitation._id}\r\n                                className=\"hover:bg-muted/30\"\r\n                            >\r\n                                <TableCell>\r\n                                    <div className=\"flex flex-col gap-0.5\">\r\n                                        <span className=\"font-medium\">\r\n                                            {invitation.email}\r\n                                        </span>\r\n                                        <span className=\"text-sm text-muted-foreground\">\r\n                                            {invitation.designation}\r\n                                            {invitation.department &&\r\n                                                ` • ${invitation.department}`}\r\n                                        </span>\r\n                                    </div>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <div className=\"flex flex-col gap-1.5\">\r\n                                        {getRoleBadge(invitation.role)}\r\n                                        <span className=\"text-sm font-medium\">\r\n                                            ৳\r\n                                            {invitation.salary.toLocaleString()}\r\n                                        </span>\r\n                                    </div>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    {getStatusBadge(invitation)}\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <TooltipProvider>\r\n                                        <Tooltip>\r\n                                            <TooltipTrigger asChild>\r\n                                                <span className=\"text-sm cursor-help\">\r\n                                                    {new Date(\r\n                                                        invitation.expiresAt,\r\n                                                    ) > new Date()\r\n                                                        ? formatDistanceToNow(\r\n                                                              new Date(\r\n                                                                  invitation.expiresAt,\r\n                                                              ),\r\n                                                              {\r\n                                                                  addSuffix: true,\r\n                                                              },\r\n                                                          )\r\n                                                        : 'Expired'}\r\n                                                </span>\r\n                                            </TooltipTrigger>\r\n                                            <TooltipContent>\r\n                                                {format(\r\n                                                    new Date(\r\n                                                        invitation.expiresAt,\r\n                                                    ),\r\n                                                    'PPpp',\r\n                                                )}\r\n                                            </TooltipContent>\r\n                                        </Tooltip>\r\n                                    </TooltipProvider>\r\n                                </TableCell>\r\n                                <TableCell className=\"text-right\">\r\n                                    <div className=\"flex justify-end gap-1\">\r\n                                        {!invitation.isUsed && (\r\n                                            <>\r\n                                                <TooltipProvider>\r\n                                                    <Tooltip>\r\n                                                        <TooltipTrigger asChild>\r\n                                                            <Button\r\n                                                                size=\"icon\"\r\n                                                                variant=\"ghost\"\r\n                                                                onClick={() => {\r\n                                                                    const url = `${window.location.origin}/sign-up/${invitation.token}`;\r\n                                                                    navigator.clipboard.writeText(\r\n                                                                        url,\r\n                                                                    );\r\n                                                                    toast.success(\r\n                                                                        'Link copied to clipboard',\r\n                                                                    );\r\n                                                                }}\r\n                                                                className=\"h-8 w-8\"\r\n                                                            >\r\n                                                                <Copy className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                        </TooltipTrigger>\r\n                                                        <TooltipContent>\r\n                                                            Copy link\r\n                                                        </TooltipContent>\r\n                                                    </Tooltip>\r\n                                                </TooltipProvider>\r\n                                                <TooltipProvider>\r\n                                                    <Tooltip>\r\n                                                        <TooltipTrigger asChild>\r\n                                                            <Button\r\n                                                                size=\"icon\"\r\n                                                                variant=\"ghost\"\r\n                                                                onClick={() =>\r\n                                                                    handleResend(\r\n                                                                        invitation._id,\r\n                                                                    )\r\n                                                                }\r\n                                                                disabled={\r\n                                                                    isResending\r\n                                                                }\r\n                                                                className=\"h-8 w-8\"\r\n                                                            >\r\n                                                                <RefreshCw\r\n                                                                    className={`h-4 w-4 ${isResending ? 'animate-spin' : ''}`}\r\n                                                                />\r\n                                                            </Button>\r\n                                                        </TooltipTrigger>\r\n                                                        <TooltipContent>\r\n                                                            Resend invitation\r\n                                                        </TooltipContent>\r\n                                                    </Tooltip>\r\n                                                </TooltipProvider>\r\n                                                <TooltipProvider>\r\n                                                    <Tooltip>\r\n                                                        <TooltipTrigger asChild>\r\n                                                            <Button\r\n                                                                size=\"icon\"\r\n                                                                variant=\"ghost\"\r\n                                                                onClick={() =>\r\n                                                                    handleCancel(\r\n                                                                        invitation._id,\r\n                                                                    )\r\n                                                                }\r\n                                                                disabled={\r\n                                                                    isCanceling\r\n                                                                }\r\n                                                                className=\"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                                            >\r\n                                                                <Trash2 className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                        </TooltipTrigger>\r\n                                                        <TooltipContent>\r\n                                                            Cancel invitation\r\n                                                        </TooltipContent>\r\n                                                    </Tooltip>\r\n                                                </TooltipProvider>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Card>\r\n                <CardContent className=\"flex items-center justify-center py-16\">\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                        <Loader className=\"h-8 w-8 animate-spin text-primary\" />\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                            Loading invitations...\r\n                        </p>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader className=\"pb-4\">\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                    <div>\r\n                        <CardTitle>Manage Invitations</CardTitle>\r\n                        <CardDescription className=\"mt-1\">\r\n                            Send invitations and track their status\r\n                        </CardDescription>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            size=\"icon\"\r\n                            onClick={() => refetch()}\r\n                            disabled={isFetching}\r\n                            className=\"h-9 w-9\"\r\n                        >\r\n                            <RefreshCw\r\n                                className={`h-4 w-4 ${isFetching ? 'animate-spin' : ''}`}\r\n                            />\r\n                        </Button>\r\n                        <InviteEmployeeDialog />\r\n                    </div>\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n                {/* Stats Overview */}\r\n                <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\r\n                    <div className=\"rounded-lg border p-3 bg-muted/30\">\r\n                        <p className=\"text-2xl font-bold\">\r\n                            {invitations.length}\r\n                        </p>\r\n                        <p className=\"text-xs text-muted-foreground\">\r\n                            Total Invitations\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"rounded-lg border p-3 bg-amber-50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800\">\r\n                        <p className=\"text-2xl font-bold text-amber-700 dark:text-amber-400\">\r\n                            {pendingInvitations.length}\r\n                        </p>\r\n                        <p className=\"text-xs text-amber-600 dark:text-amber-500\">\r\n                            Pending\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"rounded-lg border p-3 bg-emerald-50 dark:bg-emerald-900/10 border-emerald-200 dark:border-emerald-800\">\r\n                        <p className=\"text-2xl font-bold text-emerald-700 dark:text-emerald-400\">\r\n                            {usedInvitations.length}\r\n                        </p>\r\n                        <p className=\"text-xs text-emerald-600 dark:text-emerald-500\">\r\n                            Accepted\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"rounded-lg border p-3 bg-red-50 dark:bg-red-900/10 border-red-200 dark:border-red-800\">\r\n                        <p className=\"text-2xl font-bold text-red-700 dark:text-red-400\">\r\n                            {expiredInvitations.length}\r\n                        </p>\r\n                        <p className=\"text-xs text-red-600 dark:text-red-500\">\r\n                            Expired\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Filter Tabs */}\r\n                <Tabs\r\n                    defaultValue=\"all\"\r\n                    value={filter}\r\n                    onValueChange={(v: string) => setFilter(v as any)}\r\n                >\r\n                    <TabsList className=\"w-full sm:w-auto grid grid-cols-4 sm:inline-flex\">\r\n                        <TabsTrigger value=\"all\" className=\"text-xs sm:text-sm\">\r\n                            All\r\n                        </TabsTrigger>\r\n                        <TabsTrigger\r\n                            value=\"pending\"\r\n                            className=\"text-xs sm:text-sm\"\r\n                        >\r\n                            Pending\r\n                        </TabsTrigger>\r\n                        <TabsTrigger\r\n                            value=\"used\"\r\n                            className=\"text-xs sm:text-sm\"\r\n                        >\r\n                            Accepted\r\n                        </TabsTrigger>\r\n                        <TabsTrigger\r\n                            value=\"expired\"\r\n                            className=\"text-xs sm:text-sm\"\r\n                        >\r\n                            Expired\r\n                        </TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <div className=\"mt-4\">\r\n                        {renderTable(getFilteredInvitations())}\r\n                    </div>\r\n                </Tabs>\r\n\r\n                {/* Expired Warning */}\r\n                {expiredInvitations.length > 0 && filter !== 'expired' && (\r\n                    <div className=\"flex items-start gap-3 p-4 bg-amber-50 dark:bg-amber-900/10 rounded-lg border border-amber-200 dark:border-amber-800\">\r\n                        <AlertTriangle className=\"h-5 w-5 text-amber-500 shrink-0 mt-0.5\" />\r\n                        <div>\r\n                            <p className=\"font-medium text-amber-800 dark:text-amber-300\">\r\n                                {expiredInvitations.length} expired invitation\r\n                                {expiredInvitations.length > 1 ? 's' : ''}\r\n                            </p>\r\n                            <p className=\"text-sm text-amber-700 dark:text-amber-400\">\r\n                                These invitations need to be resent or\r\n                                cancelled.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\invite-employee-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":132,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4265,4268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4265,4268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":289,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11945,11948],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11945,11948],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":318,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":318,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13477,13480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13477,13480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { useCreateInvitationMutation } from '@/redux/features/invitation/invitationApi';\r\nimport { useGetAllBranchesQuery } from '@/redux/features/branch/branchApi';\r\nimport { useGetAllShiftsQuery } from '@/redux/features/shift/shiftApi';\r\nimport { useGetMetadataByTypeQuery } from '@/redux/features/metadata/metadataApi';\r\nimport { useSession } from '@/lib/auth-client';\r\nimport { Loader, UserPlus } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\ntype RoleType =\r\n    | 'staff'\r\n    | 'team_leader'\r\n    | 'admin'\r\n    | 'super_admin'\r\n    | 'hr_manager';\r\n\r\nconst ROLE_LABELS: Record<RoleType, string> = {\r\n    staff: 'Staff',\r\n    team_leader: 'Team Leader',\r\n    admin: 'Admin',\r\n    super_admin: 'Super Admin',\r\n    hr_manager: 'HR Manager',\r\n};\r\n\r\nexport default function InviteEmployeeDialog() {\r\n    const [open, setOpen] = useState(false);\r\n    const { data: session } = useSession();\r\n    const [createInvitation, { isLoading }] = useCreateInvitationMutation();\r\n    const { data: branchesData } = useGetAllBranchesQuery(undefined);\r\n    const { data: shiftsData } = useGetAllShiftsQuery(undefined);\r\n    const { data: departmentsData } = useGetMetadataByTypeQuery('department');\r\n    const { data: designationsData } = useGetMetadataByTypeQuery('designation');\r\n\r\n    const currentUserRole = session?.user?.role as RoleType | undefined;\r\n\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        salary: '',\r\n        role: 'staff' as RoleType,\r\n        department: '',\r\n        designation: '',\r\n        branchId: '',\r\n        shiftId: '',\r\n        expiryHours: '48',\r\n    });\r\n\r\n    // Determine available roles based on current user's role\r\n    const getAvailableRoles = (): RoleType[] => {\r\n        const baseRoles: RoleType[] = ['staff', 'team_leader'];\r\n\r\n        if (currentUserRole === 'super_admin') {\r\n            return [\r\n                'staff',\r\n                'team_leader',\r\n                'admin',\r\n                'super_admin',\r\n                'hr_manager',\r\n            ];\r\n        }\r\n\r\n        if (currentUserRole === 'admin') {\r\n            return ['staff', 'team_leader', 'admin', 'hr_manager'];\r\n        }\r\n\r\n        if (currentUserRole === 'hr_manager') {\r\n            return ['staff', 'team_leader'];\r\n        }\r\n\r\n        return baseRoles;\r\n    };\r\n\r\n    const availableRoles = getAvailableRoles();\r\n\r\n    // Admin roles don't require branch assignment\r\n    const isAdminRole = ['admin', 'super_admin', 'hr_manager'].includes(\r\n        formData.role,\r\n    );\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            await createInvitation({\r\n                email: formData.email,\r\n                salary: Number(formData.salary),\r\n                role: formData.role,\r\n                department: formData.department || undefined,\r\n                designation: formData.designation,\r\n                branchId:\r\n                    formData.branchId && formData.branchId !== 'unassigned'\r\n                        ? formData.branchId\r\n                        : undefined,\r\n                shiftId:\r\n                    formData.shiftId === 'unassigned'\r\n                        ? undefined\r\n                        : formData.shiftId || undefined,\r\n                expiryHours: Number(formData.expiryHours),\r\n            }).unwrap();\r\n\r\n            toast.success('Invitation sent successfully!');\r\n            setOpen(false);\r\n            setFormData({\r\n                email: '',\r\n                salary: '',\r\n                role: 'staff',\r\n                department: '',\r\n                designation: '',\r\n                branchId: '',\r\n                shiftId: '',\r\n                expiryHours: '48',\r\n            });\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to send invitation');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button className=\"gap-2\">\r\n                    <UserPlus className=\"h-4 w-4\" />\r\n                    Invite Team Member\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Invite Team Member</DialogTitle>\r\n                    <DialogDescription>\r\n                        Send an invitation email to a new team member with their\r\n                        position details.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                        {/* Email */}\r\n                        <div className=\"col-span-1 sm:col-span-2 grid gap-2\">\r\n                            <Label htmlFor=\"email\">Email Address *</Label>\r\n                            <Input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                placeholder=\"john@example.com\"\r\n                                value={formData.email}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        email: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Role */}\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"role\">Role *</Label>\r\n                            <Select\r\n                                value={formData.role}\r\n                                onValueChange={(value: RoleType) =>\r\n                                    setFormData({ ...formData, role: value })\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {availableRoles.map((role) => (\r\n                                        <SelectItem key={role} value={role}>\r\n                                            {ROLE_LABELS[role]}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {/* Designation */}\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"designation\">Designation *</Label>\r\n                            <Select\r\n                                value={formData.designation}\r\n                                onValueChange={(value) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        designation: value,\r\n                                    })\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue placeholder=\"Select designation\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {designationsData?.data?.map((d) => (\r\n                                        <SelectItem key={d._id} value={d.value}>\r\n                                            {d.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {/* Department */}\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"department\">Department</Label>\r\n                            <Select\r\n                                value={formData.department}\r\n                                onValueChange={(value) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        department: value,\r\n                                    })\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue placeholder=\"Select department\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {departmentsData?.data?.map((d) => (\r\n                                        <SelectItem key={d._id} value={d.value}>\r\n                                            {d.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {/* Salary */}\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"salary\">Salary (৳) *</Label>\r\n                            <Input\r\n                                id=\"salary\"\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                placeholder=\"50000\"\r\n                                value={formData.salary}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        salary: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Branch */}\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"branch\">\r\n                                Branch {isAdminRole ? '(Optional)' : '*'}\r\n                            </Label>\r\n                            <Select\r\n                                value={formData.branchId}\r\n                                onValueChange={(value) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        branchId: value,\r\n                                    })\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue placeholder=\"Select branch\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {isAdminRole && (\r\n                                        <SelectItem value=\"unassigned\">\r\n                                            None\r\n                                        </SelectItem>\r\n                                    )}\r\n                                    {branchesData?.branches?.map(\r\n                                        (branch: any) => (\r\n                                            <SelectItem\r\n                                                key={branch._id}\r\n                                                value={branch._id}\r\n                                            >\r\n                                                {branch.name}\r\n                                            </SelectItem>\r\n                                        ),\r\n                                    )}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {/* Shift */}\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"shift\">Shift (Optional)</Label>\r\n                            <Select\r\n                                value={formData.shiftId}\r\n                                onValueChange={(value) =>\r\n                                    setFormData({ ...formData, shiftId: value })\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue placeholder=\"Select shift\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"unassigned\">\r\n                                        None\r\n                                    </SelectItem>\r\n                                    {shiftsData?.shifts?.map((shift: any) => (\r\n                                        <SelectItem\r\n                                            key={shift._id}\r\n                                            value={shift._id}\r\n                                        >\r\n                                            {shift.name}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {/* Expiry */}\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"expiry\">Link Expiry *</Label>\r\n                            <Select\r\n                                value={formData.expiryHours}\r\n                                onValueChange={(value) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        expiryHours: value,\r\n                                    })\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"24\">24 hours</SelectItem>\r\n                                    <SelectItem value=\"48\">48 hours</SelectItem>\r\n                                    <SelectItem value=\"72\">72 hours</SelectItem>\r\n                                    <SelectItem value=\"168\">1 week</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-end gap-2 pt-4 border-t\">\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            onClick={() => setOpen(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"gap-2\"\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader className=\"h-4 w-4 animate-spin\" />\r\n                                    Sending...\r\n                                </>\r\n                            ) : (\r\n                                'Send Invitation'\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\metadata-settings.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":114,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4018,4021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4018,4021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4383,4386],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4383,4386],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport {\r\n    useGetMetadataByTypeQuery,\r\n    useCreateMetadataMutation,\r\n    useDeleteMetadataMutation,\r\n    type IMetadata,\r\n} from '@/redux/features/metadata/metadataApi';\r\nimport { Loader, Plus, Trash2, Building2, Briefcase, Tag } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n    AlertDialogTrigger,\r\n} from '@/components/ui/alert-dialog';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\nexport default function MetadataSettings() {\r\n    const [activeTab, setActiveTab] = useState<'department' | 'designation'>(\r\n        'department',\r\n    );\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader className=\"pb-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <div className=\"rounded-lg bg-primary/10 p-2\">\r\n                        <Tag className=\"h-5 w-5 text-primary\" />\r\n                    </div>\r\n                    <div>\r\n                        <CardTitle>Departments & Designations</CardTitle>\r\n                        <CardDescription className=\"mt-0.5\">\r\n                            Manage predefined options for employee invitations\r\n                        </CardDescription>\r\n                    </div>\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <Tabs\r\n                    value={activeTab}\r\n                    onValueChange={(v) =>\r\n                        setActiveTab(v as 'department' | 'designation')\r\n                    }\r\n                >\r\n                    <TabsList className=\"grid w-full grid-cols-2\">\r\n                        <TabsTrigger value=\"department\" className=\"gap-2\">\r\n                            <Building2 className=\"h-4 w-4\" />\r\n                            Departments\r\n                        </TabsTrigger>\r\n                        <TabsTrigger value=\"designation\" className=\"gap-2\">\r\n                            <Briefcase className=\"h-4 w-4\" />\r\n                            Designations\r\n                        </TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <TabsContent value=\"department\" className=\"mt-4\">\r\n                        <MetadataList type=\"department\" />\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"designation\" className=\"mt-4\">\r\n                        <MetadataList type=\"designation\" />\r\n                    </TabsContent>\r\n                </Tabs>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\nfunction MetadataList({ type }: { type: 'department' | 'designation' }) {\r\n    const { data, isLoading, isFetching } = useGetMetadataByTypeQuery(type);\r\n    const [createMetadata, { isLoading: isCreating }] =\r\n        useCreateMetadataMutation();\r\n    const [deleteMetadata] = useDeleteMetadataMutation();\r\n\r\n    const [newLabel, setNewLabel] = useState('');\r\n\r\n    const handleAdd = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!newLabel.trim()) {\r\n            toast.error('Please enter a name');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await createMetadata({\r\n                type,\r\n                value: newLabel.trim().toLowerCase().replace(/\\s+/g, '_'),\r\n                label: newLabel.trim(),\r\n            }).unwrap();\r\n\r\n            toast.success(\r\n                `${type === 'department' ? 'Department' : 'Designation'} added successfully`,\r\n            );\r\n            setNewLabel('');\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || `Failed to add ${type}`);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        try {\r\n            await deleteMetadata(id).unwrap();\r\n            toast.success(\r\n                `${type === 'department' ? 'Department' : 'Designation'} deleted`,\r\n            );\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || `Failed to delete ${type}`);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n                <div className=\"flex flex-col items-center gap-2\">\r\n                    <Loader className=\"h-6 w-6 animate-spin text-primary\" />\r\n                    <p className=\"text-sm text-muted-foreground\">Loading...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const items = data?.data || [];\r\n    const typeName = type === 'department' ? 'department' : 'designation';\r\n    const typeNamePlural =\r\n        type === 'department' ? 'departments' : 'designations';\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Add New Form */}\r\n            <form onSubmit={handleAdd} className=\"flex gap-2\">\r\n                <div className=\"flex-1\">\r\n                    <Label htmlFor={`${type}-label`} className=\"sr-only\">\r\n                        New {typeName}\r\n                    </Label>\r\n                    <Input\r\n                        id={`${type}-label`}\r\n                        placeholder={`Add new ${typeName}...`}\r\n                        value={newLabel}\r\n                        onChange={(e) => setNewLabel(e.target.value)}\r\n                        className=\"h-10\"\r\n                    />\r\n                </div>\r\n                <Button\r\n                    type=\"submit\"\r\n                    disabled={isCreating || !newLabel.trim()}\r\n                    className=\"gap-2 h-10\"\r\n                >\r\n                    {isCreating ? (\r\n                        <Loader className=\"h-4 w-4 animate-spin\" />\r\n                    ) : (\r\n                        <Plus className=\"h-4 w-4\" />\r\n                    )}\r\n                    Add\r\n                </Button>\r\n            </form>\r\n\r\n            {/* List */}\r\n            <div className=\"rounded-lg border\">\r\n                {items.length === 0 ? (\r\n                    <div className=\"flex flex-col items-center justify-center py-12 text-center\">\r\n                        {type === 'department' ? (\r\n                            <Building2 className=\"h-10 w-10 text-muted-foreground/50 mb-3\" />\r\n                        ) : (\r\n                            <Briefcase className=\"h-10 w-10 text-muted-foreground/50 mb-3\" />\r\n                        )}\r\n                        <p className=\"text-muted-foreground font-medium\">\r\n                            No {typeNamePlural} yet\r\n                        </p>\r\n                        <p className=\"text-sm text-muted-foreground mt-1\">\r\n                            Add your first {typeName} using the form above\r\n                        </p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"divide-y\">\r\n                        {items.map((item: IMetadata) => (\r\n                            <div\r\n                                key={item._id}\r\n                                className=\"flex items-center justify-between p-3 hover:bg-muted/50 transition-colors\"\r\n                            >\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <Badge\r\n                                        variant=\"secondary\"\r\n                                        className=\"font-normal\"\r\n                                    >\r\n                                        {item.value}\r\n                                    </Badge>\r\n                                    <span className=\"font-medium\">\r\n                                        {item.label}\r\n                                    </span>\r\n                                </div>\r\n                                <AlertDialog>\r\n                                    <AlertDialogTrigger asChild>\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10\"\r\n                                        >\r\n                                            <Trash2 className=\"h-4 w-4\" />\r\n                                        </Button>\r\n                                    </AlertDialogTrigger>\r\n                                    <AlertDialogContent>\r\n                                        <AlertDialogHeader>\r\n                                            <AlertDialogTitle>\r\n                                                Delete{' '}\r\n                                                {type === 'department'\r\n                                                    ? 'Department'\r\n                                                    : 'Designation'}\r\n                                                ?\r\n                                            </AlertDialogTitle>\r\n                                            <AlertDialogDescription>\r\n                                                Are you sure you want to delete\r\n                                                &quot;{item.label}&quot;? This\r\n                                                action cannot be undone.\r\n                                            </AlertDialogDescription>\r\n                                        </AlertDialogHeader>\r\n                                        <AlertDialogFooter>\r\n                                            <AlertDialogCancel>\r\n                                                Cancel\r\n                                            </AlertDialogCancel>\r\n                                            <AlertDialogAction\r\n                                                onClick={() =>\r\n                                                    handleDelete(item._id)\r\n                                                }\r\n                                                className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                                            >\r\n                                                Delete\r\n                                            </AlertDialogAction>\r\n                                        </AlertDialogFooter>\r\n                                    </AlertDialogContent>\r\n                                </AlertDialog>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Count */}\r\n            {items.length > 0 && (\r\n                <p className=\"text-sm text-muted-foreground text-center\">\r\n                    {items.length}{' '}\r\n                    {items.length === 1 ? typeName : typeNamePlural}\r\n                </p>\r\n            )}\r\n\r\n            {isFetching && !isLoading && (\r\n                <div className=\"text-sm text-muted-foreground text-center\">\r\n                    Refreshing...\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\salary-history-timeline.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[484,487],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[484,487],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchHistory'. Either include it or remove the dependency array.","line":26,"column":8,"nodeType":"ArrayExpression","endLine":26,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [fetchHistory, staffId]","fix":{"range":[648,657],"text":"[fetchHistory, staffId]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":96,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":54}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Loader, TrendingUp, TrendingDown, Minus } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\n\r\ninterface SalaryHistoryProps {\r\n    staffId: string;\r\n}\r\n\r\nexport default function SalaryHistoryTimeline({ staffId }: SalaryHistoryProps) {\r\n    const [history, setHistory] = useState<any[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (staffId) {\r\n            fetchHistory();\r\n        }\r\n    }, [staffId]);\r\n\r\n    const fetchHistory = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch(\r\n                `/api/analytics/salary-history/${staffId}`,\r\n                {\r\n                    credentials: 'include',\r\n                },\r\n            );\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setHistory(data.data);\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to fetch salary history:', err);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const getChangeIcon = (previous: number, current: number) => {\r\n        if (current > previous) {\r\n            return <TrendingUp className=\"h-4 w-4 text-green-500\" />;\r\n        } else if (current < previous) {\r\n            return <TrendingDown className=\"h-4 w-4 text-red-500\" />;\r\n        }\r\n        return <Minus className=\"h-4 w-4 text-gray-500\" />;\r\n    };\r\n\r\n    const getChangePercentage = (previous: number, current: number) => {\r\n        if (previous === 0) return 0;\r\n        return (((current - previous) / previous) * 100).toFixed(1);\r\n    };\r\n\r\n    const getChangeColor = (previous: number, current: number) => {\r\n        if (current > previous) return 'text-green-600 dark:text-green-400';\r\n        if (current < previous) return 'text-red-600 dark:text-red-400';\r\n        return 'text-gray-600 dark:text-gray-400';\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Card>\r\n                <CardContent className=\"flex items-center justify-center py-10\">\r\n                    <Loader className=\"h-8 w-8 animate-spin\" />\r\n                </CardContent>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <CardTitle>Salary History</CardTitle>\r\n                <CardDescription>Timeline of salary changes</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n                {history.length === 0 ? (\r\n                    <p className=\"text-center text-muted-foreground py-8\">\r\n                        No salary history available\r\n                    </p>\r\n                ) : (\r\n                    <div className=\"relative\">\r\n                        {/* Timeline Line */}\r\n                        <div className=\"absolute left-8 top-0 bottom-0 w-0.5 bg-border\" />\r\n\r\n                        {/* Timeline Items */}\r\n                        <div className=\"space-y-6\">\r\n                            {history.map((item, index) => (\r\n                                <div\r\n                                    key={item._id}\r\n                                    className=\"relative flex gap-4\"\r\n                                >\r\n                                    {/* Timeline Dot */}\r\n                                    <div className=\"relative z-10 flex items-center justify-center w-16 h-16 rounded-full bg-background border-2 border-primary\">\r\n                                        {getChangeIcon(\r\n                                            item.previousSalary,\r\n                                            item.newSalary,\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* Content */}\r\n                                    <div className=\"flex-1 pb-8\">\r\n                                        <div className=\"bg-muted rounded-lg p-4\">\r\n                                            <div className=\"flex items-start justify-between mb-2\">\r\n                                                <div>\r\n                                                    <p className=\"text-sm text-muted-foreground\">\r\n                                                        {format(\r\n                                                            new Date(\r\n                                                                item.effectiveDate ||\r\n                                                                    item.createdAt,\r\n                                                            ),\r\n                                                            'MMM dd, yyyy',\r\n                                                        )}\r\n                                                    </p>\r\n                                                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                                                        {format(\r\n                                                            new Date(\r\n                                                                item.createdAt,\r\n                                                            ),\r\n                                                            'HH:mm:ss',\r\n                                                        )}\r\n                                                    </p>\r\n                                                </div>\r\n                                                <span\r\n                                                    className={`text-sm font-medium ${getChangeColor(item.previousSalary, item.newSalary)}`}\r\n                                                >\r\n                                                    {item.newSalary >\r\n                                                    item.previousSalary\r\n                                                        ? '+'\r\n                                                        : ''}\r\n                                                    {getChangePercentage(\r\n                                                        item.previousSalary,\r\n                                                        item.newSalary,\r\n                                                    )}\r\n                                                    %\r\n                                                </span>\r\n                                            </div>\r\n\r\n                                            <div className=\"grid grid-cols-2 gap-4 mt-3\">\r\n                                                <div>\r\n                                                    <p className=\"text-xs text-muted-foreground\">\r\n                                                        Previous Salary\r\n                                                    </p>\r\n                                                    <p className=\"text-lg font-semibold\">\r\n                                                        ৳\r\n                                                        {item.previousSalary.toLocaleString()}\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"text-xs text-muted-foreground\">\r\n                                                        New Salary\r\n                                                    </p>\r\n                                                    <p className=\"text-lg font-semibold\">\r\n                                                        ৳\r\n                                                        {item.newSalary.toLocaleString()}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {item.reason && (\r\n                                                <div className=\"mt-3 pt-3 border-t\">\r\n                                                    <p className=\"text-xs text-muted-foreground\">\r\n                                                        Reason\r\n                                                    </p>\r\n                                                    <p className=\"text-sm mt-1\">\r\n                                                        {item.reason}\r\n                                                    </p>\r\n                                                </div>\r\n                                            )}\r\n\r\n                                            <div className=\"mt-3 pt-3 border-t\">\r\n                                                <p className=\"text-xs text-muted-foreground\">\r\n                                                    Changed by:{' '}\r\n                                                    <span className=\"font-mono\">\r\n                                                        {item.changedBy}\r\n                                                    </span>\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\admin\\send-invitation.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1360,1363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1360,1363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2122,2125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2122,2125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useCreateInvitationMutation } from '@/redux/features/invitation/invitationApi';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { toast } from 'sonner';\r\nimport { Role } from '@/constants/role';\r\n\r\nexport default function SendInvitation() {\r\n    const [createInvitation, { isLoading }] = useCreateInvitationMutation();\r\n    const [formData, setFormData] = useState({\r\n        email: '',\r\n        role: '',\r\n        department: '',\r\n        designation: '',\r\n        salary: '',\r\n        branchId: '',\r\n    });\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (\r\n            !formData.email ||\r\n            !formData.role ||\r\n            !formData.designation ||\r\n            !formData.salary ||\r\n            !formData.branchId\r\n        ) {\r\n            toast.error('Please fill in all required fields');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const payload: any = {\r\n                email: formData.email,\r\n                role: formData.role as 'staff' | 'team_leader',\r\n                designation: formData.designation,\r\n                salary: Number(formData.salary),\r\n                branchId: formData.branchId,\r\n            };\r\n\r\n            if (formData.department) {\r\n                payload.department = formData.department;\r\n            }\r\n\r\n            await createInvitation(payload).unwrap();\r\n\r\n            toast.success('Invitation sent successfully!');\r\n            setFormData({\r\n                email: '',\r\n                role: '',\r\n                department: '',\r\n                designation: '',\r\n                salary: '',\r\n                branchId: '',\r\n            });\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to send invitation');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <CardTitle>Send New Invitation</CardTitle>\r\n                <CardDescription>\r\n                    Send an invitation email to a new staff member\r\n                </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"email\">\r\n                                Email{' '}\r\n                                <span className=\"text-destructive\">*</span>\r\n                            </Label>\r\n                            <Input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                placeholder=\"staff@example.com\"\r\n                                value={formData.email}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        email: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"role\">\r\n                                Role <span className=\"text-destructive\">*</span>\r\n                            </Label>\r\n                            <Select\r\n                                value={formData.role}\r\n                                onValueChange={(value) =>\r\n                                    setFormData({ ...formData, role: value })\r\n                                }\r\n                            >\r\n                                <SelectTrigger id=\"role\">\r\n                                    <SelectValue placeholder=\"Select role\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value={Role.STAFF}>\r\n                                        Staff\r\n                                    </SelectItem>\r\n                                    <SelectItem value={Role.TEAM_LEADER}>\r\n                                        Team Leader\r\n                                    </SelectItem>\r\n                                    <SelectItem value={Role.HR_MANAGER}>\r\n                                        HR Manager\r\n                                    </SelectItem>\r\n                                    <SelectItem value={Role.ADMIN}>\r\n                                        Admin\r\n                                    </SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"designation\">\r\n                                Designation{' '}\r\n                                <span className=\"text-destructive\">*</span>\r\n                            </Label>\r\n                            <Input\r\n                                id=\"designation\"\r\n                                placeholder=\"e.g., Software Engineer\"\r\n                                value={formData.designation}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        designation: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"department\">Department</Label>\r\n                            <Input\r\n                                id=\"department\"\r\n                                placeholder=\"e.g., Engineering\"\r\n                                value={formData.department}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        department: e.target.value,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"salary\">\r\n                                Salary{' '}\r\n                                <span className=\"text-destructive\">*</span>\r\n                            </Label>\r\n                            <Input\r\n                                id=\"salary\"\r\n                                type=\"number\"\r\n                                placeholder=\"50000\"\r\n                                value={formData.salary}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        salary: e.target.value,\r\n                                    })\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"branchId\">Branch ID</Label>\r\n                            <Input\r\n                                id=\"branchId\"\r\n                                placeholder=\"Optional\"\r\n                                value={formData.branchId}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        branchId: e.target.value,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Button\r\n                        type=\"submit\"\r\n                        disabled={isLoading}\r\n                        className=\"w-full md:w-auto\"\r\n                    >\r\n                        {isLoading ? 'Sending...' : 'Send Invitation'}\r\n                    </Button>\r\n                </form>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\auth\\sign-in.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\auth\\sign-up.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2153,2156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2153,2156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":171,"column":29,"nodeType":"JSXOpeningElement","endLine":175,"endColumn":31}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardFooter,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '../ui/card';\r\nimport { Input } from '../ui/input';\r\nimport { Label } from '../ui/label';\r\nimport { useForm } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { Button } from '../ui/button';\r\nimport { Spinner } from '../ui/spinner';\r\nimport { signUp } from '@/lib/auth-client';\r\nimport { useState } from 'react';\r\nimport { toast } from 'sonner';\r\n\r\nconst signupValidationSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n\r\n    email: z.email('Enter a valid email').nonempty('Email is required'),\r\n\r\n    phone: z\r\n        .string()\r\n        .min(6, 'Phone number is too short')\r\n        .max(20, 'Phone number is too long'),\r\n\r\n    image: z.url('Invalid image URL').optional(),\r\n\r\n    password: z\r\n        .string()\r\n        .nonempty('Password is required')\r\n        .min(6, 'Password must be at least 6 characters'),\r\n});\r\n\r\ntype SignupFormData = z.infer<typeof signupValidationSchema>;\r\n\r\nexport default function SignupForm() {\r\n    const form = useForm<SignupFormData>({\r\n        resolver: zodResolver(signupValidationSchema),\r\n        defaultValues: {\r\n            name: '',\r\n            email: '',\r\n            phone: '',\r\n            image: '',\r\n            password: '',\r\n        },\r\n        mode: 'onBlur',\r\n    });\r\n\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [imagePreview, setImagePreview] = useState<string | null>(null);\r\n\r\n    const isLoading = form.formState.isSubmitting;\r\n\r\n    const onSubmit = async (data: SignupFormData) => {\r\n        try {\r\n            await signUp.email({\r\n                ...data,\r\n                callbackURL: `${process.env.NEXT_PUBLIC_FRONTEND_URL}/dashboard`,\r\n                role: '',\r\n                theme: ''\r\n            });\r\n\r\n            toast.success(\r\n                'Account created successfully. Please verify your email.'\r\n            );\r\n\r\n            form.reset();\r\n            setImagePreview(null);\r\n        } catch (err: any) {\r\n            const message =\r\n                err?.response?.data?.message || err?.message || 'Signup failed';\r\n\r\n            toast.error(message);\r\n        } finally {\r\n            setShowPassword(false);\r\n        }\r\n    };\r\n\r\n    const handleImageChange = (file?: File) => {\r\n        if (!file) return;\r\n\r\n        const url = URL.createObjectURL(file);\r\n        setImagePreview(url);\r\n\r\n        setTimeout(() => {\r\n            form.setValue('image', url);\r\n        }, 300);\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={form.handleSubmit(onSubmit)}>\r\n            <Card>\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-2xl\">Create Account</CardTitle>\r\n                    <CardDescription className=\"font-serif\">\r\n                        Enter your details to create your account\r\n                    </CardDescription>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"space-y-6\">\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"name\">\r\n                            Full Name{' '}\r\n                            <span className=\"text-destructive\">*</span>\r\n                        </Label>\r\n                        <Input\r\n                            id=\"name\"\r\n                            placeholder=\"Enter your full name\"\r\n                            {...form.register('name')}\r\n                        />\r\n                        {form.formState.errors.name && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {form.formState.errors.name.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"email\">\r\n                            Email Address{' '}\r\n                            <span className=\"text-destructive\">*</span>\r\n                        </Label>\r\n                        <Input\r\n                            id=\"email\"\r\n                            type=\"email\"\r\n                            placeholder=\"Enter your email\"\r\n                            {...form.register('email')}\r\n                        />\r\n                        {form.formState.errors.email && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {form.formState.errors.email.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"phone\">Phone Number</Label>\r\n                        <Input\r\n                            id=\"phone\"\r\n                            placeholder=\"Enter your phone number\"\r\n                            {...form.register('phone')}\r\n                        />\r\n                        {form.formState.errors.phone && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {form.formState.errors.phone.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"image\">\r\n                            Profile Image{' '}\r\n                            <span className=\"text-destructive\">*</span>\r\n                        </Label>\r\n                        <Input\r\n                            id=\"image\"\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            onChange={(e) =>\r\n                                handleImageChange(e.target.files?.[0])\r\n                            }\r\n                        />\r\n\r\n                        {imagePreview && (\r\n                            <img\r\n                                src={imagePreview}\r\n                                alt=\"Preview\"\r\n                                className=\"mt-2 h-24 w-24 rounded-lg object-cover border\"\r\n                            />\r\n                        )}\r\n\r\n                        {form.formState.errors.image && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {form.formState.errors.image.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"password\">\r\n                            Password <span className=\"text-destructive\">*</span>\r\n                        </Label>\r\n                        <div className=\"relative\">\r\n                            <Input\r\n                                id=\"password\"\r\n                                type={showPassword ? 'text' : 'password'}\r\n                                placeholder=\"Enter new password\"\r\n                                {...form.register('password')}\r\n                            />\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"link\"\r\n                                onClick={() => setShowPassword(!showPassword)}\r\n                                className=\"absolute right-1 top-1/2 -translate-y-1/2\"\r\n                            >\r\n                                {showPassword ? 'Hide' : 'Show'}\r\n                            </Button>\r\n                        </div>\r\n                        {form.formState.errors.password && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {form.formState.errors.password.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </CardContent>\r\n\r\n                <CardFooter>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        className=\"w-full\"\r\n                        disabled={isLoading}\r\n                    >\r\n                        {isLoading && <Spinner />}\r\n                        Create Account\r\n                    </Button>\r\n                </CardFooter>\r\n            </Card>\r\n        </form>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\careers\\ApplicationDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":6,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { format } from 'date-fns';\r\nimport {\r\n    X,\r\n    Download,\r\n    Mail,\r\n    Phone,\r\n    MapPin,\r\n    Calendar,\r\n    Briefcase,\r\n    ExternalLink,\r\n    CheckCircle,\r\n    Loader,\r\n} from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { useUpdateApplicationStatusMutation } from '@/redux/features/career/careerApi';\r\nimport type { IJobApplication, ApplicationStatus } from '@/types/career.type';\r\nimport {\r\n    APPLICATION_STATUS_LABELS,\r\n    APPLICATION_STATUS_COLORS,\r\n} from '@/types/career.type';\r\nimport { toast } from 'sonner';\r\n\r\ninterface ApplicationDetailsModalProps {\r\n    application: IJobApplication;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function ApplicationDetailsModal({\r\n    application,\r\n    onClose,\r\n}: ApplicationDetailsModalProps) {\r\n    const [updateStatus, { isLoading }] = useUpdateApplicationStatusMutation();\r\n    const [status, setStatus] = useState<ApplicationStatus>(application.status);\r\n    const [notes, setNotes] = useState(application.notes || '');\r\n\r\n    const handleStatusUpdate = async () => {\r\n        try {\r\n            await updateStatus({\r\n                id: application._id,\r\n                status,\r\n                notes: notes || undefined,\r\n            }).unwrap();\r\n            toast.success('Status updated successfully');\r\n            onClose();\r\n        } catch {\r\n            toast.error('Failed to update status');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open onOpenChange={onClose}>\r\n            <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"flex items-center gap-2\">\r\n                        <Briefcase className=\"h-5 w-5\" />\r\n                        Application Details\r\n                    </DialogTitle>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {/* Applicant Info */}\r\n                    <div className=\"p-4 bg-muted rounded-lg space-y-3\">\r\n                        <h3 className=\"font-semibold text-lg\">\r\n                            {application.firstName} {application.lastName}\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-2 gap-3 text-sm\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Mail className=\"h-4 w-4 text-muted-foreground\" />\r\n                                <a\r\n                                    href={`mailto:${application.email}`}\r\n                                    className=\"text-primary hover:underline\"\r\n                                >\r\n                                    {application.email}\r\n                                </a>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Phone className=\"h-4 w-4 text-muted-foreground\" />\r\n                                <a\r\n                                    href={`tel:${application.phone}`}\r\n                                    className=\"hover:underline\"\r\n                                >\r\n                                    {application.phone}\r\n                                </a>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Social Links */}\r\n                        <div className=\"flex flex-wrap gap-2 pt-2\">\r\n                            {application.facebook && (\r\n                                <Button variant=\"outline\" size=\"sm\" asChild>\r\n                                    <a\r\n                                        href={application.facebook}\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                    >\r\n                                        Facebook{' '}\r\n                                        <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n                                    </a>\r\n                                </Button>\r\n                            )}\r\n                            {application.linkedin && (\r\n                                <Button variant=\"outline\" size=\"sm\" asChild>\r\n                                    <a\r\n                                        href={application.linkedin}\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                    >\r\n                                        LinkedIn{' '}\r\n                                        <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n                                    </a>\r\n                                </Button>\r\n                            )}\r\n                            {application.portfolio && (\r\n                                <Button variant=\"outline\" size=\"sm\" asChild>\r\n                                    <a\r\n                                        href={application.portfolio}\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                    >\r\n                                        Portfolio{' '}\r\n                                        <ExternalLink className=\"h-3 w-3 ml-1\" />\r\n                                    </a>\r\n                                </Button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Position Info */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label className=\"text-muted-foreground\">\r\n                            Applied For\r\n                        </Label>\r\n                        <div className=\"p-3 border rounded-lg\">\r\n                            <div className=\"font-medium\">\r\n                                {application.jobPosition?.title}\r\n                            </div>\r\n                            <div className=\"text-sm text-muted-foreground\">\r\n                                {application.jobPosition?.company}\r\n                            </div>\r\n                            {application.jobPosition?.location && (\r\n                                <div className=\"flex items-center gap-1 text-sm text-muted-foreground mt-1\">\r\n                                    <MapPin className=\"h-3 w-3\" />\r\n                                    {application.jobPosition.location}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Experience */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label className=\"text-muted-foreground\">\r\n                            Experience Level\r\n                        </Label>\r\n                        <Badge\r\n                            variant=\"outline\"\r\n                            className=\"text-base py-1 px-3\"\r\n                        >\r\n                            {application.hasExperience\r\n                                ? '✅ Experienced'\r\n                                : '🆕 Fresher'}\r\n                        </Badge>\r\n                    </div>\r\n\r\n                    {/* Work Experience Details */}\r\n                    {application.hasExperience &&\r\n                        application.experiences &&\r\n                        application.experiences.length > 0 && (\r\n                            <div className=\"space-y-3\">\r\n                                <Label className=\"text-muted-foreground\">\r\n                                    Work Experience\r\n                                </Label>\r\n                                {application.experiences.map((exp, index) => (\r\n                                    <div\r\n                                        key={index}\r\n                                        className=\"p-3 border rounded-lg space-y-1\"\r\n                                    >\r\n                                        <div className=\"font-medium\">\r\n                                            {exp.position}\r\n                                        </div>\r\n                                        <div className=\"text-sm text-muted-foreground\">\r\n                                            {exp.company}\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\r\n                                            <Calendar className=\"h-3 w-3\" />\r\n                                            {format(\r\n                                                new Date(exp.startDate),\r\n                                                'MMM yyyy',\r\n                                            )}{' '}\r\n                                            -{' '}\r\n                                            {exp.isCurrent\r\n                                                ? 'Present'\r\n                                                : exp.endDate\r\n                                                  ? format(\r\n                                                        new Date(exp.endDate),\r\n                                                        'MMM yyyy',\r\n                                                    )\r\n                                                  : 'N/A'}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                    {/* Cover Letter */}\r\n                    {application.coverLetter && (\r\n                        <div className=\"space-y-2\">\r\n                            <Label className=\"text-muted-foreground\">\r\n                                Cover Letter\r\n                            </Label>\r\n                            <div className=\"p-3 border rounded-lg text-sm whitespace-pre-wrap\">\r\n                                {application.coverLetter}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* CV Download */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label className=\"text-muted-foreground\">\r\n                            Resume/CV\r\n                        </Label>\r\n                        <Button variant=\"outline\" className=\"w-full\" asChild>\r\n                            <a\r\n                                href={application.cvFile?.url}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                            >\r\n                                <Download className=\"h-4 w-4 \" />\r\n                                Download CV ({application.cvFile?.fileName})\r\n                            </a>\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {/* Application Date */}\r\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n                        <Calendar className=\"h-4 w-4\" />\r\n                        Applied on{' '}\r\n                        {format(\r\n                            new Date(application.createdAt),\r\n                            'MMMM dd, yyyy hh:mm a',\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Status Update Section */}\r\n                    <div className=\"border-t pt-6 space-y-4\">\r\n                        <h4 className=\"font-semibold\">Update Status</h4>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <Label className=\"min-w-[80px]\">Current:</Label>\r\n                            <Badge\r\n                                className={\r\n                                    APPLICATION_STATUS_COLORS[\r\n                                        application.status\r\n                                    ]\r\n                                }\r\n                            >\r\n                                {APPLICATION_STATUS_LABELS[application.status]}\r\n                            </Badge>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"status\">New Status</Label>\r\n                            <Select\r\n                                value={status}\r\n                                onValueChange={(val) =>\r\n                                    setStatus(val as ApplicationStatus)\r\n                                }\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"pending\">\r\n                                        Pending\r\n                                    </SelectItem>\r\n                                    <SelectItem value=\"reviewed\">\r\n                                        Reviewed\r\n                                    </SelectItem>\r\n                                    <SelectItem value=\"shortlisted\">\r\n                                        Shortlisted\r\n                                    </SelectItem>\r\n                                    <SelectItem value=\"rejected\">\r\n                                        Rejected\r\n                                    </SelectItem>\r\n                                    <SelectItem value=\"hired\">Hired</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"notes\">Notes (Optional)</Label>\r\n                            <Textarea\r\n                                id=\"notes\"\r\n                                value={notes}\r\n                                onChange={(e) => setNotes(e.target.value)}\r\n                                placeholder=\"Add any notes about this application...\"\r\n                                rows={3}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n                        <Button variant=\"outline\" onClick={onClose}>\r\n                            Close\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleStatusUpdate}\r\n                            disabled={\r\n                                isLoading || status === application.status\r\n                            }\r\n                        >\r\n                            {isLoading ? (\r\n                                <Loader className=\"h-4 w-4  animate-spin\" />\r\n                            ) : (\r\n                                <CheckCircle className=\"h-4 w-4 \" />\r\n                            )}\r\n                            Update Status\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\careers\\PositionFormModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":11},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\careers\\PositionFormModal.tsx:62:13\n  60 |     useEffect(() => {\n  61 |         if (position) {\n> 62 |             setFormData({\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  63 |                 slug: position.slug,\n  64 |                 title: position.title,\n  65 |                 company: position.company,","line":62,"column":13,"nodeType":null,"endLine":62,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { X, Plus, Trash2, Loader } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n    useCreatePositionMutation,\r\n    useUpdatePositionMutation,\r\n} from '@/redux/features/career/careerApi';\r\nimport type { IJobPosition, CreateJobPositionInput } from '@/types/career.type';\r\nimport { toast } from 'sonner';\r\n\r\ninterface PositionFormModalProps {\r\n    position: IJobPosition | null;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function PositionFormModal({\r\n    position,\r\n    onClose,\r\n}: PositionFormModalProps) {\r\n    const isEditing = !!position;\r\n\r\n    const [createPosition, { isLoading: isCreating }] =\r\n        useCreatePositionMutation();\r\n    const [updatePosition, { isLoading: isUpdating }] =\r\n        useUpdatePositionMutation();\r\n\r\n    const isLoading = isCreating || isUpdating;\r\n\r\n    const [formData, setFormData] = useState<CreateJobPositionInput>({\r\n        title: '',\r\n        company: 'Web Briks LLC',\r\n        location: 'Mirpur-10, Dhaka',\r\n        vacancies: 1,\r\n        officeTime: 'N/A',\r\n        jobType: 'Work at office',\r\n        salary: 'Negotiable',\r\n        deadline: '',\r\n        companyHistory: '',\r\n        description: '',\r\n        responsibilities: [''],\r\n        requirements: [''],\r\n        benefits: [''],\r\n        shift: '',\r\n        gender: '',\r\n        isOpened: true,\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (position) {\r\n            setFormData({\r\n                slug: position.slug,\r\n                title: position.title,\r\n                company: position.company,\r\n                location: position.location,\r\n                vacancies: position.vacancies,\r\n                officeTime: position.officeTime,\r\n                jobType: position.jobType,\r\n                salary: position.salary,\r\n                deadline: position.deadline.split('T')[0],\r\n                companyHistory: position.companyHistory,\r\n                description: position.description,\r\n                responsibilities:\r\n                    position.responsibilities.length > 0\r\n                        ? position.responsibilities\r\n                        : [''],\r\n                requirements:\r\n                    position.requirements.length > 0\r\n                        ? position.requirements\r\n                        : [''],\r\n                benefits:\r\n                    position.benefits.length > 0 ? position.benefits : [''],\r\n                shift: position.shift || '',\r\n                gender: position.gender || '',\r\n                isOpened: position.isOpened,\r\n            });\r\n        }\r\n    }, [position]);\r\n\r\n    const handleChange = (\r\n        field: keyof CreateJobPositionInput,\r\n        value: unknown,\r\n    ) => {\r\n        setFormData((prev) => ({ ...prev, [field]: value }));\r\n    };\r\n\r\n    const handleArrayChange = (\r\n        field: 'responsibilities' | 'requirements' | 'benefits',\r\n        index: number,\r\n        value: string,\r\n    ) => {\r\n        const arr = [...(formData[field] || [])];\r\n        arr[index] = value;\r\n        handleChange(field, arr);\r\n    };\r\n\r\n    const addArrayItem = (\r\n        field: 'responsibilities' | 'requirements' | 'benefits',\r\n    ) => {\r\n        handleChange(field, [...(formData[field] || []), '']);\r\n    };\r\n\r\n    const removeArrayItem = (\r\n        field: 'responsibilities' | 'requirements' | 'benefits',\r\n        index: number,\r\n    ) => {\r\n        const arr = [...(formData[field] || [])];\r\n        arr.splice(index, 1);\r\n        handleChange(field, arr.length > 0 ? arr : ['']);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        // Filter out empty strings from arrays\r\n        const cleanData = {\r\n            ...formData,\r\n            responsibilities: formData.responsibilities?.filter(Boolean) || [],\r\n            requirements: formData.requirements?.filter(Boolean) || [],\r\n            benefits: formData.benefits?.filter(Boolean) || [],\r\n        };\r\n\r\n        try {\r\n            if (isEditing && position) {\r\n                await updatePosition({\r\n                    id: position._id,\r\n                    ...cleanData,\r\n                }).unwrap();\r\n                toast.success('Position updated successfully');\r\n            } else {\r\n                await createPosition(cleanData).unwrap();\r\n                toast.success('Position created successfully');\r\n            }\r\n            onClose();\r\n        } catch {\r\n            toast.error(\r\n                isEditing\r\n                    ? 'Failed to update position'\r\n                    : 'Failed to create position',\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open onOpenChange={onClose}>\r\n            <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle>\r\n                        {isEditing\r\n                            ? 'Edit Job Position'\r\n                            : 'Create New Job Position'}\r\n                    </DialogTitle>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                    {/* Basic Info */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"title\">Job Title *</Label>\r\n                            <Input\r\n                                id=\"title\"\r\n                                value={formData.title}\r\n                                onChange={(e) =>\r\n                                    handleChange('title', e.target.value)\r\n                                }\r\n                                required\r\n                                placeholder=\"e.g. Full Stack Developer\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"company\">Company *</Label>\r\n                            <Input\r\n                                id=\"company\"\r\n                                value={formData.company}\r\n                                onChange={(e) =>\r\n                                    handleChange('company', e.target.value)\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"location\">Location *</Label>\r\n                            <Input\r\n                                id=\"location\"\r\n                                value={formData.location}\r\n                                onChange={(e) =>\r\n                                    handleChange('location', e.target.value)\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"deadline\">Deadline *</Label>\r\n                            <Input\r\n                                id=\"deadline\"\r\n                                type=\"date\"\r\n                                value={formData.deadline}\r\n                                onChange={(e) =>\r\n                                    handleChange('deadline', e.target.value)\r\n                                }\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"vacancies\">Vacancies</Label>\r\n                            <Input\r\n                                id=\"vacancies\"\r\n                                type=\"number\"\r\n                                min=\"1\"\r\n                                value={formData.vacancies}\r\n                                onChange={(e) =>\r\n                                    handleChange(\r\n                                        'vacancies',\r\n                                        parseInt(e.target.value) || 1,\r\n                                    )\r\n                                }\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"jobType\">Job Type</Label>\r\n                            <Input\r\n                                id=\"jobType\"\r\n                                value={formData.jobType}\r\n                                onChange={(e) =>\r\n                                    handleChange('jobType', e.target.value)\r\n                                }\r\n                                placeholder=\"e.g. Work at office\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"salary\">Salary</Label>\r\n                            <Input\r\n                                id=\"salary\"\r\n                                value={formData.salary}\r\n                                onChange={(e) =>\r\n                                    handleChange('salary', e.target.value)\r\n                                }\r\n                                placeholder=\"e.g. Negotiable\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"officeTime\">Office Time</Label>\r\n                            <Input\r\n                                id=\"officeTime\"\r\n                                value={formData.officeTime}\r\n                                onChange={(e) =>\r\n                                    handleChange('officeTime', e.target.value)\r\n                                }\r\n                                placeholder=\"e.g. 10:00 AM - 7:00 PM\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"shift\">Shift (Optional)</Label>\r\n                            <Input\r\n                                id=\"shift\"\r\n                                value={formData.shift}\r\n                                onChange={(e) =>\r\n                                    handleChange('shift', e.target.value)\r\n                                }\r\n                                placeholder=\"e.g. Evening & Night Shift\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"gender\">\r\n                                Target Gender (Optional)\r\n                            </Label>\r\n                            <Input\r\n                                id=\"gender\"\r\n                                value={formData.gender}\r\n                                onChange={(e) =>\r\n                                    handleChange('gender', e.target.value)\r\n                                }\r\n                                placeholder=\"e.g. Female\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Description */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"description\">Job Description *</Label>\r\n                        <Textarea\r\n                            id=\"description\"\r\n                            value={formData.description}\r\n                            onChange={(e) =>\r\n                                handleChange('description', e.target.value)\r\n                            }\r\n                            required\r\n                            rows={4}\r\n                            placeholder=\"Describe the job role and what you're looking for...\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"companyHistory\">\r\n                            Company Description\r\n                        </Label>\r\n                        <Textarea\r\n                            id=\"companyHistory\"\r\n                            value={formData.companyHistory}\r\n                            onChange={(e) =>\r\n                                handleChange('companyHistory', e.target.value)\r\n                            }\r\n                            rows={3}\r\n                            placeholder=\"Brief history or description of the company...\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Responsibilities */}\r\n                    <div className=\"space-y-3\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <Label>Responsibilities</Label>\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => addArrayItem('responsibilities')}\r\n                            >\r\n                                <Plus className=\"h-3 w-3 mr-1\" /> Add\r\n                            </Button>\r\n                        </div>\r\n                        {formData.responsibilities?.map((item, index) => (\r\n                            <div key={index} className=\"flex gap-2\">\r\n                                <Input\r\n                                    value={item}\r\n                                    onChange={(e) =>\r\n                                        handleArrayChange(\r\n                                            'responsibilities',\r\n                                            index,\r\n                                            e.target.value,\r\n                                        )\r\n                                    }\r\n                                    placeholder=\"Enter responsibility...\"\r\n                                />\r\n                                {(formData.responsibilities?.length || 0) >\r\n                                    1 && (\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        onClick={() =>\r\n                                            removeArrayItem(\r\n                                                'responsibilities',\r\n                                                index,\r\n                                            )\r\n                                        }\r\n                                    >\r\n                                        <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Requirements */}\r\n                    <div className=\"space-y-3\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <Label>Requirements</Label>\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => addArrayItem('requirements')}\r\n                            >\r\n                                <Plus className=\"h-3 w-3 mr-1\" /> Add\r\n                            </Button>\r\n                        </div>\r\n                        {formData.requirements?.map((item, index) => (\r\n                            <div key={index} className=\"flex gap-2\">\r\n                                <Input\r\n                                    value={item}\r\n                                    onChange={(e) =>\r\n                                        handleArrayChange(\r\n                                            'requirements',\r\n                                            index,\r\n                                            e.target.value,\r\n                                        )\r\n                                    }\r\n                                    placeholder=\"Enter requirement...\"\r\n                                />\r\n                                {(formData.requirements?.length || 0) > 1 && (\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        onClick={() =>\r\n                                            removeArrayItem(\r\n                                                'requirements',\r\n                                                index,\r\n                                            )\r\n                                        }\r\n                                    >\r\n                                        <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Benefits */}\r\n                    <div className=\"space-y-3\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <Label>Benefits</Label>\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                onClick={() => addArrayItem('benefits')}\r\n                            >\r\n                                <Plus className=\"h-3 w-3 mr-1\" /> Add\r\n                            </Button>\r\n                        </div>\r\n                        {formData.benefits?.map((item, index) => (\r\n                            <div key={index} className=\"flex gap-2\">\r\n                                <Input\r\n                                    value={item}\r\n                                    onChange={(e) =>\r\n                                        handleArrayChange(\r\n                                            'benefits',\r\n                                            index,\r\n                                            e.target.value,\r\n                                        )\r\n                                    }\r\n                                    placeholder=\"Enter benefit...\"\r\n                                />\r\n                                {(formData.benefits?.length || 0) > 1 && (\r\n                                    <Button\r\n                                        type=\"button\"\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        onClick={() =>\r\n                                            removeArrayItem('benefits', index)\r\n                                        }\r\n                                    >\r\n                                        <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Status Toggle */}\r\n                    <div className=\"flex items-center justify-between p-4 bg-muted rounded-lg\">\r\n                        <div>\r\n                            <Label\r\n                                htmlFor=\"isOpened\"\r\n                                className=\"text-base font-medium\"\r\n                            >\r\n                                Position Status\r\n                            </Label>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                {formData.isOpened\r\n                                    ? 'Position is open for applications'\r\n                                    : 'Position is closed'}\r\n                            </p>\r\n                        </div>\r\n                        <Switch\r\n                            id=\"isOpened\"\r\n                            checked={formData.isOpened}\r\n                            onCheckedChange={(checked) =>\r\n                                handleChange('isOpened', checked)\r\n                            }\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            onClick={onClose}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button type=\"submit\" disabled={isLoading}>\r\n                            {isLoading && (\r\n                                <Loader className=\"h-4 w-4  animate-spin\" />\r\n                            )}\r\n                            {isEditing ? 'Update Position' : 'Create Position'}\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\client\\ClientForm.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\client\\ClientForm.tsx:111:27\n  109 |     } = form;\n  110 |\n> 111 |     const clientIdValue = watch('clientId');\n      |                           ^^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  112 |\n  113 |     // Debounced client ID check\n  114 |     useEffect(() => {","line":111,"column":27,"nodeType":null,"endLine":111,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Loader } from 'lucide-react';\r\nimport { useLazyCheckClientIdQuery } from '@/redux/features/client/clientApi';\r\n\r\n// Zod schema for client form validation\r\nexport const clientFormSchema = z.object({\r\n    clientId: z\r\n        .string()\r\n        .min(1, 'Client ID is required')\r\n        .min(2, 'Client ID must be at least 2 characters')\r\n        .max(50, 'Client ID must be at most 50 characters')\r\n        .regex(\r\n            /^[A-Za-z0-9_-]+$/,\r\n            'Client ID can only contain letters, numbers, hyphens, and underscores',\r\n        ),\r\n    name: z\r\n        .string()\r\n        .min(1, 'Name is required')\r\n        .min(2, 'Name must be at least 2 characters'),\r\n    email: z\r\n        .string()\r\n        .min(1, 'Email is required')\r\n        .email('Invalid email address'),\r\n    phone: z.string().optional(),\r\n    address: z.string().optional(),\r\n    officeAddress: z.string().optional(),\r\n    description: z.string().optional(),\r\n    currency: z.string().optional(),\r\n    status: z.enum(['active', 'inactive']),\r\n});\r\n\r\nexport type ClientFormData = z.infer<typeof clientFormSchema>;\r\n\r\ninterface ClientFormProps {\r\n    defaultValues?: Partial<ClientFormData>;\r\n    onSubmit: (data: ClientFormData) => Promise<void>;\r\n    isSubmitting: boolean;\r\n    submitLabel: string;\r\n    onCancel: () => void;\r\n    serverErrors?: Record<string, string[]>;\r\n    isEditMode?: boolean;\r\n}\r\n\r\nconst statusOptions = [\r\n    { value: 'active', label: 'Active' },\r\n    { value: 'inactive', label: 'Inactive' },\r\n];\r\n\r\nconst currencyOptions = [\r\n    { value: '', label: 'Not specified' },\r\n    { value: 'USD', label: 'US Dollar ($)' },\r\n    { value: 'EUR', label: 'Euro (€)' },\r\n    { value: 'GBP', label: 'British Pound (£)' },\r\n    { value: 'AUD', label: 'Australian Dollar (A$)' },\r\n    { value: 'CAD', label: 'Canadian Dollar (C$)' },\r\n];\r\n\r\nexport function ClientForm({\r\n    defaultValues,\r\n    onSubmit,\r\n    isSubmitting,\r\n    submitLabel,\r\n    onCancel,\r\n    serverErrors,\r\n    isEditMode = false,\r\n}: ClientFormProps) {\r\n    const [checkClientId, { isFetching: isCheckingId }] =\r\n        useLazyCheckClientIdQuery();\r\n    const [clientIdError, setClientIdError] = useState<string | null>(null);\r\n    const debounceRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const form = useForm<ClientFormData>({\r\n        resolver: zodResolver(clientFormSchema),\r\n        defaultValues: {\r\n            clientId: defaultValues?.clientId || '',\r\n            name: defaultValues?.name || '',\r\n            email: defaultValues?.email || '',\r\n            phone: defaultValues?.phone || '',\r\n            address: defaultValues?.address || '',\r\n            officeAddress: defaultValues?.officeAddress || '',\r\n            description: defaultValues?.description || '',\r\n            currency: defaultValues?.currency || '',\r\n            status: defaultValues?.status || 'active',\r\n        },\r\n    });\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n        watch,\r\n        formState: { errors },\r\n    } = form;\r\n\r\n    const clientIdValue = watch('clientId');\r\n\r\n    // Debounced client ID check\r\n    useEffect(() => {\r\n        // Skip check in edit mode or if value is empty/too short\r\n        if (isEditMode || !clientIdValue || clientIdValue.length < 2) {\r\n            setClientIdError(null);\r\n            return;\r\n        }\r\n\r\n        // Clear previous timeout\r\n        if (debounceRef.current) {\r\n            clearTimeout(debounceRef.current);\r\n        }\r\n\r\n        // Set new timeout for 500ms\r\n        debounceRef.current = setTimeout(async () => {\r\n            try {\r\n                const result = await checkClientId(clientIdValue).unwrap();\r\n                if (!result.available) {\r\n                    const suggestions = result.suggestions?.join(', ') || '';\r\n                    setClientIdError(\r\n                        `Client ID \"${clientIdValue}\" already exists.${suggestions ? ` Try: ${suggestions}` : ''}`,\r\n                    );\r\n                } else {\r\n                    setClientIdError(null);\r\n                }\r\n            } catch {\r\n                // Ignore errors during check\r\n                setClientIdError(null);\r\n            }\r\n        }, 500);\r\n\r\n        // Cleanup\r\n        return () => {\r\n            if (debounceRef.current) {\r\n                clearTimeout(debounceRef.current);\r\n            }\r\n        };\r\n    }, [clientIdValue, isEditMode, checkClientId]);\r\n\r\n    const handleFormSubmit = async (data: ClientFormData) => {\r\n        // Prevent submit if there's a client ID error\r\n        if (clientIdError && !isEditMode) {\r\n            return;\r\n        }\r\n        await onSubmit(data);\r\n    };\r\n\r\n    // Get error for a field - check client-side, debounce check, and server-side errors\r\n    const getFieldError = (fieldName: keyof ClientFormData) => {\r\n        if (fieldName === 'clientId' && clientIdError) {\r\n            return clientIdError;\r\n        }\r\n        if (errors[fieldName]?.message) {\r\n            return errors[fieldName].message;\r\n        }\r\n        if (serverErrors?.[fieldName]?.[0]) {\r\n            return serverErrors[fieldName][0];\r\n        }\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit(handleFormSubmit)} className=\"grid gap-4\">\r\n            {/* Client ID Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"clientId\" className=\"text-right pt-2\">\r\n                    Client ID *\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <div className=\"relative\">\r\n                        <Input\r\n                            id=\"clientId\"\r\n                            placeholder=\"e.g., CLT-001, ACME-2024\"\r\n                            {...register('clientId')}\r\n                            disabled={isEditMode}\r\n                            className={isEditMode ? 'bg-muted' : ''}\r\n                        />\r\n                        {isCheckingId && !isEditMode && (\r\n                            <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\r\n                                <Loader className=\"h-4 w-4 animate-spin text-muted-foreground\" />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    {getFieldError('clientId') && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {getFieldError('clientId')}\r\n                        </p>\r\n                    )}\r\n                    {!isEditMode && !getFieldError('clientId') && (\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Use letters, numbers, hyphens, or underscores only\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Name Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"name\" className=\"text-right pt-2\">\r\n                    Name *\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Input\r\n                        id=\"name\"\r\n                        placeholder=\"Enter client/company name\"\r\n                        {...register('name')}\r\n                    />\r\n                    {getFieldError('name') && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {getFieldError('name')}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Email Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"email\" className=\"text-right pt-2\">\r\n                    Email *\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Input\r\n                        id=\"email\"\r\n                        type=\"email\"\r\n                        placeholder=\"client@example.com\"\r\n                        {...register('email')}\r\n                    />\r\n                    {getFieldError('email') && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {getFieldError('email')}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Phone Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"phone\" className=\"text-right pt-2\">\r\n                    Office Phone\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Input\r\n                        id=\"phone\"\r\n                        placeholder=\"Enter office phone number\"\r\n                        {...register('phone')}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Address Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"address\" className=\"text-right pt-2\">\r\n                    Address\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Input\r\n                        id=\"address\"\r\n                        placeholder=\"Enter billing/personal address\"\r\n                        {...register('address')}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Office Address Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"officeAddress\" className=\"text-right pt-2\">\r\n                    Office Address\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Input\r\n                        id=\"officeAddress\"\r\n                        placeholder=\"Enter office/business address\"\r\n                        {...register('officeAddress')}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Status Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label className=\"text-right pt-2\">Status</Label>\r\n                <div className=\"col-span-3\">\r\n                    <Select\r\n                        value={watch('status')}\r\n                        onValueChange={(value: 'active' | 'inactive') =>\r\n                            setValue('status', value)\r\n                        }\r\n                    >\r\n                        <SelectTrigger className=\"w-full\">\r\n                            <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            {statusOptions.map((opt) => (\r\n                                <SelectItem key={opt.value} value={opt.value}>\r\n                                    {opt.label}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Currency Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label className=\"text-right pt-2\">Currency</Label>\r\n                <div className=\"col-span-3\">\r\n                    <Select\r\n                        value={watch('currency') || ''}\r\n                        onValueChange={(value) =>\r\n                            setValue('currency', value || undefined)\r\n                        }\r\n                    >\r\n                        <SelectTrigger className=\"w-full\">\r\n                            <SelectValue placeholder=\"Select currency (optional)\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            {currencyOptions.map((opt) => (\r\n                                <SelectItem\r\n                                    key={opt.value || 'none'}\r\n                                    value={opt.value || 'none'}\r\n                                >\r\n                                    {opt.label}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                        Used for earnings calculations\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Description Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"description\" className=\"text-right pt-2\">\r\n                    Description\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Textarea\r\n                        id=\"description\"\r\n                        placeholder=\"Additional notes about the client...\"\r\n                        {...register('description')}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Form Actions */}\r\n            <div className=\"flex justify-end gap-2 pt-4\">\r\n                <Button type=\"button\" variant=\"outline\" onClick={onCancel}>\r\n                    Cancel\r\n                </Button>\r\n                <Button\r\n                    type=\"submit\"\r\n                    disabled={isSubmitting || (!!clientIdError && !isEditMode)}\r\n                >\r\n                    {isSubmitting && (\r\n                        <Loader className=\"h-4 w-4  animate-spin\" />\r\n                    )}\r\n                    {submitLabel}\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\admin-dashboard\\admin-dashboard-skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\admin-dashboard\\admin-dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":9,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Receipt' is defined but never used.","line":9,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Wallet' is defined but never used.","line":9,"column":68,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":74},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowUpRight' is defined but never used.","line":9,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":88},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":12,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":12,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":12,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":12,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'refetch' is assigned a value but never used.","line":15,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'financialStats' is assigned a value but never used.","line":40,"column":104,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":118},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatCurrency' is assigned a value but never used.","line":42,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useGetAdminDashboardQuery } from '@/redux/features/dashboard/dashboardApi';\r\nimport { StatCard } from './stat-card';\r\nimport { AttendanceOverviewChart } from './attendance-overview-chart';\r\nimport { OvertimeSummaryTable } from './overtime-summary-table';\r\nimport { RecentActivities } from './recent-activities';\r\nimport { AdminDashboardSkeleton } from './admin-dashboard-skeleton';\r\nimport { Users, UserCheck, Clock, TrendingUp, DollarSign, Receipt, Wallet, ArrowUpRight } from 'lucide-react';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { AlertCircle } from 'lucide-react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\n\r\nexport default function AdminDashboard() {\r\n    const { data, isLoading, error, refetch } = useGetAdminDashboardQuery(undefined, {\r\n        pollingInterval: 30000, // Refetch every 30 seconds\r\n    });\r\n\r\n    if (isLoading) {\r\n        return <AdminDashboardSkeleton />;\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <div className=\"space-y-4\">\r\n                <Alert variant=\"destructive\">\r\n                    <AlertCircle className=\"size-4\" />\r\n                    <AlertDescription>\r\n                        Failed to load dashboard data. Please try again.\r\n                    </AlertDescription>\r\n                </Alert>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!data) {\r\n        return null;\r\n    }\r\n\r\n    const { staffStats, attendanceOverview, monthlyAttendanceStats, overtimeSummary, recentActivities, financialStats } = data;\r\n\r\n    const formatCurrency = (amount: number) => {\r\n        return `৳${amount.toLocaleString('en-BD', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Stats Cards */}\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n                <StatCard\r\n                    title=\"Total Staff\"\r\n                    value={staffStats.total}\r\n                    icon={Users}\r\n                    description={`${staffStats.active} active, ${staffStats.inactive} inactive`}\r\n                    variant=\"primary\"\r\n                />\r\n                <StatCard\r\n                    title=\"Today's Attendance\"\r\n                    value={`${attendanceOverview.presentPercentage.toFixed(1)}%`}\r\n                    icon={UserCheck}\r\n                    description={`${attendanceOverview.present} out of ${attendanceOverview.total} present`}\r\n                    variant=\"success\"\r\n                />\r\n                <StatCard\r\n                    title=\"Pending Overtime\"\r\n                    value={overtimeSummary.pending}\r\n                    icon={Clock}\r\n                    description={`${overtimeSummary.total} total requests`}\r\n                    variant=\"warning\"\r\n                />\r\n                <StatCard\r\n                    title=\"Monthly Attendance\"\r\n                    value={`${monthlyAttendanceStats.averageAttendance.toFixed(1)}%`}\r\n                    icon={TrendingUp}\r\n                    description={`${monthlyAttendanceStats.month} ${monthlyAttendanceStats.year}`}\r\n                    variant=\"default\"\r\n                />\r\n            </div>\r\n\r\n            {/* Charts and Summary */}\r\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-7\">\r\n                <div className=\"col-span-4\">\r\n                    <AttendanceOverviewChart data={attendanceOverview} />\r\n                </div>\r\n                <div className=\"col-span-3\">\r\n                    <OvertimeSummaryTable data={overtimeSummary} />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Department Stats */}\r\n            {staffStats.byDepartment.length > 0 && (\r\n                <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n                    {staffStats.byDepartment.slice(0, 4).map((dept: { department: string; count: number }) => (\r\n                        <StatCard\r\n                            key={dept.department}\r\n                            title={dept.department || 'No Department'}\r\n                            value={dept.count}\r\n                            icon={Users}\r\n                            description=\"Staff members\"\r\n                            variant=\"default\"\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Recent Activities */}\r\n            <RecentActivities activities={recentActivities} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\admin-dashboard\\attendance-overview-chart.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":79,"column":39,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2093,2109],"text":"Today&apos;s Overview"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2093,2109],"text":"Today&lsquo;s Overview"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2093,2109],"text":"Today&#39;s Overview"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2093,2109],"text":"Today&rsquo;s Overview"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport * as React from 'react';\r\nimport { Label, Pie, PieChart } from 'recharts';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardFooter,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport {\r\n    ChartConfig,\r\n    ChartContainer,\r\n    ChartTooltip,\r\n    ChartTooltipContent,\r\n} from '@/components/ui/chart';\r\nimport type { AttendanceOverview } from '@/types/dashboard.type';\r\n\r\ninterface AttendanceOverviewChartProps {\r\n    data: AttendanceOverview;\r\n}\r\n\r\nconst chartConfig = {\r\n    visitors: {\r\n        label: 'Staff',\r\n    },\r\n    present: {\r\n        label: 'Present',\r\n        color: 'hsl(var(--chart-1))',\r\n    },\r\n    late: {\r\n        label: 'Late',\r\n        color: 'hsl(var(--chart-2))',\r\n    },\r\n    absent: {\r\n        label: 'Absent',\r\n        color: 'hsl(var(--chart-3))',\r\n    },\r\n    onLeave: {\r\n        label: 'On Leave',\r\n        color: 'hsl(var(--chart-4))',\r\n    },\r\n} satisfies ChartConfig;\r\n\r\nexport function AttendanceOverviewChart({\r\n    data,\r\n}: AttendanceOverviewChartProps) {\r\n    const chartData = React.useMemo(() => {\r\n        return [\r\n            {\r\n                browser: 'present',\r\n                visitors: data.present,\r\n                fill: 'var(--color-present)',\r\n            },\r\n            { browser: 'late', visitors: data.late, fill: 'var(--color-late)' },\r\n            {\r\n                browser: 'absent',\r\n                visitors: data.absent,\r\n                fill: 'var(--color-absent)',\r\n            },\r\n            {\r\n                browser: 'onLeave',\r\n                visitors: data.onLeave,\r\n                fill: 'var(--color-onLeave)',\r\n            },\r\n        ].filter((item) => item.visitors > 0);\r\n    }, [data]);\r\n\r\n    const totalVisitors = React.useMemo(() => {\r\n        return chartData.reduce((acc, curr) => acc + curr.visitors, 0);\r\n    }, [chartData]);\r\n\r\n    return (\r\n        <Card className=\"flex flex-col\">\r\n            <CardHeader className=\"items-center pb-0\">\r\n                <CardTitle>Attendance Distribution</CardTitle>\r\n                <CardDescription>Today's Overview</CardDescription>\r\n            </CardHeader>\r\n            <CardContent className=\"flex-1 pb-0\">\r\n                <ChartContainer\r\n                    config={chartConfig}\r\n                    className=\"mx-auto aspect-square max-h-[250px]\"\r\n                >\r\n                    <PieChart>\r\n                        <ChartTooltip\r\n                            cursor={false}\r\n                            content={<ChartTooltipContent hideLabel />}\r\n                        />\r\n                        <Pie\r\n                            data={chartData}\r\n                            dataKey=\"visitors\"\r\n                            nameKey=\"browser\"\r\n                            innerRadius={60}\r\n                            strokeWidth={5}\r\n                        >\r\n                            <Label\r\n                                content={({ viewBox }) => {\r\n                                    if (\r\n                                        viewBox &&\r\n                                        'cx' in viewBox &&\r\n                                        'cy' in viewBox\r\n                                    ) {\r\n                                        return (\r\n                                            <text\r\n                                                x={viewBox.cx}\r\n                                                y={viewBox.cy}\r\n                                                textAnchor=\"middle\"\r\n                                                dominantBaseline=\"middle\"\r\n                                            >\r\n                                                <tspan\r\n                                                    x={viewBox.cx}\r\n                                                    y={viewBox.cy}\r\n                                                    className=\"fill-foreground text-3xl font-bold\"\r\n                                                >\r\n                                                    {totalVisitors.toLocaleString()}\r\n                                                </tspan>\r\n                                                <tspan\r\n                                                    x={viewBox.cx}\r\n                                                    y={(viewBox.cy || 0) + 24}\r\n                                                    className=\"fill-muted-foreground text-sm\"\r\n                                                >\r\n                                                    Total Staff\r\n                                                </tspan>\r\n                                            </text>\r\n                                        );\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </Pie>\r\n                    </PieChart>\r\n                </ChartContainer>\r\n            </CardContent>\r\n            <CardFooter className=\"flex-col gap-2 text-sm\">\r\n                <div className=\"flex items-center gap-2 font-medium leading-none\">\r\n                    Attendance Rate: {data.presentPercentage.toFixed(1)}%\r\n                </div>\r\n                <div className=\"leading-none text-muted-foreground\">\r\n                    Showing total staff distribution for today\r\n                </div>\r\n            </CardFooter>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\admin-dashboard\\overtime-summary-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\admin-dashboard\\recent-activities.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\admin-dashboard\\recent-activities.tsx:35:9\n  33 |\n  34 |     useEffect(() => {\n> 35 |         setMounted(true);\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |     }, []);\n  37 |\n  38 |     return (","line":35,"column":9,"nodeType":null,"endLine":35,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Clock, UserCheck, Timer, Calendar, Users } from 'lucide-react';\r\nimport type { RecentActivity } from '@/types/dashboard.type';\r\nimport { format, formatDistanceToNow } from 'date-fns';\r\nimport { useState, useEffect } from 'react';\r\n\r\ninterface RecentActivitiesProps {\r\n    activities: RecentActivity[];\r\n}\r\n\r\nconst activityIcons = {\r\n    attendance: UserCheck,\r\n    overtime: Timer,\r\n    shift: Calendar,\r\n    staff: Users,\r\n    leave: Clock,\r\n};\r\n\r\nconst activityColors = {\r\n    attendance: 'text-blue-500',\r\n    overtime: 'text-purple-500',\r\n    shift: 'text-green-500',\r\n    staff: 'text-orange-500',\r\n    leave: 'text-pink-500',\r\n};\r\n\r\nexport function RecentActivities({ activities }: RecentActivitiesProps) {\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n    }, []);\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <CardTitle>Recent Activities</CardTitle>\r\n                <CardDescription>Latest updates from your team</CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <div className=\"space-y-4\">\r\n                    {activities.length === 0 ? (\r\n                        <p className=\"text-sm text-muted-foreground text-center py-8\">\r\n                            No recent activities\r\n                        </p>\r\n                    ) : (\r\n                        activities.map((activity) => {\r\n                            const Icon = activityIcons[activity.type];\r\n                            const iconColor = activityColors[activity.type];\r\n\r\n                            // Safe handling of user name\r\n                            const userName = activity.user?.name || 'Unknown User';\r\n                            const initials = userName\r\n                                .split(' ')\r\n                                .map((n) => n[0])\r\n                                .join('')\r\n                                .toUpperCase()\r\n                                .slice(0, 2);\r\n\r\n                            return (\r\n                                <div\r\n                                    key={activity._id}\r\n                                    className=\"flex items-start gap-3 pb-3 border-b last:border-0 last:pb-0\"\r\n                                >\r\n                                    <Avatar className=\"size-9\">\r\n                                        <AvatarFallback className=\"text-xs\">\r\n                                            {initials}\r\n                                        </AvatarFallback>\r\n                                    </Avatar>\r\n                                    <div className=\"flex-1 space-y-1\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <Icon className={`size-4 ${iconColor}`} />\r\n                                            <Badge variant=\"outline\" className=\"text-xs\">\r\n                                                {activity.type}\r\n                                            </Badge>\r\n                                        </div>\r\n                                        <p className=\"text-sm font-medium\">\r\n                                            {activity.description}\r\n                                        </p>\r\n                                        <p className=\"text-xs text-muted-foreground\">\r\n                                            {mounted ? (\r\n                                                formatDistanceToNow(new Date(activity.timestamp), {\r\n                                                    addSuffix: true,\r\n                                                })\r\n                                            ) : (\r\n                                                format(new Date(activity.timestamp), 'PPp')\r\n                                            )}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\admin-dashboard\\stat-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\overtime\\my-overtime.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\overtime\\overtime-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6201,6204],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6201,6204],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\overtime\\overtime-dialog.tsx:314:36\n  312 |                         <DatePicker\n  313 |                             label=\"Date\"\n> 314 |                             value={watch('date')}\n      |                                    ^^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  315 |                             onChange={(date) => setValue('date', date as Date)}\n  316 |                         />\n  317 |                         {errors.date && (","line":314,"column":36,"nodeType":null,"endLine":314,"endColumn":41}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Imports updated for new components\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogFooter,\r\n} from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    useCreateOvertimeMutation,\r\n    useUpdateOvertimeMutation,\r\n} from '@/redux/features/overtime/overtimeApi';\r\nimport {\r\n    useGetStaffsQuery,\r\n    useGetMeQuery,\r\n} from '@/redux/features/staff/staffApi';\r\nimport { useGetAllBranchesQuery } from '@/redux/features/branch/branchApi';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { toast } from 'sonner';\r\nimport { z } from 'zod';\r\nimport { useEffect, useState } from 'react';\r\nimport { IOvertime } from '@/types/overtime.type';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { DatePicker } from '@/components/shared/DatePicker';\r\nimport { TimePicker } from '@/components/shared/TimePicker';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport IStaff from '@/types/staff.type';\r\nimport { IBranch } from '@/types/branch.type';\r\nimport { useSession } from '@/lib/auth-client';\r\n\r\nconst overtimeSchema = z.object({\r\n    staffId: z.string().min(1, 'Staff ID is required'),\r\n    date: z.date({ error: 'Date is required' }),\r\n    type: z.enum(['pre_shift', 'post_shift', 'weekend', 'holiday']),\r\n    startTime: z.string().min(1, 'Start time is required'),\r\n    durationMinutes: z.number().min(1, 'Duration must be at least 1 minute'),\r\n    reason: z.string().optional(),\r\n});\r\n\r\ntype OvertimeFormValues = z.infer<typeof overtimeSchema>;\r\n\r\ninterface OvertimeDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    data?: IOvertime | null; // If valid, we are editing\r\n}\r\n\r\nexport function OvertimeDialog({\r\n    open,\r\n    onOpenChange,\r\n    data,\r\n}: OvertimeDialogProps) {\r\n    const [createOvertime, { isLoading: isCreating }] =\r\n        useCreateOvertimeMutation();\r\n    const [updateOvertime, { isLoading: isUpdating }] =\r\n        useUpdateOvertimeMutation();\r\n\r\n    // Get Current User info\r\n    const { data: session } = useSession();\r\n    const { data: meData } = useGetMeQuery({});\r\n    const currentUser = meData?.staff;\r\n\r\n    // Use role from session (auth) or fallback to staff user role\r\n    const userRole = session?.user?.role || currentUser?.user?.role;\r\n\r\n    const isBranchAdmin =\r\n        userRole === 'branch_admin' ||\r\n        userRole === 'admin' ||\r\n        userRole === 'super_admin';\r\n\r\n    // State for Branch Selection (only for admins)\r\n    const [selectedBranchId, setSelectedBranchId] = useState<string>('');\r\n\r\n    // Update selectedBranchId when currentUser loads\r\n    useEffect(() => {\r\n        if (currentUser?.branchId && !selectedBranchId) {\r\n            setSelectedBranchId(currentUser.branchId);\r\n        }\r\n    }, [currentUser, selectedBranchId]);\r\n\r\n    // Fetch Branches (only if admin)\r\n    const { data: branchesData } = useGetAllBranchesQuery(undefined, {\r\n        skip: !isBranchAdmin,\r\n    });\r\n\r\n    // Fetch staffs for selection\r\n    // Explicitly ask for 0 limit (all) and filter by branch and exclude admins\r\n    const { data: staffsData, isLoading: isStaffsLoading } = useGetStaffsQuery(\r\n        {\r\n            limit: 1000000000,\r\n            status: 'active',\r\n            branchId: selectedBranchId,\r\n            excludeAdmins: true,\r\n        },\r\n        {\r\n            skip: !selectedBranchId, // Don't fetch until we know the branch (or if global admin user decides to select \"all\"?? For now let's enforce branch selection if logic demands it, but standard flow is: admin has a branch, they see that branch's staff)\r\n        },\r\n    );\r\n\r\n    // State for staff selection dropdown\r\n    const [staffSelectOpen, setStaffSelectOpen] = useState(false);\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        control,\r\n        reset,\r\n        setValue,\r\n        watch,\r\n        formState: { errors },\r\n    } = useForm<OvertimeFormValues>({\r\n        resolver: zodResolver(overtimeSchema),\r\n        defaultValues: {\r\n            staffId: '',\r\n            date: new Date(),\r\n            type: 'post_shift',\r\n            startTime: '',\r\n            durationMinutes: 60,\r\n            reason: '',\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (data) {\r\n            reset({\r\n                staffId: data.staffId._id,\r\n                date: new Date(data.date),\r\n                type: data.type,\r\n                startTime: new Date(data.startTime).toTimeString().slice(0, 5), // HH:mm\r\n                durationMinutes: data.durationMinutes,\r\n                reason: data.reason || '',\r\n            });\r\n        } else {\r\n            reset({\r\n                staffId: '',\r\n                date: new Date(),\r\n                type: 'post_shift',\r\n                startTime: '',\r\n                durationMinutes: 60,\r\n                reason: '',\r\n            });\r\n        }\r\n    }, [data, reset, open]);\r\n\r\n    const onSubmit = async (values: OvertimeFormValues) => {\r\n        try {\r\n            // Construct ISO date string for startTime\r\n            const dateStr = values.date.toISOString().split('T')[0];\r\n            const startDateTime = new Date(`${dateStr}T${values.startTime}`);\r\n\r\n            const payload = {\r\n                ...values,\r\n                date: dateStr, // API expects string YYYY-MM-DD\r\n                startTime: startDateTime.toISOString(),\r\n            };\r\n\r\n            if (data) {\r\n                await updateOvertime({ id: data._id, ...payload }).unwrap();\r\n                toast.success('Overtime updated successfully');\r\n            } else {\r\n                await createOvertime(payload).unwrap();\r\n                toast.success('Overtime created successfully');\r\n            }\r\n            onOpenChange(false);\r\n            reset();\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Something went wrong');\r\n        }\r\n    };\r\n\r\n    const isLoading = isCreating || isUpdating;\r\n\r\n    const getInitials = (name: string) => {\r\n        return name\r\n            .split(' ')\r\n            .map((n) => n[0])\r\n            .join('')\r\n            .toUpperCase()\r\n            .slice(0, 2);\r\n    };\r\n\r\n    // Filter branches if needed or just show all\r\n    const branches = branchesData?.branches || [];\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[500px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>\r\n                        {data ? 'Edit Overtime' : 'Add Overtime'}\r\n                    </DialogTitle>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                    <DialogDescription className=\"hidden\">\r\n                        Overtime details form\r\n                    </DialogDescription>\r\n                    {/* Branch Selection for Admins */}\r\n                    {isBranchAdmin && (\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"branch\">Branch</Label>\r\n                            <Select\r\n                                value={selectedBranchId}\r\n                                onValueChange={setSelectedBranchId}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue placeholder=\"Select Branch\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {branches.map((branch: IBranch) => (\r\n                                        <SelectItem\r\n                                            key={branch._id}\r\n                                            value={branch._id}\r\n                                        >\r\n                                            {branch.name}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Staff Selection */}\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"staffId\">Staff Member</Label>\r\n                        <Controller\r\n                            name=\"staffId\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    open={staffSelectOpen}\r\n                                    onOpenChange={setStaffSelectOpen}\r\n                                    value={field.value}\r\n                                    onValueChange={field.onChange}\r\n                                >\r\n                                    <SelectTrigger className=\"w-full\">\r\n                                        <SelectValue placeholder=\"Select staff member\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <ScrollArea className=\"h-[200px]\">\r\n                                            {isStaffsLoading ? (\r\n                                                <div className=\"p-2 text-center text-sm text-muted-foreground\">\r\n                                                    Loading staffs...\r\n                                                </div>\r\n                                            ) : (\r\n                                                staffsData?.staffs?.map(\r\n                                                    (staff: IStaff) => (\r\n                                                        <SelectItem\r\n                                                            key={staff._id}\r\n                                                            value={staff._id}\r\n                                                        >\r\n                                                            <div className=\"flex items-center gap-2\">\r\n                                                                <Avatar className=\"h-6 w-6\">\r\n                                                                    <AvatarImage\r\n                                                                        src={\r\n                                                                            staff\r\n                                                                                .user\r\n                                                                                ?.image as string\r\n                                                                        }\r\n                                                                    />\r\n                                                                    <AvatarFallback>\r\n                                                                        {getInitials(\r\n                                                                            staff\r\n                                                                                .user\r\n                                                                                ?.name ||\r\n                                                                                'U',\r\n                                                                        )}\r\n                                                                    </AvatarFallback>\r\n                                                                </Avatar>\r\n                                                                <span>\r\n                                                                    {staff.user\r\n                                                                        ?.name ||\r\n                                                                        'Unknown'}\r\n                                                                </span>\r\n                                                                <span className=\"text-xs text-muted-foreground\">\r\n                                                                    (\r\n                                                                    {\r\n                                                                        staff.designation\r\n                                                                    }\r\n                                                                    )\r\n                                                                </span>\r\n                                                            </div>\r\n                                                        </SelectItem>\r\n                                                    ),\r\n                                                )\r\n                                            )}\r\n                                        </ScrollArea>\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            )}\r\n                        />\r\n                        {errors.staffId && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.staffId.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <DatePicker\r\n                            label=\"Date\"\r\n                            value={watch('date')}\r\n                            onChange={(date) => setValue('date', date as Date)}\r\n                        />\r\n                        {errors.date && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.date.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"type\">Type</Label>\r\n                            <Controller\r\n                                name=\"type\"\r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        onValueChange={field.onChange}\r\n                                        defaultValue={field.value}\r\n                                        value={field.value}\r\n                                    >\r\n                                        <SelectTrigger className=\"w-full\">\r\n                                            <SelectValue placeholder=\"Select type\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"pre_shift\">\r\n                                                Pre Shift\r\n                                            </SelectItem>\r\n                                            <SelectItem value=\"post_shift\">\r\n                                                Post Shift\r\n                                            </SelectItem>\r\n                                            <SelectItem value=\"weekend\">\r\n                                                Weekend\r\n                                            </SelectItem>\r\n                                            <SelectItem value=\"holiday\">\r\n                                                Holiday\r\n                                            </SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                            {errors.type && (\r\n                                <p className=\"text-sm text-red-500\">\r\n                                    {errors.type.message}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-2\">\r\n                            <Label htmlFor=\"durationMinutes\">\r\n                                Duration (mins)\r\n                            </Label>\r\n                            <Input\r\n                                id=\"durationMinutes\"\r\n                                type=\"number\"\r\n                                {...register('durationMinutes', {\r\n                                    valueAsNumber: true,\r\n                                })}\r\n                            />\r\n                            {errors.durationMinutes && (\r\n                                <p className=\"text-sm text-red-500\">\r\n                                    {errors.durationMinutes.message}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"startTime\">Start Time</Label>\r\n                        <Controller\r\n                            control={control}\r\n                            name=\"startTime\"\r\n                            render={({ field }) => (\r\n                                <TimePicker\r\n                                    value={field.value}\r\n                                    onChange={field.onChange}\r\n                                />\r\n                            )}\r\n                        />\r\n                        {errors.startTime && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.startTime.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"reason\">Reason</Label>\r\n                        <Textarea\r\n                            id=\"reason\"\r\n                            placeholder=\"Optional reason...\"\r\n                            {...register('reason')}\r\n                        />\r\n                        {errors.reason && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.reason.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <DialogFooter>\r\n                        <Button type=\"submit\" disabled={isLoading}>\r\n                            {isLoading ? 'Saving...' : 'Save Changes'}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\overtime\\overtime-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\root-dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\profile-setup-alert.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogCancel' is defined but never used.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogContent,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogCancel,\r\n    AlertDialogAction,\r\n} from '@/components/ui/alert-dialog';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport function ProfileSetupAlert() {\r\n    const [open, setOpen] = useState(true);\r\n    const router = useRouter();\r\n\r\n    return (\r\n        <AlertDialog open={open} onOpenChange={setOpen}>\r\n            <AlertDialogContent>\r\n                <AlertDialogHeader>\r\n                    <AlertDialogTitle>Profile setup required</AlertDialogTitle>\r\n\r\n                    <AlertDialogDescription>\r\n                        You must complete your profile setup to continue using\r\n                        the dashboard.\r\n                    </AlertDialogDescription>\r\n                </AlertDialogHeader>\r\n\r\n                <AlertDialogFooter>\r\n                    <AlertDialogAction\r\n                        onClick={() => {\r\n                            router.push('/account?edit-profile=true');\r\n                            setOpen(false);\r\n                        }}\r\n                    >\r\n                        Continue\r\n                    </AlertDialogAction>\r\n                </AlertDialogFooter>\r\n            </AlertDialogContent>\r\n        </AlertDialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\staff-attendance-table.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":33,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1626,1629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1626,1629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2057,2060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2057,2060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Card,\r\n    CardHeader,\r\n    CardTitle,\r\n    CardContent,\r\n} from '@/components/ui/card';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport { useGetMyOvertimeQuery } from '@/redux/features/overtime/overtimeApi';\r\nimport { useGetMyAttendanceHistoryQuery } from '@/redux/features/attendance/attendanceApi';\r\nimport { format } from 'date-fns';\r\nimport { Clock, CheckCircle2, XCircle, MinusCircle } from 'lucide-react';\r\nimport { Badge } from '@/components/ui/badge';\r\n\r\nconst formatDuration = (minutes: number) => {\r\n    const h = Math.floor(minutes / 60);\r\n    const m = minutes % 60;\r\n    return `${h}h ${m}m`;\r\n};\r\n\r\nconst formatTime = (date: string | Date | null | undefined) => {\r\n    if (!date) return '-';\r\n    return format(new Date(date), 'hh:mm aa');\r\n};\r\n\r\nexport default function StaffAttendanceTable() {\r\n    const { data: attendanceHistory, isLoading } = useGetMyAttendanceHistoryQuery(7);\r\n    const { data: overtimeData } = useGetMyOvertimeQuery({});\r\n\r\n    // Generate last 7 days (most recent first)\r\n    const getLast7Days = () => {\r\n        const days = [];\r\n        for (let i = 0; i <= 6; i++) {\r\n            const date = new Date();\r\n            date.setDate(date.getDate() - i);\r\n            days.push(date);\r\n        }\r\n        return days;\r\n    };\r\n\r\n    const last7Days = getLast7Days();\r\n\r\n    // Get attendance for a specific date\r\n    const getAttendanceForDate = (date: Date) => {\r\n        // Find attendance record for this date\r\n        const attendance = attendanceHistory?.find((record: any) => {\r\n            const recordDate = new Date(record.date);\r\n            return (\r\n                recordDate.getDate() === date.getDate() &&\r\n                recordDate.getMonth() === date.getMonth() &&\r\n                recordDate.getFullYear() === date.getFullYear()\r\n            );\r\n        });\r\n\r\n        if (!attendance) return null;\r\n\r\n        // Find OT for this date\r\n        const otForDate = overtimeData?.find((ot: any) => {\r\n            const otDate = new Date(ot.date);\r\n            return (\r\n                otDate.getDate() === date.getDate() &&\r\n                otDate.getMonth() === date.getMonth() &&\r\n                otDate.getFullYear() === date.getFullYear() &&\r\n                ot.endTime // Completed OT\r\n            );\r\n        });\r\n\r\n        return {\r\n            date,\r\n            shiftName: attendance.shiftId?.name || 'N/A',\r\n            checkIn: attendance.checkInAt,\r\n            checkOut: attendance.checkOutAt,\r\n            workHours: attendance.totalMinutes || 0,\r\n            otMinutes: otForDate?.durationMinutes || 0,\r\n            status: attendance.status,\r\n        };\r\n    };\r\n\r\n    const getStatusIcon = (status: string) => {\r\n        switch (status) {\r\n            case 'present':\r\n                return <CheckCircle2 className=\"h-4 w-4 text-green-500\" />;\r\n            case 'late':\r\n                return <Clock className=\"h-4 w-4 text-orange-500\" />;\r\n            case 'absent':\r\n                return <XCircle className=\"h-4 w-4 text-red-500\" />;\r\n            default:\r\n                return <MinusCircle className=\"h-4 w-4 text-gray-400\" />;\r\n        }\r\n    };\r\n\r\n    const getStatusBadge = (status: string) => {\r\n        const variants: Record<string, 'default' | 'secondary' | 'destructive' | 'outline'> = {\r\n            present: 'default',\r\n            late: 'secondary',\r\n            absent: 'destructive',\r\n        };\r\n\r\n        return (\r\n            <Badge variant={variants[status] || 'outline'} className=\"capitalize\">\r\n                {status}\r\n            </Badge>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <CardTitle className=\"text-xl font-bold\">\r\n                    Attendance History (Last 7 Days)\r\n                </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <div className=\"rounded-md border\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow>\r\n                                <TableHead>Date</TableHead>\r\n                                <TableHead>Shift</TableHead>\r\n                                <TableHead>Check In</TableHead>\r\n                                <TableHead>Check Out</TableHead>\r\n                                <TableHead>Work Hours</TableHead>\r\n                                <TableHead>OT Time</TableHead>\r\n                                <TableHead>Status</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {last7Days.map((date) => {\r\n                                const attendance = getAttendanceForDate(new Date(date));\r\n\r\n                                if (!attendance) {\r\n                                    return (\r\n                                        <TableRow key={date.toISOString()}>\r\n                                            <TableCell className=\"font-medium\">\r\n                                                {format(date, 'MMM dd, yyyy')}\r\n                                                <div className=\"text-xs text-muted-foreground\">\r\n                                                    {format(date, 'EEEE')}\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell colSpan={6} className=\"text-center text-muted-foreground\">\r\n                                                Weekend\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    );\r\n                                }\r\n\r\n                                return (\r\n                                    <TableRow key={date.toISOString()}>\r\n                                        <TableCell className=\"font-medium\">\r\n                                            {format(attendance.date, 'MMM dd, yyyy')}\r\n                                            <div className=\"text-xs text-muted-foreground\">\r\n                                                {format(attendance.date, 'EEEE')}\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell>{attendance.shiftName}</TableCell>\r\n                                        <TableCell>{formatTime(attendance.checkIn)}</TableCell>\r\n                                        <TableCell>{formatTime(attendance.checkOut)}</TableCell>\r\n                                        <TableCell>{formatDuration(attendance.workHours)}</TableCell>\r\n                                        <TableCell>\r\n                                            {attendance.otMinutes > 0 ? (\r\n                                                <span className=\"text-orange-600 font-medium\">\r\n                                                    {formatDuration(attendance.otMinutes)}\r\n                                                </span>\r\n                                            ) : (\r\n                                                '-'\r\n                                            )}\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                {getStatusIcon(attendance.status)}\r\n                                                {getStatusBadge(attendance.status)}\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                );\r\n                            })}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\staff-dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Avatar' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AvatarFallback' is defined but never used.","line":13,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AvatarImage' is defined but never used.","line":13,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":17,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarDays' is defined but never used.","line":18,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LogIn' is defined but never used.","line":21,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":23,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":24,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":25,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Phone' is defined but never used.","line":26,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Briefcase' is defined but never used.","line":27,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mockUser' is assigned a value but never used.","line":43,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is defined but never used.","line":62,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":46},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\staff-dashboard.tsx:80:13\n  78 |                 toast.info('Salary view auto-locked');\n  79 |             }, 60000);\n> 80 |             setAutoLockTimer(timer);\n     |             ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  81 |\n  82 |             return () => clearTimeout(timer);\n  83 |         }","line":80,"column":13,"nodeType":null,"endLine":80,"endColumn":29}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport {\r\n    Clock,\r\n    CalendarDays,\r\n    TrendingUp,\r\n    AlertCircle,\r\n    LogIn,\r\n    LogOut,\r\n    FileText,\r\n    MapPin,\r\n    Mail,\r\n    Phone,\r\n    Briefcase,\r\n} from 'lucide-react';\r\nimport { User } from 'better-auth';\r\nimport StaffHeader from './staff-header';\r\nimport StaffTracking from './staff-tracking';\r\n\r\nimport { useGetMonthlyStatsQuery } from '@/redux/features/attendance/attendanceApi';\r\nimport { useGetMeQuery } from '@/redux/features/staff/staffApi';\r\nimport { Skeleton } from '@/components/ui/skeleton';\r\nimport StaffAttendanceTable from './staff-attendance-table';\r\nimport { SalaryPinDialog } from '@/components/staff/salary-pin-dialog';\r\nimport { ProfileCompletionDialog } from '@/components/account/profile-completion-dialog';\r\nimport { toast } from 'sonner';\r\nimport ShiftOffNotice from '@/components/shifting/shift-off-notice';\r\n\r\n// Mock data - replace with real data from your API\r\nconst mockUser = {\r\n    id: '1',\r\n    name: 'MD. Masud Kamal',\r\n    email: 'masumkamal31@gmail.com',\r\n    phone: '01301101116',\r\n    role: 'junior designer',\r\n    status: 'active',\r\n    image: '/api/placeholder/100/100',\r\n    location: 'kashdha, sundhorgonj, gaubandha',\r\n    dob: '2006-10-10',\r\n    employeeId: 'EMP001',\r\n};\r\n\r\nconst formatDuration = (minutes: number) => {\r\n    const h = Math.floor(minutes / 60);\r\n    const m = minutes % 60;\r\n    return `${h}h ${m}m`;\r\n};\r\n\r\nexport default function StaffDashboard({ user }: { user: User }) {\r\n    const { data: monthlyStats, isLoading } = useGetMonthlyStatsQuery({});\r\n    const { data: meData, isLoading: isStaffLoading } = useGetMeQuery({});\r\n    const staff = meData?.staff;\r\n\r\n    const [isSalaryUnlocked, setIsSalaryUnlocked] = useState(false);\r\n    const [showPinDialog, setShowPinDialog] = useState(false);\r\n    const [autoLockTimer, setAutoLockTimer] = useState<NodeJS.Timeout | null>(\r\n        null,\r\n    );\r\n\r\n    // Auto-lock after 1 minute\r\n    useEffect(() => {\r\n        if (isSalaryUnlocked) {\r\n            const timer = setTimeout(() => {\r\n                setIsSalaryUnlocked(false);\r\n                toast.info('Salary view auto-locked');\r\n            }, 60000);\r\n            setAutoLockTimer(timer);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [isSalaryUnlocked]);\r\n\r\n    const handleUnlockSuccess = () => {\r\n        setIsSalaryUnlocked(true);\r\n        setShowPinDialog(false);\r\n    };\r\n\r\n    const handleLock = () => {\r\n        setIsSalaryUnlocked(false);\r\n        if (autoLockTimer) clearTimeout(autoLockTimer);\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background space-y-6\">\r\n            <ProfileCompletionDialog />\r\n            <ShiftOffNotice />\r\n            <StaffHeader />\r\n\r\n            <StaffTracking />\r\n\r\n            {/* This Month & Salary */}\r\n            <div className=\"grid lg:grid-cols-2 gap-6 items-start\">\r\n                {/* This Month Stats */}\r\n                <Card>\r\n                    <CardHeader>\r\n                        <CardTitle>This Month</CardTitle>\r\n                        <CardDescription>\r\n                            {isLoading ? (\r\n                                <Skeleton className=\"h-4 w-20\" />\r\n                            ) : (\r\n                                monthlyStats?.month || 'Loading...'\r\n                            )}\r\n                        </CardDescription>\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"grid grid-cols-3 gap-4\">\r\n                            <Card>\r\n                                <CardContent className=\"p-4 text-center\">\r\n                                    <div className=\"text-sm text-muted-foreground mb-2\">\r\n                                        Present\r\n                                    </div>\r\n                                    <div className=\"text-3xl font-bold text-green-600\">\r\n                                        {isLoading ? (\r\n                                            <Skeleton className=\"h-8 w-12 mx-auto\" />\r\n                                        ) : (\r\n                                            monthlyStats?.present || 0\r\n                                        )}\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                            <Card>\r\n                                <CardContent className=\"p-4 text-center\">\r\n                                    <div className=\"text-sm text-muted-foreground mb-2\">\r\n                                        Late In\r\n                                    </div>\r\n                                    <div className=\"text-3xl font-bold text-orange-600\">\r\n                                        {isLoading ? (\r\n                                            <Skeleton className=\"h-8 w-12 mx-auto\" />\r\n                                        ) : (\r\n                                            monthlyStats?.late || 0\r\n                                        )}\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                            <Card>\r\n                                <CardContent className=\"p-4 text-center\">\r\n                                    <div className=\"text-sm text-muted-foreground mb-2\">\r\n                                        Total OT\r\n                                    </div>\r\n                                    <div className=\"text-xl font-bold text-blue-600\">\r\n                                        {isLoading ? (\r\n                                            <Skeleton className=\"h-8 w-16 mx-auto\" />\r\n                                        ) : (\r\n                                            formatDuration(\r\n                                                monthlyStats?.totalOvertimeMinutes ||\r\n                                                    0,\r\n                                            )\r\n                                        )}\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 mt-4 text-sm text-muted-foreground\">\r\n                            <TrendingUp className=\"h-4 w-4\" />\r\n                            <span>Updated now</span>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Salary & PF */}\r\n                <Card>\r\n                    <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                        <CardTitle>Salary & PF</CardTitle>\r\n                        {isSalaryUnlocked && (\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={handleLock}\r\n                                className=\"h-8 w-8 p-0\"\r\n                            >\r\n                                <LogOut className=\"h-4 w-4\" />\r\n                                <span className=\"sr-only\">Lock</span>\r\n                            </Button>\r\n                        )}\r\n                    </CardHeader>\r\n                    <CardContent>\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <Card>\r\n                                <CardContent className=\"p-4\">\r\n                                    <div className=\"text-sm text-muted-foreground mb-2\">\r\n                                        Monthly Salary\r\n                                    </div>\r\n                                    <div className=\"text-3xl font-bold mb-2\">\r\n                                        {isSalaryUnlocked ? (\r\n                                            `৳ ${staff?.salary?.toLocaleString() || 0}`\r\n                                        ) : (\r\n                                            <span className=\"text-muted-foreground tracking-widest\">\r\n                                                ••••\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    {!isSalaryUnlocked && (\r\n                                        <Button\r\n                                            size=\"sm\"\r\n                                            variant=\"outline\"\r\n                                            className=\"w-full\"\r\n                                            onClick={() =>\r\n                                                setShowPinDialog(true)\r\n                                            }\r\n                                            disabled={isStaffLoading}\r\n                                        >\r\n                                            <AlertCircle className=\"mr-2 h-4 w-4\" />\r\n                                            {staff?.isSalaryPinSet\r\n                                                ? 'Unlock'\r\n                                                : 'Set PIN'}\r\n                                        </Button>\r\n                                    )}\r\n                                </CardContent>\r\n                            </Card>\r\n                            <Card>\r\n                                <CardContent className=\"p-4\">\r\n                                    <div className=\"text-sm text-muted-foreground mb-2\">\r\n                                        PF Status\r\n                                    </div>\r\n                                    <Badge variant=\"outline\" className=\"mb-4\">\r\n                                        N/A\r\n                                    </Badge>\r\n                                    {/* Placeholder for future PF logic */}\r\n                                </CardContent>\r\n                            </Card>\r\n                            {isSalaryUnlocked && (\r\n                                <Card className=\"col-span-2\">\r\n                                    <CardContent className=\"p-4\">\r\n                                        <div className=\"flex justify-between items-center mb-2\">\r\n                                            <span className=\"text-sm text-muted-foreground\">\r\n                                                Monthly PF (0%)\r\n                                            </span>\r\n                                            <span className=\"font-bold\">\r\n                                                ৳ 0\r\n                                            </span>\r\n                                        </div>\r\n                                        <Separator className=\"my-2\" />\r\n                                        <div className=\"flex justify-between items-center\">\r\n                                            <span className=\"text-sm text-muted-foreground\">\r\n                                                Total PF Balance\r\n                                            </span>\r\n                                            <span className=\"font-bold\">\r\n                                                ৳ 0\r\n                                            </span>\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            )}\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            <SalaryPinDialog\r\n                open={showPinDialog}\r\n                onOpenChange={setShowPinDialog}\r\n                staffId={staff?.staffId || ''}\r\n                isPinSet={!!staff?.isSalaryPinSet}\r\n                onSuccess={handleUnlockSuccess}\r\n            />\r\n\r\n            <StaffAttendanceTable />\r\n\r\n            {/* Notifications */}\r\n            <Card>\r\n                <CardHeader>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <CardTitle>Notifications</CardTitle>\r\n                        <Button variant=\"ghost\" size=\"sm\">\r\n                            Recent\r\n                        </Button>\r\n                    </div>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Alert>\r\n                        <AlertCircle className=\"h-4 w-4\" />\r\n                        <AlertDescription>\r\n                            Your account has been de-activated. You can no\r\n                            longer access the portal.\r\n                            <span className=\"text-xs text-muted-foreground ml-2\">\r\n                                3 months ago\r\n                            </span>\r\n                        </AlertDescription>\r\n                    </Alert>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\staff-header-skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\staff-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\staff-tracking.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoadingToday' is assigned a value but never used.","line":53,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoadingOT' is assigned a value but never used.","line":55,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":73,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2400,2403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2400,2403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":107,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3575,3578],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3575,3578],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":194,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6569,6572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6569,6572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'getCurrentOTMinutes'. Either include it or remove the dependency array.","line":219,"column":8,"nodeType":"ArrayExpression","endLine":219,"endColumn":34,"suggestions":[{"desc":"Update the dependencies array to be: [activeOT, getCurrentOTMinutes, myOvertimeData]","fix":{"range":[7372,7398],"text":"[activeOT, getCurrentOTMinutes, myOvertimeData]"}}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\dashboard\\staff-dashboard\\staff-tracking.tsx:238:9\n  236 |\n  237 |     useEffect(() => {\n> 238 |         setCurrentDuration(calculateDuration());\n      |         ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  239 |\n  240 |         // Only set interval if checked in but not checked out\n  241 |         if (attendanceDay?.checkInAt && !attendanceDay?.checkOutAt) {","line":238,"column":9,"nodeType":null,"endLine":238,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":267,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":267,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9074,9077],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9074,9077],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":282,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":282,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9517,9520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9517,9520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":299,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":299,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10144,10147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10144,10147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":460,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[18766,19038],"text":"\r\n                                            This will end your shift for today.\r\n                                            You won&apos;t be able to check in again\r\n                                            until your next shift.\r\n                                        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[18766,19038],"text":"\r\n                                            This will end your shift for today.\r\n                                            You won&lsquo;t be able to check in again\r\n                                            until your next shift.\r\n                                        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[18766,19038],"text":"\r\n                                            This will end your shift for today.\r\n                                            You won&#39;t be able to check in again\r\n                                            until your next shift.\r\n                                        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[18766,19038],"text":"\r\n                                            This will end your shift for today.\r\n                                            You won&rsquo;t be able to check in again\r\n                                            until your next shift.\r\n                                        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport {\r\n    Card,\r\n    CardHeader,\r\n    CardTitle,\r\n    CardDescription,\r\n    CardContent,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogTitle,\r\n    AlertDialogHeader,\r\n    AlertDialogTrigger,\r\n} from '@/components/ui/alert-dialog';\r\n\r\nimport { Clock, LogIn, FileText, Timer, LogOut } from 'lucide-react';\r\nimport { Spinner } from '@/components/ui/spinner';\r\nimport {\r\n    useCheckInMutation,\r\n    useCheckOutMutation,\r\n    useGetTodayAttendanceQuery,\r\n} from '@/redux/features/attendance/attendanceApi';\r\nimport {\r\n    useGetMyOvertimeQuery,\r\n    useStartOvertimeMutation,\r\n    useStopOvertimeMutation,\r\n    useGetScheduledOvertimeTodayQuery,\r\n} from '@/redux/features/overtime/overtimeApi';\r\nimport { useGetMyShiftQuery } from '@/redux/features/shift/shiftApi';\r\nimport { toast } from 'sonner';\r\nimport { format } from 'date-fns';\r\n\r\nconst formatDuration = (minutes: number) => {\r\n    const h = Math.floor(minutes / 60);\r\n    const m = minutes % 60;\r\n    return `${h}h ${m}m`;\r\n};\r\n\r\nconst EARLY_CHECKIN_WINDOW_MINUTES = 15;\r\n\r\nexport default function StaffTracking() {\r\n    const { data: todaysData, isLoading: isLoadingToday } =\r\n        useGetTodayAttendanceQuery({});\r\n    const { data: myOvertimeData, isLoading: isLoadingOT } =\r\n        useGetMyOvertimeQuery({});\r\n    const { data: scheduledOT } = useGetScheduledOvertimeTodayQuery({});\r\n    const { data: myShiftData } = useGetMyShiftQuery({});\r\n\r\n    const attendanceDay = todaysData?.attendance?.attendanceDay;\r\n\r\n    const [checkIn, { isLoading: isCheckingIn }] = useCheckInMutation();\r\n    const [checkOut, { isLoading: isCheckingOut }] = useCheckOutMutation();\r\n    const [startOvertime, { isLoading: isStartingOT }] =\r\n        useStartOvertimeMutation();\r\n    const [stopOvertime, { isLoading: isStoppingOT }] =\r\n        useStopOvertimeMutation();\r\n\r\n    const [countdown, setCountdown] = useState<string>('');\r\n\r\n    // Find active OT (checked in but not ended)\r\n    const activeOT = myOvertimeData?.find(\r\n        (ot: any) => ot.actualStartTime && !ot.endTime,\r\n    );\r\n\r\n    // Get shift start time for today\r\n    const getShiftStartTime = useCallback(() => {\r\n        if (!myShiftData?.shift?.shift?.startTime) return null;\r\n\r\n        const now = new Date();\r\n        const [h, m] = myShiftData.shift.shift.startTime.split(':');\r\n        const shiftStart = new Date(now);\r\n        shiftStart.setHours(Number(h), Number(m), 0, 0);\r\n        return shiftStart;\r\n    }, [myShiftData]);\r\n\r\n    // Perform actual check-in\r\n    const performCheckIn = useCallback(async () => {\r\n        try {\r\n            const res = await checkIn({\r\n                source: 'web',\r\n            }).unwrap();\r\n\r\n            if (!res.success) {\r\n                toast.error(res.message || 'Failed to check in.');\r\n                return false;\r\n            }\r\n\r\n            const officialTime = res.attendanceDay?.checkInAt\r\n                ? new Date(res.attendanceDay.checkInAt)\r\n                : new Date();\r\n\r\n            toast.success('🎉 Checked in successfully!', {\r\n                description: `Time: ${format(officialTime, 'hh:mm aa')}`,\r\n            });\r\n            return true;\r\n        } catch (error: any) {\r\n            const apiMessage =\r\n                error?.data?.message ||\r\n                error?.error ||\r\n                'Failed to check in. Please try again.';\r\n\r\n            if (\r\n                apiMessage.includes('Shift has not started') ||\r\n                apiMessage.includes('not a working day') ||\r\n                apiMessage.includes('Shift time is over')\r\n            ) {\r\n                toast.warning(apiMessage);\r\n            } else {\r\n                toast.error(apiMessage);\r\n            }\r\n            return false;\r\n        }\r\n    }, [checkIn]);\r\n\r\n    // Handle check-in button click\r\n    const handleCheckIn = async () => {\r\n        const shiftStart = getShiftStartTime();\r\n\r\n        if (!shiftStart) {\r\n            // No shift info, try direct check-in\r\n            await performCheckIn();\r\n            return;\r\n        }\r\n\r\n        const now = new Date();\r\n        const diffMs = shiftStart.getTime() - now.getTime();\r\n        const diffMinutes = diffMs / 1000 / 60;\r\n\r\n        // If shift has already started, do direct check-in\r\n        if (diffMinutes <= 0) {\r\n            await performCheckIn();\r\n            return;\r\n        }\r\n\r\n        // If more than 15 minutes before shift, show error\r\n        if (diffMinutes > EARLY_CHECKIN_WINDOW_MINUTES) {\r\n            toast.warning('Too early to check in', {\r\n                description: `Shift starts at ${format(shiftStart, 'hh:mm aa')}`,\r\n            });\r\n            return;\r\n        }\r\n\r\n        // Within 15 minutes window - Direct Check In (Backend handles snapping)\r\n        await performCheckIn();\r\n    };\r\n\r\n    // Update countdown every second if there's a scheduled OT\r\n    useEffect(() => {\r\n        if (!scheduledOT) return;\r\n\r\n        const updateCountdown = () => {\r\n            const now = new Date();\r\n            const scheduledTime = new Date(scheduledOT.startTime);\r\n            const diff = scheduledTime.getTime() - now.getTime();\r\n\r\n            if (diff <= 0) {\r\n                setCountdown('Ready to start');\r\n            } else {\r\n                const minutes = Math.floor(diff / 1000 / 60);\r\n                const seconds = Math.floor((diff / 1000) % 60);\r\n                setCountdown(`Starts in ${minutes}m ${seconds}s`);\r\n            }\r\n        };\r\n\r\n        updateCountdown();\r\n        const interval = setInterval(updateCountdown, 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [scheduledOT]);\r\n\r\n    // Calculate current OT minutes\r\n    const getCurrentOTMinutes = () => {\r\n        if (activeOT && activeOT.actualStartTime) {\r\n            // OT is running - calculate live duration\r\n            const now = new Date();\r\n            const startTime = new Date(activeOT.actualStartTime);\r\n            const durationMs = now.getTime() - startTime.getTime();\r\n            return Math.floor(durationMs / 1000 / 60);\r\n        }\r\n\r\n        // Check for completed OT today\r\n        const today = new Date();\r\n        const completedOTToday = myOvertimeData?.find((ot: any) => {\r\n            const otDate = new Date(ot.date);\r\n            return (\r\n                otDate.getDate() === today.getDate() &&\r\n                otDate.getMonth() === today.getMonth() &&\r\n                otDate.getFullYear() === today.getFullYear() &&\r\n                ot.endTime // Completed\r\n            );\r\n        });\r\n\r\n        return completedOTToday?.durationMinutes || 0;\r\n    };\r\n\r\n    const [currentOTMinutes, setCurrentOTMinutes] = useState(0);\r\n\r\n    // Update OT minutes every second if OT is active\r\n    useEffect(() => {\r\n        const updateOTMinutes = () => {\r\n            setCurrentOTMinutes(getCurrentOTMinutes());\r\n        };\r\n\r\n        updateOTMinutes();\r\n        const interval = setInterval(updateOTMinutes, 1000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, [activeOT, myOvertimeData]);\r\n\r\n    // Live Duration Ticker\r\n    const [currentDuration, setCurrentDuration] = useState(0);\r\n\r\n    const calculateDuration = useCallback(() => {\r\n        if (!attendanceDay?.checkInAt) return 0;\r\n\r\n        if (attendanceDay.checkOutAt) {\r\n            return attendanceDay.totalMinutes || 0;\r\n        }\r\n\r\n        const start = new Date(attendanceDay.checkInAt);\r\n        const now = new Date();\r\n        const diffMs = now.getTime() - start.getTime();\r\n        return Math.floor(diffMs / 1000 / 60);\r\n    }, [attendanceDay]);\r\n\r\n    useEffect(() => {\r\n        setCurrentDuration(calculateDuration());\r\n\r\n        // Only set interval if checked in but not checked out\r\n        if (attendanceDay?.checkInAt && !attendanceDay?.checkOutAt) {\r\n            const interval = setInterval(() => {\r\n                setCurrentDuration(calculateDuration());\r\n            }, 60000); // Update every minute\r\n            return () => clearInterval(interval);\r\n        }\r\n    }, [attendanceDay, calculateDuration]);\r\n\r\n    const handleCheckOut = async () => {\r\n        try {\r\n            const res = await checkOut({\r\n                source: 'web',\r\n            }).unwrap();\r\n\r\n            if (!res.success) {\r\n                toast.error(res.message || 'Failed to check out.');\r\n                return;\r\n            }\r\n\r\n            if ((res.attendanceDay?.earlyExitMinutes ?? 0) > 0) {\r\n                toast.warning('Checked out early!', {\r\n                    description: `You left ${res.attendanceDay.earlyExitMinutes} minutes early.`,\r\n                });\r\n            } else {\r\n                toast.success('Checked out successfully!');\r\n            }\r\n        } catch (error: any) {\r\n            console.log(error);\r\n            const apiMessage =\r\n                error?.data?.message ||\r\n                error?.error ||\r\n                'Failed to check out. Please try again.';\r\n\r\n            toast.error(apiMessage);\r\n        }\r\n    };\r\n\r\n    const handleStartOT = async () => {\r\n        try {\r\n            await startOvertime({}).unwrap();\r\n            toast.success('Overtime started!');\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Failed to start overtime');\r\n        }\r\n    };\r\n\r\n    const handleStopOT = async () => {\r\n        try {\r\n            const result = await stopOvertime({}).unwrap();\r\n\r\n            // Check if stopped early\r\n            if (result.data?.earlyStopMinutes > 0) {\r\n                toast.warning('OT stopped early!', {\r\n                    description: `You stopped ${result.data.earlyStopMinutes} minutes before the scheduled duration.`,\r\n                });\r\n            } else {\r\n                toast.success('Overtime stopped!');\r\n            }\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || 'Failed to stop overtime');\r\n        }\r\n    };\r\n\r\n    const router = useRouter();\r\n\r\n    const handleApplyLeave = () => {\r\n        router.push('/leave/apply');\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Card>\r\n                <CardHeader>\r\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <CardTitle className=\"text-xl font-bold\">\r\n                                Time Tracking (Today)\r\n                            </CardTitle>\r\n                            {attendanceDay?.status && (\r\n                                <Badge\r\n                                    variant=\"outline\"\r\n                                    className={cn(\r\n                                        'capitalize font-medium px-2.5 py-0.5',\r\n                                        attendanceDay.status === 'present' &&\r\n                                            'bg-green-100 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800',\r\n                                        attendanceDay.status === 'late' &&\r\n                                            'bg-yellow-100 text-yellow-700 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-800',\r\n                                        attendanceDay.status === 'half_day' &&\r\n                                            'bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-800',\r\n                                        attendanceDay.status === 'absent' &&\r\n                                            'bg-red-100 text-red-700 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800',\r\n                                        attendanceDay.status === 'early_exit' &&\r\n                                            'bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800',\r\n                                    )}\r\n                                >\r\n                                    {attendanceDay.status.replace(/_/g, ' ')}\r\n                                </Badge>\r\n                            )}\r\n                        </div>\r\n                        <CardDescription className=\"text-sm\">\r\n                            Date: {format(new Date(), 'PPP')}\r\n                        </CardDescription>\r\n                    </div>\r\n                </CardHeader>\r\n\r\n                <CardContent>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8\">\r\n                        <Card>\r\n                            <CardContent className=\"p-4 flex flex-col gap-1\">\r\n                                <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\r\n                                    <span>Start Time</span>\r\n                                    <LogIn className=\"h-4 w-4 text-primary\" />\r\n                                </div>\r\n                                <div className=\"text-2xl font-bold\">\r\n                                    {attendanceDay?.checkInAt\r\n                                        ? format(\r\n                                              attendanceDay.checkInAt,\r\n                                              'hh:mm aa',\r\n                                          )\r\n                                        : '--:--'}\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <Card>\r\n                            <CardContent className=\"p-4 flex flex-col gap-1\">\r\n                                <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\r\n                                    <span>End Time</span>\r\n                                    <Clock className=\"h-4 w-4 text-primary\" />\r\n                                </div>\r\n                                <div className=\"text-2xl font-bold\">\r\n                                    {attendanceDay?.checkOutAt\r\n                                        ? format(\r\n                                              attendanceDay.checkOutAt,\r\n                                              'hh:mm aa',\r\n                                          )\r\n                                        : '--:--'}\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <Card>\r\n                            <CardContent className=\"p-4 flex flex-col gap-1\">\r\n                                <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\r\n                                    <span>Duration</span>\r\n                                    <Timer className=\"h-4 w-4 text-green-500\" />\r\n                                </div>\r\n                                <div className=\"text-2xl font-bold\">\r\n                                    {formatDuration(currentDuration)}\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <Card>\r\n                            <CardContent className=\"p-4 flex flex-col gap-1\">\r\n                                <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\r\n                                    <span>Overtime</span>\r\n                                    <Timer className=\"h-4 w-4 text-orange-500\" />\r\n                                </div>\r\n                                <div className=\"text-2xl font-bold\">\r\n                                    {formatDuration(currentOTMinutes)}\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                        {!attendanceDay?.checkInAt ? (\r\n                            <Button\r\n                                size=\"lg\"\r\n                                className=\"flex-1 shadow-md\"\r\n                                onClick={handleCheckIn}\r\n                                disabled={isCheckingIn}\r\n                            >\r\n                                {isCheckingIn ? (\r\n                                    <Spinner />\r\n                                ) : (\r\n                                    <>\r\n                                        <LogIn className=\"h-5 w-5\" />\r\n                                        Check In\r\n                                    </>\r\n                                )}\r\n                            </Button>\r\n                        ) : attendanceDay?.checkOutAt ? (\r\n                            <Button\r\n                                size=\"lg\"\r\n                                variant=\"default\"\r\n                                className=\"flex-1 shadow-md\"\r\n                                disabled\r\n                            >\r\n                                <LogOut className=\"h-5 w-5\" />\r\n                                Checked Out\r\n                            </Button>\r\n                        ) : (\r\n                            <AlertDialog>\r\n                                <AlertDialogTrigger asChild>\r\n                                    <Button\r\n                                        size=\"lg\"\r\n                                        variant=\"destructive\"\r\n                                        className=\"flex-1 shadow-md\"\r\n                                        disabled={isCheckingOut}\r\n                                    >\r\n                                        {isCheckingOut ? (\r\n                                            <Spinner />\r\n                                        ) : (\r\n                                            <>\r\n                                                <LogOut className=\"h-5 w-5\" />\r\n                                                Check Out\r\n                                            </>\r\n                                        )}\r\n                                    </Button>\r\n                                </AlertDialogTrigger>\r\n                                <AlertDialogContent>\r\n                                    <AlertDialogHeader>\r\n                                        <AlertDialogTitle>\r\n                                            Are you sure?\r\n                                        </AlertDialogTitle>\r\n                                        <AlertDialogDescription>\r\n                                            This will end your shift for today.\r\n                                            You won't be able to check in again\r\n                                            until your next shift.\r\n                                        </AlertDialogDescription>\r\n                                    </AlertDialogHeader>\r\n                                    <AlertDialogFooter>\r\n                                        <AlertDialogCancel>\r\n                                            Cancel\r\n                                        </AlertDialogCancel>\r\n                                        <AlertDialogAction\r\n                                            onClick={handleCheckOut}\r\n                                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                                        >\r\n                                            Confirm Check Out\r\n                                        </AlertDialogAction>\r\n                                    </AlertDialogFooter>\r\n                                </AlertDialogContent>\r\n                            </AlertDialog>\r\n                        )}\r\n\r\n                        {activeOT ? (\r\n                            <Button\r\n                                size=\"lg\"\r\n                                variant=\"destructive\"\r\n                                className=\"flex-1 shadow-md\"\r\n                                onClick={handleStopOT}\r\n                                disabled={isStoppingOT}\r\n                            >\r\n                                {isStoppingOT ? (\r\n                                    <Spinner />\r\n                                ) : (\r\n                                    <>\r\n                                        <Clock className=\"h-5 w-5\" />\r\n                                        Stop OT\r\n                                    </>\r\n                                )}\r\n                            </Button>\r\n                        ) : scheduledOT ? (\r\n                            <Button\r\n                                size=\"lg\"\r\n                                variant=\"secondary\"\r\n                                className=\"flex-1 shadow-md\"\r\n                                onClick={handleStartOT}\r\n                                disabled={\r\n                                    isStartingOT ||\r\n                                    countdown !== 'Ready to start'\r\n                                }\r\n                            >\r\n                                {isStartingOT ? (\r\n                                    <Spinner />\r\n                                ) : (\r\n                                    <>\r\n                                        <Clock className=\"h-5 w-5\" />\r\n                                        {countdown || 'Start OT'}\r\n                                    </>\r\n                                )}\r\n                            </Button>\r\n                        ) : (\r\n                            <Button\r\n                                size=\"lg\"\r\n                                variant=\"secondary\"\r\n                                className=\"flex-1 shadow-md opacity-50 cursor-not-allowed\"\r\n                                disabled={true}\r\n                            >\r\n                                <Clock className=\"h-5 w-5\" />\r\n                                No OT Scheduled\r\n                            </Button>\r\n                        )}\r\n\r\n                        <Button\r\n                            size=\"lg\"\r\n                            variant=\"outline\"\r\n                            className=\"flex-1 shadow-md\"\r\n                            onClick={handleApplyLeave}\r\n                        >\r\n                            <FileText className=\"h-5 w-5\" />\r\n                            Apply for Leave\r\n                        </Button>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\debit\\AddPersonDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1483,1486],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1483,1486],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useCreatePersonMutation } from '@/redux/features/debit/debitApi';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { toast } from 'sonner';\r\n\r\nexport function AddPersonDialog() {\r\n    const [open, setOpen] = useState(false);\r\n    const [name, setName] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [address, setAddress] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const [createPerson, { isLoading }] = useCreatePersonMutation();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (name.trim().length < 2) {\r\n            setError('Name must be at least 2 characters.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await createPerson({ name, phone, address, description }).unwrap();\r\n            toast.success('Person added successfully');\r\n            setOpen(false);\r\n            setName('');\r\n            setPhone('');\r\n            setAddress('');\r\n            setDescription('');\r\n        } catch (err: any) {\r\n            toast.error(`Failed to add person: ${err?.data?.message || err.message}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button>Add New Person</Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Add New Person</DialogTitle>\r\n                    <DialogDescription>\r\n                        Add a new person to track debits/credits.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"name\">Name</Label>\r\n                        <Input\r\n                            id=\"name\"\r\n                            placeholder=\"John Doe\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                        />\r\n                        {error && (\r\n                            <p className=\"text-sm text-destructive\">{error}</p>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"phone\">Phone</Label>\r\n                        <Input\r\n                            id=\"phone\"\r\n                            placeholder=\"017...\"\r\n                            value={phone}\r\n                            onChange={(e) => setPhone(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"address\">Address</Label>\r\n                        <Textarea\r\n                            id=\"address\"\r\n                            placeholder=\"Address...\"\r\n                            value={address}\r\n                            onChange={(e) => setAddress(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"description\">Description</Label>\r\n                        <Textarea\r\n                            id=\"description\"\r\n                            placeholder=\"Additional info...\"\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <Button type=\"submit\" disabled={isLoading}>\r\n                        {isLoading ? 'Saving...' : 'Save'}\r\n                    </Button>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\debit\\AddTransactionDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2623,2626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2623,2626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    useGetPersonsQuery,\r\n    useCreateDebitMutation,\r\n} from '@/redux/features/debit/debitApi';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { toast } from 'sonner';\r\nimport { format } from 'date-fns';\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { CalendarIcon } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Textarea } from '@/components/ui/textarea';\r\n\r\nexport function AddTransactionDialog() {\r\n    const [open, setOpen] = useState(false);\r\n    const [personId, setPersonId] = useState('');\r\n    const [amount, setAmount] = useState('');\r\n    const [date, setDate] = useState<Date>(new Date());\r\n    const [type, setType] = useState<'Borrow' | 'Return'>('Borrow');\r\n    const [description, setDescription] = useState('');\r\n    const [errors, setErrors] = useState<{ personId?: string; amount?: string }>(\r\n        {}\r\n    );\r\n\r\n    const { data: persons = [] } = useGetPersonsQuery();\r\n    const [createDebit, { isLoading }] = useCreateDebitMutation();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const newErrors: { personId?: string; amount?: string } = {};\r\n\r\n        if (!personId) {\r\n            newErrors.personId = 'Person is required';\r\n        }\r\n\r\n        const amountNum = parseFloat(amount);\r\n        if (!amount || amountNum <= 0) {\r\n            newErrors.amount = 'Amount must be greater than 0';\r\n        }\r\n\r\n        if (Object.keys(newErrors).length > 0) {\r\n            setErrors(newErrors);\r\n            return;\r\n        }\r\n\r\n        setErrors({});\r\n\r\n        try {\r\n            await createDebit({\r\n                personId,\r\n                amount: amountNum,\r\n                date: date.toISOString(),\r\n                type,\r\n                description,\r\n            }).unwrap();\r\n            toast.success('Debit added successfully');\r\n            setOpen(false);\r\n            setPersonId('');\r\n            setAmount('');\r\n            setDate(new Date());\r\n            setType('Borrow');\r\n            setDescription('');\r\n        } catch (err: any) {\r\n            toast.error(`Failed to add debit: ${err?.data?.message || err.message}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"secondary\">New Debit</Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Add New Debit</DialogTitle>\r\n                    <DialogDescription>\r\n                        Record a borrow or return debit.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"person\">Person</Label>\r\n                        <Select value={personId} onValueChange={setPersonId}>\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Select a person\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {persons.map((person) => (\r\n                                    <SelectItem\r\n                                        key={person._id}\r\n                                        value={person._id}\r\n                                    >\r\n                                        {person.name}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        {errors.personId && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {errors.personId}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"type\">Type</Label>\r\n                        <Select\r\n                            value={type}\r\n                            onValueChange={(val) =>\r\n                                setType(val as 'Borrow' | 'Return')\r\n                            }\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Select type\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"Borrow\">Borrow</SelectItem>\r\n                                <SelectItem value=\"Return\">Return</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"amount\">Amount</Label>\r\n                        <Input\r\n                            id=\"amount\"\r\n                            type=\"number\"\r\n                            placeholder=\"Amount\"\r\n                            value={amount}\r\n                            onChange={(e) => setAmount(e.target.value)}\r\n                        />\r\n                        {errors.amount && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {errors.amount}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <Label>Date</Label>\r\n                        <Popover>\r\n                            <PopoverTrigger asChild>\r\n                                <Button\r\n                                    variant={'outline'}\r\n                                    className={cn(\r\n                                        'w-full pl-3 text-left font-normal',\r\n                                        !date && 'text-muted-foreground'\r\n                                    )}\r\n                                >\r\n                                    {date ? (\r\n                                        format(date, 'PPP')\r\n                                    ) : (\r\n                                        <span>Pick a date</span>\r\n                                    )}\r\n                                    <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\r\n                                </Button>\r\n                            </PopoverTrigger>\r\n                            <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                <Calendar\r\n                                    mode=\"single\"\r\n                                    selected={date}\r\n                                    onSelect={(d) => d && setDate(d)}\r\n                                    disabled={(d) =>\r\n                                        d > new Date() ||\r\n                                        d < new Date('1900-01-01')\r\n                                    }\r\n                                    initialFocus\r\n                                />\r\n                            </PopoverContent>\r\n                        </Popover>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"description\">Description</Label>\r\n                        <Textarea\r\n                            id=\"description\"\r\n                            placeholder=\"Optional notes...\"\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <Button type=\"submit\" disabled={isLoading}>\r\n                        {isLoading ? 'Saving...' : 'Save Debit'}\r\n                    </Button>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\debit\\DebitStatsCards.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\debit\\DebitTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\debit\\EditPersonDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":64,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1818,1821],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1818,1821],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useUpdatePersonMutation } from '@/redux/features/debit/debitApi';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { toast } from 'sonner';\r\n\r\ninterface Person {\r\n    _id: string;\r\n    name: string;\r\n    phone?: string;\r\n    address?: string;\r\n    description?: string;\r\n}\r\n\r\ninterface EditPersonDialogProps {\r\n    person: Person;\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function EditPersonDialog({\r\n    person,\r\n    open,\r\n    onOpenChange,\r\n}: EditPersonDialogProps) {\r\n    const [name, setName] = useState(person.name);\r\n    const [phone, setPhone] = useState(person.phone || '');\r\n    const [address, setAddress] = useState(person.address || '');\r\n    const [description, setDescription] = useState(person.description || '');\r\n    const [error, setError] = useState('');\r\n\r\n    const [updatePerson, { isLoading }] = useUpdatePersonMutation();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (name.trim().length < 2) {\r\n            setError('Name must be at least 2 characters.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await updatePerson({\r\n                id: person._id,\r\n                name,\r\n                phone,\r\n                address,\r\n                description,\r\n            }).unwrap();\r\n            toast.success('Person updated successfully');\r\n            onOpenChange(false);\r\n        } catch (err: any) {\r\n            toast.error(`Failed to update person: ${err?.data?.message || err.message}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Edit Person</DialogTitle>\r\n                    <DialogDescription>\r\n                        Update the person details.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"name\">Name</Label>\r\n                        <Input\r\n                            id=\"name\"\r\n                            placeholder=\"John Doe\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                        />\r\n                        {error && (\r\n                            <p className=\"text-sm text-destructive\">{error}</p>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"phone\">Phone</Label>\r\n                        <Input\r\n                            id=\"phone\"\r\n                            placeholder=\"017...\"\r\n                            value={phone}\r\n                            onChange={(e) => setPhone(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"address\">Address</Label>\r\n                        <Textarea\r\n                            id=\"address\"\r\n                            placeholder=\"Address...\"\r\n                            value={address}\r\n                            onChange={(e) => setAddress(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"description\">Description</Label>\r\n                        <Textarea\r\n                            id=\"description\"\r\n                            placeholder=\"Additional info...\"\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <Button type=\"submit\" disabled={isLoading}>\r\n                            {isLoading ? 'Saving...' : 'Save Changes'}\r\n                        </Button>\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            onClick={() => onOpenChange(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\debit\\EditTransactionDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2644,2647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2644,2647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useUpdateDebitMutation } from '@/redux/features/debit/debitApi';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { CalendarIcon } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { format } from 'date-fns';\r\nimport { toast } from 'sonner';\r\n\r\ninterface Transaction {\r\n    _id: string;\r\n    personId: {\r\n        _id: string;\r\n        name: string;\r\n    };\r\n    amount: number;\r\n    date: string;\r\n    type: 'Borrow' | 'Return';\r\n    description?: string;\r\n}\r\n\r\ninterface EditTransactionDialogProps {\r\n    transaction: Transaction;\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nexport function EditTransactionDialog({\r\n    transaction,\r\n    open,\r\n    onOpenChange,\r\n}: EditTransactionDialogProps) {\r\n    const [amount, setAmount] = useState(transaction.amount.toString());\r\n    const [date, setDate] = useState<Date>(new Date(transaction.date));\r\n    const [type, setType] = useState<'Borrow' | 'Return'>(transaction.type);\r\n    const [description, setDescription] = useState(transaction.description || '');\r\n    const [errors, setErrors] = useState<{ amount?: string }>({});\r\n\r\n    const [updateDebit, { isLoading }] = useUpdateDebitMutation();\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const newErrors: { amount?: string } = {};\r\n\r\n        const amountNum = parseFloat(amount);\r\n        if (!amount || amountNum <= 0) {\r\n            newErrors.amount = 'Amount must be greater than 0';\r\n        }\r\n\r\n        if (Object.keys(newErrors).length > 0) {\r\n            setErrors(newErrors);\r\n            return;\r\n        }\r\n\r\n        setErrors({});\r\n\r\n        try {\r\n            await updateDebit({\r\n                id: transaction._id,\r\n                amount: amountNum,\r\n                date: date.toISOString(),\r\n                type,\r\n                description,\r\n            }).unwrap();\r\n            toast.success('Debit updated successfully');\r\n            onOpenChange(false);\r\n        } catch (err: any) {\r\n            toast.error(`Failed to update debit: ${err?.data?.message || err.message}`);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Edit Debit</DialogTitle>\r\n                    <DialogDescription>\r\n                        Update the debit details.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"type\">Type</Label>\r\n                        <Select\r\n                            value={type}\r\n                            onValueChange={(val) =>\r\n                                setType(val as 'Borrow' | 'Return')\r\n                            }\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Select type\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"Borrow\">Borrow</SelectItem>\r\n                                <SelectItem value=\"Return\">Return</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"amount\">Amount</Label>\r\n                        <Input\r\n                            id=\"amount\"\r\n                            type=\"number\"\r\n                            placeholder=\"Amount\"\r\n                            value={amount}\r\n                            onChange={(e) => setAmount(e.target.value)}\r\n                        />\r\n                        {errors.amount && (\r\n                            <p className=\"text-sm text-destructive\">\r\n                                {errors.amount}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <Label>Date</Label>\r\n                        <Popover>\r\n                            <PopoverTrigger asChild>\r\n                                <Button\r\n                                    variant={'outline'}\r\n                                    className={cn(\r\n                                        'w-full pl-3 text-left font-normal',\r\n                                        !date && 'text-muted-foreground'\r\n                                    )}\r\n                                >\r\n                                    {date ? (\r\n                                        format(date, 'PPP')\r\n                                    ) : (\r\n                                        <span>Pick a date</span>\r\n                                    )}\r\n                                    <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\r\n                                </Button>\r\n                            </PopoverTrigger>\r\n                            <PopoverContent className=\"w-auto p-0\" align=\"start\">\r\n                                <Calendar\r\n                                    mode=\"single\"\r\n                                    selected={date}\r\n                                    onSelect={(d) => d && setDate(d)}\r\n                                    disabled={(d) =>\r\n                                        d > new Date() ||\r\n                                        d < new Date('1900-01-01')\r\n                                    }\r\n                                    initialFocus\r\n                                />\r\n                            </PopoverContent>\r\n                        </Popover>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"description\">Description</Label>\r\n                        <Textarea\r\n                            id=\"description\"\r\n                            placeholder=\"Optional notes...\"\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <Button type=\"submit\" disabled={isLoading}>\r\n                            {isLoading ? 'Saving...' : 'Save Changes'}\r\n                        </Button>\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            onClick={() => onOpenChange(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\debit\\PersonTabs.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2310,2313],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2310,2313],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2688,2691],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2688,2691],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    useGetPersonsQuery,\r\n    useGetDebitsQuery,\r\n    useGetDebitStatsQuery,\r\n    useDeleteDebitMutation,\r\n    useDeletePersonMutation,\r\n} from '@/redux/features/debit/debitApi';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { Pencil, Trash2, Users, ArrowLeftRight, Phone, MapPin } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\nimport { toast } from 'sonner';\r\nimport { EditTransactionDialog } from './EditTransactionDialog';\r\nimport { EditPersonDialog } from './EditPersonDialog';\r\n\r\ninterface Debit {\r\n    _id: string;\r\n    personId: {\r\n        _id: string;\r\n        name: string;\r\n    };\r\n    amount: number;\r\n    date: string;\r\n    type: 'Borrow' | 'Return';\r\n    description?: string;\r\n    createdAt: string;\r\n}\r\n\r\ninterface Person {\r\n    _id: string;\r\n    name: string;\r\n    phone?: string;\r\n    address?: string;\r\n    description?: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport function PersonTabs() {\r\n    const { data: persons = [] } = useGetPersonsQuery();\r\n    const { data: debits = [] } = useGetDebitsQuery();\r\n    const { data: stats = [] } = useGetDebitStatsQuery();\r\n\r\n    const [deleteDebit] = useDeleteDebitMutation();\r\n    const [deletePerson] = useDeletePersonMutation();\r\n\r\n    const [editingDebit, setEditingDebit] = useState<Debit | null>(null);\r\n    const [editingPerson, setEditingPerson] = useState<Person | null>(null);\r\n    const [deleteDebitId, setDeleteDebitId] = useState<string | null>(null);\r\n    const [deletePersonId, setDeletePersonId] = useState<string | null>(null);\r\n\r\n    const handleDeleteDebit = async () => {\r\n        if (!deleteDebitId) return;\r\n\r\n        try {\r\n            await deleteDebit(deleteDebitId).unwrap();\r\n            toast.success('Debit deleted');\r\n            setDeleteDebitId(null);\r\n        } catch (err: any) {\r\n            toast.error(`Failed to delete: ${err?.data?.message || err.message}`);\r\n        }\r\n    };\r\n\r\n    const handleDeletePerson = async () => {\r\n        if (!deletePersonId) return;\r\n\r\n        try {\r\n            await deletePerson(deletePersonId).unwrap();\r\n            toast.success('Person deleted');\r\n            setDeletePersonId(null);\r\n        } catch (err: any) {\r\n            toast.error(`Failed to delete: ${err?.data?.message || err.message}`);\r\n        }\r\n    };\r\n\r\n    const getPersonBalance = (personId: string) => {\r\n        const stat = stats.find((s) => s._id === personId);\r\n        return stat?.netBalance || 0;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Tabs defaultValue=\"debits\" className=\"w-full\">\r\n                <TabsList className=\"grid w-full max-w-md grid-cols-2 mb-6\">\r\n                    <TabsTrigger value=\"debits\" className=\"gap-2\">\r\n                        <ArrowLeftRight className=\"h-4 w-4\" />\r\n                        Debits\r\n                    </TabsTrigger>\r\n                    <TabsTrigger value=\"persons\" className=\"gap-2\">\r\n                        <Users className=\"h-4 w-4\" />\r\n                        Persons\r\n                    </TabsTrigger>\r\n                </TabsList>\r\n\r\n                {/* Debits Tab */}\r\n                <TabsContent value=\"debits\" className=\"space-y-4\">\r\n                    {debits.length === 0 ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n                            <ArrowLeftRight className=\"h-12 w-12 text-muted-foreground/50 mb-4\" />\r\n                            <h3 className=\"text-lg font-medium\">No debits yet</h3>\r\n                            <p className=\"text-muted-foreground text-sm mt-1\">\r\n                                Add a debit to get started\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"border bg-card\">\r\n                            <Table>\r\n                                <TableHeader>\r\n                                    <TableRow className=\"hover:bg-transparent border-b\">\r\n                                        <TableHead className=\"font-semibold border-r\">Person</TableHead>\r\n                                        <TableHead className=\"font-semibold border-r\">Date</TableHead>\r\n                                        <TableHead className=\"font-semibold border-r\">Type</TableHead>\r\n                                        <TableHead className=\"font-semibold text-right border-r\">Amount</TableHead>\r\n                                        <TableHead className=\"font-semibold border-r\">Note</TableHead>\r\n                                        <TableHead className=\"font-semibold text-right w-24\">Actions</TableHead>\r\n                                    </TableRow>\r\n                                </TableHeader>\r\n                                <TableBody>\r\n                                    {debits.map((debit) => (\r\n                                        <TableRow key={debit._id} className=\"group border-b\">\r\n                                            <TableCell className=\"font-medium border-r\">\r\n                                                {debit.personId?.name || 'Unknown Person'}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-muted-foreground border-r\">\r\n                                                {format(new Date(debit.date), 'MMM d, yyyy')}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"border-r\">\r\n                                                <span className={`font-medium ${debit.type === 'Borrow'\r\n                                                    ? 'text-red-500'\r\n                                                    : 'text-emerald-500'\r\n                                                    }`}>\r\n                                                    {debit.type}\r\n                                                </span>\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-right font-mono font-medium border-r\">\r\n                                                {debit.amount.toLocaleString('en-US', {\r\n                                                    minimumFractionDigits: 2,\r\n                                                    maximumFractionDigits: 2\r\n                                                })}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-muted-foreground max-w-[200px] truncate border-r\">\r\n                                                {debit.description || '—'}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-right\">\r\n                                                <div className=\"flex justify-end gap-1\">\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"h-8 w-8\"\r\n                                                        onClick={() => setEditingDebit(debit as Debit)}\r\n                                                    >\r\n                                                        <Pencil className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"icon\"\r\n                                                        className=\"h-8 w-8 text-destructive hover:text-destructive\"\r\n                                                        onClick={() => setDeleteDebitId(debit._id)}\r\n                                                    >\r\n                                                        <Trash2 className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </div>\r\n                    )}\r\n                </TabsContent>\r\n\r\n                {/* Persons Tab */}\r\n                <TabsContent value=\"persons\" className=\"space-y-4\">\r\n                    {persons.length === 0 ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n                            <Users className=\"h-12 w-12 text-muted-foreground/50 mb-4\" />\r\n                            <h3 className=\"text-lg font-medium\">No persons added</h3>\r\n                            <p className=\"text-muted-foreground text-sm mt-1\">\r\n                                Add a person to track their debits\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\r\n                            {persons.map((person) => {\r\n                                const balance = getPersonBalance(person._id);\r\n                                return (\r\n                                    <div\r\n                                        key={person._id}\r\n                                        className=\"group relative rounded-xl border bg-card p-5 transition-all hover:shadow-md hover:border-primary/20\"\r\n                                    >\r\n                                        <div className=\"flex items-start justify-between mb-3\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold\">\r\n                                                    {person.name.charAt(0).toUpperCase()}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h3 className=\"font-semibold\">{person.name}</h3>\r\n                                                    {person.phone && (\r\n                                                        <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\r\n                                                            <Phone className=\"h-3 w-3\" />\r\n                                                            {person.phone}\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"icon\"\r\n                                                    className=\"h-8 w-8\"\r\n                                                    onClick={() => setEditingPerson(person as Person)}\r\n                                                >\r\n                                                    <Pencil className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"icon\"\r\n                                                    className=\"h-8 w-8 text-destructive hover:text-destructive\"\r\n                                                    onClick={() => setDeletePersonId(person._id)}\r\n                                                >\r\n                                                    <Trash2 className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {person.address && (\r\n                                            <div className=\"flex items-center gap-1 text-sm text-muted-foreground mb-3\">\r\n                                                <MapPin className=\"h-3 w-3 shrink-0\" />\r\n                                                <span className=\"truncate\">{person.address}</span>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        <div className=\"pt-3 border-t\">\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <span className=\"text-sm text-muted-foreground\">Balance</span>\r\n                                                <span\r\n                                                    className={`font-mono font-semibold ${balance > 0\r\n                                                        ? 'text-red-500'\r\n                                                        : balance < 0\r\n                                                            ? 'text-emerald-500'\r\n                                                            : 'text-muted-foreground'\r\n                                                        }`}\r\n                                                >\r\n                                                    {balance > 0 ? '+' : ''}\r\n                                                    {balance.toLocaleString('en-US', {\r\n                                                        minimumFractionDigits: 2,\r\n                                                        maximumFractionDigits: 2\r\n                                                    })}\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            {/* Edit Debit Dialog */}\r\n            {editingDebit && (\r\n                <EditTransactionDialog\r\n                    transaction={editingDebit}\r\n                    open={!!editingDebit}\r\n                    onOpenChange={(open) => !open && setEditingDebit(null)}\r\n                />\r\n            )}\r\n\r\n            {/* Edit Person Dialog */}\r\n            {editingPerson && (\r\n                <EditPersonDialog\r\n                    person={editingPerson}\r\n                    open={!!editingPerson}\r\n                    onOpenChange={(open) => !open && setEditingPerson(null)}\r\n                />\r\n            )}\r\n\r\n            {/* Delete Debit Confirmation */}\r\n            <AlertDialog\r\n                open={!!deleteDebitId}\r\n                onOpenChange={(open) => !open && setDeleteDebitId(null)}\r\n            >\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete debit?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={handleDeleteDebit}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                        >\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            {/* Delete Person Confirmation */}\r\n            <AlertDialog\r\n                open={!!deletePersonId}\r\n                onOpenChange={(open) => !open && setDeletePersonId(null)}\r\n            >\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete person?</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This will also delete all their debits. This action cannot be undone.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={handleDeletePerson}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                        >\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\expense\\ExpenseForm.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\expense\\ExpenseForm.tsx:109:32\n  107 |                 <div className=\"col-span-3\">\n  108 |                     <DatePicker\n> 109 |                         value={watch('date')}\n      |                                ^^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  110 |                         onChange={(date) =>\n  111 |                             setValue('date', date || new Date())\n  112 |                         }","line":109,"column":32,"nodeType":null,"endLine":109,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { DatePicker } from '@/components/shared/DatePicker';\r\nimport { Loader, Plus } from 'lucide-react';\r\nimport type { ExpenseCategory } from '@/redux/features/expense/expenseApi';\r\n\r\n// Zod schema for expense form validation\r\nexport const expenseFormSchema = z.object({\r\n    date: z.date({ message: 'Date is required' }),\r\n    title: z\r\n        .string()\r\n        .min(1, 'Title is required')\r\n        .min(3, 'Title must be at least 3 characters'),\r\n    categoryId: z.string().min(1, 'Category is required'),\r\n    branchId: z.string().min(1, 'Branch is required'),\r\n    amount: z\r\n        .string()\r\n        .min(1, 'Amount is required')\r\n        .refine((val) => !isNaN(parseFloat(val)) && parseFloat(val) > 0, {\r\n            message: 'Amount must be a positive number',\r\n        }),\r\n    status: z.enum(['pending', 'paid', 'partial_paid']),\r\n    note: z.string().optional(),\r\n});\r\n\r\nexport type ExpenseFormData = z.infer<typeof expenseFormSchema>;\r\n\r\ninterface Branch {\r\n    _id: string;\r\n    name: string;\r\n}\r\n\r\ninterface ExpenseFormProps {\r\n    defaultValues?: Partial<ExpenseFormData>;\r\n    onSubmit: (data: ExpenseFormData) => Promise<void>;\r\n    isSubmitting: boolean;\r\n    categories: ExpenseCategory[] | undefined;\r\n    branches: Branch[];\r\n    onAddCategory: () => void;\r\n    submitLabel: string;\r\n    onCancel: () => void;\r\n}\r\n\r\nconst statusOptions = [\r\n    { value: 'pending', label: 'Pending' },\r\n    { value: 'paid', label: 'Paid' },\r\n    { value: 'partial_paid', label: 'Partial Paid' },\r\n];\r\n\r\nexport function ExpenseForm({\r\n    defaultValues,\r\n    onSubmit,\r\n    isSubmitting,\r\n    categories,\r\n    branches,\r\n    onAddCategory,\r\n    submitLabel,\r\n    onCancel,\r\n}: ExpenseFormProps) {\r\n    const form = useForm<ExpenseFormData>({\r\n        resolver: zodResolver(expenseFormSchema),\r\n        defaultValues: {\r\n            date: defaultValues?.date || new Date(),\r\n            title: defaultValues?.title || '',\r\n            categoryId: defaultValues?.categoryId || '',\r\n            branchId: defaultValues?.branchId || '',\r\n            amount: defaultValues?.amount || '',\r\n            status: defaultValues?.status || 'pending',\r\n            note: defaultValues?.note || '',\r\n        },\r\n    });\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n        watch,\r\n        formState: { errors },\r\n    } = form;\r\n\r\n    const handleFormSubmit = async (data: ExpenseFormData) => {\r\n        await onSubmit(data);\r\n    };\r\n\r\n    return (\r\n        <form\r\n            onSubmit={handleSubmit(handleFormSubmit)}\r\n            className=\"grid gap-4 py-4\"\r\n        >\r\n            {/* Date Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label className=\"text-right pt-2\">Date *</Label>\r\n                <div className=\"col-span-3\">\r\n                    <DatePicker\r\n                        value={watch('date')}\r\n                        onChange={(date) =>\r\n                            setValue('date', date || new Date())\r\n                        }\r\n                    />\r\n                    {errors.date && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {errors.date.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Title Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"title\" className=\"text-right pt-2\">\r\n                    Title *\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Input\r\n                        id=\"title\"\r\n                        placeholder=\"Enter expense title\"\r\n                        {...register('title')}\r\n                    />\r\n                    {errors.title && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {errors.title.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Category Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label className=\"text-right pt-2\">Category *</Label>\r\n                <div className=\"col-span-3\">\r\n                    <div className=\"flex gap-2\">\r\n                        <Select\r\n                            value={watch('categoryId')}\r\n                            onValueChange={(value) =>\r\n                                setValue('categoryId', value)\r\n                            }\r\n                        >\r\n                            <SelectTrigger className=\"flex-1 w-full\">\r\n                                <SelectValue placeholder=\"Select category\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {categories?.map((cat) => (\r\n                                    <SelectItem key={cat._id} value={cat._id}>\r\n                                        {cat.name}\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            size=\"icon\"\r\n                            onClick={onAddCategory}\r\n                        >\r\n                            <Plus className=\"h-4 w-4\" />\r\n                        </Button>\r\n                    </div>\r\n                    {errors.categoryId && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {errors.categoryId.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Branch Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label className=\"text-right pt-2\">Branch *</Label>\r\n                <div className=\"col-span-3\">\r\n                    <Select\r\n                        value={watch('branchId')}\r\n                        onValueChange={(value) => setValue('branchId', value)}\r\n                    >\r\n                        <SelectTrigger className=\"w-full\">\r\n                            <SelectValue placeholder=\"Select branch\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            {branches.map((branch) => (\r\n                                <SelectItem key={branch._id} value={branch._id}>\r\n                                    {branch.name}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                    {errors.branchId && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {errors.branchId.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Amount Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"amount\" className=\"text-right pt-2\">\r\n                    Amount (BDT) *\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Input\r\n                        id=\"amount\"\r\n                        type=\"text\"\r\n                        inputMode=\"decimal\"\r\n                        placeholder=\"0.00\"\r\n                        {...register('amount')}\r\n                        onKeyDown={(e) => {\r\n                            // Allow: backspace, delete, tab, escape, enter, arrows\r\n                            if (\r\n                                [\r\n                                    'Backspace',\r\n                                    'Delete',\r\n                                    'Tab',\r\n                                    'Escape',\r\n                                    'Enter',\r\n                                    'ArrowLeft',\r\n                                    'ArrowRight',\r\n                                    'ArrowUp',\r\n                                    'ArrowDown',\r\n                                    'Home',\r\n                                    'End',\r\n                                ].includes(e.key) ||\r\n                                // Allow: Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X\r\n                                ((e.ctrlKey || e.metaKey) &&\r\n                                    ['a', 'c', 'v', 'x'].includes(\r\n                                        e.key.toLowerCase(),\r\n                                    ))\r\n                            ) {\r\n                                return;\r\n                            }\r\n                            // Allow: decimal point (only one)\r\n                            if (\r\n                                e.key === '.' &&\r\n                                !e.currentTarget.value.includes('.')\r\n                            ) {\r\n                                return;\r\n                            }\r\n                            // Block if not a number\r\n                            if (!/^\\d$/.test(e.key)) {\r\n                                e.preventDefault();\r\n                            }\r\n                        }}\r\n                        onChange={(e) => {\r\n                            const value = e.target.value;\r\n                            // Filter pasted content to only allow valid numeric format\r\n                            if (value === '' || /^\\d*\\.?\\d*$/.test(value)) {\r\n                                setValue('amount', value);\r\n                            }\r\n                        }}\r\n                    />\r\n                    {errors.amount && (\r\n                        <p className=\"text-sm text-destructive mt-1\">\r\n                            {errors.amount.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Status Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label className=\"text-right pt-2\">Status</Label>\r\n                <div className=\"col-span-3\">\r\n                    <Select\r\n                        value={watch('status')}\r\n                        onValueChange={(\r\n                            value: 'pending' | 'paid' | 'partial_paid',\r\n                        ) => setValue('status', value)}\r\n                    >\r\n                        <SelectTrigger className=\"w-full\">\r\n                            <SelectValue />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            {statusOptions.map((opt) => (\r\n                                <SelectItem key={opt.value} value={opt.value}>\r\n                                    {opt.label}\r\n                                </SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Note Field */}\r\n            <div className=\"grid grid-cols-4 items-start gap-4\">\r\n                <Label htmlFor=\"note\" className=\"text-right pt-2\">\r\n                    Note\r\n                </Label>\r\n                <div className=\"col-span-3\">\r\n                    <Textarea\r\n                        id=\"note\"\r\n                        placeholder=\"Optional notes...\"\r\n                        {...register('note')}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Form Actions */}\r\n            <div className=\"flex justify-end gap-2 pt-4\">\r\n                <Button type=\"button\" variant=\"outline\" onClick={onCancel}>\r\n                    Cancel\r\n                </Button>\r\n                <Button type=\"submit\" disabled={isSubmitting}>\r\n                    {isSubmitting && (\r\n                        <Loader className=\"h-4 w-4  animate-spin\" />\r\n                    )}\r\n                    {submitLabel}\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\expense\\ExpenseReportPDF.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Font' is defined but never used.","line":7,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":9},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3204,3207],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3204,3207],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Document,\r\n    Page,\r\n    Text,\r\n    View,\r\n    StyleSheet,\r\n    Font,\r\n} from '@react-pdf/renderer';\r\nimport { format } from 'date-fns';\r\nimport { Expense } from '@/redux/features/expense/expenseApi';\r\n\r\n// Create styles\r\nconst styles = StyleSheet.create({\r\n    page: {\r\n        flexDirection: 'column',\r\n        backgroundColor: '#FFFFFF',\r\n        padding: 30,\r\n        fontFamily: 'Helvetica',\r\n    },\r\n    header: {\r\n        marginBottom: 20,\r\n        borderBottomWidth: 1,\r\n        borderBottomColor: '#112233',\r\n        paddingBottom: 10,\r\n    },\r\n    title: {\r\n        fontSize: 24,\r\n        textAlign: 'left',\r\n        color: '#112233',\r\n        marginBottom: 5,\r\n    },\r\n    subtitle: {\r\n        fontSize: 12,\r\n        color: '#666',\r\n        marginBottom: 10,\r\n    },\r\n    companyName: {\r\n        fontSize: 14,\r\n        color: '#112233',\r\n        marginTop: 5,\r\n    },\r\n    table: {\r\n        display: 'flex',\r\n        width: 'auto',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderRightWidth: 0,\r\n        borderBottomWidth: 0,\r\n        borderColor: '#bfbfbf',\r\n        marginTop: 20,\r\n    },\r\n    tableRow: {\r\n        margin: 'auto',\r\n        flexDirection: 'row',\r\n    },\r\n    tableColHeader: {\r\n        width: '16%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderLeftWidth: 0,\r\n        borderTopWidth: 0,\r\n        borderColor: '#bfbfbf',\r\n        backgroundColor: '#f0f0f0',\r\n        padding: 5,\r\n    },\r\n    tableCol: {\r\n        width: '16%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderLeftWidth: 0,\r\n        borderTopWidth: 0,\r\n        borderColor: '#bfbfbf',\r\n        padding: 5,\r\n    },\r\n    tableColWide: {\r\n        width: '20%',\r\n        borderStyle: 'solid',\r\n        borderWidth: 1,\r\n        borderLeftWidth: 0,\r\n        borderTopWidth: 0,\r\n        borderColor: '#bfbfbf',\r\n        padding: 5,\r\n    },\r\n    tableCellHeader: {\r\n        margin: 'auto',\r\n        fontSize: 10,\r\n        fontWeight: 'bold',\r\n        color: '#333',\r\n    },\r\n    tableCell: {\r\n        margin: 'auto',\r\n        fontSize: 10,\r\n        color: '#333',\r\n    },\r\n    tableCellAmount: {\r\n        margin: 'auto',\r\n        fontSize: 10,\r\n        color: '#333',\r\n        textAlign: 'right',\r\n    },\r\n    footer: {\r\n        position: 'absolute',\r\n        bottom: 30,\r\n        left: 30,\r\n        right: 30,\r\n        textAlign: 'center',\r\n        fontSize: 10,\r\n        color: '#aaa',\r\n        borderTopWidth: 1,\r\n        borderTopColor: '#eee',\r\n        paddingTop: 10,\r\n    },\r\n    summarySection: {\r\n        marginTop: 20,\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n    },\r\n    summaryBox: {\r\n        width: '40%',\r\n        padding: 10,\r\n        backgroundColor: '#f9f9f9',\r\n        borderRadius: 4,\r\n    },\r\n    summaryRow: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        marginBottom: 5,\r\n    },\r\n    summaryLabel: {\r\n        fontSize: 10,\r\n        color: '#666',\r\n    },\r\n    summaryValue: {\r\n        fontSize: 12,\r\n        fontWeight: 'bold',\r\n        color: '#112233',\r\n    },\r\n});\r\n\r\ninterface ExpenseReportPDFProps {\r\n    expenses: Expense[];\r\n    filters: any;\r\n    totalAmount: number;\r\n}\r\n\r\nconst formatCurrency = (amount: number) => {\r\n    return new Intl.NumberFormat('en-IN', {\r\n        style: 'decimal',\r\n        minimumFractionDigits: 2,\r\n    }).format(amount);\r\n};\r\n\r\nexport const ExpenseReportPDF = ({\r\n    expenses,\r\n    filters,\r\n    totalAmount,\r\n}: ExpenseReportPDFProps) => {\r\n    return (\r\n        <Document>\r\n            <Page size=\"A4\" style={styles.page}>\r\n                <View style={styles.header}>\r\n                    <Text style={styles.title}>Expense Report</Text>\r\n                    <Text style={styles.subtitle}>\r\n                        Generated on {format(new Date(), 'PPP')}\r\n                    </Text>\r\n                    {filters.startDate && filters.endDate && (\r\n                        <Text style={styles.subtitle}>\r\n                            Period: {filters.startDate} to {filters.endDate}\r\n                        </Text>\r\n                    )}\r\n                    {(filters.month || filters.year) && !filters.startDate && (\r\n                        <Text style={styles.subtitle}>\r\n                            Period: {filters.month}/{filters.year}\r\n                        </Text>\r\n                    )}\r\n                    <Text style={styles.companyName}>Web Briks LLC</Text>\r\n                </View>\r\n\r\n                {/* Table Header */}\r\n                <View style={styles.table}>\r\n                    <View style={styles.tableRow}>\r\n                        <View style={styles.tableColHeader}>\r\n                            <Text style={styles.tableCellHeader}>Date</Text>\r\n                        </View>\r\n                        <View style={styles.tableColWide}>\r\n                            <Text style={styles.tableCellHeader}>Title</Text>\r\n                        </View>\r\n                        <View style={styles.tableCol}>\r\n                            <Text style={styles.tableCellHeader}>Category</Text>\r\n                        </View>\r\n                        <View style={styles.tableCol}>\r\n                            <Text style={styles.tableCellHeader}>Branch</Text>\r\n                        </View>\r\n                        <View style={styles.tableCol}>\r\n                            <Text style={styles.tableCellHeader}>Status</Text>\r\n                        </View>\r\n                        <View style={styles.tableCol}>\r\n                            <Text style={styles.tableCellHeader}>\r\n                                Amount (BDT)\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n\r\n                    {/* Table Rows */}\r\n                    {expenses.map((expense) => (\r\n                        <View style={styles.tableRow} key={expense._id}>\r\n                            <View style={styles.tableCol}>\r\n                                <Text style={styles.tableCell}>\r\n                                    {format(\r\n                                        new Date(expense.date),\r\n                                        'dd MMM yyyy',\r\n                                    )}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={styles.tableColWide}>\r\n                                <Text style={styles.tableCell}>\r\n                                    {expense.title}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={styles.tableCol}>\r\n                                <Text style={styles.tableCell}>\r\n                                    {expense.category?.name || 'N/A'}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={styles.tableCol}>\r\n                                <Text style={styles.tableCell}>\r\n                                    {expense.branch?.name || 'N/A'}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={styles.tableCol}>\r\n                                <Text style={styles.tableCell}>\r\n                                    {expense.status\r\n                                        .replace('_', ' ')\r\n                                        .toUpperCase()}\r\n                                </Text>\r\n                            </View>\r\n                            <View style={styles.tableCol}>\r\n                                <Text style={styles.tableCellAmount}>\r\n                                    {formatCurrency(expense.amount)}\r\n                                </Text>\r\n                            </View>\r\n                        </View>\r\n                    ))}\r\n                </View>\r\n\r\n                {/* Summary */}\r\n                <View style={styles.summarySection}>\r\n                    <View style={styles.summaryBox}>\r\n                        <View style={styles.summaryRow}>\r\n                            <Text style={styles.summaryLabel}>\r\n                                Total Expenses:\r\n                            </Text>\r\n                            <Text style={styles.summaryValue}>\r\n                                {expenses.length}\r\n                            </Text>\r\n                        </View>\r\n                        <View style={styles.summaryRow}>\r\n                            <Text style={styles.summaryLabel}>\r\n                                Total Amount:\r\n                            </Text>\r\n                            <Text style={styles.summaryValue}>\r\n                                BDT {formatCurrency(totalAmount)}\r\n                            </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n\r\n                <View style={styles.footer}>\r\n                    <Text>\r\n                        This is a system generated report. 1209 Mountain Road PL\r\n                        NE, STE R, Albuquerque, NM 87110, US\r\n                    </Text>\r\n                </View>\r\n            </Page>\r\n        </Document>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\expense\\ExportExpenseDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2725,2728],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2725,2728],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Loader, Download } from 'lucide-react';\r\nimport {\r\n    useLazyGetExpensesQuery,\r\n    type ExpenseQueryParams,\r\n} from '@/redux/features/expense/expenseApi';\r\nimport { pdf } from '@react-pdf/renderer';\r\nimport { ExpenseReportPDF } from './ExpenseReportPDF';\r\nimport { saveAs } from 'file-saver';\r\nimport { toast } from 'sonner';\r\nimport { IconFileExcel } from '@tabler/icons-react';\r\n\r\ninterface ExportExpenseDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    availableYears?: number[];\r\n}\r\n\r\nexport function ExportExpenseDialog({\r\n    open,\r\n    onOpenChange,\r\n    availableYears = [],\r\n}: ExportExpenseDialogProps) {\r\n    const [exportType, setExportType] = useState<string>('month');\r\n    const [selectedMonth, setSelectedMonth] = useState<string>(\r\n        (new Date().getMonth() + 1).toString(),\r\n    );\r\n    const [selectedYear, setSelectedYear] = useState<string>(\r\n        new Date().getFullYear().toString(),\r\n    );\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n\r\n    const [trigger] = useLazyGetExpensesQuery();\r\n\r\n    const handleExport = async (type: 'pdf' | 'excel') => {\r\n        if (type === 'excel') {\r\n            toast.info('Excel export feature is coming soon!');\r\n            return;\r\n        }\r\n\r\n        setIsGenerating(true);\r\n        try {\r\n            // Prepare query filters\r\n            const params: ExpenseQueryParams = {\r\n                limit: 1000,\r\n                page: 1,\r\n            };\r\n\r\n            if (exportType === 'month') {\r\n                params.month = parseInt(selectedMonth);\r\n                params.year = parseInt(selectedYear);\r\n                params.filterType = 'month';\r\n            } else if (exportType === 'year') {\r\n                params.year = parseInt(selectedYear);\r\n                params.filterType = 'year';\r\n            }\r\n\r\n            // Fetch data using Redux Lazy Query\r\n            const result = await trigger(params).unwrap();\r\n            const expenses = result?.expenses || [];\r\n\r\n            if (expenses.length === 0) {\r\n                toast.error('No expenses found for the selected period');\r\n                setIsGenerating(false);\r\n                return;\r\n            }\r\n\r\n            const totalAmount = expenses.reduce(\r\n                (sum: number, exp: any) => sum + exp.amount,\r\n                0,\r\n            );\r\n\r\n            // Generate PDF\r\n            const blob = await pdf(\r\n                <ExpenseReportPDF\r\n                    expenses={expenses}\r\n                    filters={params}\r\n                    totalAmount={totalAmount}\r\n                />,\r\n            ).toBlob();\r\n\r\n            saveAs(\r\n                blob,\r\n                `Expense_Report_${exportType}_${selectedYear}${\r\n                    exportType === 'month' ? '_' + selectedMonth : ''\r\n                }.pdf`,\r\n            );\r\n\r\n            toast.success('Report generated successfully');\r\n            onOpenChange(false);\r\n        } catch (error) {\r\n            console.error('Export failed:', error);\r\n            toast.error('Failed to generate report');\r\n        } finally {\r\n            setIsGenerating(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-md w-full!\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Export Expenses</DialogTitle>\r\n                    <DialogDescription>\r\n                        Generate a report of your expenses.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"grid gap-4 py-4\">\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"type\" className=\"text-right\">\r\n                            Type\r\n                        </Label>\r\n                        <Select\r\n                            value={exportType}\r\n                            onValueChange={setExportType}\r\n                        >\r\n                            <SelectTrigger className=\"col-span-3 w-full\">\r\n                                <SelectValue placeholder=\"Select type\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"month\">Monthly</SelectItem>\r\n                                <SelectItem value=\"year\">Yearly</SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n\r\n                    {exportType === 'month' && (\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"year\" className=\"text-right\">\r\n                                Year\r\n                            </Label>\r\n                            <Select\r\n                                value={selectedYear}\r\n                                onValueChange={setSelectedYear}\r\n                            >\r\n                                <SelectTrigger className=\"col-span-3 w-full\">\r\n                                    <SelectValue placeholder=\"Select year\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {availableYears.length > 0 ? (\r\n                                        availableYears.map((year) => (\r\n                                            <SelectItem\r\n                                                key={year}\r\n                                                value={year.toString()}\r\n                                            >\r\n                                                {year}\r\n                                            </SelectItem>\r\n                                        ))\r\n                                    ) : (\r\n                                        <SelectItem\r\n                                            value={new Date()\r\n                                                .getFullYear()\r\n                                                .toString()}\r\n                                        >\r\n                                            {new Date().getFullYear()}\r\n                                        </SelectItem>\r\n                                    )}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    )}\r\n\r\n                    {exportType === 'month' && (\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"month\" className=\"text-right\">\r\n                                Month\r\n                            </Label>\r\n                            <Select\r\n                                value={selectedMonth}\r\n                                onValueChange={setSelectedMonth}\r\n                            >\r\n                                <SelectTrigger className=\"col-span-3 w-full\">\r\n                                    <SelectValue placeholder=\"Select month\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {Array.from(\r\n                                        { length: 12 },\r\n                                        (_, i) => i + 1,\r\n                                    ).map((m) => (\r\n                                        <SelectItem\r\n                                            key={m}\r\n                                            value={m.toString()}\r\n                                        >\r\n                                            {new Date(0, m - 1).toLocaleString(\r\n                                                'default',\r\n                                                { month: 'long' },\r\n                                            )}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    )}\r\n\r\n                    {exportType === 'year' && (\r\n                        <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                            <Label htmlFor=\"year\" className=\"text-right\">\r\n                                Year\r\n                            </Label>\r\n                            <Select\r\n                                value={selectedYear}\r\n                                onValueChange={setSelectedYear}\r\n                            >\r\n                                <SelectTrigger className=\"col-span-3\">\r\n                                    <SelectValue placeholder=\"Select year\" />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {availableYears.length > 0 ? (\r\n                                        availableYears.map((year) => (\r\n                                            <SelectItem\r\n                                                key={year}\r\n                                                value={year.toString()}\r\n                                            >\r\n                                                {year}\r\n                                            </SelectItem>\r\n                                        ))\r\n                                    ) : (\r\n                                        <SelectItem\r\n                                            value={new Date()\r\n                                                .getFullYear()\r\n                                                .toString()}\r\n                                        >\r\n                                            {new Date().getFullYear()}\r\n                                        </SelectItem>\r\n                                    )}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <DialogFooter className=\"w-full flex items-center justify-between gap-4\">\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => onOpenChange(false)}\r\n                        disabled={isGenerating}\r\n                        className=\"w-auto\"\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => handleExport('excel')}\r\n                        disabled={isGenerating}\r\n                        className=\"w-auto\"\r\n                    >\r\n                        <IconFileExcel />\r\n                        Download Excel\r\n                    </Button>\r\n                    <Button\r\n                        onClick={() => handleExport('pdf')}\r\n                        disabled={isGenerating}\r\n                        className=\"w-auto\"\r\n                    >\r\n                        {isGenerating ? (\r\n                            <Loader className=\"animate-spin\" />\r\n                        ) : (\r\n                            <Download />\r\n                        )}\r\n                        Download PDF\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\invoice\\InvoicePDF.tsx","messages":[],"suppressedMessages":[{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"Image elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":403,"column":25,"nodeType":"JSXOpeningElement","endLine":403,"endColumn":68,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\notice\\FloatingNoticePopup.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\notice\\FloatingNoticePopup.tsx:34:13\n  32 |     useEffect(() => {\n  33 |         if (visibleNotices.length > 0 && !isLoading) {\n> 34 |             setIsVisible(true);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  35 |         }\n  36 |     }, [visibleNotices.length, isLoading]);\n  37 |","line":34,"column":13,"nodeType":null,"endLine":34,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { format } from 'date-fns';\r\nimport { Megaphone, X, ChevronLeft, ChevronRight, Pin } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    useGetUnreadNoticesQuery,\r\n    useMarkNoticeAsViewedMutation,\r\n} from '@/redux/features/notice/noticeApi';\r\nimport type { INotice } from '@/types/notice.type';\r\nimport {\r\n    NOTICE_PRIORITY_LABELS,\r\n    NOTICE_CATEGORY_LABELS,\r\n    NOTICE_PRIORITY_COLORS,\r\n    NOTICE_CATEGORY_COLORS,\r\n} from '@/types/notice.type';\r\n\r\nexport function FloatingNoticePopup() {\r\n    const { data, isLoading } = useGetUnreadNoticesQuery();\r\n    const [markAsViewed] = useMarkNoticeAsViewedMutation();\r\n\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [isVisible, setIsVisible] = useState(false);\r\n    const [dismissedIds, setDismissedIds] = useState<Set<string>>(new Set());\r\n\r\n    const unreadNotices = data?.data || [];\r\n    const visibleNotices = unreadNotices.filter((n) => !dismissedIds.has(n._id));\r\n    const currentNotice = visibleNotices[currentIndex];\r\n\r\n    useEffect(() => {\r\n        if (visibleNotices.length > 0 && !isLoading) {\r\n            setIsVisible(true);\r\n        }\r\n    }, [visibleNotices.length, isLoading]);\r\n\r\n    const handleDismiss = async (notice: INotice) => {\r\n        try {\r\n            await markAsViewed(notice._id).unwrap();\r\n        } catch (error) {\r\n            console.error('Failed to mark as viewed:', error);\r\n        }\r\n        setDismissedIds((prev) => new Set([...prev, notice._id]));\r\n\r\n        // Move to next if available\r\n        if (currentIndex >= visibleNotices.length - 1) {\r\n            setCurrentIndex(Math.max(0, visibleNotices.length - 2));\r\n        }\r\n\r\n        // Hide if no more notices\r\n        if (visibleNotices.length <= 1) {\r\n            setIsVisible(false);\r\n        }\r\n    };\r\n\r\n    const handleDismissAll = async () => {\r\n        for (const notice of visibleNotices) {\r\n            try {\r\n                await markAsViewed(notice._id).unwrap();\r\n            } catch (error) {\r\n                console.error('Failed to mark as viewed:', error);\r\n            }\r\n        }\r\n        setIsVisible(false);\r\n    };\r\n\r\n    const handlePrev = () => {\r\n        setCurrentIndex((prev) => Math.max(0, prev - 1));\r\n    };\r\n\r\n    const handleNext = () => {\r\n        setCurrentIndex((prev) => Math.min(visibleNotices.length - 1, prev + 1));\r\n    };\r\n\r\n    if (!isVisible || !currentNotice || visibleNotices.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\r\n            <div className=\"relative w-full max-w-lg mx-4 bg-background border rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-300\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between p-4 border-b bg-primary/5\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Megaphone className=\"h-5 w-5 text-primary\" />\r\n                        <span className=\"font-semibold\">New Notice</span>\r\n                        {visibleNotices.length > 1 && (\r\n                            <Badge variant=\"secondary\" className=\"ml-2\">\r\n                                {currentIndex + 1} of {visibleNotices.length}\r\n                            </Badge>\r\n                        )}\r\n                    </div>\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        onClick={() => setIsVisible(false)}\r\n                        className=\"h-8 w-8\"\r\n                    >\r\n                        <X className=\"h-4 w-4\" />\r\n                    </Button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-6\">\r\n                    <div className=\"flex items-start gap-2 mb-3\">\r\n                        {currentNotice.isPinned && <Pin className=\"h-5 w-5 text-amber-500 shrink-0\" />}\r\n                        <h3 className=\"text-xl font-bold\">{currentNotice.title}</h3>\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2 flex-wrap mb-4\">\r\n                        <Badge className={NOTICE_PRIORITY_COLORS[currentNotice.priority]} variant=\"outline\">\r\n                            {NOTICE_PRIORITY_LABELS[currentNotice.priority]}\r\n                        </Badge>\r\n                        <Badge className={NOTICE_CATEGORY_COLORS[currentNotice.category]} variant=\"outline\">\r\n                            {NOTICE_CATEGORY_LABELS[currentNotice.category]}\r\n                        </Badge>\r\n                    </div>\r\n\r\n                    <div\r\n                        className=\"prose prose-sm max-w-none dark:prose-invert max-h-60 overflow-y-auto\"\r\n                        dangerouslySetInnerHTML={{ __html: currentNotice.content }}\r\n                    />\r\n\r\n                    <div className=\"flex items-center gap-4 text-xs text-muted-foreground mt-4 pt-4 border-t\">\r\n                        <span>\r\n                            {format(new Date(currentNotice.publishedAt || currentNotice.createdAt), 'MMM dd, yyyy hh:mm a')}\r\n                        </span>\r\n                        <span>By: {currentNotice.createdBy?.name}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"flex items-center justify-between p-4 border-t bg-muted/30\">\r\n                    <div className=\"flex gap-1\">\r\n                        {visibleNotices.length > 1 && (\r\n                            <>\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    onClick={handlePrev}\r\n                                    disabled={currentIndex === 0}\r\n                                    className=\"h-8 w-8\"\r\n                                >\r\n                                    <ChevronLeft className=\"h-4 w-4\" />\r\n                                </Button>\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"icon\"\r\n                                    onClick={handleNext}\r\n                                    disabled={currentIndex === visibleNotices.length - 1}\r\n                                    className=\"h-8 w-8\"\r\n                                >\r\n                                    <ChevronRight className=\"h-4 w-4\" />\r\n                                </Button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-2\">\r\n                        {visibleNotices.length > 1 && (\r\n                            <Button variant=\"ghost\" size=\"sm\" onClick={handleDismissAll}>\r\n                                Dismiss All\r\n                            </Button>\r\n                        )}\r\n                        <Button size=\"sm\" onClick={() => handleDismiss(currentNotice)}>\r\n                            Got It\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\notification-bell.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Separator' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":19},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\notification-bell.tsx:165:17\n  163 |         if (notifications) {\n  164 |             if (page === 1) {\n> 165 |                 setAllNotifications(notifications);\n      |                 ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  166 |             } else {\n  167 |                 setAllNotifications(prev => {\n  168 |                     const newNotifs = notifications.filter(","line":165,"column":17,"nodeType":null,"endLine":165,"endColumn":36},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\notification-bell.tsx:181:13\n  179 |     useEffect(() => {\n  180 |         if (open) {\n> 181 |             setPage(1);\n      |             ^^^^^^^ Avoid calling setState() directly within an effect\n  182 |             setHasMore(true);\n  183 |         }\n  184 |     }, [open]);","line":181,"column":13,"nodeType":null,"endLine":181,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { Bell, Check, Trash2, X } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\nimport { Separator } from '@/components/ui/separator';\r\nimport {\r\n    useGetNotificationsQuery,\r\n    useGetUnreadCountQuery,\r\n    useMarkAsReadMutation,\r\n    useMarkAllAsReadMutation,\r\n    useDeleteNotificationMutation,\r\n} from '@/redux/features/notification/notificationApi';\r\nimport { format } from 'date-fns';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface Notification {\r\n    _id: string;\r\n    title: string;\r\n    message: string;\r\n    type: 'overtime' | 'leave' | 'attendance' | 'shift' | 'announcement';\r\n    priority: 'low' | 'medium' | 'high' | 'urgent';\r\n    isRead: boolean;\r\n    createdAt: string;\r\n    actionUrl?: string;\r\n    actionLabel?: string;\r\n}\r\n\r\nconst NotificationItem = ({ notification }: { notification: Notification }) => {\r\n    const [markAsRead] = useMarkAsReadMutation();\r\n    const [deleteNotification] = useDeleteNotificationMutation();\r\n\r\n    const handleMarkAsRead = async (e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        if (!notification.isRead) {\r\n            await markAsRead(notification._id);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        await deleteNotification(notification._id);\r\n    };\r\n\r\n    const handleClick = async () => {\r\n        if (!notification.isRead) {\r\n            await markAsRead(notification._id);\r\n        }\r\n        if (notification.actionUrl) {\r\n            window.location.href = notification.actionUrl;\r\n        }\r\n    };\r\n\r\n    const getTypeColor = (type: string) => {\r\n        switch (type) {\r\n            case 'overtime': return 'text-orange-600';\r\n            case 'shift': return 'text-blue-600';\r\n            case 'leave': return 'text-green-600';\r\n            case 'attendance': return 'text-purple-600';\r\n            case 'announcement': return 'text-gray-600';\r\n            default: return 'text-gray-600';\r\n        }\r\n    };\r\n\r\n    const getPriorityBadge = (priority: string) => {\r\n        switch (priority) {\r\n            case 'urgent': return <Badge variant=\"destructive\" className=\"text-xs\">Urgent</Badge>;\r\n            case 'high': return <Badge variant=\"secondary\" className=\"text-xs\">High</Badge>;\r\n            default: return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            onClick={handleClick}\r\n            className={cn(\r\n                \"p-3 hover:bg-accent cursor-pointer transition-colors border-b last:border-0\",\r\n                !notification.isRead && \"bg-blue-50 dark:bg-blue-950/20\"\r\n            )}\r\n        >\r\n            <div className=\"flex items-start justify-between gap-2\">\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2 mb-1\">\r\n                        <h4 className={cn(\r\n                            \"text-sm font-semibold truncate\",\r\n                            getTypeColor(notification.type)\r\n                        )}>\r\n                            {notification.title}\r\n                        </h4>\r\n                        {getPriorityBadge(notification.priority)}\r\n                        {!notification.isRead && (\r\n                            <div className=\"w-2 h-2 bg-blue-600 rounded-full\" />\r\n                        )}\r\n                    </div>\r\n                    <p className=\"text-sm text-muted-foreground line-clamp-2\">\r\n                        {notification.message}\r\n                    </p>\r\n                    <div className=\"flex items-center gap-2 mt-2\">\r\n                        <span className=\"text-xs text-muted-foreground\">\r\n                            {format(new Date(notification.createdAt), 'MMM dd, hh:mm aa')}\r\n                        </span>\r\n                        {notification.actionLabel && (\r\n                            <span className=\"text-xs text-blue-600 font-medium\">\r\n                                {notification.actionLabel} →\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-1\">\r\n                    {!notification.isRead && (\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-7 w-7\"\r\n                            onClick={handleMarkAsRead}\r\n                        >\r\n                            <Check className=\"h-4 w-4\" />\r\n                        </Button>\r\n                    )}\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"icon\"\r\n                        className=\"h-7 w-7 text-destructive\"\r\n                        onClick={handleDelete}\r\n                    >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default function NotificationBell() {\r\n    const [open, setOpen] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n    const [allNotifications, setAllNotifications] = useState<Notification[]>([]);\r\n    const [hasMore, setHasMore] = useState(true);\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n    const observerRef = useRef<IntersectionObserver | null>(null);\r\n    const loadMoreRef = useRef<HTMLDivElement>(null);\r\n\r\n    const { data: countData } = useGetUnreadCountQuery(undefined, {\r\n        pollingInterval: 30000, // Poll every 30 seconds\r\n    });\r\n\r\n    const { data: notifications, isLoading, isFetching } = useGetNotificationsQuery(\r\n        { limit: 20, skip: (page - 1) * 20 },\r\n        { skip: !open, refetchOnMountOrArgChange: true }\r\n    );\r\n\r\n    const [markAllAsRead] = useMarkAllAsReadMutation();\r\n\r\n    // Update notifications when new data arrives\r\n    useEffect(() => {\r\n        if (notifications) {\r\n            if (page === 1) {\r\n                setAllNotifications(notifications);\r\n            } else {\r\n                setAllNotifications(prev => {\r\n                    const newNotifs = notifications.filter(\r\n                        (n: Notification) => !prev.find(p => p._id === n._id)\r\n                    );\r\n                    return [...prev, ...newNotifs];\r\n                });\r\n            }\r\n            setHasMore(notifications.length === 20);\r\n        }\r\n    }, [notifications, page]);\r\n\r\n    // Reset when popover opens\r\n    useEffect(() => {\r\n        if (open) {\r\n            setPage(1);\r\n            setHasMore(true);\r\n        }\r\n    }, [open]);\r\n\r\n    // Infinite scroll observer\r\n    const loadMore = useCallback(() => {\r\n        if (!isFetching && hasMore) {\r\n            setPage(prev => prev + 1);\r\n        }\r\n    }, [isFetching, hasMore]);\r\n\r\n    useEffect(() => {\r\n        if (observerRef.current) {\r\n            observerRef.current.disconnect();\r\n        }\r\n\r\n        observerRef.current = new IntersectionObserver(\r\n            (entries) => {\r\n                if (entries[0].isIntersecting) {\r\n                    loadMore();\r\n                }\r\n            },\r\n            { threshold: 0.1 }\r\n        );\r\n\r\n        if (loadMoreRef.current) {\r\n            observerRef.current.observe(loadMoreRef.current);\r\n        }\r\n\r\n        return () => {\r\n            if (observerRef.current) {\r\n                observerRef.current.disconnect();\r\n            }\r\n        };\r\n    }, [loadMore]);\r\n\r\n    const handleMarkAllAsRead = async () => {\r\n        await markAllAsRead({});\r\n    };\r\n\r\n    const unreadCount = countData?.count || 0;\r\n\r\n    return (\r\n        <Popover open={open} onOpenChange={setOpen}>\r\n            <PopoverTrigger asChild>\r\n                <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\r\n                    <Bell className=\"h-5 w-5\" />\r\n                    {unreadCount > 0 && (\r\n                        <Badge\r\n                            variant=\"destructive\"\r\n                            className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs\"\r\n                        >\r\n                            {unreadCount > 99 ? '99+' : unreadCount}\r\n                        </Badge>\r\n                    )}\r\n                </Button>\r\n            </PopoverTrigger>\r\n            <PopoverContent className=\"w-96 p-0\" align=\"end\">\r\n                <div className=\"flex items-center justify-between p-4 border-b\">\r\n                    <h3 className=\"font-semibold text-lg\">Notifications</h3>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        {unreadCount > 0 && (\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={handleMarkAllAsRead}\r\n                                className=\"text-xs\"\r\n                            >\r\n                                Mark all read\r\n                            </Button>\r\n                        )}\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8\"\r\n                            onClick={() => setOpen(false)}\r\n                        >\r\n                            <X className=\"h-4 w-4\" />\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <ScrollArea className=\"h-[500px]\" ref={scrollRef}>\r\n                    {isLoading && page === 1 ? (\r\n                        <div className=\"p-8 text-center text-muted-foreground\">\r\n                            Loading notifications...\r\n                        </div>\r\n                    ) : allNotifications.length === 0 ? (\r\n                        <div className=\"p-8 text-center text-muted-foreground\">\r\n                            <Bell className=\"h-12 w-12 mx-auto mb-2 opacity-50\" />\r\n                            <p>No notifications yet</p>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {allNotifications.map((notification) => (\r\n                                <NotificationItem\r\n                                    key={notification._id}\r\n                                    notification={notification}\r\n                                />\r\n                            ))}\r\n                            {hasMore && (\r\n                                <div ref={loadMoreRef} className=\"p-4 text-center\">\r\n                                    {isFetching ? (\r\n                                        <span className=\"text-sm text-muted-foreground\">\r\n                                            Loading more...\r\n                                        </span>\r\n                                    ) : (\r\n                                        <span className=\"text-sm text-muted-foreground\">\r\n                                            Scroll for more\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </>\r\n                    )}\r\n                </ScrollArea>\r\n            </PopoverContent>\r\n        </Popover>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\order\\DeadlineCountdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\order\\OrderForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Dialog' is defined but never used.","line":31,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogContent' is defined but never used.","line":32,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogDescription' is defined but never used.","line":33,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogHeader' is defined but never used.","line":34,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTitle' is defined but never used.","line":35,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used.","line":36,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isEditMode' is assigned a value but never used.","line":91,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoadingStaffs' is assigned a value but never used.","line":149,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":57},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'services' logical expression could make the dependencies of useMemo Hook (at line 177) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'services' in its own useMemo() Hook.","line":157,"column":11,"nodeType":"VariableDeclarator","endLine":157,"endColumn":46},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\order\\OrderForm.tsx:330:58\n  328 |                                 ? clients.find(\n  329 |                                       (client) =>\n> 330 |                                           client._id === watch('clientId'),\n      |                                                          ^^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  331 |                                   )?.name\n  332 |                                 : 'Select client'}\n  333 |                             <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />","line":330,"column":58,"nodeType":null,"endLine":330,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":730,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":730,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30197,30200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30197,30200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4064,4067],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4064,4067],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState, useMemo } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { format } from 'date-fns';\r\nimport { createOrderSchema } from '@/validators/order.validator';\r\nimport {\r\n    useGetServicesQuery,\r\n    useCreateServiceMutation,\r\n} from '@/redux/features/service/serviceApi';\r\nimport {\r\n    useGetReturnFileFormatsQuery,\r\n    useCreateReturnFileFormatMutation,\r\n} from '@/redux/features/returnFileFormat/returnFileFormatApi';\r\nimport { useGetClientsQuery } from '@/redux/features/client/clientApi';\r\nimport { useGetStaffsQuery } from '@/redux/features/staff/staffApi';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport {\r\n    Command,\r\n    CommandEmpty,\r\n    CommandGroup,\r\n    CommandInput,\r\n    CommandItem,\r\n    CommandList,\r\n} from '@/components/ui/command';\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from '@/components/ui/popover';\r\nimport { Loader, Plus, X, Check, ChevronsUpDown } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\nimport { toast } from 'sonner';\r\nimport { DatePicker } from '@/components/shared/DatePicker';\r\nimport { DateTimePicker } from '@/components/shared/DateTimePicker';\r\nimport type { OrderPriority } from '@/types/order.type';\r\n\r\nexport interface OrderFormData {\r\n    orderName: string;\r\n    clientId: string;\r\n    orderDate: string;\r\n    deadline: string;\r\n    imageQuantity: number;\r\n    perImagePrice: number;\r\n    totalPrice: number;\r\n    services: string[];\r\n    returnFileFormat: string;\r\n    instruction?: string;\r\n    priority?: OrderPriority;\r\n    assignedTo?: string;\r\n    notes?: string;\r\n}\r\n\r\ninterface OrderFormProps {\r\n    defaultValues?: OrderFormData;\r\n    onSubmit: (data: OrderFormData) => Promise<void>;\r\n    isSubmitting: boolean;\r\n    submitLabel: string;\r\n    onCancel: () => void;\r\n    serverErrors?: Record<string, string[]>;\r\n    isEditMode?: boolean;\r\n}\r\n\r\nexport function OrderForm({\r\n    defaultValues,\r\n    onSubmit,\r\n    isSubmitting,\r\n    submitLabel,\r\n    onCancel,\r\n    serverErrors,\r\n    isEditMode = false,\r\n}: OrderFormProps) {\r\n    const [selectedServices, setSelectedServices] = useState<string[]>(\r\n        defaultValues?.services || [],\r\n    );\r\n    const [orderDate, setOrderDate] = useState<Date | undefined>(\r\n        defaultValues?.orderDate\r\n            ? new Date(defaultValues.orderDate)\r\n            : new Date(),\r\n    );\r\n    const [deadline, setDeadline] = useState<Date | undefined>(\r\n        defaultValues?.deadline ? new Date(defaultValues.deadline) : undefined,\r\n    );\r\n    const [isNewServiceMode, setIsNewServiceMode] = useState(false);\r\n    const [isNewFormatMode, setIsNewFormatMode] = useState(false);\r\n    const [newServiceName, setNewServiceName] = useState('');\r\n    const [newServiceDescription, setNewServiceDescription] = useState('');\r\n    const [newFormatName, setNewFormatName] = useState('');\r\n    const [newFormatExtension, setNewFormatExtension] = useState('');\r\n\r\n    // Service search with debounce\r\n    const [serviceSearchInput, setServiceSearchInput] = useState('');\r\n    const [debouncedServiceSearch, setDebouncedServiceSearch] = useState('');\r\n    const [openClient, setOpenClient] = useState(false);\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors },\r\n        setValue,\r\n        watch,\r\n        setError,\r\n    } = useForm<OrderFormData>({\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        resolver: zodResolver(createOrderSchema) as any,\r\n        defaultValues: defaultValues || {\r\n            orderName: '',\r\n            clientId: '',\r\n            orderDate: new Date().toISOString().split('T')[0],\r\n            deadline: '',\r\n            imageQuantity: 1,\r\n            perImagePrice: 0,\r\n            totalPrice: 0,\r\n            services: [],\r\n            returnFileFormat: '',\r\n            instruction: '',\r\n            priority: 'normal',\r\n            assignedTo: '',\r\n            notes: '',\r\n        },\r\n    });\r\n\r\n    const { data: servicesData, isLoading: isLoadingServices } =\r\n        useGetServicesQuery({ isActive: true, limit: 1000 });\r\n    const { data: formatsData, isLoading: isLoadingFormats } =\r\n        useGetReturnFileFormatsQuery({ isActive: true });\r\n    const { data: clientsData, isLoading: isLoadingClients } =\r\n        useGetClientsQuery({ limit: 100 });\r\n    const { data: staffsData, isLoading: isLoadingStaffs } =\r\n        useGetStaffsQuery(undefined);\r\n\r\n    const [createService, { isLoading: isCreatingService }] =\r\n        useCreateServiceMutation();\r\n    const [createFormat, { isLoading: isCreatingFormat }] =\r\n        useCreateReturnFileFormatMutation();\r\n\r\n    const services = servicesData?.data || [];\r\n    const formats = formatsData?.data || [];\r\n    const clients = clientsData?.clients || [];\r\n    const staffs = staffsData?.staffs || [];\r\n\r\n    // Debounce service search (300ms delay)\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            setDebouncedServiceSearch(serviceSearchInput);\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n    }, [serviceSearchInput]);\r\n\r\n    // Filter services based on debounced search\r\n    const filteredServices = useMemo(() => {\r\n        if (!debouncedServiceSearch.trim()) return services;\r\n        const searchLower = debouncedServiceSearch.toLowerCase();\r\n        return services.filter((service: { name: string }) =>\r\n            service.name.toLowerCase().includes(searchLower),\r\n        );\r\n    }, [services, debouncedServiceSearch]);\r\n\r\n    const imageQuantity = watch('imageQuantity');\r\n    const perImagePrice = watch('perImagePrice');\r\n    const totalPrice = watch('totalPrice');\r\n\r\n    // Track which field the user is editing - 'perImage' or 'total'\r\n    const [priceMode, setPriceMode] = useState<'perImage' | 'total'>(\r\n        'perImage',\r\n    );\r\n\r\n    // Auto-calculate based on which field was last edited\r\n    useEffect(() => {\r\n        const qty = Number(imageQuantity) || 0;\r\n\r\n        if (priceMode === 'perImage') {\r\n            // User entered per image price, calculate total\r\n            const price = Number(perImagePrice) || 0;\r\n            const calculatedTotal = Number((qty * price).toFixed(2));\r\n            setValue('totalPrice', calculatedTotal);\r\n        } else {\r\n            // User entered total price, calculate per image\r\n            const total = Number(totalPrice) || 0;\r\n            if (qty > 0) {\r\n                const calculatedPerImage = Number((total / qty).toFixed(2));\r\n                setValue('perImagePrice', calculatedPerImage);\r\n            }\r\n        }\r\n    }, [imageQuantity, perImagePrice, totalPrice, priceMode, setValue]);\r\n\r\n    // Set server errors\r\n    useEffect(() => {\r\n        if (serverErrors) {\r\n            Object.entries(serverErrors).forEach(([key, messages]) => {\r\n                setError(key as keyof OrderFormData, {\r\n                    type: 'server',\r\n                    message: messages[0],\r\n                });\r\n            });\r\n        }\r\n    }, [serverErrors, setError]);\r\n\r\n    // Update services in form\r\n    useEffect(() => {\r\n        setValue('services', selectedServices);\r\n    }, [selectedServices, setValue]);\r\n\r\n    // Update dates in form\r\n    useEffect(() => {\r\n        if (orderDate) {\r\n            setValue('orderDate', format(orderDate, 'yyyy-MM-dd'));\r\n        }\r\n    }, [orderDate, setValue]);\r\n\r\n    useEffect(() => {\r\n        if (deadline) {\r\n            // Store full ISO string with time for deadline\r\n            setValue('deadline', deadline.toISOString());\r\n        }\r\n    }, [deadline, setValue]);\r\n\r\n    const handleServiceToggle = (serviceId: string) => {\r\n        setSelectedServices((prev) =>\r\n            prev.includes(serviceId)\r\n                ? prev.filter((id) => id !== serviceId)\r\n                : [...prev, serviceId],\r\n        );\r\n    };\r\n\r\n    const handleCreateService = async () => {\r\n        if (!newServiceName.trim()) {\r\n            toast.error('Service name is required');\r\n            return;\r\n        }\r\n        try {\r\n            const result = await createService({\r\n                name: newServiceName,\r\n                description: newServiceDescription,\r\n            }).unwrap();\r\n            toast.success('Service created successfully');\r\n            setSelectedServices((prev) => [...prev, result.data._id]);\r\n            setNewServiceName('');\r\n            setNewServiceDescription('');\r\n            setIsNewServiceMode(false);\r\n        } catch (error: unknown) {\r\n            const err = error as { data?: { message?: string } };\r\n            toast.error(err?.data?.message || 'Failed to create service');\r\n        }\r\n    };\r\n\r\n    const handleCreateFormat = async () => {\r\n        if (!newFormatName.trim() || !newFormatExtension.trim()) {\r\n            toast.error('Format name and extension are required');\r\n            return;\r\n        }\r\n        try {\r\n            const result = await createFormat({\r\n                name: newFormatName,\r\n                extension: newFormatExtension,\r\n            }).unwrap();\r\n            toast.success('File format created successfully');\r\n            setValue('returnFileFormat', result.data._id);\r\n            setNewFormatName('');\r\n            setNewFormatExtension('');\r\n            setIsNewFormatMode(false);\r\n        } catch (error: unknown) {\r\n            const err = error as { data?: { message?: string } };\r\n            toast.error(err?.data?.message || 'Failed to create file format');\r\n        }\r\n    };\r\n\r\n    const onFormSubmit = (data: OrderFormData) => {\r\n        onSubmit({\r\n            ...data,\r\n            services: selectedServices,\r\n        });\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit(onFormSubmit)} className=\"space-y-4\">\r\n            {/* Order Name */}\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"orderName\">Order Name *</Label>\r\n                <Input\r\n                    id=\"orderName\"\r\n                    {...register('orderName')}\r\n                    placeholder=\"Product Photo Editing Batch 1\"\r\n                />\r\n                {errors.orderName && (\r\n                    <p className=\"text-sm text-destructive\">\r\n                        {errors.orderName.message}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Client */}\r\n            <div className=\"space-y-2 flex flex-col\">\r\n                <Label htmlFor=\"clientId\">Client *</Label>\r\n                <Popover open={openClient} onOpenChange={setOpenClient}>\r\n                    <PopoverTrigger asChild>\r\n                        <Button\r\n                            variant=\"outline\"\r\n                            role=\"combobox\"\r\n                            aria-expanded={openClient}\r\n                            className={cn(\r\n                                'w-full justify-between',\r\n                                !watch('clientId') && 'text-muted-foreground',\r\n                            )}\r\n                            disabled={isLoadingClients}\r\n                        >\r\n                            {watch('clientId')\r\n                                ? clients.find(\r\n                                      (client) =>\r\n                                          client._id === watch('clientId'),\r\n                                  )?.name\r\n                                : 'Select client'}\r\n                            <ChevronsUpDown className=\"ml-2 h-4 w-4 shrink-0 opacity-50\" />\r\n                        </Button>\r\n                    </PopoverTrigger>\r\n                    <PopoverContent className=\"w-[--radix-popover-trigger-width] p-0\">\r\n                        <Command>\r\n                            <CommandInput placeholder=\"Search client...\" />\r\n                            <CommandList>\r\n                                <CommandEmpty>No client found.</CommandEmpty>\r\n                                <CommandGroup>\r\n                                    {clients.map((client) => (\r\n                                        <CommandItem\r\n                                            key={client._id}\r\n                                            value={client.name}\r\n                                            keywords={[\r\n                                                client.name,\r\n                                                client.clientId,\r\n                                            ]} // Search by name and ID\r\n                                            onSelect={() => {\r\n                                                setValue(\r\n                                                    'clientId',\r\n                                                    client._id,\r\n                                                );\r\n                                                setOpenClient(false);\r\n                                            }}\r\n                                        >\r\n                                            <Check\r\n                                                className={cn(\r\n                                                    ' h-4 w-4',\r\n                                                    watch('clientId') ===\r\n                                                        client._id\r\n                                                        ? 'opacity-100'\r\n                                                        : 'opacity-0',\r\n                                                )}\r\n                                            />\r\n                                            <span className=\"flex flex-col\">\r\n                                                <span>{client.name}</span>\r\n                                                <span className=\"text-xs text-muted-foreground\">\r\n                                                    {client.clientId}\r\n                                                </span>\r\n                                            </span>\r\n                                        </CommandItem>\r\n                                    ))}\r\n                                </CommandGroup>\r\n                            </CommandList>\r\n                        </Command>\r\n                    </PopoverContent>\r\n                </Popover>\r\n                {errors.clientId && (\r\n                    <p className=\"text-sm text-destructive\">\r\n                        {errors.clientId.message}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n                {/* Order Date */}\r\n                <div className=\"space-y-2\">\r\n                    <DatePicker\r\n                        label=\"Order Date *\"\r\n                        value={orderDate}\r\n                        onChange={setOrderDate}\r\n                        placeholder=\"Select order date\"\r\n                    />\r\n                    {errors.orderDate && (\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {errors.orderDate.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Deadline */}\r\n                <div className=\"space-y-2\">\r\n                    <DateTimePicker\r\n                        label=\"Deadline *\"\r\n                        value={deadline}\r\n                        onChange={setDeadline}\r\n                        placeholder=\"Select deadline with time\"\r\n                        minDate={orderDate}\r\n                    />\r\n                    {errors.deadline && (\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {errors.deadline.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n                {/* Image Quantity */}\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"imageQuantity\">Image Quantity *</Label>\r\n                    <Input\r\n                        id=\"imageQuantity\"\r\n                        type=\"number\"\r\n                        min=\"1\"\r\n                        {...register('imageQuantity', { valueAsNumber: true })}\r\n                    />\r\n                    {errors.imageQuantity && (\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {errors.imageQuantity.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Per Image Price */}\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"perImagePrice\">Per Image Price ($) *</Label>\r\n                    <Input\r\n                        id=\"perImagePrice\"\r\n                        type=\"number\"\r\n                        step=\"any\"\r\n                        min=\"0\"\r\n                        value={perImagePrice || ''}\r\n                        onChange={(e) => {\r\n                            setPriceMode('perImage');\r\n                            setValue(\r\n                                'perImagePrice',\r\n                                Number(e.target.value) || 0,\r\n                            );\r\n                        }}\r\n                    />\r\n                    {errors.perImagePrice && (\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {errors.perImagePrice.message}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Total Price */}\r\n                <div className=\"space-y-2\">\r\n                    <Label htmlFor=\"totalPrice\">Total Price ($)</Label>\r\n                    <Input\r\n                        id=\"totalPrice\"\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        min=\"0\"\r\n                        value={totalPrice || ''}\r\n                        onChange={(e) => {\r\n                            setPriceMode('total');\r\n                            setValue('totalPrice', Number(e.target.value) || 0);\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Services */}\r\n            <div className=\"space-y-3\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <Label>Services *</Label>\r\n                    <Button\r\n                        type=\"button\"\r\n                        variant={isNewServiceMode ? 'secondary' : 'outline'}\r\n                        size=\"sm\"\r\n                        onClick={() => setIsNewServiceMode(!isNewServiceMode)}\r\n                    >\r\n                        {isNewServiceMode ? (\r\n                            <>\r\n                                <X className=\"h-4 w-4 mr-1\" />\r\n                                Cancel\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Plus className=\"h-4 w-4 mr-1\" />\r\n                                New Service\r\n                            </>\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n\r\n                {isNewServiceMode && (\r\n                    <div className=\"p-4 border rounded-lg bg-muted/50 space-y-4 animate-in fade-in slide-in-from-top-2\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"new-service-name\">\r\n                                Service Name *\r\n                            </Label>\r\n                            <Input\r\n                                id=\"new-service-name\"\r\n                                value={newServiceName}\r\n                                onChange={(e) =>\r\n                                    setNewServiceName(e.target.value)\r\n                                }\r\n                                placeholder=\"e.g., Clipping Path\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"new-service-desc\">\r\n                                Description\r\n                            </Label>\r\n                            <Textarea\r\n                                id=\"new-service-desc\"\r\n                                value={newServiceDescription}\r\n                                onChange={(e) =>\r\n                                    setNewServiceDescription(e.target.value)\r\n                                }\r\n                                placeholder=\"Optional description\"\r\n                                rows={2}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex justify-end\">\r\n                            <Button\r\n                                type=\"button\"\r\n                                onClick={handleCreateService}\r\n                                disabled={isCreatingService}\r\n                                size=\"sm\"\r\n                            >\r\n                                {isCreatingService && (\r\n                                    <Loader className=\"h-4 w-4  animate-spin\" />\r\n                                )}\r\n                                Create Service\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Service Search Input */}\r\n                <Input\r\n                    placeholder=\"Search services...\"\r\n                    value={serviceSearchInput}\r\n                    onChange={(e) => setServiceSearchInput(e.target.value)}\r\n                    className=\"h-9\"\r\n                />\r\n\r\n                {isLoadingServices ? (\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                        Loading services...\r\n                    </p>\r\n                ) : (\r\n                    <div className=\"grid grid-cols-2 gap-2 p-3 border rounded-md max-h-40 overflow-y-auto\">\r\n                        {filteredServices.length === 0 ? (\r\n                            <p className=\"text-sm text-muted-foreground col-span-2\">\r\n                                No services found\r\n                            </p>\r\n                        ) : (\r\n                            filteredServices.map((service) => (\r\n                                <div\r\n                                    key={service._id}\r\n                                    className=\"flex items-center space-x-2\"\r\n                                >\r\n                                    <Checkbox\r\n                                        id={`service-${service._id}`}\r\n                                        checked={selectedServices.includes(\r\n                                            service._id,\r\n                                        )}\r\n                                        onCheckedChange={() =>\r\n                                            handleServiceToggle(service._id)\r\n                                        }\r\n                                    />\r\n                                    <Label\r\n                                        htmlFor={`service-${service._id}`}\r\n                                        className=\"text-sm cursor-pointer\"\r\n                                    >\r\n                                        {service.name}\r\n                                    </Label>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                )}\r\n                {errors.services && (\r\n                    <p className=\"text-sm text-destructive\">\r\n                        {errors.services.message}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Return File Format */}\r\n            <div className=\"space-y-3\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <Label>Return File Format *</Label>\r\n                    <Button\r\n                        type=\"button\"\r\n                        variant={isNewFormatMode ? 'secondary' : 'outline'}\r\n                        size=\"sm\"\r\n                        onClick={() => setIsNewFormatMode(!isNewFormatMode)}\r\n                    >\r\n                        {isNewFormatMode ? (\r\n                            <>\r\n                                <X className=\"h-4 w-4 mr-1\" />\r\n                                Cancel\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                <Plus className=\"h-4 w-4 mr-1\" />\r\n                                New Format\r\n                            </>\r\n                        )}\r\n                    </Button>\r\n                </div>\r\n\r\n                {isNewFormatMode && (\r\n                    <div className=\"p-4 border rounded-lg bg-muted/50 space-y-4 animate-in fade-in slide-in-from-top-2\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"new-format-name\">\r\n                                    Format Name *\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"new-format-name\"\r\n                                    value={newFormatName}\r\n                                    onChange={(e) =>\r\n                                        setNewFormatName(e.target.value)\r\n                                    }\r\n                                    placeholder=\"e.g., JPEG\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"new-format-ext\">\r\n                                    Extension *\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"new-format-ext\"\r\n                                    value={newFormatExtension}\r\n                                    onChange={(e) =>\r\n                                        setNewFormatExtension(e.target.value)\r\n                                    }\r\n                                    placeholder=\"e.g., jpg\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex justify-end\">\r\n                            <Button\r\n                                type=\"button\"\r\n                                onClick={handleCreateFormat}\r\n                                disabled={isCreatingFormat}\r\n                                size=\"sm\"\r\n                            >\r\n                                {isCreatingFormat && (\r\n                                    <Loader className=\"h-4 w-4  animate-spin\" />\r\n                                )}\r\n                                Create Format\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                <Select\r\n                    value={watch('returnFileFormat')}\r\n                    onValueChange={(value) =>\r\n                        setValue('returnFileFormat', value)\r\n                    }\r\n                    disabled={isLoadingFormats}\r\n                >\r\n                    <SelectTrigger className=\"w-full\">\r\n                        <SelectValue placeholder=\"Select file format\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        {formats.map((format) => (\r\n                            <SelectItem key={format._id} value={format._id}>\r\n                                {format.name} (.{format.extension})\r\n                            </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                </Select>\r\n                {errors.returnFileFormat && (\r\n                    <p className=\"text-sm text-destructive\">\r\n                        {errors.returnFileFormat.message}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Priority */}\r\n            <div className=\"space-y-2\">\r\n                <Label>Priority</Label>\r\n                <Select\r\n                    value={watch('priority')}\r\n                    onValueChange={(value) =>\r\n                        setValue('priority', value as OrderPriority)\r\n                    }\r\n                >\r\n                    <SelectTrigger className=\"w-full\">\r\n                        <SelectValue placeholder=\"Select priority\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        <SelectItem value=\"low\">Low</SelectItem>\r\n                        <SelectItem value=\"normal\">Normal</SelectItem>\r\n                        <SelectItem value=\"high\">High</SelectItem>\r\n                        <SelectItem value=\"urgent\">Urgent</SelectItem>\r\n                    </SelectContent>\r\n                </Select>\r\n            </div>\r\n\r\n            {/* Assigned To */}\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"assignedTo\">Assigned To</Label>\r\n                <Select\r\n                    value={watch('assignedTo') || '_unassigned'}\r\n                    onValueChange={(value) =>\r\n                        setValue(\r\n                            'assignedTo',\r\n                            value === '_unassigned' ? '' : value,\r\n                        )\r\n                    }\r\n                >\r\n                    <SelectTrigger className=\"w-full\">\r\n                        <SelectValue placeholder=\"Select staff member\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                        <SelectItem value=\"_unassigned\">Unassigned</SelectItem>\r\n                        {staffs.map((staff: any) => (\r\n                            <SelectItem key={staff._id} value={staff._id}>\r\n                                {staff.user?.name || 'Unknown'} (\r\n                                {staff.ids?.staffId || staff.staffId})\r\n                            </SelectItem>\r\n                        ))}\r\n                    </SelectContent>\r\n                </Select>\r\n            </div>\r\n\r\n            {/* Instructions */}\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"instruction\">Instructions</Label>\r\n                <Textarea\r\n                    id=\"instruction\"\r\n                    {...register('instruction')}\r\n                    placeholder=\"Special instructions for this order...\"\r\n                    rows={3}\r\n                />\r\n                {errors.instruction && (\r\n                    <p className=\"text-sm text-destructive\">\r\n                        {errors.instruction.message}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Notes */}\r\n            <div className=\"space-y-2\">\r\n                <Label htmlFor=\"notes\">Internal Notes</Label>\r\n                <Textarea\r\n                    id=\"notes\"\r\n                    {...register('notes')}\r\n                    placeholder=\"Internal notes (not visible to client)...\"\r\n                    rows={2}\r\n                />\r\n                {errors.notes && (\r\n                    <p className=\"text-sm text-destructive\">\r\n                        {errors.notes.message}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex justify-end gap-3 pt-4\">\r\n                <Button type=\"button\" variant=\"outline\" onClick={onCancel}>\r\n                    Cancel\r\n                </Button>\r\n                <Button type=\"submit\" disabled={isSubmitting}>\r\n                    {isSubmitting && (\r\n                        <Loader className=\"h-4 w-4  animate-spin\" />\r\n                    )}\r\n                    {submitLabel}\r\n                </Button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\order\\OrderTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\bulk-review-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\edit-salary-dialog.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\edit-salary-dialog.tsx:72:13\n  70 |     useEffect(() => {\n  71 |         if (open) {\n> 72 |             setBonus(initialBonus > 0 ? initialBonus.toString() : \"\");\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  73 |             setDeduction(\n  74 |                 initialDeduction > 0 ? initialDeduction.toString() : \"\",\n  75 |             );","line":72,"column":13,"nodeType":null,"endLine":72,"endColumn":21},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\edit-salary-dialog.tsx:89:9\n  87 |         const d = parseFloat(deduction) || 0;\n  88 |         const base = parseFloat(localBaseAmount) || 0;\n> 89 |         setFinalAmount(Math.max(0, base + b - d));\n     |         ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  90 |     }, [localBaseAmount, bonus, deduction]);\n  91 |\n  92 |     const handleSave = () => {","line":89,"column":9,"nodeType":null,"endLine":89,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4102,4105],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4102,4105],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { toast } from \"sonner\";\r\nimport { useProcessPaymentMutation } from \"@/redux/features/payroll/payrollApi\";\r\nimport { useSession } from \"@/lib/auth-client\";\r\nimport { Loader2, Save } from \"lucide-react\";\r\n\r\ninterface EditSalaryDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    staffId: string;\r\n    staffName: string;\r\n    month: string;\r\n    baseAmount: number; // calculated payable amount\r\n    mode?: \"pay\" | \"edit\";\r\n    initialBonus?: number;\r\n    initialDeduction?: number;\r\n    initialNote?: string;\r\n    onSave?: (data: {\r\n        baseAmount: number;\r\n        bonus: number;\r\n        deduction: number;\r\n        note: string;\r\n    }) => void;\r\n}\r\n\r\nexport default function EditSalaryDialog({\r\n    open,\r\n    onOpenChange,\r\n    staffId,\r\n    staffName,\r\n    month,\r\n    baseAmount,\r\n    mode = \"pay\",\r\n    initialBonus = 0,\r\n    initialDeduction = 0,\r\n    initialNote = \"\",\r\n    onSave,\r\n}: EditSalaryDialogProps) {\r\n    const { data: session } = useSession();\r\n    const [bonus, setBonus] = useState<string>(\"\");\r\n    const [deduction, setDeduction] = useState<string>(\"\");\r\n    const [note, setNote] = useState(\"\");\r\n    const [paymentMethod, setPaymentMethod] = useState(\"cash\");\r\n    const [localBaseAmount, setLocalBaseAmount] = useState<string>(\r\n        (baseAmount || 0).toString(),\r\n    );\r\n    const [finalAmount, setFinalAmount] = useState<number>(baseAmount || 0);\r\n    const [isBaseEditable, setIsBaseEditable] = useState(false);\r\n\r\n    const [processPayment, { isLoading }] = useProcessPaymentMutation();\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            setBonus(initialBonus > 0 ? initialBonus.toString() : \"\");\r\n            setDeduction(\r\n                initialDeduction > 0 ? initialDeduction.toString() : \"\",\r\n            );\r\n            setNote(initialNote || \"\");\r\n            setPaymentMethod(\"cash\");\r\n            setLocalBaseAmount((baseAmount || 0).toString());\r\n            setFinalAmount(baseAmount || 0);\r\n            setIsBaseEditable(false);\r\n        }\r\n    }, [open, baseAmount, initialBonus, initialDeduction, initialNote]);\r\n\r\n    // Recalculate final amount when bonus/deduction/base changes\r\n    useEffect(() => {\r\n        const b = parseFloat(bonus) || 0;\r\n        const d = parseFloat(deduction) || 0;\r\n        const base = parseFloat(localBaseAmount) || 0;\r\n        setFinalAmount(Math.max(0, base + b - d));\r\n    }, [localBaseAmount, bonus, deduction]);\r\n\r\n    const handleSave = () => {\r\n        if (onSave) {\r\n            onSave({\r\n                baseAmount: parseFloat(localBaseAmount) || 0,\r\n                bonus: parseFloat(bonus) || 0,\r\n                deduction: parseFloat(deduction) || 0,\r\n                note: note.trim(),\r\n            });\r\n            onOpenChange(false);\r\n            toast.success(\"Changes Saved\", {\r\n                description:\r\n                    \"Salary adjustments have been saved for bulk payment.\",\r\n            });\r\n        }\r\n    };\r\n\r\n    const handlePayment = async () => {\r\n        try {\r\n            await processPayment({\r\n                staffId,\r\n                month,\r\n                amount: finalAmount,\r\n                paymentMethod,\r\n                paymentType: \"salary\",\r\n                note,\r\n                bonus: parseFloat(bonus) || 0,\r\n                deduction: parseFloat(deduction) || 0,\r\n                createdBy: session?.user?.id || \"\",\r\n            }).unwrap();\r\n\r\n            toast.success(\"Payment Successful\", {\r\n                description: `Salary paid to ${staffName}`,\r\n            });\r\n            onOpenChange(false);\r\n        } catch (error: any) {\r\n            toast.error(\"Payment Failed\", {\r\n                description: error.data?.message || \"Could not process payment\",\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>\r\n                        {mode === \"edit\"\r\n                            ? \"Edit Payment\"\r\n                            : \"Review & Process Payment\"}\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        Review and adjust salary for{\" \"}\r\n                        <span className=\"font-semibold\">{staffName}</span>.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"grid gap-4 py-4\">\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"base\" className=\"text-right\">\r\n                            Base\r\n                        </Label>\r\n                        <div className=\"col-span-3 flex items-center gap-2\">\r\n                            <Input\r\n                                id=\"base\"\r\n                                type=\"number\"\r\n                                value={localBaseAmount}\r\n                                onChange={(e) =>\r\n                                    setLocalBaseAmount(e.target.value)\r\n                                }\r\n                                disabled={!isBaseEditable}\r\n                                className={!isBaseEditable ? \"bg-muted\" : \"\"}\r\n                            />\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"outline\"\r\n                                size=\"icon\"\r\n                                className=\"h-10 w-10 shrink-0\"\r\n                                onClick={() =>\r\n                                    setIsBaseEditable(!isBaseEditable)\r\n                                }\r\n                                title=\"Edit Base Salary\"\r\n                            >\r\n                                <svg\r\n                                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                                    width=\"16\"\r\n                                    height=\"16\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                    stroke=\"currentColor\"\r\n                                    strokeWidth=\"2\"\r\n                                    strokeLinecap=\"round\"\r\n                                    strokeLinejoin=\"round\"\r\n                                    className=\"lucide lucide-pencil\"\r\n                                >\r\n                                    <path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\" />\r\n                                    <path d=\"m15 5 4 4\" />\r\n                                </svg>\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"bonus\" className=\"text-right\">\r\n                            Bonus\r\n                        </Label>\r\n                        <Input\r\n                            id=\"bonus\"\r\n                            type=\"number\"\r\n                            value={bonus}\r\n                            onChange={(e) => setBonus(e.target.value)}\r\n                            className=\"col-span-3\"\r\n                            placeholder=\"0.00\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"deduction\" className=\"text-right\">\r\n                            Deduction\r\n                        </Label>\r\n                        <Input\r\n                            id=\"deduction\"\r\n                            type=\"number\"\r\n                            value={deduction}\r\n                            onChange={(e) => setDeduction(e.target.value)}\r\n                            className=\"col-span-3 text-red-500\"\r\n                            placeholder=\"0.00\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"total\" className=\"text-right font-bold\">\r\n                            Total\r\n                        </Label>\r\n                        <div className=\"col-span-3 font-bold text-lg\">\r\n                            {(finalAmount || 0).toFixed(2)}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"method\" className=\"text-right\">\r\n                            Method\r\n                        </Label>\r\n                        <Select\r\n                            value={paymentMethod}\r\n                            onValueChange={setPaymentMethod}\r\n                        >\r\n                            <SelectTrigger className=\"col-span-3\">\r\n                                <SelectValue placeholder=\"Payment Method\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                <SelectItem value=\"cash\">Cash</SelectItem>\r\n                                <SelectItem value=\"bank_transfer\">\r\n                                    Bank Transfer\r\n                                </SelectItem>\r\n                                <SelectItem value=\"mobile_banking\">\r\n                                    Mobile Banking\r\n                                </SelectItem>\r\n                            </SelectContent>\r\n                        </Select>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"note\" className=\"text-right\">\r\n                            Note\r\n                        </Label>\r\n                        <Input\r\n                            id=\"note\"\r\n                            value={note}\r\n                            onChange={(e) => setNote(e.target.value)}\r\n                            className=\"col-span-3\"\r\n                            placeholder=\"Optional note...\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <DialogFooter>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => onOpenChange(false)}\r\n                        disabled={isLoading}\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    {onSave && (\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            onClick={handleSave}\r\n                            disabled={isLoading}\r\n                            className=\"gap-2\"\r\n                        >\r\n                            <Save className=\"h-4 w-4\" />\r\n                            Save\r\n                        </Button>\r\n                    )}\r\n                    <Button onClick={handlePayment} disabled={isLoading}>\r\n                        {isLoading && (\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                        )}\r\n                        Confirm Payment\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\export-pdf-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\grace-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1852,1855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1852,1855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":94,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3142,3145],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3142,3145],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Loader2 } from 'lucide-react';\r\nimport {\r\n    useGetAbsentDatesQuery,\r\n    useGraceAttendanceMutation,\r\n} from '@/redux/features/payroll/payrollApi';\r\nimport { format } from 'date-fns';\r\nimport { toast } from 'sonner';\r\n\r\ninterface GraceDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    staffId: string;\r\n    staffName: string;\r\n    month: string;\r\n}\r\n\r\nexport default function GraceDialog({\r\n    open,\r\n    onOpenChange,\r\n    staffId,\r\n    staffName,\r\n    month,\r\n}: GraceDialogProps) {\r\n    const [selectedDate, setSelectedDate] = useState<string | null>(null);\r\n    const [note, setNote] = useState('');\r\n\r\n    const { data: absentData, isLoading: isLoadingDates } =\r\n        useGetAbsentDatesQuery({ staffId, month }, { skip: !open || !staffId });\r\n\r\n    const [graceAttendance, { isLoading: isGracing }] =\r\n        useGraceAttendanceMutation();\r\n\r\n    const absentDates = absentData?.data || [];\r\n\r\n    const handleGrace = async () => {\r\n        if (!selectedDate) return;\r\n\r\n        try {\r\n            await graceAttendance({\r\n                staffId,\r\n                date: selectedDate,\r\n                note: note || 'Admin Graced via Payroll',\r\n            }).unwrap();\r\n\r\n            toast.success('Attendance Corrected', {\r\n                description: 'The absent day has been marked as present.',\r\n            });\r\n            onOpenChange(false);\r\n            setSelectedDate(null);\r\n            setNote('');\r\n        } catch (error: any) {\r\n            toast.error('Error', {\r\n                description: error.data?.message || 'Failed to process grace.',\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Grace Absence - {staffName}</DialogTitle>\r\n                    <DialogDescription>\r\n                        Select an absent day to convert it to\r\n                        &apos;Present&apos;.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"py-4 space-y-4\">\r\n                    {isLoadingDates ? (\r\n                        <div className=\"flex justify-center p-4\">\r\n                            <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\r\n                        </div>\r\n                    ) : absentDates.length === 0 ? (\r\n                        <div className=\"text-center text-muted-foreground py-4\">\r\n                            No absent days found for this month.\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid grid-cols-3 gap-2\">\r\n                            {absentDates.map((record: any) => (\r\n                                <div\r\n                                    key={record.date}\r\n                                    onClick={() => setSelectedDate(record.date)}\r\n                                    className={`\r\n                                        cursor-pointer border rounded-md p-2 text-center text-sm transition-all\r\n                                        ${\r\n                                            selectedDate === record.date\r\n                                                ? 'bg-primary text-primary-foreground border-primary ring-2 ring-primary ring-offset-1'\r\n                                                : 'hover:bg-muted'\r\n                                        }\r\n                                    `}\r\n                                >\r\n                                    <div className=\"font-semibold\">\r\n                                        {format(\r\n                                            new Date(record.date),\r\n                                            'dd MMM',\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"text-xs opacity-80\">\r\n                                        {format(new Date(record.date), 'EEE')}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {selectedDate && (\r\n                        <div className=\"space-y-2 animate-in fade-in slide-in-from-top-2\">\r\n                            <label className=\"text-sm font-medium\">\r\n                                Correction Note (Optional)\r\n                            </label>\r\n                            <Textarea\r\n                                placeholder=\"Reason for grace...\"\r\n                                value={note}\r\n                                onChange={(e) => setNote(e.target.value)}\r\n                                className=\"resize-none\"\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <DialogFooter>\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        onClick={() => onOpenChange(false)}\r\n                        disabled={isGracing}\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        onClick={handleGrace}\r\n                        disabled={!selectedDate || isGracing}\r\n                    >\r\n                        {isGracing && (\r\n                            <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                        )}\r\n                        Apply Grace\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\overtime-table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\payroll-table.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":139,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":139,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4195,4198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4195,4198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":192,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6048,6051],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6048,6051],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useMemo } from \"react\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Ban,\r\n    Banknote,\r\n    Loader2,\r\n    User,\r\n    CheckCheck,\r\n    Pencil,\r\n    RefreshCcw,\r\n    Search,\r\n} from \"lucide-react\";\r\nimport GraceDialog from \"./grace-dialog\";\r\nimport EditSalaryDialog from \"./edit-salary-dialog\";\r\nimport BulkReviewDialog from \"./bulk-review-dialog\";\r\nimport {\r\n    useBulkProcessPaymentMutation,\r\n    useUndoPaymentMutation,\r\n} from \"@/redux/features/payroll/payrollApi\";\r\nimport { useSession } from \"@/lib/auth-client\";\r\nimport { toast } from \"sonner\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { IPayrollItem } from \"@/types/payroll.type\";\r\n\r\ninterface PayrollTableProps {\r\n    data: IPayrollItem[];\r\n    month: string;\r\n    isSelectMode: boolean;\r\n    isLocked?: boolean;\r\n}\r\n\r\ntype Adjustment = {\r\n    baseAmount?: number;\r\n    bonus: number;\r\n    deduction: number;\r\n    note: string;\r\n};\r\n\r\nexport default function PayrollTable({\r\n    data,\r\n    month,\r\n    isSelectMode,\r\n    isLocked = false,\r\n}: PayrollTableProps) {\r\n    const { data: session } = useSession();\r\n    const [selectedStaffIds, setSelectedStaffIds] = useState<string[]>([]);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [processingId, setProcessingId] = useState<string | null>(null);\r\n\r\n    // Local state to store adjustments before payment\r\n    const [adjustments, setAdjustments] = useState<Record<string, Adjustment>>(\r\n        {},\r\n    );\r\n\r\n    // Dialog States\r\n    const [graceParams, setGraceParams] = useState<{\r\n        open: boolean;\r\n        staffId: string;\r\n        staffName: string;\r\n    }>({ open: false, staffId: \"\", staffName: \"\" });\r\n\r\n    const [editParams, setEditParams] = useState<{\r\n        open: boolean;\r\n        staffId: string;\r\n        staffName: string;\r\n        baseAmount: number;\r\n        mode: \"pay\" | \"edit\";\r\n    } | null>(null);\r\n\r\n    const [bulkReviewOpen, setBulkReviewOpen] = useState(false);\r\n\r\n    const [bulkPay, { isLoading: isBulkPaying }] =\r\n        useBulkProcessPaymentMutation();\r\n    const [undoPayment] = useUndoPaymentMutation();\r\n\r\n    // Filtered data by search\r\n    const filteredData = useMemo(() => {\r\n        if (!searchQuery.trim()) return data;\r\n        const q = searchQuery.toLowerCase();\r\n        return data.filter(\r\n            (d) =>\r\n                d.name?.toLowerCase().includes(q) ||\r\n                d.designation?.toLowerCase().includes(q) ||\r\n                d.staffId?.toLowerCase().includes(q),\r\n        );\r\n    }, [data, searchQuery]);\r\n\r\n    // Selection Logic\r\n    const unpaidData = filteredData.filter((d) => d.status !== \"paid\");\r\n    const isAllSelected =\r\n        unpaidData.length > 0 &&\r\n        unpaidData.every((d) => selectedStaffIds.includes(d._id));\r\n\r\n    const toggleSelectAll = () => {\r\n        if (isAllSelected) {\r\n            setSelectedStaffIds([]);\r\n        } else {\r\n            setSelectedStaffIds(unpaidData.map((d) => d._id));\r\n        }\r\n    };\r\n\r\n    const toggleSelect = (id: string) => {\r\n        if (selectedStaffIds.includes(id)) {\r\n            setSelectedStaffIds((prev) => prev.filter((i) => i !== id));\r\n        } else {\r\n            setSelectedStaffIds((prev) => [...prev, id]);\r\n        }\r\n    };\r\n\r\n    const handleSaveAdjustment = (id: string, adj: Adjustment) => {\r\n        setAdjustments((prev) => ({\r\n            ...prev,\r\n            [id]: adj,\r\n        }));\r\n    };\r\n\r\n    const handleUndoPayment = async (staff: IPayrollItem) => {\r\n        setProcessingId(staff._id);\r\n        try {\r\n            await undoPayment({\r\n                staffId: staff._id,\r\n                month,\r\n                paymentType: \"salary\",\r\n                branchId: staff.branchId,\r\n            }).unwrap();\r\n            toast.success(\"Payment undone successfully\");\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || \"Failed to undo payment\");\r\n        } finally {\r\n            setProcessingId(null);\r\n        }\r\n    };\r\n\r\n    const getFinalAmount = useMemo(\r\n        () => (staff: IPayrollItem) => {\r\n            const adj = adjustments[staff._id] || { bonus: 0, deduction: 0 };\r\n            const base =\r\n                adj.baseAmount !== undefined\r\n                    ? adj.baseAmount\r\n                    : staff.payableSalary || 0;\r\n            return base + adj.bonus - adj.deduction;\r\n        },\r\n        [adjustments],\r\n    );\r\n\r\n    // Bulk Pay\r\n    const handleBulkConfirm = async () => {\r\n        const payments = selectedStaffIds.map((id) => {\r\n            const staff = data.find((d) => d._id === id);\r\n            const adj = adjustments[id] || { bonus: 0, deduction: 0, note: \"\" };\r\n            const amount = getFinalAmount(staff!);\r\n            return {\r\n                staffId: id,\r\n                amount,\r\n                bonus: adj.bonus,\r\n                deduction: adj.deduction,\r\n                note: adj.note,\r\n            };\r\n        });\r\n\r\n        // Determine branchId from first staff for cache key\r\n        const firstStaff = data.find((d) => d._id === selectedStaffIds[0]);\r\n\r\n        try {\r\n            await bulkPay({\r\n                month,\r\n                paymentMethod: \"cash\",\r\n                payments,\r\n                paymentType: \"salary\",\r\n                createdBy: session?.user?.id || \"\",\r\n                branchId: firstStaff?.branchId,\r\n            }).unwrap();\r\n\r\n            toast.success(\"Bulk Payment Successful\", {\r\n                description: `Processed payments for ${payments.length} staff members.`,\r\n            });\r\n            setSelectedStaffIds([]);\r\n            setBulkReviewOpen(false);\r\n            setAdjustments({});\r\n        } catch (error: any) {\r\n            toast.error(\"Bulk Payment Failed\", {\r\n                description:\r\n                    error?.data?.message || \"Failed to process payments\",\r\n            });\r\n        }\r\n    };\r\n\r\n    const totalPayableWithAdjustments = useMemo(() => {\r\n        return data\r\n            .filter((d) => selectedStaffIds.includes(d._id))\r\n            .reduce((sum, d) => sum + getFinalAmount(d), 0);\r\n    }, [data, selectedStaffIds, getFinalAmount]);\r\n\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {/* Search Bar */}\r\n            <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n                <Input\r\n                    placeholder=\"Search by name, designation, or staff ID...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"pl-9 h-9\"\r\n                />\r\n            </div>\r\n\r\n            {/* Bulk Action Bar */}\r\n            {selectedStaffIds.length > 0 && isSelectMode && !isLocked && (\r\n                <div className=\"bg-primary/10 border border-primary/20 rounded-md p-3 flex items-center justify-between animate-in fade-in slide-in-from-top-2\">\r\n                    <div className=\"text-sm font-medium\">\r\n                        {selectedStaffIds.length} staff selected\r\n                        <span className=\"mx-2 text-muted-foreground\">•</span>\r\n                        Total Payable: ৳{\" \"}\r\n                        {totalPayableWithAdjustments.toLocaleString()}\r\n                    </div>\r\n                    <Button\r\n                        size=\"sm\"\r\n                        onClick={() => setBulkReviewOpen(true)}\r\n                        disabled={isBulkPaying}\r\n                    >\r\n                        Review & Pay\r\n                    </Button>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"border rounded-md overflow-hidden\">\r\n                <Table>\r\n                    <TableHeader className=\"bg-muted/40\">\r\n                        <TableRow>\r\n                            {isSelectMode && (\r\n                                <TableHead className=\"w-[40px]\">\r\n                                    <Checkbox\r\n                                        checked={isAllSelected}\r\n                                        onCheckedChange={toggleSelectAll}\r\n                                        aria-label=\"Select all\"\r\n                                        disabled={isLocked}\r\n                                    />\r\n                                </TableHead>\r\n                            )}\r\n                            <TableHead>Staff Info</TableHead>\r\n                            <TableHead className=\"text-center\">\r\n                                Work Days\r\n                            </TableHead>\r\n                            <TableHead className=\"text-center\">\r\n                                Present\r\n                            </TableHead>\r\n                            <TableHead className=\"text-center\">\r\n                                Absent\r\n                            </TableHead>\r\n                            <TableHead className=\"text-center\">Late</TableHead>\r\n                            <TableHead className=\"text-right\">\r\n                                Per Day\r\n                            </TableHead>\r\n                            <TableHead className=\"text-right\">\r\n                                Payable\r\n                            </TableHead>\r\n                            <TableHead className=\"text-center\">\r\n                                Action\r\n                            </TableHead>\r\n                        </TableRow>\r\n                    </TableHeader>\r\n                    <TableBody>\r\n                        {filteredData.length === 0 ? (\r\n                            <TableRow>\r\n                                <TableCell\r\n                                    colSpan={isSelectMode ? 9 : 8}\r\n                                    className=\"h-24 text-center\"\r\n                                >\r\n                                    {searchQuery\r\n                                        ? \"No staff match your search.\"\r\n                                        : \"No payroll data found for this month.\"}\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ) : (\r\n                            filteredData.map((row) => {\r\n                                const isPaid = row.status === \"paid\";\r\n                                const adj = adjustments[row._id];\r\n                                const hasAdjustment =\r\n                                    adj &&\r\n                                    (adj.bonus > 0 ||\r\n                                        adj.deduction > 0 ||\r\n                                        (adj.baseAmount !== undefined &&\r\n                                            adj.baseAmount !==\r\n                                                row.payableSalary));\r\n                                const finalAmount = isPaid\r\n                                    ? row.paidAmount\r\n                                    : getFinalAmount(row);\r\n                                const isProcessing = processingId === row._id;\r\n\r\n                                return (\r\n                                    <TableRow\r\n                                        key={row._id}\r\n                                        className={cn(\r\n                                            selectedStaffIds.includes(row._id)\r\n                                                ? \"bg-muted/30\"\r\n                                                : \"\",\r\n                                        )}\r\n                                    >\r\n                                        {isSelectMode && (\r\n                                            <TableCell>\r\n                                                <Checkbox\r\n                                                    checked={selectedStaffIds.includes(\r\n                                                        row._id,\r\n                                                    )}\r\n                                                    onCheckedChange={() =>\r\n                                                        toggleSelect(row._id)\r\n                                                    }\r\n                                                    disabled={\r\n                                                        isPaid || isLocked\r\n                                                    }\r\n                                                />\r\n                                            </TableCell>\r\n                                        )}\r\n                                        <TableCell>\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <Avatar className=\"h-9 w-9 border\">\r\n                                                    <AvatarImage\r\n                                                        src={row.image}\r\n                                                        alt={row.name}\r\n                                                    />\r\n                                                    <AvatarFallback>\r\n                                                        <User className=\"h-4 w-4\" />\r\n                                                    </AvatarFallback>\r\n                                                </Avatar>\r\n                                                <div>\r\n                                                    <div className=\"font-medium\">\r\n                                                        {row.name}\r\n                                                    </div>\r\n                                                    <div className=\"text-xs text-muted-foreground\">\r\n                                                        {row.bankName || \"N/A\"}{\" \"}\r\n                                                        - {row.branch || \"N/A\"}\r\n                                                    </div>\r\n                                                    <div className=\"text-[10px] text-muted-foreground font-mono bg-muted/60 px-1.5 py-0.5 rounded w-fit mt-1\">\r\n                                                        {row.bank\r\n                                                            ?.accountNumber ||\r\n                                                            \"N/A\"}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-center\">\r\n                                            {row.workDays}\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-center text-green-600 font-medium\">\r\n                                            {row.present}\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-center text-red-600 font-medium\">\r\n                                            {row.absent}\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-center text-yellow-600\">\r\n                                            {row.late}\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-right font-mono text-xs\">\r\n                                            {row.perDaySalary}\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-right group relative\">\r\n                                            <div className=\"flex flex-col items-end\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    {!isPaid && !isLocked && (\r\n                                                        <button\r\n                                                            onClick={(e) => {\r\n                                                                e.stopPropagation();\r\n                                                                setEditParams({\r\n                                                                    open: true,\r\n                                                                    staffId:\r\n                                                                        row._id,\r\n                                                                    staffName:\r\n                                                                        row.name,\r\n                                                                    baseAmount:\r\n                                                                        adjustments[\r\n                                                                            row\r\n                                                                                ._id\r\n                                                                        ]\r\n                                                                            ?.baseAmount ??\r\n                                                                        row.payableSalary,\r\n                                                                    mode: \"pay\",\r\n                                                                });\r\n                                                            }}\r\n                                                            className=\"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-muted rounded text-muted-foreground hover:text-foreground\"\r\n                                                            title=\"Adjust Salary\"\r\n                                                        >\r\n                                                            <Pencil className=\"h-3 w-3\" />\r\n                                                        </button>\r\n                                                    )}\r\n                                                    <span\r\n                                                        className={cn(\r\n                                                            \"font-bold font-mono\",\r\n                                                            hasAdjustment\r\n                                                                ? \"text-blue-600\"\r\n                                                                : \"\",\r\n                                                        )}\r\n                                                    >\r\n                                                        {finalAmount}\r\n                                                    </span>\r\n                                                </div>\r\n                                                {hasAdjustment && !isPaid && (\r\n                                                    <span className=\"text-[10px] text-blue-500 font-mono\">\r\n                                                        {adj.bonus > 0 &&\r\n                                                            `+${adj.bonus}`}\r\n                                                        {adj.deduction > 0 &&\r\n                                                            ` -${adj.deduction}`}\r\n                                                    </span>\r\n                                                )}\r\n                                                <span className=\"text-[10px] text-muted-foreground\">\r\n                                                    / {row.salary}\r\n                                                </span>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-center\">\r\n                                            <div className=\"flex justify-center gap-2\">\r\n                                                <Button\r\n                                                    size=\"sm\"\r\n                                                    variant=\"outline\"\r\n                                                    className=\"h-8 w-8 p-0\"\r\n                                                    onClick={() =>\r\n                                                        setGraceParams({\r\n                                                            open: true,\r\n                                                            staffId: row._id,\r\n                                                            staffName: row.name,\r\n                                                        })\r\n                                                    }\r\n                                                    title=\"Grace\"\r\n                                                    disabled={\r\n                                                        isPaid || isLocked\r\n                                                    }\r\n                                                >\r\n                                                    <Ban className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n                                                </Button>\r\n\r\n                                                {isPaid ? (\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <Badge\r\n                                                            variant=\"outline\"\r\n                                                            className=\"h-8 px-3 text-xs gap-1.5 border-green-200 bg-green-50 text-green-700\"\r\n                                                        >\r\n                                                            <CheckCheck className=\"h-3.5 w-3.5\" />\r\n                                                            Paid\r\n                                                        </Badge>\r\n                                                        <Button\r\n                                                            size=\"sm\"\r\n                                                            variant=\"ghost\"\r\n                                                            className=\"h-8 w-8 p-0 text-muted-foreground hover:text-red-600\"\r\n                                                            onClick={() =>\r\n                                                                handleUndoPayment(\r\n                                                                    row,\r\n                                                                )\r\n                                                            }\r\n                                                            disabled={\r\n                                                                isProcessing ||\r\n                                                                isLocked\r\n                                                            }\r\n                                                            title=\"Undo Payment\"\r\n                                                        >\r\n                                                            {isProcessing ? (\r\n                                                                <Loader2 className=\"h-3.5 w-3.5 animate-spin\" />\r\n                                                            ) : (\r\n                                                                <RefreshCcw className=\"h-3.5 w-3.5\" />\r\n                                                            )}\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <Button\r\n                                                        size=\"sm\"\r\n                                                        className=\"h-8 px-3 text-xs gap-1.5 bg-green-600 hover:bg-green-700\"\r\n                                                        disabled={isLocked}\r\n                                                        onClick={() =>\r\n                                                            setEditParams({\r\n                                                                open: true,\r\n                                                                staffId:\r\n                                                                    row._id,\r\n                                                                staffName:\r\n                                                                    row.name,\r\n                                                                baseAmount:\r\n                                                                    adjustments[\r\n                                                                        row._id\r\n                                                                    ]\r\n                                                                        ?.baseAmount ??\r\n                                                                    row.payableSalary,\r\n                                                                mode: \"pay\",\r\n                                                            })\r\n                                                        }\r\n                                                    >\r\n                                                        <Banknote className=\"h-3.5 w-3.5\" />\r\n                                                        Pay\r\n                                                    </Button>\r\n                                                )}\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                );\r\n                            })\r\n                        )}\r\n                    </TableBody>\r\n                </Table>\r\n            </div>\r\n\r\n            <GraceDialog\r\n                open={graceParams.open}\r\n                onOpenChange={(open) => setGraceParams((p) => ({ ...p, open }))}\r\n                staffId={graceParams.staffId}\r\n                staffName={graceParams.staffName}\r\n                month={month}\r\n            />\r\n\r\n            {editParams && (\r\n                <EditSalaryDialog\r\n                    open={editParams.open}\r\n                    onOpenChange={(open) => !open && setEditParams(null)}\r\n                    staffId={editParams.staffId}\r\n                    staffName={editParams.staffName}\r\n                    month={month}\r\n                    baseAmount={editParams.baseAmount}\r\n                    mode={editParams.mode}\r\n                    initialBonus={adjustments[editParams.staffId]?.bonus}\r\n                    initialDeduction={\r\n                        adjustments[editParams.staffId]?.deduction\r\n                    }\r\n                    initialNote={adjustments[editParams.staffId]?.note}\r\n                    onSave={\r\n                        editParams.mode === \"pay\"\r\n                            ? (data) =>\r\n                                  handleSaveAdjustment(editParams.staffId, data)\r\n                            : undefined\r\n                    }\r\n                />\r\n            )}\r\n\r\n            <BulkReviewDialog\r\n                open={bulkReviewOpen}\r\n                onOpenChange={setBulkReviewOpen}\r\n                selectedCount={selectedStaffIds.length}\r\n                totalAmount={totalPayableWithAdjustments}\r\n                month={month}\r\n                onConfirm={handleBulkConfirm}\r\n                isProcessing={isBulkPaying}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\salary-adjustment-dialog.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\payroll\\salary-adjustment-dialog.tsx:44:13\n  42 |     useEffect(() => {\n  43 |         if (open) {\n> 44 |             setBonus(currentBonus > 0 ? currentBonus.toString() : '');\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  45 |             setDeduction(\n  46 |                 currentDeduction > 0 ? currentDeduction.toString() : '',\n  47 |             );","line":44,"column":13,"nodeType":null,"endLine":44,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\n\r\ninterface SalaryAdjustmentDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    staffId: string;\r\n    staffName: string;\r\n    currentBonus: number;\r\n    currentDeduction: number;\r\n    currentNote: string;\r\n    onSave: (\r\n        id: string,\r\n        adjustment: { bonus: number; deduction: number; note: string },\r\n    ) => void;\r\n}\r\n\r\nexport default function SalaryAdjustmentDialog({\r\n    open,\r\n    onOpenChange,\r\n    staffId,\r\n    staffName,\r\n    currentBonus,\r\n    currentDeduction,\r\n    currentNote,\r\n    onSave,\r\n}: SalaryAdjustmentDialogProps) {\r\n    const [bonus, setBonus] = useState<string>('');\r\n    const [deduction, setDeduction] = useState<string>('');\r\n    const [note, setNote] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            setBonus(currentBonus > 0 ? currentBonus.toString() : '');\r\n            setDeduction(\r\n                currentDeduction > 0 ? currentDeduction.toString() : '',\r\n            );\r\n            setNote(currentNote || '');\r\n        }\r\n    }, [open, currentBonus, currentDeduction, currentNote]);\r\n\r\n    const handleSave = () => {\r\n        onSave(staffId, {\r\n            bonus: parseFloat(bonus) || 0,\r\n            deduction: parseFloat(deduction) || 0,\r\n            note: note.trim(),\r\n        });\r\n        onOpenChange(false);\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Adjust Salary</DialogTitle>\r\n                    <DialogDescription>\r\n                        Add bonus or deduction for{' '}\r\n                        <span className=\"font-semibold\">{staffName}</span>.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"grid gap-4 py-4\">\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"bonus\" className=\"text-right\">\r\n                            Bonus\r\n                        </Label>\r\n                        <Input\r\n                            id=\"bonus\"\r\n                            type=\"number\"\r\n                            value={bonus}\r\n                            onChange={(e) => setBonus(e.target.value)}\r\n                            className=\"col-span-3\"\r\n                            placeholder=\"0.00\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"deduction\" className=\"text-right\">\r\n                            Deduction\r\n                        </Label>\r\n                        <Input\r\n                            id=\"deduction\"\r\n                            type=\"number\"\r\n                            value={deduction}\r\n                            onChange={(e) => setDeduction(e.target.value)}\r\n                            className=\"col-span-3 text-red-500\"\r\n                            placeholder=\"0.00\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"grid grid-cols-4 items-center gap-4\">\r\n                        <Label htmlFor=\"note\" className=\"text-right\">\r\n                            Note\r\n                        </Label>\r\n                        <Input\r\n                            id=\"note\"\r\n                            value={note}\r\n                            onChange={(e) => setNote(e.target.value)}\r\n                            className=\"col-span-3\"\r\n                            placeholder=\"Optional note...\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <DialogFooter>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        onClick={() => onOpenChange(false)}\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button onClick={handleSave}>Save Changes</Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\add-business-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\add-shareholder-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2140,2143],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2140,2143],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\add-shareholder-dialog.tsx:79:13\n  77 |     useEffect(() => {\n  78 |         if (editingShareholder) {\n> 79 |             setFormData({\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  80 |                 name: editingShareholder.name,\n  81 |                 email: editingShareholder.email,\n  82 |                 percentage: editingShareholder.percentage.toString(),","line":79,"column":13,"nodeType":null,"endLine":79,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3087,3090],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3087,3090],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\add-shareholder-dialog.tsx:102:17\n  100 |             const admin = admins.find((a: any) => a._id === selectedAdmin);\n  101 |             if (admin) {\n> 102 |                 setFormData((prev) => ({\n      |                 ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  103 |                     ...prev,\n  104 |                     name: admin.user?.name || '',\n  105 |                     email: admin.user?.email || '',","line":102,"column":17,"nodeType":null,"endLine":102,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4993,4996],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4993,4996],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":218,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7835,7838],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7835,7838],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState, useMemo } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    useCreateShareholderMutation,\r\n    useUpdateShareholderMutation,\r\n    type IShareholder,\r\n} from '@/redux/features/profitShare/profitShareApi';\r\nimport { useGetStaffsQuery } from '@/redux/features/staff/staffApi';\r\nimport { Loader, UserPlus } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\ninterface AddShareholderDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    editingShareholder: IShareholder | null;\r\n    onClose: () => void;\r\n    remainingPercentage: number;\r\n}\r\n\r\n// Admin roles that can be shareholders\r\nconst ADMIN_ROLES = ['super_admin', 'admin'];\r\n\r\nexport default function AddShareholderDialog({\r\n    open,\r\n    onOpenChange,\r\n    editingShareholder,\r\n    onClose,\r\n    remainingPercentage,\r\n}: AddShareholderDialogProps) {\r\n    const [createShareholder, { isLoading: isCreating }] =\r\n        useCreateShareholderMutation();\r\n    const [updateShareholder, { isLoading: isUpdating }] =\r\n        useUpdateShareholderMutation();\r\n    const { data: staffData, isLoading: isLoadingStaff } = useGetStaffsQuery(\r\n        {},\r\n    );\r\n\r\n    const [selectedAdmin, setSelectedAdmin] = useState<string>('');\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        email: '',\r\n        percentage: '',\r\n        isActive: true,\r\n    });\r\n\r\n    const isEditing = !!editingShareholder;\r\n    const isLoading = isCreating || isUpdating;\r\n\r\n    // Memoize admins to prevent infinite loop - filter admins from staffData\r\n    const admins = useMemo(() => {\r\n        return (staffData?.staffs || []).filter((staff: any) =>\r\n            ADMIN_ROLES.includes(staff.user?.role),\r\n        );\r\n    }, [staffData?.staffs]);\r\n\r\n    // Populate form when editing\r\n    useEffect(() => {\r\n        if (editingShareholder) {\r\n            setFormData({\r\n                name: editingShareholder.name,\r\n                email: editingShareholder.email,\r\n                percentage: editingShareholder.percentage.toString(),\r\n                isActive: editingShareholder.isActive,\r\n            });\r\n            setSelectedAdmin('');\r\n        } else {\r\n            setFormData({\r\n                name: '',\r\n                email: '',\r\n                percentage: '',\r\n                isActive: true,\r\n            });\r\n            setSelectedAdmin('');\r\n        }\r\n    }, [editingShareholder]);\r\n\r\n    // When admin is selected, populate name and email from user object\r\n    useEffect(() => {\r\n        if (selectedAdmin && !isEditing) {\r\n            const admin = admins.find((a: any) => a._id === selectedAdmin);\r\n            if (admin) {\r\n                setFormData((prev) => ({\r\n                    ...prev,\r\n                    name: admin.user?.name || '',\r\n                    email: admin.user?.email || '',\r\n                }));\r\n            }\r\n        }\r\n        // Only run when selectedAdmin changes, admins is now memoized so it won't cause re-runs\r\n    }, [selectedAdmin, isEditing, admins]);\r\n\r\n    const maxPercentage = isEditing\r\n        ? remainingPercentage + (editingShareholder?.percentage || 0)\r\n        : remainingPercentage;\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        const percentage = parseFloat(formData.percentage);\r\n        if (isNaN(percentage) || percentage <= 0) {\r\n            toast.error('Please enter a valid percentage');\r\n            return;\r\n        }\r\n\r\n        if (percentage > maxPercentage) {\r\n            toast.error(\r\n                `Maximum allowed percentage is ${maxPercentage.toFixed(2)}%`,\r\n            );\r\n            return;\r\n        }\r\n\r\n        try {\r\n            if (isEditing && editingShareholder) {\r\n                await updateShareholder({\r\n                    id: editingShareholder._id,\r\n                    data: {\r\n                        name: formData.name,\r\n                        email: formData.email,\r\n                        percentage,\r\n                        isActive: formData.isActive,\r\n                    },\r\n                }).unwrap();\r\n                toast.success('Shareholder updated successfully');\r\n            } else {\r\n                await createShareholder({\r\n                    name: formData.name,\r\n                    email: formData.email,\r\n                    percentage,\r\n                }).unwrap();\r\n                toast.success('Shareholder added successfully');\r\n            }\r\n\r\n            onClose();\r\n        } catch (err: any) {\r\n            toast.error(\r\n                err?.data?.message ||\r\n                    `Failed to ${isEditing ? 'update' : 'add'} shareholder`,\r\n            );\r\n        }\r\n    };\r\n\r\n    const handleOpenChange = (newOpen: boolean) => {\r\n        if (!newOpen) {\r\n            onClose();\r\n        }\r\n        onOpenChange(newOpen);\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={handleOpenChange}>\r\n            {!isEditing && (\r\n                <DialogTrigger asChild>\r\n                    <Button className=\"gap-2\">\r\n                        <UserPlus className=\"h-4 w-4\" />\r\n                        Add Shareholder\r\n                    </Button>\r\n                </DialogTrigger>\r\n            )}\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>\r\n                        {isEditing ? 'Edit Shareholder' : 'Add Shareholder'}\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        {isEditing\r\n                            ? 'Update shareholder details and percentage allocation'\r\n                            : 'Select an admin to add as a shareholder with their profit share percentage'}\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    {/* Admin Selection - Only show when adding new */}\r\n                    {!isEditing && (\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"admin-select\">Select Admin *</Label>\r\n                            <Select\r\n                                value={selectedAdmin}\r\n                                onValueChange={setSelectedAdmin}\r\n                            >\r\n                                <SelectTrigger\r\n                                    id=\"admin-select\"\r\n                                    className=\"w-full\"\r\n                                >\r\n                                    <SelectValue\r\n                                        placeholder={\r\n                                            isLoadingStaff\r\n                                                ? 'Loading admins...'\r\n                                                : 'Select an admin'\r\n                                        }\r\n                                    />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {admins.length === 0 ? (\r\n                                        <div className=\"p-2 text-sm text-muted-foreground text-center\">\r\n                                            No admins found\r\n                                        </div>\r\n                                    ) : (\r\n                                        admins.map((admin: any) => (\r\n                                            <SelectItem\r\n                                                key={admin._id}\r\n                                                value={admin._id}\r\n                                            >\r\n                                                <div className=\"flex flex-col items-start\">\r\n                                                    <span className=\"font-medium\">\r\n                                                        {admin.user?.name ||\r\n                                                            'Unknown'}\r\n                                                    </span>\r\n                                                    <span className=\"text-xs text-muted-foreground\">\r\n                                                        {admin.user?.email} •{' '}\r\n                                                        {(\r\n                                                            admin.user?.role ||\r\n                                                            ''\r\n                                                        ).replace('_', ' ')}\r\n                                                    </span>\r\n                                                </div>\r\n                                            </SelectItem>\r\n                                        ))\r\n                                    )}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Show name and email as read-only when admin is selected */}\r\n                    {(selectedAdmin || isEditing) && (\r\n                        <>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"name\">Name</Label>\r\n                                <Input\r\n                                    id=\"name\"\r\n                                    value={formData.name}\r\n                                    onChange={(e) =>\r\n                                        setFormData({\r\n                                            ...formData,\r\n                                            name: e.target.value,\r\n                                        })\r\n                                    }\r\n                                    placeholder=\"Name\"\r\n                                    readOnly={!isEditing && !!selectedAdmin}\r\n                                    className={\r\n                                        !isEditing && selectedAdmin\r\n                                            ? 'bg-muted'\r\n                                            : ''\r\n                                    }\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"email\">Email</Label>\r\n                                <Input\r\n                                    id=\"email\"\r\n                                    type=\"email\"\r\n                                    value={formData.email}\r\n                                    onChange={(e) =>\r\n                                        setFormData({\r\n                                            ...formData,\r\n                                            email: e.target.value,\r\n                                        })\r\n                                    }\r\n                                    placeholder=\"Email\"\r\n                                    readOnly={!isEditing && !!selectedAdmin}\r\n                                    className={\r\n                                        !isEditing && selectedAdmin\r\n                                            ? 'bg-muted'\r\n                                            : ''\r\n                                    }\r\n                                />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"percentage\">\r\n                            Share Percentage * (Max: {maxPercentage.toFixed(2)}\r\n                            %)\r\n                        </Label>\r\n                        <div className=\"relative\">\r\n                            <Input\r\n                                id=\"percentage\"\r\n                                type=\"number\"\r\n                                step=\"0.01\"\r\n                                min=\"0.01\"\r\n                                max={maxPercentage}\r\n                                value={formData.percentage}\r\n                                onChange={(e) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        percentage: e.target.value,\r\n                                    })\r\n                                }\r\n                                placeholder=\"25.00\"\r\n                                className=\"pr-8\"\r\n                                required\r\n                            />\r\n                            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground\">\r\n                                %\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {isEditing && (\r\n                        <div className=\"flex items-center justify-between rounded-lg border p-3\">\r\n                            <div className=\"space-y-0.5\">\r\n                                <Label htmlFor=\"isActive\">Active Status</Label>\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                    Inactive shareholders don&apos;t receive\r\n                                    distributions\r\n                                </p>\r\n                            </div>\r\n                            <Switch\r\n                                id=\"isActive\"\r\n                                checked={formData.isActive}\r\n                                onCheckedChange={(checked) =>\r\n                                    setFormData({\r\n                                        ...formData,\r\n                                        isActive: checked,\r\n                                    })\r\n                                }\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex justify-end gap-2 pt-4\">\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            onClick={onClose}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            type=\"submit\"\r\n                            disabled={\r\n                                isLoading || (!isEditing && !selectedAdmin)\r\n                            }\r\n                            className=\"gap-2\"\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader className=\"h-4 w-4 animate-spin\" />\r\n                                    {isEditing ? 'Updating...' : 'Adding...'}\r\n                                </>\r\n                            ) : isEditing ? (\r\n                                'Update Shareholder'\r\n                            ) : (\r\n                                'Add Shareholder'\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\business-list.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\distribute-profit-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4268,4271],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4268,4271],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Checkbox } from '@/components/ui/checkbox';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    useDistributeProfitMutation,\r\n    type IShareholder,\r\n} from '@/redux/features/profitShare/profitShareApi';\r\nimport { Loader, DollarSign, AlertCircle } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { Alert, AlertDescription } from '@/components/ui/alert';\r\n\r\ninterface DistributeProfitDialogProps {\r\n    shareholders: IShareholder[];\r\n    netProfit: number;\r\n}\r\n\r\nconst months = [\r\n    { value: '1', label: 'January' },\r\n    { value: '2', label: 'February' },\r\n    { value: '3', label: 'March' },\r\n    { value: '4', label: 'April' },\r\n    { value: '5', label: 'May' },\r\n    { value: '6', label: 'June' },\r\n    { value: '7', label: 'July' },\r\n    { value: '8', label: 'August' },\r\n    { value: '9', label: 'September' },\r\n    { value: '10', label: 'October' },\r\n    { value: '11', label: 'November' },\r\n    { value: '12', label: 'December' },\r\n];\r\n\r\nconst currentYear = new Date().getFullYear();\r\nconst years = Array.from({ length: 5 }, (_, i) => ({\r\n    value: String(currentYear - i),\r\n    label: String(currentYear - i),\r\n}));\r\n\r\nexport default function DistributeProfitDialog({\r\n    shareholders,\r\n    netProfit,\r\n}: DistributeProfitDialogProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [distributeProfit, { isLoading }] = useDistributeProfitMutation();\r\n\r\n    const [periodType, setPeriodType] = useState<'month' | 'year'>('month');\r\n    const [selectedMonth, setSelectedMonth] = useState(\r\n        String(new Date().getMonth() + 1),\r\n    );\r\n    const [selectedYear, setSelectedYear] = useState(String(currentYear));\r\n    const [selectedShareholders, setSelectedShareholders] = useState<string[]>(\r\n        [],\r\n    );\r\n    const [notes, setNotes] = useState('');\r\n\r\n    const isAllSelected =\r\n        selectedShareholders.length === shareholders.length &&\r\n        shareholders.length > 0;\r\n\r\n    const handleSelectAll = () => {\r\n        if (isAllSelected) {\r\n            setSelectedShareholders([]);\r\n        } else {\r\n            setSelectedShareholders(shareholders.map((s) => s._id));\r\n        }\r\n    };\r\n\r\n    const handleSelectShareholder = (id: string, checked: boolean) => {\r\n        if (checked) {\r\n            setSelectedShareholders([...selectedShareholders, id]);\r\n        } else {\r\n            setSelectedShareholders(\r\n                selectedShareholders.filter((sid) => sid !== id),\r\n            );\r\n        }\r\n    };\r\n\r\n    const formatCurrency = (amount: number) => {\r\n        return new Intl.NumberFormat('en-BD', {\r\n            style: 'currency',\r\n            currency: 'BDT',\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: 0,\r\n        }).format(amount);\r\n    };\r\n\r\n    const getSelectedTotalPercentage = () => {\r\n        return shareholders\r\n            .filter((s) => selectedShareholders.includes(s._id))\r\n            .reduce((sum, s) => sum + s.percentage, 0);\r\n    };\r\n\r\n    const handleSubmit = async () => {\r\n        if (selectedShareholders.length === 0) {\r\n            toast.error('Please select at least one shareholder');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await distributeProfit({\r\n                shareholderIds: isAllSelected ? ['all'] : selectedShareholders,\r\n                periodType,\r\n                month:\r\n                    periodType === 'month'\r\n                        ? parseInt(selectedMonth)\r\n                        : undefined,\r\n                year: parseInt(selectedYear),\r\n                notes: notes || undefined,\r\n            }).unwrap();\r\n\r\n            toast.success('Profit distributed successfully!');\r\n            setOpen(false);\r\n            // Reset form\r\n            setSelectedShareholders([]);\r\n            setNotes('');\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to distribute profit');\r\n        }\r\n    };\r\n\r\n    const canDistribute = netProfit > 0 && shareholders.length > 0;\r\n\r\n    const handleDisabledClick = () => {\r\n        if (shareholders.length === 0) {\r\n            toast.warning(\r\n                'No shareholders added. Please add shareholders first.',\r\n            );\r\n        } else if (netProfit <= 0) {\r\n            toast.warning(\r\n                `Cannot distribute - no profit to share. Current net profit: ${formatCurrency(netProfit)}`,\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <div onClick={!canDistribute ? handleDisabledClick : undefined}>\r\n                <DialogTrigger asChild>\r\n                    <Button disabled={!canDistribute} className=\"gap-2\">\r\n                        <DollarSign className=\"h-4 w-4\" />\r\n                        Distribute Profit\r\n                    </Button>\r\n                </DialogTrigger>\r\n            </div>\r\n            <DialogContent className=\"max-w-lg max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Distribute Profit</DialogTitle>\r\n                    <DialogDescription>\r\n                        Select shareholders and period to distribute profit\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-4\">\r\n                    {netProfit <= 0 && (\r\n                        <Alert variant=\"destructive\">\r\n                            <AlertCircle className=\"h-4 w-4\" />\r\n                            <AlertDescription>\r\n                                There is no profit to distribute. Net profit:{' '}\r\n                                {formatCurrency(netProfit)}\r\n                            </AlertDescription>\r\n                        </Alert>\r\n                    )}\r\n\r\n                    {/* Period Selection */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Period Type</Label>\r\n                            <Select\r\n                                value={periodType}\r\n                                onValueChange={(value: 'month' | 'year') =>\r\n                                    setPeriodType(value)\r\n                                }\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"month\">\r\n                                        Single Month\r\n                                    </SelectItem>\r\n                                    <SelectItem value=\"year\">\r\n                                        Full Year\r\n                                    </SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Year</Label>\r\n                            <Select\r\n                                value={selectedYear}\r\n                                onValueChange={setSelectedYear}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {years.map((year) => (\r\n                                        <SelectItem\r\n                                            key={year.value}\r\n                                            value={year.value}\r\n                                        >\r\n                                            {year.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {periodType === 'month' && (\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Month</Label>\r\n                            <Select\r\n                                value={selectedMonth}\r\n                                onValueChange={setSelectedMonth}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {months.map((month) => (\r\n                                        <SelectItem\r\n                                            key={month.value}\r\n                                            value={month.value}\r\n                                        >\r\n                                            {month.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Shareholder Selection */}\r\n                    <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <Label>Select Shareholders</Label>\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"link\"\r\n                                size=\"sm\"\r\n                                onClick={handleSelectAll}\r\n                                className=\"h-auto p-0\"\r\n                            >\r\n                                {isAllSelected ? 'Deselect All' : 'Select All'}\r\n                            </Button>\r\n                        </div>\r\n                        <div className=\"rounded-lg border divide-y max-h-48 overflow-y-auto\">\r\n                            {shareholders.map((shareholder) => (\r\n                                <div\r\n                                    key={shareholder._id}\r\n                                    className=\"flex items-center justify-between p-3 hover:bg-muted/50\"\r\n                                >\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <Checkbox\r\n                                            id={shareholder._id}\r\n                                            checked={selectedShareholders.includes(\r\n                                                shareholder._id,\r\n                                            )}\r\n                                            onCheckedChange={(checked) =>\r\n                                                handleSelectShareholder(\r\n                                                    shareholder._id,\r\n                                                    !!checked,\r\n                                                )\r\n                                            }\r\n                                        />\r\n                                        <label\r\n                                            htmlFor={shareholder._id}\r\n                                            className=\"cursor-pointer\"\r\n                                        >\r\n                                            <div className=\"font-medium\">\r\n                                                {shareholder.name}\r\n                                            </div>\r\n                                            <div className=\"text-sm text-muted-foreground\">\r\n                                                {shareholder.percentage}% share\r\n                                            </div>\r\n                                        </label>\r\n                                    </div>\r\n                                    <div className=\"text-sm font-mono text-muted-foreground\">\r\n                                        {formatCurrency(\r\n                                            (netProfit *\r\n                                                shareholder.percentage) /\r\n                                                100,\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Distribution Preview */}\r\n                    {selectedShareholders.length > 0 && (\r\n                        <div className=\"rounded-lg bg-muted/50 p-4 space-y-2\">\r\n                            <div className=\"flex justify-between text-sm\">\r\n                                <span>Selected shareholders:</span>\r\n                                <span className=\"font-medium\">\r\n                                    {selectedShareholders.length}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"flex justify-between text-sm\">\r\n                                <span>Total percentage:</span>\r\n                                <span className=\"font-medium\">\r\n                                    {getSelectedTotalPercentage().toFixed(2)}%\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"flex justify-between font-medium border-t pt-2\">\r\n                                <span>Total to distribute:</span>\r\n                                <span className=\"text-primary\">\r\n                                    {formatCurrency(\r\n                                        (netProfit *\r\n                                            getSelectedTotalPercentage()) /\r\n                                            100,\r\n                                    )}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Notes */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"notes\">Notes (Optional)</Label>\r\n                        <Textarea\r\n                            id=\"notes\"\r\n                            value={notes}\r\n                            onChange={(e) => setNotes(e.target.value)}\r\n                            placeholder=\"Add any notes about this distribution...\"\r\n                            rows={2}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-end gap-2 pt-4\">\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            onClick={() => setOpen(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleSubmit}\r\n                            disabled={\r\n                                isLoading || selectedShareholders.length === 0\r\n                            }\r\n                            className=\"gap-2\"\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader className=\"h-4 w-4 animate-spin\" />\r\n                                    Distributing...\r\n                                </>\r\n                            ) : (\r\n                                'Distribute'\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\distribution-history.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1175,1178],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1175,1178],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport { useGetDistributionsQuery } from '@/redux/features/profitShare/profitShareApi';\r\nimport { Loader, History, Calendar } from 'lucide-react';\r\nimport { format } from 'date-fns';\r\n\r\nconst monthNames = [\r\n    '',\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December',\r\n];\r\n\r\nexport default function DistributionHistory() {\r\n    const { data, isLoading, isFetching } = useGetDistributionsQuery();\r\n\r\n    const formatCurrency = (amount: number) => {\r\n        return new Intl.NumberFormat('en-BD', {\r\n            style: 'currency',\r\n            currency: 'BDT',\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: 0,\r\n        }).format(amount);\r\n    };\r\n\r\n    const getPeriodLabel = (distribution: any) => {\r\n        if (distribution.periodType === 'year') {\r\n            return `Full Year ${distribution.year}`;\r\n        }\r\n        return `${monthNames[distribution.month]} ${distribution.year}`;\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Card>\r\n                <CardContent className=\"flex items-center justify-center py-16\">\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                        <Loader className=\"h-8 w-8 animate-spin text-primary\" />\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                            Loading history...\r\n                        </p>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    const distributions = data?.data || [];\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader className=\"pb-4\">\r\n                <div>\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                        <History className=\"h-5 w-5\" />\r\n                        Distribution History\r\n                    </CardTitle>\r\n                    <CardDescription className=\"mt-1\">\r\n                        View past profit distributions to shareholders\r\n                    </CardDescription>\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <div className=\"rounded-lg border\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"bg-muted/50\">\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Shareholder\r\n                                </TableHead>\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Period\r\n                                </TableHead>\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Share\r\n                                </TableHead>\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Amount\r\n                                </TableHead>\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Date\r\n                                </TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {distributions.length === 0 ? (\r\n                                <TableRow>\r\n                                    <TableCell\r\n                                        colSpan={5}\r\n                                        className=\"h-32 text-center\"\r\n                                    >\r\n                                        <div className=\"flex flex-col items-center gap-2 text-muted-foreground\">\r\n                                            <Calendar className=\"h-8 w-8 opacity-50\" />\r\n                                            <p>No distributions yet</p>\r\n                                            <p className=\"text-sm\">\r\n                                                Distributions will appear here\r\n                                                after you distribute profits\r\n                                            </p>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ) : (\r\n                                distributions.map((distribution) => (\r\n                                    <TableRow\r\n                                        key={distribution._id}\r\n                                        className=\"hover:bg-muted/30\"\r\n                                    >\r\n                                        <TableCell>\r\n                                            <div className=\"flex flex-col gap-0.5\">\r\n                                                <span className=\"font-medium\">\r\n                                                    {distribution.shareholderId\r\n                                                        ?.name || 'Unknown'}\r\n                                                </span>\r\n                                                <span className=\"text-sm text-muted-foreground\">\r\n                                                    {distribution.shareholderId\r\n                                                        ?.email || ''}\r\n                                                </span>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Badge\r\n                                                variant=\"outline\"\r\n                                                className=\"gap-1\"\r\n                                            >\r\n                                                <Calendar className=\"h-3 w-3\" />\r\n                                                {getPeriodLabel(distribution)}\r\n                                            </Badge>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Badge\r\n                                                variant=\"secondary\"\r\n                                                className=\"font-mono\"\r\n                                            >\r\n                                                {distribution.sharePercentage.toFixed(\r\n                                                    2,\r\n                                                )}\r\n                                                %\r\n                                            </Badge>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <span className=\"font-medium text-green-600 dark:text-green-400\">\r\n                                                {formatCurrency(\r\n                                                    distribution.shareAmount,\r\n                                                )}\r\n                                            </span>\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-muted-foreground\">\r\n                                            {distribution.distributedAt\r\n                                                ? format(\r\n                                                      new Date(\r\n                                                          distribution.distributedAt,\r\n                                                      ),\r\n                                                      'MMM dd, yyyy',\r\n                                                  )\r\n                                                : '-'}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n\r\n                {isFetching && !isLoading && (\r\n                    <div className=\"text-sm text-muted-foreground text-center mt-4\">\r\n                        Refreshing...\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\profit-overview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":31,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    useGetProfitSummaryQuery,\r\n    useGetShareholdersQuery,\r\n} from '@/redux/features/profitShare/profitShareApi';\r\nimport { useGetFinanceAnalyticsQuery } from '@/redux/features/analytics/analyticsApi';\r\nimport {\r\n    Loader,\r\n    TrendingUp,\r\n    TrendingDown,\r\n    Wallet,\r\n    PieChart,\r\n    DollarSign,\r\n    CreditCard,\r\n    AlertCircle,\r\n    Calculator,\r\n} from 'lucide-react';\r\nimport DistributeProfitDialog from './distribute-profit-dialog';\r\nimport ShareProfitDialog from './share-profit-dialog';\r\n\r\nconst months = [\r\n    { value: '1', label: 'January' },\r\n    { value: '2', label: 'February' },\r\n    { value: '3', label: 'March' },\r\n    { value: '4', label: 'April' },\r\n    { value: '5', label: 'May' },\r\n    { value: '6', label: 'June' },\r\n    { value: '7', label: 'July' },\r\n    { value: '8', label: 'August' },\r\n    { value: '9', label: 'September' },\r\n    { value: '10', label: 'October' },\r\n    { value: '11', label: 'November' },\r\n    { value: '12', label: 'December' },\r\n];\r\n\r\nconst currentYear = new Date().getFullYear();\r\nconst years = Array.from({ length: 5 }, (_, i) => ({\r\n    value: String(currentYear - i),\r\n    label: String(currentYear - i),\r\n}));\r\n\r\nexport default function ProfitOverview() {\r\n    const [periodType, setPeriodType] = useState<'month' | 'year'>('month');\r\n    const [selectedMonth, setSelectedMonth] = useState(\r\n        String(new Date().getMonth() + 1),\r\n    );\r\n    const [selectedYear, setSelectedYear] = useState(String(currentYear));\r\n\r\n    const { data: summaryData, isLoading: isLoadingSummary } =\r\n        useGetProfitSummaryQuery({\r\n            periodType,\r\n            month: periodType === 'month' ? parseInt(selectedMonth) : undefined,\r\n            year: parseInt(selectedYear),\r\n        });\r\n\r\n    const { data: shareholdersData } = useGetShareholdersQuery();\r\n    const { data: analyticsData } = useGetFinanceAnalyticsQuery({ months: 12 });\r\n\r\n    const summary = summaryData?.data;\r\n    const shareholders = shareholdersData?.data || [];\r\n    const activeShareholders = shareholders.filter((s) => s.isActive);\r\n    const analytics = analyticsData?.summary;\r\n\r\n    const formatCurrency = (amount: number) => {\r\n        return new Intl.NumberFormat('en-BD', {\r\n            style: 'currency',\r\n            currency: 'BDT',\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: 0,\r\n        }).format(amount);\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Period Selector */}\r\n            <Card>\r\n                <CardHeader className=\"pb-4\">\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                        <PieChart className=\"h-5 w-5\" />\r\n                        Profit Summary\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        View earnings, expenses, and net profit for a selected\r\n                        period\r\n                    </CardDescription>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <div className=\"flex flex-wrap gap-4 items-end\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Period Type</Label>\r\n                            <Select\r\n                                value={periodType}\r\n                                onValueChange={(value: 'month' | 'year') =>\r\n                                    setPeriodType(value)\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-[140px]\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"month\">\r\n                                        Monthly\r\n                                    </SelectItem>\r\n                                    <SelectItem value=\"year\">Yearly</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n\r\n                        {periodType === 'month' && (\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Month</Label>\r\n                                <Select\r\n                                    value={selectedMonth}\r\n                                    onValueChange={setSelectedMonth}\r\n                                >\r\n                                    <SelectTrigger className=\"w-[140px]\">\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {months.map((month) => (\r\n                                            <SelectItem\r\n                                                key={month.value}\r\n                                                value={month.value}\r\n                                            >\r\n                                                {month.label}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Year</Label>\r\n                            <Select\r\n                                value={selectedYear}\r\n                                onValueChange={setSelectedYear}\r\n                            >\r\n                                <SelectTrigger className=\"w-[120px]\">\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {years.map((year) => (\r\n                                        <SelectItem\r\n                                            key={year.value}\r\n                                            value={year.value}\r\n                                        >\r\n                                            {year.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Summary Cards */}\r\n            {isLoadingSummary ? (\r\n                <div className=\"flex items-center justify-center py-12\">\r\n                    <Loader className=\"h-8 w-8 animate-spin text-primary\" />\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {/* Total Earnings */}\r\n                    <Card className=\"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-800\">\r\n                        <CardContent className=\"p-6\">\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div>\r\n                                    <p className=\"text-sm font-medium text-green-600 dark:text-green-400\">\r\n                                        Total Earnings\r\n                                    </p>\r\n                                    <p className=\"text-2xl font-bold text-green-700 dark:text-green-300 mt-1\">\r\n                                        {formatCurrency(\r\n                                            summary?.totalEarnings || 0,\r\n                                        )}\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"rounded-full bg-green-100 dark:bg-green-900/50 p-2\">\r\n                                    <TrendingUp className=\"h-5 w-5 text-green-600 dark:text-green-400\" />\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Total Expenses */}\r\n                    <Card className=\"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 border-red-200 dark:border-red-800\">\r\n                        <CardContent className=\"p-6\">\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div>\r\n                                    <p className=\"text-sm font-medium text-red-600 dark:text-red-400\">\r\n                                        Total Expenses\r\n                                    </p>\r\n                                    <p className=\"text-2xl font-bold text-red-700 dark:text-red-300 mt-1\">\r\n                                        {formatCurrency(\r\n                                            summary?.totalExpenses || 0,\r\n                                        )}\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"rounded-full bg-red-100 dark:bg-red-900/50 p-2\">\r\n                                    <TrendingDown className=\"h-5 w-5 text-red-600 dark:text-red-400\" />\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Net Profit */}\r\n                    <Card\r\n                        className={`bg-gradient-to-br ${\r\n                            (summary?.netProfit || 0) >= 0\r\n                                ? 'from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800'\r\n                                : 'from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-200 dark:border-amber-800'\r\n                        }`}\r\n                    >\r\n                        <CardContent className=\"p-6\">\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div>\r\n                                    <p\r\n                                        className={`text-sm font-medium ${\r\n                                            (summary?.netProfit || 0) >= 0\r\n                                                ? 'text-blue-600 dark:text-blue-400'\r\n                                                : 'text-amber-600 dark:text-amber-400'\r\n                                        }`}\r\n                                    >\r\n                                        Net Profit\r\n                                    </p>\r\n                                    <p\r\n                                        className={`text-2xl font-bold mt-1 ${\r\n                                            (summary?.netProfit || 0) >= 0\r\n                                                ? 'text-blue-700 dark:text-blue-300'\r\n                                                : 'text-amber-700 dark:text-amber-300'\r\n                                        }`}\r\n                                    >\r\n                                        {formatCurrency(\r\n                                            summary?.netProfit || 0,\r\n                                        )}\r\n                                    </p>\r\n                                </div>\r\n                                <div\r\n                                    className={`rounded-full p-2 ${\r\n                                        (summary?.netProfit || 0) >= 0\r\n                                            ? 'bg-blue-100 dark:bg-blue-900/50'\r\n                                            : 'bg-amber-100 dark:bg-amber-900/50'\r\n                                    }`}\r\n                                >\r\n                                    <Wallet\r\n                                        className={`h-5 w-5 ${\r\n                                            (summary?.netProfit || 0) >= 0\r\n                                                ? 'text-blue-600 dark:text-blue-400'\r\n                                                : 'text-amber-600 dark:text-amber-400'\r\n                                        }`}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Debit (Owed to us) */}\r\n                    <Card className=\"bg-gradient-to-br from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 border-purple-200 dark:border-purple-800\">\r\n                        <CardContent className=\"p-6\">\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div>\r\n                                    <p className=\"text-sm font-medium text-purple-600 dark:text-purple-400\">\r\n                                        Debit Balance\r\n                                    </p>\r\n                                    <p className=\"text-2xl font-bold text-purple-700 dark:text-purple-300 mt-1\">\r\n                                        {formatCurrency(\r\n                                            analytics?.totalDebit || 0,\r\n                                        )}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-purple-500 dark:text-purple-400 mt-0.5\">\r\n                                        Borrow - Return\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"rounded-full bg-purple-100 dark:bg-purple-900/50 p-2\">\r\n                                    <CreditCard className=\"h-5 w-5 text-purple-600 dark:text-purple-400\" />\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Unpaid Revenue */}\r\n                    <Card className=\"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800\">\r\n                        <CardContent className=\"p-6\">\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div>\r\n                                    <p className=\"text-sm font-medium text-orange-600 dark:text-orange-400\">\r\n                                        Unpaid Revenue\r\n                                    </p>\r\n                                    <p className=\"text-2xl font-bold text-orange-700 dark:text-orange-300 mt-1\">\r\n                                        {formatCurrency(\r\n                                            analytics?.unpaidRevenue || 0,\r\n                                        )}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-orange-500 dark:text-orange-400 mt-0.5\">\r\n                                        Not yet withdrawn\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"rounded-full bg-orange-100 dark:bg-orange-900/50 p-2\">\r\n                                    <AlertCircle className=\"h-5 w-5 text-orange-600 dark:text-orange-400\" />\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    {/* Final Amount */}\r\n                    <Card className=\"bg-gradient-to-br from-teal-50 to-cyan-50 dark:from-teal-900/20 dark:to-cyan-900/20 border-teal-200 dark:border-teal-800\">\r\n                        <CardContent className=\"p-6\">\r\n                            <div className=\"flex items-start justify-between\">\r\n                                <div>\r\n                                    <p className=\"text-sm font-medium text-teal-600 dark:text-teal-400\">\r\n                                        Final Amount\r\n                                    </p>\r\n                                    <p\r\n                                        className={`text-2xl font-bold mt-1 ${(analytics?.finalAmount || 0) >= 0 ? 'text-teal-700 dark:text-teal-300' : 'text-red-700 dark:text-red-300'}`}\r\n                                    >\r\n                                        {formatCurrency(\r\n                                            analytics?.finalAmount || 0,\r\n                                        )}\r\n                                    </p>\r\n                                    <p className=\"text-xs text-teal-500 dark:text-teal-400 mt-0.5\">\r\n                                        Profit - Shared + Debit\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"rounded-full bg-teal-100 dark:bg-teal-900/50 p-2\">\r\n                                    <Calculator className=\"h-5 w-5 text-teal-600 dark:text-teal-400\" />\r\n                                </div>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n            )}\r\n\r\n            {/* Distribution Action */}\r\n            <Card>\r\n                <CardContent className=\"p-6\">\r\n                    <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                        <div>\r\n                            <h3 className=\"font-semibold\">\r\n                                Share & Distribute Profit\r\n                            </h3>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                {activeShareholders.length === 0\r\n                                    ? 'Add shareholders first to share or distribute profits'\r\n                                    : `Share or distribute to ${activeShareholders.length} active shareholder${activeShareholders.length > 1 ? 's' : ''}`}\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <ShareProfitDialog />\r\n                            <DistributeProfitDialog\r\n                                shareholders={activeShareholders}\r\n                                netProfit={summary?.netProfit || 0}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\share-profit-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4185,4188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4185,4188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\share-profit-dialog.tsx:139:13\n  137 |     useEffect(() => {\n  138 |         if (!open) {\n> 139 |             resetForm();\n      |             ^^^^^^^^^ Avoid calling setState() directly within an effect\n  140 |         }\n  141 |     }, [open]);\n  142 |","line":139,"column":13,"nodeType":null,"endLine":139,"endColumn":22}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\nimport {\r\n    useGetShareholdersQuery,\r\n    useDistributeProfitMutation,\r\n} from '@/redux/features/profitShare/profitShareApi';\r\nimport { useGetFinanceAnalyticsQuery } from '@/redux/features/analytics/analyticsApi';\r\nimport { Loader, Share2, Wallet, TrendingUp } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst months = [\r\n    { value: '1', label: 'January' },\r\n    { value: '2', label: 'February' },\r\n    { value: '3', label: 'March' },\r\n    { value: '4', label: 'April' },\r\n    { value: '5', label: 'May' },\r\n    { value: '6', label: 'June' },\r\n    { value: '7', label: 'July' },\r\n    { value: '8', label: 'August' },\r\n    { value: '9', label: 'September' },\r\n    { value: '10', label: 'October' },\r\n    { value: '11', label: 'November' },\r\n    { value: '12', label: 'December' },\r\n];\r\n\r\nconst currentYear = new Date().getFullYear();\r\nconst years = Array.from({ length: 5 }, (_, i) => ({\r\n    value: String(currentYear - i),\r\n    label: String(currentYear - i),\r\n}));\r\n\r\nexport default function ShareProfitDialog() {\r\n    const [open, setOpen] = useState(false);\r\n    const [selectedPartnerId, setSelectedPartnerId] = useState('');\r\n    const [selectedMonth, setSelectedMonth] = useState(\r\n        String(new Date().getMonth() + 1),\r\n    );\r\n    const [selectedYear, setSelectedYear] = useState(String(currentYear));\r\n    const [amount, setAmount] = useState('');\r\n    const [notes, setNotes] = useState('');\r\n\r\n    const { data: shareholdersData } = useGetShareholdersQuery();\r\n    const { data: analyticsData } = useGetFinanceAnalyticsQuery({ months: 12 });\r\n    const [distributeProfit, { isLoading }] = useDistributeProfitMutation();\r\n\r\n    const shareholders =\r\n        shareholdersData?.data?.filter((s) => s.isActive) || [];\r\n    const analytics = analyticsData?.summary;\r\n\r\n    // Calculate available profit (Profit + Debit)\r\n    const availableProfit =\r\n        (analytics?.totalProfit || 0) + (analytics?.totalDebit || 0);\r\n\r\n    const formatCurrency = (value: number) => {\r\n        return new Intl.NumberFormat('en-BD', {\r\n            style: 'currency',\r\n            currency: 'BDT',\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: 0,\r\n        }).format(value);\r\n    };\r\n\r\n    const selectedPartner = shareholders.find(\r\n        (s) => s._id === selectedPartnerId,\r\n    );\r\n\r\n    const handleSubmit = async () => {\r\n        if (!selectedPartnerId) {\r\n            toast.error('Please select a partner');\r\n            return;\r\n        }\r\n\r\n        const shareAmount = parseFloat(amount);\r\n        if (isNaN(shareAmount) || shareAmount <= 0) {\r\n            toast.error('Please enter a valid amount');\r\n            return;\r\n        }\r\n\r\n        if (shareAmount > availableProfit) {\r\n            toast.warning(\r\n                `Amount exceeds available profit of ${formatCurrency(availableProfit)}`,\r\n            );\r\n        }\r\n\r\n        try {\r\n            await distributeProfit({\r\n                shareholderIds: [selectedPartnerId],\r\n                periodType: 'month',\r\n                month: parseInt(selectedMonth),\r\n                year: parseInt(selectedYear),\r\n                notes: notes || undefined,\r\n                // We'll need to modify the backend to accept custom amount\r\n                customAmount: shareAmount,\r\n            }).unwrap();\r\n\r\n            toast.success(\r\n                `Successfully shared ${formatCurrency(shareAmount)} with ${selectedPartner?.name}`,\r\n            );\r\n            setOpen(false);\r\n            // Reset form\r\n            setSelectedPartnerId('');\r\n            setAmount('');\r\n            setNotes('');\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to share profit');\r\n        }\r\n    };\r\n\r\n    const resetForm = () => {\r\n        setSelectedPartnerId('');\r\n        setAmount('');\r\n        setNotes('');\r\n        setSelectedMonth(String(new Date().getMonth() + 1));\r\n        setSelectedYear(String(currentYear));\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!open) {\r\n            resetForm();\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button className=\"gap-2\" variant=\"default\">\r\n                    <Share2 className=\"h-4 w-4\" />\r\n                    Share Profit\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[500px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"flex items-center gap-2\">\r\n                        <Share2 className=\"h-5 w-5\" />\r\n                        Share Profit\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        Share a specific amount with a partner\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"space-y-5 py-2\">\r\n                    {/* Available Profit Display */}\r\n                    <div className=\"rounded-lg bg-linear-to-br from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 border border-emerald-200 dark:border-emerald-800 p-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <p className=\"text-sm font-medium text-emerald-600 dark:text-emerald-400\">\r\n                                    Available Yearly Profit\r\n                                </p>\r\n                                <p className=\"text-2xl font-bold text-emerald-700 dark:text-emerald-300 mt-1\">\r\n                                    {formatCurrency(availableProfit)}\r\n                                </p>\r\n                                <p className=\"text-xs text-emerald-500 dark:text-emerald-400 mt-0.5\">\r\n                                    Net Profit + Debit Balance\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"rounded-full bg-emerald-100 dark:bg-emerald-900/50 p-3\">\r\n                                <TrendingUp className=\"h-6 w-6 text-emerald-600 dark:text-emerald-400\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Partner Selection */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label>Select Partner *</Label>\r\n                        <Select\r\n                            value={selectedPartnerId}\r\n                            onValueChange={setSelectedPartnerId}\r\n                        >\r\n                            <SelectTrigger>\r\n                                <SelectValue placeholder=\"Choose a partner\" />\r\n                            </SelectTrigger>\r\n                            <SelectContent>\r\n                                {shareholders.map((shareholder) => (\r\n                                    <SelectItem\r\n                                        key={shareholder._id}\r\n                                        value={shareholder._id}\r\n                                    >\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <span>{shareholder.name}</span>\r\n                                            <span className=\"text-muted-foreground text-xs\">\r\n                                                ({shareholder.percentage}%)\r\n                                            </span>\r\n                                        </div>\r\n                                    </SelectItem>\r\n                                ))}\r\n                            </SelectContent>\r\n                        </Select>\r\n                        {shareholders.length === 0 && (\r\n                            <p className=\"text-xs text-muted-foreground\">\r\n                                No active shareholders found. Add shareholders\r\n                                first.\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Month & Year Selection */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Month</Label>\r\n                            <Select\r\n                                value={selectedMonth}\r\n                                onValueChange={setSelectedMonth}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {months.map((month) => (\r\n                                        <SelectItem\r\n                                            key={month.value}\r\n                                            value={month.value}\r\n                                        >\r\n                                            {month.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Year</Label>\r\n                            <Select\r\n                                value={selectedYear}\r\n                                onValueChange={setSelectedYear}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    {years.map((year) => (\r\n                                        <SelectItem\r\n                                            key={year.value}\r\n                                            value={year.value}\r\n                                        >\r\n                                            {year.label}\r\n                                        </SelectItem>\r\n                                    ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Amount Input */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"amount\">Amount (BDT) *</Label>\r\n                        <div className=\"relative\">\r\n                            <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">\r\n                                ৳\r\n                            </span>\r\n                            <Input\r\n                                id=\"amount\"\r\n                                type=\"number\"\r\n                                value={amount}\r\n                                onChange={(e) => setAmount(e.target.value)}\r\n                                placeholder=\"Enter amount to share\"\r\n                                className=\"pl-8\"\r\n                                min={0}\r\n                            />\r\n                        </div>\r\n                        {parseFloat(amount) > 0 && selectedPartner && (\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                {selectedPartner.name} will receive{' '}\r\n                                <span className=\"font-semibold text-primary\">\r\n                                    {formatCurrency(parseFloat(amount))}\r\n                                </span>\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Notes */}\r\n                    <div className=\"space-y-2\">\r\n                        <Label htmlFor=\"notes\">Notes (Optional)</Label>\r\n                        <Textarea\r\n                            id=\"notes\"\r\n                            value={notes}\r\n                            onChange={(e) => setNotes(e.target.value)}\r\n                            placeholder=\"Add any notes about this share...\"\r\n                            rows={2}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex justify-end gap-3 pt-2\">\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            onClick={() => setOpen(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button\r\n                            onClick={handleSubmit}\r\n                            disabled={\r\n                                isLoading || !selectedPartnerId || !amount\r\n                            }\r\n                            className=\"gap-2\"\r\n                        >\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader className=\"h-4 w-4 animate-spin\" />\r\n                                    Sharing...\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <Wallet className=\"h-4 w-4\" />\r\n                                    Share Profit\r\n                                </>\r\n                            )}\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\shareholder-list.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":26,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1606,1609],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1606,1609],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from '@/components/ui/table';\r\nimport {\r\n    useGetShareholdersQuery,\r\n    useDeleteShareholderMutation,\r\n    type IShareholder,\r\n} from '@/redux/features/profitShare/profitShareApi';\r\nimport { Loader, Plus, Trash2, Edit, Users, Percent } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n    AlertDialogTrigger,\r\n} from '@/components/ui/alert-dialog';\r\nimport { Progress } from '@/components/ui/progress';\r\nimport AddShareholderDialog from './add-shareholder-dialog';\r\n\r\nexport default function ShareholderList() {\r\n    const { data, isLoading, isFetching } = useGetShareholdersQuery();\r\n    const [deleteShareholder] = useDeleteShareholderMutation();\r\n    const [editingShareholder, setEditingShareholder] =\r\n        useState<IShareholder | null>(null);\r\n    const [dialogOpen, setDialogOpen] = useState(false);\r\n\r\n    const handleDelete = async (id: string) => {\r\n        try {\r\n            await deleteShareholder(id).unwrap();\r\n            toast.success('Shareholder removed successfully');\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to remove shareholder');\r\n        }\r\n    };\r\n\r\n    const handleEdit = (shareholder: IShareholder) => {\r\n        setEditingShareholder(shareholder);\r\n        setDialogOpen(true);\r\n    };\r\n\r\n    const handleDialogClose = () => {\r\n        setEditingShareholder(null);\r\n        setDialogOpen(false);\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Card>\r\n                <CardContent className=\"flex items-center justify-center py-16\">\r\n                    <div className=\"flex flex-col items-center gap-2\">\r\n                        <Loader className=\"h-8 w-8 animate-spin text-primary\" />\r\n                        <p className=\"text-sm text-muted-foreground\">\r\n                            Loading shareholders...\r\n                        </p>\r\n                    </div>\r\n                </CardContent>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    const shareholders = data?.data || [];\r\n    const totalPercentage = data?.meta?.totalPercentage || 0;\r\n    const remainingPercentage = data?.meta?.remainingPercentage || 100;\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader className=\"pb-4\">\r\n                <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                    <div>\r\n                        <CardTitle className=\"flex items-center gap-2\">\r\n                            <Users className=\"h-5 w-5\" />\r\n                            Shareholders\r\n                        </CardTitle>\r\n                        <CardDescription className=\"mt-1\">\r\n                            Manage profit share percentages for each shareholder\r\n                        </CardDescription>\r\n                    </div>\r\n                    <AddShareholderDialog\r\n                        open={dialogOpen}\r\n                        onOpenChange={setDialogOpen}\r\n                        editingShareholder={editingShareholder}\r\n                        onClose={handleDialogClose}\r\n                        remainingPercentage={remainingPercentage}\r\n                    />\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent className=\"space-y-4\">\r\n                {/* Percentage Allocation Overview */}\r\n                <div className=\"rounded-lg border p-4 space-y-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Percent className=\"h-4 w-4 text-muted-foreground\" />\r\n                            <span className=\"font-medium\">\r\n                                Total Allocation\r\n                            </span>\r\n                        </div>\r\n                        <span\r\n                            className={`font-bold ${totalPercentage === 100 ? 'text-green-600' : 'text-amber-600'}`}\r\n                        >\r\n                            {totalPercentage.toFixed(2)}%\r\n                        </span>\r\n                    </div>\r\n                    <Progress value={totalPercentage} className=\"h-2\" />\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                        {totalPercentage < 100 ? (\r\n                            <span className=\"text-amber-600\">\r\n                                {remainingPercentage.toFixed(2)}% remaining to\r\n                                allocate\r\n                            </span>\r\n                        ) : (\r\n                            <span className=\"text-green-600\">\r\n                                Fully allocated\r\n                            </span>\r\n                        )}\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Shareholders Table */}\r\n                <div className=\"rounded-lg border\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"bg-muted/50\">\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Shareholder\r\n                                </TableHead>\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Percentage\r\n                                </TableHead>\r\n                                <TableHead className=\"font-semibold\">\r\n                                    Status\r\n                                </TableHead>\r\n                                <TableHead className=\"text-right font-semibold\">\r\n                                    Actions\r\n                                </TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {shareholders.length === 0 ? (\r\n                                <TableRow>\r\n                                    <TableCell\r\n                                        colSpan={4}\r\n                                        className=\"h-32 text-center\"\r\n                                    >\r\n                                        <div className=\"flex flex-col items-center gap-2 text-muted-foreground\">\r\n                                            <Users className=\"h-8 w-8 opacity-50\" />\r\n                                            <p>No shareholders added</p>\r\n                                            <p className=\"text-sm\">\r\n                                                Add shareholders to distribute\r\n                                                profits\r\n                                            </p>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ) : (\r\n                                shareholders.map((shareholder) => (\r\n                                    <TableRow\r\n                                        key={shareholder._id}\r\n                                        className=\"hover:bg-muted/30\"\r\n                                    >\r\n                                        <TableCell>\r\n                                            <div className=\"flex flex-col gap-0.5\">\r\n                                                <span className=\"font-medium\">\r\n                                                    {shareholder.name}\r\n                                                </span>\r\n                                                <span className=\"text-sm text-muted-foreground\">\r\n                                                    {shareholder.email}\r\n                                                </span>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Badge\r\n                                                variant=\"secondary\"\r\n                                                className=\"font-mono\"\r\n                                            >\r\n                                                {shareholder.percentage.toFixed(\r\n                                                    2,\r\n                                                )}\r\n                                                %\r\n                                            </Badge>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Badge\r\n                                                variant={\r\n                                                    shareholder.isActive\r\n                                                        ? 'default'\r\n                                                        : 'outline'\r\n                                                }\r\n                                                className={\r\n                                                    shareholder.isActive\r\n                                                        ? 'bg-green-500'\r\n                                                        : ''\r\n                                                }\r\n                                            >\r\n                                                {shareholder.isActive\r\n                                                    ? 'Active'\r\n                                                    : 'Inactive'}\r\n                                            </Badge>\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-right\">\r\n                                            <div className=\"flex justify-end gap-1\">\r\n                                                <Button\r\n                                                    size=\"icon\"\r\n                                                    variant=\"ghost\"\r\n                                                    onClick={() =>\r\n                                                        handleEdit(shareholder)\r\n                                                    }\r\n                                                    className=\"h-8 w-8\"\r\n                                                >\r\n                                                    <Edit className=\"h-4 w-4\" />\r\n                                                </Button>\r\n                                                <AlertDialog>\r\n                                                    <AlertDialogTrigger asChild>\r\n                                                        <Button\r\n                                                            size=\"icon\"\r\n                                                            variant=\"ghost\"\r\n                                                            className=\"h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10\"\r\n                                                        >\r\n                                                            <Trash2 className=\"h-4 w-4\" />\r\n                                                        </Button>\r\n                                                    </AlertDialogTrigger>\r\n                                                    <AlertDialogContent>\r\n                                                        <AlertDialogHeader>\r\n                                                            <AlertDialogTitle>\r\n                                                                Remove\r\n                                                                Shareholder?\r\n                                                            </AlertDialogTitle>\r\n                                                            <AlertDialogDescription>\r\n                                                                Are you sure you\r\n                                                                want to remove\r\n                                                                &quot;\r\n                                                                {\r\n                                                                    shareholder.name\r\n                                                                }\r\n                                                                &quot;? This\r\n                                                                will free up{' '}\r\n                                                                {\r\n                                                                    shareholder.percentage\r\n                                                                }\r\n                                                                % for\r\n                                                                reallocation.\r\n                                                            </AlertDialogDescription>\r\n                                                        </AlertDialogHeader>\r\n                                                        <AlertDialogFooter>\r\n                                                            <AlertDialogCancel>\r\n                                                                Cancel\r\n                                                            </AlertDialogCancel>\r\n                                                            <AlertDialogAction\r\n                                                                onClick={() =>\r\n                                                                    handleDelete(\r\n                                                                        shareholder._id,\r\n                                                                    )\r\n                                                                }\r\n                                                                className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                                                            >\r\n                                                                Remove\r\n                                                            </AlertDialogAction>\r\n                                                        </AlertDialogFooter>\r\n                                                    </AlertDialogContent>\r\n                                                </AlertDialog>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </div>\r\n\r\n                {isFetching && !isLoading && (\r\n                    <div className=\"text-sm text-muted-foreground text-center\">\r\n                        Refreshing...\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\transfer-history.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\profit-share\\transfer-profit-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\providers\\AuthGuard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\providers\\ReduxProvider.tsx","messages":[{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\providers\\ReduxProvider.tsx:12:10\n  10 | }) {\n  11 |     const storeRef = useRef<AppStore>(null);\n> 12 |     if (!storeRef.current) storeRef.current = store();\n     |          ^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  13 |     \n  14 |     return <Provider store={storeRef.current}>{children}</Provider>;\n  15 | }\n\nTo initialize a ref only once, check that the ref is null with the pattern `if (ref.current == null) { ref.current = ... }`","line":12,"column":10,"nodeType":null,"endLine":12,"endColumn":26},{"ruleId":"react-hooks/refs","severity":2,"message":"Error: Cannot access refs during render\n\nReact refs are values that are not needed for rendering. Refs should only be accessed outside of render, such as in event handlers or effects. Accessing a ref value (the `current` property) during render can cause your component not to update as expected (https://react.dev/reference/react/useRef).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\providers\\ReduxProvider.tsx:14:29\n  12 |     if (!storeRef.current) storeRef.current = store();\n  13 |     \n> 14 |     return <Provider store={storeRef.current}>{children}</Provider>;\n     |                             ^^^^^^^^^^^^^^^^ Cannot access ref value during render\n  15 | }\n  16 |","line":14,"column":29,"nodeType":null,"endLine":14,"endColumn":45}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport { Provider } from 'react-redux';\r\nimport { useRef } from 'react';\r\nimport { store, type AppStore } from '@/redux/store';\r\n\r\nexport default function ReduxProvider({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const storeRef = useRef<AppStore>(null);\r\n    if (!storeRef.current) storeRef.current = store();\r\n    \r\n    return <Provider store={storeRef.current}>{children}</Provider>;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\providers\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\providers\\theme-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shared\\DatePicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shared\\DateTimePicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shared\\TimePicker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\assign-shift.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\assign-shift.tsx:186:40\n  184 |\n  185 |                             <Select\n> 186 |                                 value={form.watch('shiftId')}\n      |                                        ^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  187 |                                 onValueChange={(v) =>\n  188 |                                     form.setValue('shiftId', v)\n  189 |                                 }","line":186,"column":40,"nodeType":null,"endLine":186,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogClose,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Role } from '@/constants/role';\r\nimport { useSession } from '@/lib/auth-client';\r\nimport { useGetAllShiftsQuery } from '@/redux/features/shift/shiftApi';\r\nimport { useGetStaffsQuery } from '@/redux/features/staff/staffApi';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { IconPlus, IconX } from '@tabler/icons-react';\r\nimport { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport z from 'zod';\r\nimport { DatePicker } from '../shared/DatePicker';\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '../ui/select';\r\nimport { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar';\r\nimport { Badge } from '../ui/badge';\r\nimport { ScrollArea } from '../ui/scroll-area';\r\nimport IStaff from '@/types/staff.type';\r\nimport { IShift } from '@/types/shift.type';\r\nimport { Spinner } from '../ui/spinner';\r\nimport { toast } from 'sonner';\r\nimport { useAssignShiftMutation } from '@/redux/features/shiftAssignment/shiftAssignmentApi';\r\n\r\nconst shiftAssignSchema = z.object({\r\n    staffIds: z\r\n        .array(z.string())\r\n        .min(1, 'At least one staff member is required'),\r\n\r\n    shiftId: z.string().min(1, 'Shift is required'),\r\n\r\n    startDate: z\r\n        .date()\r\n        .refine(\r\n            (date) => date >= new Date(new Date().setHours(0, 0, 0, 0)),\r\n            'Start date must be today or later',\r\n        ),\r\n});\r\n\r\ntype FormData = z.infer<typeof shiftAssignSchema>;\r\n\r\nexport default function AssignShift() {\r\n    const { data: session, isPending, isRefetching } = useSession();\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [selectedStaffs, setSelectedStaffs] = useState<IStaff[]>([]);\r\n    const [staffSelectOpen, setStaffSelectOpen] = useState(false);\r\n\r\n    const {\r\n        data: staffsData,\r\n        isLoading: isStaffsLoading,\r\n        isFetching: isStaffsFetching,\r\n    } = useGetStaffsQuery(\r\n        { limit: 100000 },\r\n        { skip: !session || session.user.role === Role.STAFF },\r\n    );\r\n\r\n    const {\r\n        data: shiftsData,\r\n        isLoading: isShiftsLoading,\r\n        isFetching: isShiftsFetching,\r\n    } = useGetAllShiftsQuery(\r\n        {},\r\n        { skip: !session || session.user.role === Role.STAFF },\r\n    );\r\n\r\n    const [assignShift, { isLoading: isAssigning }] = useAssignShiftMutation();\r\n\r\n    const form = useForm<FormData>({\r\n        resolver: zodResolver(shiftAssignSchema),\r\n        defaultValues: {\r\n            staffIds: [],\r\n            shiftId: '',\r\n            startDate: new Date(),\r\n        },\r\n    });\r\n\r\n    const isLoading =\r\n        isPending ||\r\n        isRefetching ||\r\n        isStaffsLoading ||\r\n        isStaffsFetching ||\r\n        isShiftsLoading ||\r\n        isShiftsFetching;\r\n\r\n    const canCreate = session && session.user.role !== Role.STAFF;\r\n\r\n    const handleAddStaff = (staffId: string) => {\r\n        const staff = staffsData?.staffs?.find(\r\n            (s: IStaff) => s._id === staffId,\r\n        );\r\n\r\n        if (staff && !selectedStaffs.find((s) => s._id === staffId)) {\r\n            const newStaffs = [...selectedStaffs, staff];\r\n\r\n            setSelectedStaffs(newStaffs);\r\n\r\n            form.setValue(\r\n                'staffIds',\r\n                newStaffs.map((s) => s._id),\r\n            );\r\n        }\r\n    };\r\n\r\n    const handleRemoveStaff = (staffId: string) => {\r\n        const newStaffs = selectedStaffs.filter((s) => s._id !== staffId);\r\n\r\n        setSelectedStaffs(newStaffs);\r\n\r\n        form.setValue(\r\n            'staffIds',\r\n            newStaffs.map((s) => s._id),\r\n        );\r\n    };\r\n\r\n    const onSubmit = async (data: FormData) => {\r\n        try {\r\n            const result = await assignShift({\r\n                staffIds: data.staffIds,\r\n                shiftId: data.shiftId,\r\n                startDate: data.startDate.toISOString(),\r\n            }).unwrap();\r\n\r\n            console.log(result);\r\n\r\n            if (result.success) {\r\n                toast.success(result.message);\r\n\r\n                form.reset();\r\n                setSelectedStaffs([]);\r\n                setOpen(false);\r\n            }\r\n        } catch (error) {\r\n            toast.error((error as Error).message || 'Failed to assign shift');\r\n        }\r\n    };\r\n\r\n    const getInitials = (name: string) => {\r\n        return name\r\n            .split(' ')\r\n            .map((n) => n[0])\r\n            .join('')\r\n            .toUpperCase()\r\n            .slice(0, 2);\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button disabled={isLoading || !canCreate}>\r\n                    <IconPlus />\r\n                    Assign Shift\r\n                </Button>\r\n            </DialogTrigger>\r\n\r\n            <DialogContent className=\"sm:max-w-2xl\">\r\n                <form onSubmit={form.handleSubmit(onSubmit)}>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Assign Shift to Staff</DialogTitle>\r\n                        <DialogDescription>\r\n                            Select one or more staff members\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n\r\n                    <div className=\"grid gap-4 py-4\">\r\n                        <div className=\"grid gap-3\">\r\n                            <Label>Shift *</Label>\r\n\r\n                            <Select\r\n                                value={form.watch('shiftId')}\r\n                                onValueChange={(v) =>\r\n                                    form.setValue('shiftId', v)\r\n                                }\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue placeholder=\"Select shift\" />\r\n                                </SelectTrigger>\r\n\r\n                                <SelectContent>\r\n                                    {shiftsData?.shifts\r\n                                        ?.filter((s: IShift) => s.isActive)\r\n                                        .map((shift: IShift) => (\r\n                                            <SelectItem\r\n                                                key={shift._id}\r\n                                                value={shift._id}\r\n                                            >\r\n                                                {shift.name} ({shift.startTime}{' '}\r\n                                                - {shift.endTime})\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                </SelectContent>\r\n                            </Select>\r\n\r\n                            {form.formState.errors.shiftId && (\r\n                                <p className=\"text-sm text-destructive\">\r\n                                    {form.formState.errors.shiftId.message}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-3\">\r\n                            <Label>Add Staff Members *</Label>\r\n\r\n                            <Select\r\n                                open={staffSelectOpen}\r\n                                onOpenChange={setStaffSelectOpen}\r\n                                value=\"\"\r\n                                onValueChange={handleAddStaff}\r\n                            >\r\n                                <SelectTrigger className=\"w-full\">\r\n                                    <SelectValue placeholder=\"Select staff to add\" />\r\n                                </SelectTrigger>\r\n\r\n                                <SelectContent>\r\n                                    <ScrollArea className=\"h-[200px]\">\r\n                                        {staffsData?.staffs\r\n                                            ?.filter(\r\n                                                (staff: IStaff) =>\r\n                                                    !selectedStaffs.find(\r\n                                                        (s) =>\r\n                                                            s._id === staff._id,\r\n                                                    ),\r\n                                            )\r\n                                            .map((staff: IStaff) => (\r\n                                                <SelectItem\r\n                                                    key={staff._id}\r\n                                                    value={staff._id}\r\n                                                >\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <Avatar className=\"h-6 w-6\">\r\n                                                            <AvatarImage\r\n                                                                src={\r\n                                                                    staff.user\r\n                                                                        ?.image as string\r\n                                                                }\r\n                                                            />\r\n                                                            <AvatarFallback>\r\n                                                                {getInitials(\r\n                                                                    staff.user\r\n                                                                        ?.name ||\r\n                                                                        'U',\r\n                                                                )}\r\n                                                            </AvatarFallback>\r\n                                                        </Avatar>\r\n\r\n                                                        <span>\r\n                                                            {staff.user?.name ||\r\n                                                                'Unknown'}\r\n                                                        </span>\r\n\r\n                                                        <span className=\"text-xs text-muted-foreground\">\r\n                                                            ({staff.designation}\r\n                                                            )\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                    </ScrollArea>\r\n\r\n                                    <div className=\"sticky bottom-0 border-t p-2\">\r\n                                        <Button\r\n                                            type=\"button\"\r\n                                            className=\"w-full\"\r\n                                            onClick={() =>\r\n                                                setStaffSelectOpen(false)\r\n                                            }\r\n                                        >\r\n                                            Done Selecting\r\n                                        </Button>\r\n                                    </div>\r\n                                </SelectContent>\r\n                            </Select>\r\n\r\n                            {form.formState.errors.staffIds && (\r\n                                <p className=\"text-sm text-destructive\">\r\n                                    {form.formState.errors.staffIds.message}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {selectedStaffs.length > 0 && (\r\n                            <div className=\"grid gap-2\">\r\n                                <Label>\r\n                                    Selected Staff ({selectedStaffs.length})\r\n                                </Label>\r\n\r\n                                <ScrollArea className=\"h-[150px] border rounded-md p-2\">\r\n                                    <div className=\"flex flex-wrap gap-2\">\r\n                                        {selectedStaffs.map((staff) => (\r\n                                            <Badge\r\n                                                key={staff._id}\r\n                                                variant=\"secondary\"\r\n                                                className=\"gap-2 items-center\"\r\n                                            >\r\n                                                <Avatar className=\"h-6 w-6\">\r\n                                                    <AvatarImage\r\n                                                        src={\r\n                                                            staff.user\r\n                                                                ?.image as string\r\n                                                        }\r\n                                                    />\r\n                                                    <AvatarFallback>\r\n                                                        {getInitials(\r\n                                                            staff.user?.name ||\r\n                                                                'U',\r\n                                                        )}\r\n                                                    </AvatarFallback>\r\n                                                </Avatar>\r\n\r\n                                                {staff.user?.name}\r\n\r\n                                                <Button\r\n                                                    type=\"button\"\r\n                                                    variant=\"ghost\"\r\n                                                    size=\"icon\"\r\n                                                    onClick={() =>\r\n                                                        handleRemoveStaff(\r\n                                                            staff._id,\r\n                                                        )\r\n                                                    }\r\n                                                >\r\n                                                    <IconX className=\"text-destructive\" />\r\n                                                </Button>\r\n                                            </Badge>\r\n                                        ))}\r\n                                    </div>\r\n                                </ScrollArea>\r\n                            </div>\r\n                        )}\r\n\r\n                        <DatePicker\r\n                            label=\"Start Date *\"\r\n                            value={form.watch('startDate')}\r\n                            onChange={(d) => d && form.setValue('startDate', d)}\r\n                        />\r\n                    </div>\r\n\r\n                    <DialogFooter>\r\n                        <DialogClose asChild>\r\n                            <Button variant=\"outline\">Cancel</Button>\r\n                        </DialogClose>\r\n\r\n                        <Button\r\n                            type=\"submit\"\r\n                            disabled={\r\n                                isAssigning || selectedStaffs.length === 0\r\n                            }\r\n                        >\r\n                            {isAssigning ? (\r\n                                <Spinner className=\"\" />\r\n                            ) : (\r\n                                `Assign to ${selectedStaffs.length} Staff${\r\n                                    selectedStaffs.length !== 1 ? 's' : ''\r\n                                }`\r\n                            )}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\assigned-staff-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\create-branch.tsx","messages":[{"ruleId":"@typescript-eslint/no-wrapper-object-types","severity":2,"message":"Prefer using the primitive `boolean` as a type name, rather than the upper-cased `Boolean`.","line":42,"column":38,"nodeType":"Identifier","messageId":"bannedClassType","endLine":42,"endColumn":45,"fix":{"range":[1400,1407],"text":"boolean"}},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\create-branch.tsx:119:36\n  117 |                         <Input\n  118 |                             placeholder=\"DHA\"\n> 119 |                             value={form.watch('code')}\n      |                                    ^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  120 |                             onChange={(e) =>\n  121 |                                 form.setValue(\n  122 |                                     'code',","line":119,"column":36,"nodeType":null,"endLine":119,"endColumn":40}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogClose,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Role } from '@/constants/role';\r\nimport { useSession } from '@/lib/auth-client';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { IconPlus } from '@tabler/icons-react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { toast } from 'sonner';\r\n\r\nimport { useCreateBranchMutation } from '@/redux/features/branch/branchApi';\r\nimport { Spinner } from '../ui/spinner';\r\nimport { useState } from 'react';\r\n\r\nconst branchSchema = z.object({\r\n    name: z.string().min(2, 'Branch name is required'),\r\n    code: z.string().min(2, 'Branch code is required'),\r\n    address: z.string().optional(),\r\n    isActive: z.boolean().default(true).optional(),\r\n});\r\n\r\ntype BranchFormValues = z.infer<typeof branchSchema>;\r\n\r\nexport default function CreateBranch() {\r\n    const { data: session, isPending, isRefetching } = useSession();\r\n    const [createBranch, { isLoading: isCreating }] = useCreateBranchMutation();\r\n\r\n    const [open, setOpen] = useState<Boolean>(false);\r\n\r\n    const form = useForm<BranchFormValues>({\r\n        resolver: zodResolver(branchSchema),\r\n        defaultValues: {\r\n            name: '',\r\n            address: '',\r\n            code: '',\r\n            isActive: true,\r\n        },\r\n    });\r\n\r\n    const isLoading = isPending || isRefetching || isCreating;\r\n\r\n    const onSubmit = async (values: BranchFormValues) => {\r\n        try {\r\n            await createBranch({\r\n                ...values,\r\n                code: values.code.toUpperCase(),\r\n            }).unwrap();\r\n\r\n            toast.success('Branch created successfully');\r\n\r\n            form.reset({\r\n                name: '',\r\n                address: '',\r\n                code: '',\r\n                isActive: true,\r\n            });\r\n\r\n            setOpen(false);\r\n        } catch (error) {\r\n            toast.error((error as Error).message || 'Failed to create branch');\r\n        }\r\n    };\r\n\r\n    const canCreate =\r\n        session &&\r\n        (session.user.role === Role.SUPER_ADMIN ||\r\n            session.user.role === Role.ADMIN);\r\n\r\n    return (\r\n        <Dialog open={!!open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button disabled={isLoading || !canCreate}>\r\n                    <IconPlus />\r\n                    New Branch\r\n                </Button>\r\n            </DialogTrigger>\r\n\r\n            <DialogContent className=\"w-full max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Create Branch</DialogTitle>\r\n                    <DialogDescription>\r\n                        Add a new branch for your organization.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form\r\n                    onSubmit={form.handleSubmit(onSubmit)}\r\n                    className=\"space-y-4\"\r\n                >\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Branch Name *</Label>\r\n                        <Input\r\n                            placeholder=\"Dhaka Head Office\"\r\n                            {...form.register('name')}\r\n                        />\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {form.formState.errors.name?.message}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Branch Code *</Label>\r\n                        <Input\r\n                            placeholder=\"DHA\"\r\n                            value={form.watch('code')}\r\n                            onChange={(e) =>\r\n                                form.setValue(\r\n                                    'code',\r\n                                    e.target.value.toUpperCase(),\r\n                                )\r\n                            }\r\n                        />\r\n                        <p className=\"text-sm text-destructive\">\r\n                            {form.formState.errors.code?.message}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Address</Label>\r\n                        <Input\r\n                            placeholder=\"Dhaka, Bangladesh\"\r\n                            {...form.register('address')}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between rounded-lg border p-3\">\r\n                        <div className=\"space-y-1\">\r\n                            <Label>Status</Label>\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                Branch is currently active or inactive\r\n                            </p>\r\n                        </div>\r\n\r\n                        <Switch\r\n                            checked={form.watch('isActive')}\r\n                            onCheckedChange={(value) =>\r\n                                form.setValue('isActive', value, {\r\n                                    shouldDirty: true,\r\n                                    shouldValidate: true,\r\n                                })\r\n                            }\r\n                        />\r\n                    </div>\r\n\r\n                    <DialogFooter>\r\n                        <DialogClose asChild>\r\n                            <Button type=\"button\" variant=\"outline\">\r\n                                Cancel\r\n                            </Button>\r\n                        </DialogClose>\r\n\r\n                        <Button type=\"submit\" disabled={isLoading}>\r\n                            {isLoading ? <Spinner /> : 'Create Branch'}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\create-shift.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":122,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":122,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3658,3661],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3658,3661],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Role } from '@/constants/role';\r\nimport { useSession } from '@/lib/auth-client';\r\nimport { toast } from 'sonner';\r\nimport { Plus } from 'lucide-react';\r\n\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\n\r\nimport { useCreateShiftMutation } from '@/redux/features/shift/shiftApi';\r\nimport { useGetAllBranchesQuery } from '@/redux/features/branch/branchApi';\r\nimport { Spinner } from '../ui/spinner';\r\n\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { IBranch } from '@/types/branch.type';\r\n\r\nconst WEEK_DAYS = [\r\n    { label: 'Sun', value: 0 },\r\n    { label: 'Mon', value: 1 },\r\n    { label: 'Tue', value: 2 },\r\n    { label: 'Wed', value: 3 },\r\n    { label: 'Thu', value: 4 },\r\n    { label: 'Fri', value: 5 },\r\n    { label: 'Sat', value: 6 },\r\n];\r\n\r\nconst MINUTE_OPTIONS = [5, 10, 15, 20, 30, 45, 60];\r\n\r\nconst createShiftSchema = z.object({\r\n    name: z.string().min(1, 'Shift name is required'),\r\n    code: z.string().min(1, 'Code is required'),\r\n    branchId: z.string().min(1, 'Branch is required'),\r\n\r\n    startTime: z.string().min(1, 'Start time required'),\r\n    endTime: z.string().min(1, 'End time required'),\r\n\r\n    otEnabled: z.boolean().default(false).optional(),\r\n\r\n    workDays: z.array(z.number()).min(1, 'Select at least one day'),\r\n    gracePeriodMinutes: z.number(),\r\n    lateAfterMinutes: z.number(),\r\n    halfDayAfterMinutes: z.number(),\r\n});\r\n\r\ntype CreateShiftFormData = z.infer<typeof createShiftSchema>;\r\n\r\nexport default function CreateShift() {\r\n    const { data: session, isPending, isRefetching } = useSession();\r\n\r\n    const { data: branchData, isLoading: isBranchLoading } =\r\n        useGetAllBranchesQuery(undefined);\r\n\r\n    const [createShift, { isLoading: isCreating }] = useCreateShiftMutation();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const form = useForm<CreateShiftFormData>({\r\n        resolver: zodResolver(createShiftSchema),\r\n        defaultValues: {\r\n            name: '',\r\n            code: '',\r\n            branchId: '',\r\n            startTime: '10:00',\r\n            endTime: '18:00',\r\n            otEnabled: false,\r\n\r\n            workDays: [1, 2, 3, 4, 5, 6],\r\n            gracePeriodMinutes: 10,\r\n            lateAfterMinutes: 10,\r\n            halfDayAfterMinutes: 240,\r\n        },\r\n    });\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        control,\r\n        reset,\r\n        formState: { errors },\r\n    } = form;\r\n\r\n    const isLoading =\r\n        isPending || isRefetching || isCreating || isBranchLoading;\r\n\r\n    const canCreate = session && session.user.role !== Role.TEAM_LEADER;\r\n\r\n    const onSubmit = async (data: CreateShiftFormData) => {\r\n        try {\r\n            if (data.startTime >= data.endTime) {\r\n                toast.error('End time must be after start time');\r\n                return;\r\n            }\r\n\r\n            await createShift({\r\n                ...data,\r\n                code: data.code.toUpperCase(),\r\n            }).unwrap();\r\n\r\n            toast.success('Shift created successfully');\r\n            reset();\r\n            setOpen(false);\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to create shift');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button disabled={isLoading || !canCreate}>\r\n                    <Plus />\r\n                    New Shift\r\n                </Button>\r\n            </DialogTrigger>\r\n\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>Create New Shift</DialogTitle>\r\n                    <DialogDescription>\r\n                        Create a new working shift for employees.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Shift Name *</Label>\r\n                        <Input {...register('name')} />\r\n                        {errors.name && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.name.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Code *</Label>\r\n                        <Input\r\n                            {...register('code')}\r\n                            onChange={(e) =>\r\n                                form.setValue(\r\n                                    'code',\r\n                                    e.target.value.toUpperCase(),\r\n                                )\r\n                            }\r\n                        />\r\n                        {errors.code && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.code.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Branch *</Label>\r\n                        <Controller\r\n                            name=\"branchId\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    value={field.value}\r\n                                    onValueChange={field.onChange}\r\n                                >\r\n                                    <SelectTrigger className=\"w-full\">\r\n                                        <SelectValue placeholder=\"Select branch\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {branchData?.branches?.map(\r\n                                            (b: IBranch) => (\r\n                                                <SelectItem\r\n                                                    key={b._id}\r\n                                                    value={b._id}\r\n                                                >\r\n                                                    {b.name}\r\n                                                </SelectItem>\r\n                                            ),\r\n                                        )}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            )}\r\n                        />\r\n                        {errors.branchId && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.branchId.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Start Time *</Label>\r\n                            <Input\r\n                                type=\"time\"\r\n                                {...register('startTime')}\r\n                                className=\"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>End Time *</Label>\r\n                            <Input\r\n                                type=\"time\"\r\n                                {...register('endTime')}\r\n                                className=\"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Work Days *</Label>\r\n                        <Controller\r\n                            name=\"workDays\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                                    {WEEK_DAYS.map((day) => (\r\n                                        <Button\r\n                                            key={day.value}\r\n                                            type=\"button\"\r\n                                            size=\"sm\"\r\n                                            variant={\r\n                                                field.value.includes(day.value)\r\n                                                    ? 'default'\r\n                                                    : 'outline'\r\n                                            }\r\n                                            onClick={() => {\r\n                                                const updated =\r\n                                                    field.value.includes(\r\n                                                        day.value,\r\n                                                    )\r\n                                                        ? field.value.filter(\r\n                                                              (d) =>\r\n                                                                  d !==\r\n                                                                  day.value,\r\n                                                          )\r\n                                                        : [\r\n                                                              ...field.value,\r\n                                                              day.value,\r\n                                                          ];\r\n\r\n                                                field.onChange(updated);\r\n                                            }}\r\n                                        >\r\n                                            {day.label}\r\n                                        </Button>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-3 items-center gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Grace (min)</Label>\r\n                            <Controller\r\n                                name=\"gracePeriodMinutes\"\r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        value={String(field.value)}\r\n                                        onValueChange={(v) =>\r\n                                            field.onChange(Number(v))\r\n                                        }\r\n                                    >\r\n                                        <SelectTrigger className=\"w-full\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {MINUTE_OPTIONS.map((m) => (\r\n                                                <SelectItem\r\n                                                    key={m}\r\n                                                    value={String(m)}\r\n                                                >\r\n                                                    {m} min\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Late After (min)</Label>\r\n                            <Controller\r\n                                name=\"lateAfterMinutes\"\r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        value={String(field.value)}\r\n                                        onValueChange={(v) =>\r\n                                            field.onChange(Number(v))\r\n                                        }\r\n                                    >\r\n                                        <SelectTrigger className=\"w-full\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {MINUTE_OPTIONS.map((m) => (\r\n                                                <SelectItem\r\n                                                    key={m}\r\n                                                    value={String(m)}\r\n                                                >\r\n                                                    {m} min\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Half Day After</Label>\r\n                            <Controller\r\n                                name=\"halfDayAfterMinutes\"\r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        value={String(field.value)}\r\n                                        onValueChange={(v) =>\r\n                                            field.onChange(Number(v))\r\n                                        }\r\n                                    >\r\n                                        <SelectTrigger className=\"w-full\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {[120, 180, 240, 300].map((m) => (\r\n                                                <SelectItem\r\n                                                    key={m}\r\n                                                    value={String(m)}\r\n                                                >\r\n                                                    {m / 60} Hr\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between rounded-lg border p-3\">\r\n                        <Label>OT Enabled</Label>\r\n                        <Controller\r\n                            name=\"otEnabled\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Switch\r\n                                    checked={field.value}\r\n                                    onCheckedChange={field.onChange}\r\n                                />\r\n                            )}\r\n                        />\r\n                    </div>\r\n\r\n                    <Button\r\n                        type=\"submit\"\r\n                        disabled={isLoading}\r\n                        className=\"w-full\"\r\n                    >\r\n                        {isLoading ? <Spinner /> : 'Create Shift'}\r\n                    </Button>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\root-shifting.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\shift-card-skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\shift-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\shift-delete-alert.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[982,985],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[982,985],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useDeleteShiftMutation } from '@/redux/features/shift/shiftApi';\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from '@/components/ui/alert-dialog';\r\nimport { toast } from 'sonner';\r\nimport { DropdownMenuItem } from '../ui/dropdown-menu';\r\nimport { Trash2 } from 'lucide-react';\r\nimport { useState } from 'react';\r\nimport { Spinner } from '../ui/spinner';\r\n\r\nexport default function ShiftDeleteAlert({ shiftId }: { shiftId: string }) {\r\n    const [openDelete, setOpenDelete] = useState(false);\r\n\r\n    const [deleteShift, { isLoading: isDeleting }] = useDeleteShiftMutation();\r\n\r\n    const handleDelete = async () => {\r\n        try {\r\n            await deleteShift(shiftId).unwrap();\r\n            toast.success('Shift deleted successfully');\r\n            setOpenDelete(false);\r\n        } catch (err: any) {\r\n            toast.error(\r\n                err?.data?.message || err?.message || 'Something went wrong.',\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <DropdownMenuItem\r\n                className=\"text-destructive\"\r\n                onSelect={(e) => {\r\n                    e.preventDefault();\r\n                    setOpenDelete(true);\r\n                }}\r\n            >\r\n                <Trash2 className=\" h-4 w-4\" />\r\n                Delete\r\n            </DropdownMenuItem>\r\n\r\n            <AlertDialog open={openDelete} onOpenChange={setOpenDelete}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>\r\n                            Are you absolutely sure?\r\n                        </AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            This action cannot be undone. This will permanently\r\n                            delete this shift.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel disabled={isDeleting}>\r\n                            Cancel\r\n                        </AlertDialogCancel>\r\n\r\n                        <AlertDialogAction\r\n                            onClick={handleDelete}\r\n                            disabled={isDeleting}\r\n                        >\r\n                            {isDeleting ? <Spinner /> : 'Delete'}\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\shift-off-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2203,2206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2203,2206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":86,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":86,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2568,2571],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2568,2571],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { format } from 'date-fns';\r\nimport { CalendarIcon, CalendarOff, X } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Calendar } from '@/components/ui/calendar';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { ScrollArea } from '@/components/ui/scroll-area';\r\n\r\nimport {\r\n    useGetShiftOffDatesQuery,\r\n    useAddShiftOffDatesMutation,\r\n    useRemoveShiftOffDatesMutation,\r\n} from '@/redux/features/shift/shiftApi';\r\n\r\ninterface ShiftOffDialogProps {\r\n    shiftId: string;\r\n    shiftName: string;\r\n}\r\n\r\nexport default function ShiftOffDialog({\r\n    shiftId,\r\n    shiftName,\r\n}: ShiftOffDialogProps) {\r\n    const [open, setOpen] = useState(false);\r\n    const [selectedDates, setSelectedDates] = useState<Date[]>([]);\r\n    const [reason, setReason] = useState('');\r\n\r\n    const { data, isLoading: isLoadingDates } = useGetShiftOffDatesQuery(\r\n        shiftId,\r\n        {\r\n            skip: !open,\r\n        },\r\n    );\r\n\r\n    const [addOffDates, { isLoading: isAdding }] =\r\n        useAddShiftOffDatesMutation();\r\n    const [removeOffDates, { isLoading: isRemoving }] =\r\n        useRemoveShiftOffDatesMutation();\r\n\r\n    const existingDates = data?.data?.dates || [];\r\n\r\n    const handleAddDates = async () => {\r\n        if (selectedDates.length === 0) {\r\n            toast.error('Please select at least one date');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const dateStrings = selectedDates.map((d) => d.toISOString());\r\n            await addOffDates({\r\n                shiftId,\r\n                dates: dateStrings,\r\n                reason: reason || undefined,\r\n            }).unwrap();\r\n\r\n            toast.success('Off dates added successfully');\r\n            // Keep the dates selected so user can see what was added\r\n            setReason('');\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to add off dates');\r\n        }\r\n    };\r\n\r\n    const handleRemoveDate = async (date: string) => {\r\n        try {\r\n            await removeOffDates({\r\n                shiftId,\r\n                dates: [date],\r\n            }).unwrap();\r\n            toast.success('Off date removed');\r\n        } catch (err: any) {\r\n            toast.error(err?.data?.message || 'Failed to remove off date');\r\n        }\r\n    };\r\n\r\n    const handleDayClick = (day: Date) => {\r\n        // Don't allow selecting dates that are already saved\r\n        const isAlreadyExisting = existingDates.some(\r\n            (d: string) => new Date(d).toDateString() === day.toDateString(),\r\n        );\r\n        if (isAlreadyExisting) {\r\n            toast.info('This date is already an off day');\r\n            return;\r\n        }\r\n\r\n        setSelectedDates((prev) => {\r\n            const isSelected = prev.some(\r\n                (d) => d.toDateString() === day.toDateString(),\r\n            );\r\n            if (isSelected) {\r\n                return prev.filter(\r\n                    (d) => d.toDateString() !== day.toDateString(),\r\n                );\r\n            }\r\n            return [...prev, day];\r\n        });\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"default\">\r\n                    <CalendarOff className=\"h-4 w-4\" />\r\n                    Set Off Days\r\n                </Button>\r\n            </DialogTrigger>\r\n\r\n            <DialogContent className=\"w-full! max-w-2xl! max-h-[80vh] overflow-y-auto overflow-x-hidden\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"flex items-center gap-2\">\r\n                        <CalendarOff className=\"h-5 w-5\" />\r\n                        {shiftName} - Off Days\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        Select dates when this shift will be off. Staff cannot\r\n                        check-in on these days.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <div className=\"grid grid-cols-2 gap-6\">\r\n                    {/* Calendar Section */}\r\n                    <div className=\"space-y-4\">\r\n                        <Label className=\"text-sm font-medium\">\r\n                            Select New Off Dates\r\n                        </Label>\r\n                        <Calendar\r\n                            mode=\"multiple\"\r\n                            selected={selectedDates}\r\n                            onDayClick={handleDayClick}\r\n                            disabled={(date) =>\r\n                                date < new Date(new Date().setHours(0, 0, 0, 0))\r\n                            }\r\n                            className=\"rounded-md border\"\r\n                        />\r\n\r\n                        {selectedDates.length > 0 && (\r\n                            <div className=\"space-y-2\">\r\n                                <Label className=\"text-sm\">\r\n                                    Selected ({selectedDates.length})\r\n                                </Label>\r\n                                <div className=\"flex flex-wrap gap-1\">\r\n                                    {selectedDates.map((d) => (\r\n                                        <Badge\r\n                                            key={d.toISOString()}\r\n                                            variant=\"secondary\"\r\n                                            className=\"cursor-pointer\"\r\n                                            onClick={() => handleDayClick(d)}\r\n                                        >\r\n                                            {format(d, 'dd MMM')}\r\n                                            <X className=\"h-3 w-3 ml-1\" />\r\n                                        </Badge>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label className=\"text-sm\">Reason (optional)</Label>\r\n                            <Textarea\r\n                                value={reason}\r\n                                onChange={(e) => setReason(e.target.value)}\r\n                                placeholder=\"e.g., Eid holiday, Office renovation...\"\r\n                                rows={2}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Existing Off Dates */}\r\n                    <div className=\"space-y-4\">\r\n                        <Label className=\"text-sm font-medium\">\r\n                            Current Off Dates\r\n                        </Label>\r\n                        {isLoadingDates ? (\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                Loading...\r\n                            </p>\r\n                        ) : existingDates.length === 0 ? (\r\n                            <div className=\"rounded-md border border-dashed p-6 text-center\">\r\n                                <CalendarOff className=\"h-8 w-8 mx-auto text-muted-foreground mb-2\" />\r\n                                <p className=\"text-sm text-muted-foreground\">\r\n                                    No off dates set\r\n                                </p>\r\n                            </div>\r\n                        ) : (\r\n                            <ScrollArea className=\"h-[280px] rounded-md border p-3\">\r\n                                <div className=\"space-y-2\">\r\n                                    {existingDates.map((date: string) => (\r\n                                        <div\r\n                                            key={date}\r\n                                            className=\"flex items-center justify-between rounded-md border p-2 bg-muted/30\"\r\n                                        >\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <CalendarIcon className=\"h-4 w-4 text-muted-foreground\" />\r\n                                                <span className=\"text-sm\">\r\n                                                    {format(\r\n                                                        new Date(date),\r\n                                                        'EEE, dd MMM yyyy',\r\n                                                    )}\r\n                                                </span>\r\n                                            </div>\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"icon\"\r\n                                                className=\"h-7 w-7 text-destructive hover:text-destructive\"\r\n                                                disabled={isRemoving}\r\n                                                onClick={() =>\r\n                                                    handleRemoveDate(date)\r\n                                                }\r\n                                            >\r\n                                                <X className=\"h-4 w-4\" />\r\n                                            </Button>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </ScrollArea>\r\n                        )}\r\n\r\n                        {data?.data?.reason && (\r\n                            <div className=\"text-sm text-muted-foreground bg-muted/30 p-2 rounded-md\">\r\n                                <strong>Reason:</strong> {data.data.reason}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <DialogFooter className=\"gap-2\">\r\n                    <Button variant=\"outline\" onClick={() => setOpen(false)}>\r\n                        Close\r\n                    </Button>\r\n                    <Button\r\n                        onClick={handleAddDates}\r\n                        disabled={selectedDates.length === 0 || isAdding}\r\n                    >\r\n                        {isAdding ? 'Adding...' : 'Add Off Dates'}\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\shift-off-notice.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\shift-off-notice.tsx:30:13\n  28 |     useEffect(() => {\n  29 |         if (!isTodayOff) {\n> 30 |             setDismissed(true);\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  31 |             return;\n  32 |         }\n  33 |","line":30,"column":13,"nodeType":null,"endLine":30,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { CalendarOff, X } from 'lucide-react';\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    useGetMyShiftOffDatesQuery,\r\n    useGetMyShiftQuery,\r\n} from '@/redux/features/shift/shiftApi';\r\nimport { isToday } from 'date-fns';\r\n\r\nconst DISMISSED_KEY = 'shift-off-notice-dismissed';\r\n\r\nexport default function ShiftOffNotice() {\r\n    const [dismissed, setDismissed] = useState(true);\r\n    const { data: shiftData } = useGetMyShiftQuery({});\r\n    const { data: offDatesData, isLoading } = useGetMyShiftOffDatesQuery({});\r\n\r\n    const shiftName = shiftData?.data?.shift?.name || 'Your shift';\r\n    const offDates = offDatesData?.data?.dates || [];\r\n    const reason = offDatesData?.data?.reason;\r\n\r\n    // Check if today is an off day\r\n    const isTodayOff = offDates.some((d: string) => isToday(new Date(d)));\r\n\r\n    // Check localStorage for today's dismissal\r\n    useEffect(() => {\r\n        if (!isTodayOff) {\r\n            setDismissed(true);\r\n            return;\r\n        }\r\n\r\n        const today = new Date().toDateString();\r\n        const dismissedDate = localStorage.getItem(DISMISSED_KEY);\r\n\r\n        if (dismissedDate === today) {\r\n            setDismissed(true);\r\n        } else {\r\n            setDismissed(false);\r\n        }\r\n    }, [isTodayOff]);\r\n\r\n    const handleDismiss = () => {\r\n        const today = new Date().toDateString();\r\n        localStorage.setItem(DISMISSED_KEY, today);\r\n        setDismissed(true);\r\n    };\r\n\r\n    if (isLoading || !isTodayOff || dismissed) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <Alert\r\n            variant=\"destructive\"\r\n            className=\"relative mb-4 border-orange-500/50 bg-orange-500/10 text-orange-700 dark:text-orange-300\"\r\n        >\r\n            <CalendarOff className=\"h-5 w-5\" />\r\n            <AlertTitle className=\"font-semibold\">\r\n                {shiftName} is Off Today\r\n            </AlertTitle>\r\n            <AlertDescription>\r\n                {reason\r\n                    ? `Reason: ${reason}`\r\n                    : 'You are not required to check-in today. Enjoy your day off!'}\r\n            </AlertDescription>\r\n            <Button\r\n                variant=\"ghost\"\r\n                size=\"icon\"\r\n                className=\"absolute top-2 right-2 h-6 w-6 text-orange-700 dark:text-orange-300 hover:bg-orange-500/20\"\r\n                onClick={handleDismiss}\r\n            >\r\n                <X className=\"h-4 w-4\" />\r\n            </Button>\r\n        </Alert>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\shifting\\update-shift.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1877,1880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1877,1880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":195,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6250,6253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6250,6253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { toast } from 'sonner';\r\n\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from '@/components/ui/select';\r\n\r\nimport { useUpdateShiftMutation } from '@/redux/features/shift/shiftApi';\r\nimport { useGetAllBranchesQuery } from '@/redux/features/branch/branchApi';\r\nimport { Spinner } from '../ui/spinner';\r\n\r\nimport { useForm, Controller } from 'react-hook-form';\r\nimport { z } from 'zod';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\n\r\nconst WEEK_DAYS = [\r\n    { label: 'Sun', value: 0 },\r\n    { label: 'Mon', value: 1 },\r\n    { label: 'Tue', value: 2 },\r\n    { label: 'Wed', value: 3 },\r\n    { label: 'Thu', value: 4 },\r\n    { label: 'Fri', value: 5 },\r\n    { label: 'Sat', value: 6 },\r\n];\r\n\r\nconst MINUTE_OPTIONS = [5, 10, 15, 20, 30, 45, 60];\r\n\r\nconst updateShiftSchema = z.object({\r\n    name: z.string().min(1, 'Shift name is required'),\r\n    code: z.string().min(1, 'Code is required'),\r\n    branchId: z.string().min(1, 'Branch is required'),\r\n\r\n    startTime: z.string().min(1, 'Start time required'),\r\n    endTime: z.string().min(1, 'End time required'),\r\n\r\n    otEnabled: z.boolean(),\r\n\r\n    workDays: z.array(z.number()).min(1, 'Select at least one day'),\r\n    gracePeriodMinutes: z.number(),\r\n    lateAfterMinutes: z.number(),\r\n    halfDayAfterMinutes: z.number(),\r\n});\r\n\r\ntype UpdateShiftFormData = z.infer<typeof updateShiftSchema>;\r\n\r\ninterface UpdateShiftProps {\r\n    open: boolean;\r\n    setOpen: (v: boolean) => void;\r\n    shift: any;\r\n}\r\n\r\nexport default function UpdateShift({\r\n    open,\r\n    setOpen,\r\n    shift,\r\n}: UpdateShiftProps) {\r\n    const { data: branchData } = useGetAllBranchesQuery(undefined);\r\n    const [updateShift, { isLoading }] = useUpdateShiftMutation();\r\n\r\n    const form = useForm<UpdateShiftFormData>({\r\n        resolver: zodResolver(updateShiftSchema),\r\n        defaultValues: {\r\n            name: '',\r\n            code: '',\r\n            branchId: '',\r\n\r\n            startTime: '',\r\n            endTime: '',\r\n\r\n            otEnabled: false,\r\n\r\n            workDays: [],\r\n            gracePeriodMinutes: 10,\r\n            lateAfterMinutes: 10,\r\n            halfDayAfterMinutes: 240,\r\n        },\r\n    });\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        control,\r\n        reset,\r\n        formState: { errors },\r\n    } = form;\r\n\r\n    useEffect(() => {\r\n        if (shift) {\r\n            reset({\r\n                name: shift.name,\r\n                code: shift.code,\r\n                branchId: shift.branchId._id,\r\n\r\n                startTime: shift.startTime,\r\n                endTime: shift.endTime,\r\n\r\n                otEnabled: shift.otEnabled,\r\n\r\n                workDays: shift.workDays,\r\n                gracePeriodMinutes: shift.gracePeriodMinutes,\r\n                lateAfterMinutes: shift.lateAfterMinutes,\r\n                halfDayAfterMinutes: shift.halfDayAfterMinutes,\r\n            });\r\n        }\r\n    }, [shift, reset]);\r\n\r\n    const onSubmit = async (data: UpdateShiftFormData) => {\r\n        try {\r\n            if (data.startTime >= data.endTime) {\r\n                toast.error('End time must be after start time');\r\n                return;\r\n            }\r\n\r\n            await updateShift({\r\n                id: shift._id,\r\n                data: {\r\n                    ...data,\r\n                    code: data.code.toUpperCase(),\r\n                },\r\n            }).unwrap();\r\n\r\n            toast.success('Shift updated successfully');\r\n            setOpen(false);\r\n        } catch (err) {\r\n            toast.error((err as Error).message || 'Update failed');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogContent>\r\n                <DialogHeader>\r\n                    <DialogTitle>Edit Shift</DialogTitle>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Shift Name *</Label>\r\n                        <Input {...register('name')} />\r\n                        {errors.name && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.name.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Code *</Label>\r\n                        <Input\r\n                            {...register('code')}\r\n                            onChange={(e) =>\r\n                                form.setValue(\r\n                                    'code',\r\n                                    e.target.value.toUpperCase()\r\n                                )\r\n                            }\r\n                        />\r\n                        {errors.code && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.code.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Branch *</Label>\r\n                        <Controller\r\n                            name=\"branchId\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    value={field.value}\r\n                                    onValueChange={field.onChange}\r\n                                >\r\n                                    <SelectTrigger className=\"w-full\">\r\n                                        <SelectValue placeholder=\"Select branch\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {branchData?.branches?.map((b: any) => (\r\n                                            <SelectItem\r\n                                                key={b._id}\r\n                                                value={b._id}\r\n                                            >\r\n                                                {b.name}\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            )}\r\n                        />\r\n                        {errors.branchId && (\r\n                            <p className=\"text-sm text-red-500\">\r\n                                {errors.branchId.message}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Start Time *</Label>\r\n                            <Input\r\n                                type=\"time\"\r\n                                {...register('startTime')}\r\n                                className=\"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>End Time *</Label>\r\n                            <Input\r\n                                type=\"time\"\r\n                                {...register('endTime')}\r\n                                className=\"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid gap-2\">\r\n                        <Label>Work Days *</Label>\r\n                        <Controller\r\n                            name=\"workDays\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                                    {WEEK_DAYS.map((day) => (\r\n                                        <Button\r\n                                            key={day.value}\r\n                                            type=\"button\"\r\n                                            size=\"sm\"\r\n                                            variant={\r\n                                                field.value.includes(day.value)\r\n                                                    ? 'default'\r\n                                                    : 'outline'\r\n                                            }\r\n                                            onClick={() => {\r\n                                                const updated =\r\n                                                    field.value.includes(\r\n                                                        day.value\r\n                                                    )\r\n                                                        ? field.value.filter(\r\n                                                              (d) =>\r\n                                                                  d !==\r\n                                                                  day.value\r\n                                                          )\r\n                                                        : [\r\n                                                              ...field.value,\r\n                                                              day.value,\r\n                                                          ];\r\n\r\n                                                field.onChange(updated);\r\n                                            }}\r\n                                        >\r\n                                            {day.label}\r\n                                        </Button>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-3 gap-4\">\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Grace (min)</Label>\r\n                            <Controller\r\n                                name=\"gracePeriodMinutes\"\r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        value={String(field.value)}\r\n                                        onValueChange={(v) =>\r\n                                            field.onChange(Number(v))\r\n                                        }\r\n                                    >\r\n                                        <SelectTrigger className=\"w-full\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {MINUTE_OPTIONS.map((m) => (\r\n                                                <SelectItem\r\n                                                    key={m}\r\n                                                    value={String(m)}\r\n                                                >\r\n                                                    {m} min\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Late After (min)</Label>\r\n                            <Controller\r\n                                name=\"lateAfterMinutes\"\r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        value={String(field.value)}\r\n                                        onValueChange={(v) =>\r\n                                            field.onChange(Number(v))\r\n                                        }\r\n                                    >\r\n                                        <SelectTrigger className=\"w-full\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {MINUTE_OPTIONS.map((m) => (\r\n                                                <SelectItem\r\n                                                    key={m}\r\n                                                    value={String(m)}\r\n                                                >\r\n                                                    {m} min\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-2\">\r\n                            <Label>Half Day After</Label>\r\n                            <Controller\r\n                                name=\"halfDayAfterMinutes\"\r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        value={String(field.value)}\r\n                                        onValueChange={(v) =>\r\n                                            field.onChange(Number(v))\r\n                                        }\r\n                                    >\r\n                                        <SelectTrigger className=\"w-full\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {[120, 180, 240, 300].map((m) => (\r\n                                                <SelectItem\r\n                                                    key={m}\r\n                                                    value={String(m)}\r\n                                                >\r\n                                                    {m / 60} Hr\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-between rounded-lg border p-3\">\r\n                        <Label>OT Enabled</Label>\r\n                        <Controller\r\n                            name=\"otEnabled\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Switch\r\n                                    checked={field.value}\r\n                                    onCheckedChange={field.onChange}\r\n                                />\r\n                            )}\r\n                        />\r\n                    </div>\r\n\r\n                    <Button\r\n                        type=\"submit\"\r\n                        disabled={isLoading}\r\n                        className=\"w-full\"\r\n                    >\r\n                        {isLoading ? <Spinner /> : 'Update Shift'}\r\n                    </Button>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\sidebar\\app-sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\sidebar\\nav-main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\sidebar\\nav-user.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\sidebar\\notification.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\sidebar\\site-header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\staff\\edit-staff-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2252,2255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2252,2255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Role } from \"@/constants/role\";\r\nimport { useGetAllBranchesQuery } from \"@/redux/features/branch/branchApi\";\r\nimport { useUpdateStaffMutation } from \"@/redux/features/staff/staffApi\";\r\nimport IStaff from \"@/types/staff.type\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { Edit, Loader2 } from \"lucide-react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Controller, useForm } from \"react-hook-form\";\r\nimport { toast } from \"sonner\";\r\nimport { z } from \"zod\";\r\n\r\nconst formSchema = z.object({\r\n    branchId: z.string().optional(),\r\n    department: z.string().min(1, \"Department is required\"),\r\n    designation: z.string().min(1, \"Designation is required\"),\r\n    role: z.string().optional(),\r\n    status: z.enum([\"active\", \"inactive\", \"terminated\"]),\r\n    salary: z.coerce.number().min(0, \"Salary must be positive\"),\r\n    salaryVisibleToEmployee: z.boolean().default(true),\r\n    // Bank Account Fields\r\n    bank: z\r\n        .object({\r\n            bankName: z.string().optional(),\r\n            accountNumber: z.string().optional(),\r\n            accountHolderName: z.string().optional(),\r\n            branch: z.string().optional(),\r\n            routingNumber: z.string().optional(),\r\n        })\r\n        .optional(),\r\n});\r\n\r\ntype FormData = z.infer<typeof formSchema>;\r\n\r\ninterface EditStaffDialogProps {\r\n    staff: IStaff;\r\n    currentShiftId?: string;\r\n}\r\n\r\nexport function EditStaffDialog({ staff }: EditStaffDialogProps) {\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const { data: branchesData } = useGetAllBranchesQuery({});\r\n    const [updateStaff, { isLoading }] = useUpdateStaffMutation();\r\n\r\n    const form = useForm<FormData>({\r\n        resolver: zodResolver(formSchema) as any,\r\n        defaultValues: {\r\n            branchId: staff.branchId || \"\",\r\n            department: staff.department || \"\",\r\n            designation: staff.designation || \"\",\r\n            role: staff.user?.role || Role.STAFF,\r\n            status: staff.status || \"active\",\r\n            salary: staff.salary || 0,\r\n            salaryVisibleToEmployee: staff.salaryVisibleToEmployee !== false,\r\n            bank: {\r\n                bankName: staff.bank?.bankName || \"\",\r\n                accountNumber: staff.bank?.accountNumber || \"\",\r\n                accountHolderName: staff.bank?.accountHolderName || \"\",\r\n                branch: staff.bank?.branch || \"\",\r\n                routingNumber: staff.bank?.routingNumber || \"\",\r\n            },\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (open) {\r\n            form.reset({\r\n                branchId: staff.branchId || \"\",\r\n                department: staff.department || \"\",\r\n                designation: staff.designation || \"\",\r\n                role: staff.user?.role || Role.STAFF,\r\n                status: staff.status || \"active\",\r\n                salary: staff.salary || 0,\r\n                salaryVisibleToEmployee:\r\n                    staff.salaryVisibleToEmployee !== false,\r\n                bank: {\r\n                    bankName: staff.bank?.bankName || \"\",\r\n                    accountNumber: staff.bank?.accountNumber || \"\",\r\n                    accountHolderName: staff.bank?.accountHolderName || \"\",\r\n                    branch: staff.bank?.branch || \"\",\r\n                    routingNumber: staff.bank?.routingNumber || \"\",\r\n                },\r\n            });\r\n        }\r\n    }, [open, staff, form]);\r\n\r\n    async function onSubmit(values: FormData) {\r\n        try {\r\n            const payload = {\r\n                ...values,\r\n            };\r\n\r\n            await updateStaff({\r\n                id: staff.staffId,\r\n                data: payload,\r\n            }).unwrap();\r\n\r\n            toast.success(\"Staff profile updated successfully\");\r\n            setOpen(false);\r\n        } catch (error: unknown) {\r\n            const err = error as { data?: { message?: string } };\r\n            toast.error(err?.data?.message || \"Failed to update profile\");\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"outline\" size=\"sm\">\r\n                    <Edit className=\"h-4 w-4 mr-2\" />\r\n                    Edit Profile\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[600px] max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Edit Staff Profile</DialogTitle>\r\n                    <DialogDescription>\r\n                        Update employment details, role, salary and bank\r\n                        information.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form\r\n                    onSubmit={form.handleSubmit(onSubmit)}\r\n                    className=\"space-y-6\"\r\n                >\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                        {/* Department */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"department\">Department</Label>\r\n                            <Input\r\n                                id=\"department\"\r\n                                {...form.register(\"department\")}\r\n                            />\r\n                            {form.formState.errors.department && (\r\n                                <p className=\"text-sm text-destructive\">\r\n                                    {form.formState.errors.department.message}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Designation */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"designation\">Designation</Label>\r\n                            <Input\r\n                                id=\"designation\"\r\n                                {...form.register(\"designation\")}\r\n                            />\r\n                            {form.formState.errors.designation && (\r\n                                <p className=\"text-sm text-destructive\">\r\n                                    {form.formState.errors.designation.message}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Branch */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Branch</Label>\r\n                            <Controller\r\n                                control={form.control}\r\n                                name=\"branchId\"\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        onValueChange={field.onChange}\r\n                                        value={field.value}\r\n                                    >\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Select branch\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {branchesData?.branches?.map(\r\n                                                (branch: {\r\n                                                    _id: string;\r\n                                                    name: string;\r\n                                                }) => (\r\n                                                    <SelectItem\r\n                                                        key={branch._id}\r\n                                                        value={branch._id}\r\n                                                    >\r\n                                                        {branch.name}\r\n                                                    </SelectItem>\r\n                                                ),\r\n                                            )}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                            {form.formState.errors.branchId && (\r\n                                <p className=\"text-sm text-destructive\">\r\n                                    {form.formState.errors.branchId.message}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Status */}\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Status</Label>\r\n                            <Controller\r\n                                control={form.control}\r\n                                name=\"status\"\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        onValueChange={field.onChange}\r\n                                        value={field.value}\r\n                                    >\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Select status\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"active\">\r\n                                                Active\r\n                                            </SelectItem>\r\n                                            <SelectItem value=\"inactive\">\r\n                                                Inactive\r\n                                            </SelectItem>\r\n                                            <SelectItem value=\"terminated\">\r\n                                                Terminated\r\n                                            </SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"border-t pt-4\">\r\n                        <h4 className=\"text-sm font-medium mb-4\">\r\n                            Role & Permissions\r\n                        </h4>\r\n                        <div className=\"space-y-2\">\r\n                            <Label>System Role</Label>\r\n                            <Controller\r\n                                control={form.control}\r\n                                name=\"role\"\r\n                                render={({ field }) => (\r\n                                    <Select\r\n                                        onValueChange={field.onChange}\r\n                                        value={field.value}\r\n                                    >\r\n                                        <SelectTrigger>\r\n                                            <SelectValue placeholder=\"Select role\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value={Role.STAFF}>\r\n                                                Staff\r\n                                            </SelectItem>\r\n                                            <SelectItem\r\n                                                value={Role.TEAM_LEADER}\r\n                                            >\r\n                                                Team Leader\r\n                                            </SelectItem>\r\n                                            <SelectItem value={Role.HR_MANAGER}>\r\n                                                HR Manager\r\n                                            </SelectItem>\r\n                                            <SelectItem value={Role.ADMIN}>\r\n                                                Admin\r\n                                            </SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"border-t pt-4\">\r\n                        <h4 className=\"text-sm font-medium mb-4\">\r\n                            Compensation\r\n                        </h4>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"salary\">\r\n                                    Base Salary (Monthly)\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"salary\"\r\n                                    type=\"number\"\r\n                                    {...form.register(\"salary\")}\r\n                                />\r\n                                {form.formState.errors.salary && (\r\n                                    <p className=\"text-sm text-destructive\">\r\n                                        {form.formState.errors.salary.message}\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"md:mt-1\">\r\n                                <Controller\r\n                                    control={form.control}\r\n                                    name=\"salaryVisibleToEmployee\"\r\n                                    render={({ field }) => (\r\n                                        <div className=\"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm h-full\">\r\n                                            <div className=\"space-y-0.5\">\r\n                                                <Label className=\"text-base\">\r\n                                                    Visible to Staff\r\n                                                </Label>\r\n                                                <div className=\"text-[0.8rem] text-muted-foreground\">\r\n                                                    Can staff see this salary?\r\n                                                </div>\r\n                                            </div>\r\n                                            <Switch\r\n                                                checked={field.value}\r\n                                                onCheckedChange={field.onChange}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Bank Account Section */}\r\n                    <div className=\"border-t pt-4\">\r\n                        <h4 className=\"text-sm font-medium mb-4\">\r\n                            Bank Account Details\r\n                        </h4>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"bankName\">Bank Name</Label>\r\n                                <Input\r\n                                    id=\"bankName\"\r\n                                    placeholder=\"e.g., Dutch Bangla Bank\"\r\n                                    {...form.register(\"bank.bankName\")}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"accountNumber\">\r\n                                    Account Number\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"accountNumber\"\r\n                                    placeholder=\"e.g., 1234567890\"\r\n                                    {...form.register(\"bank.accountNumber\")}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2 md:col-span-2\">\r\n                                <Label htmlFor=\"accountHolderName\">\r\n                                    Account Holder Name\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"accountHolderName\"\r\n                                    placeholder=\"Name as per bank account\"\r\n                                    {...form.register(\"bank.accountHolderName\")}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"branch\">Branch</Label>\r\n                                <Input\r\n                                    id=\"branch\"\r\n                                    placeholder=\"Branch Name\"\r\n                                    {...form.register(\"bank.branch\")}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"routingNumber\">\r\n                                    Routing Number\r\n                                </Label>\r\n                                <Input\r\n                                    id=\"routingNumber\"\r\n                                    placeholder=\"Routing Number\"\r\n                                    {...form.register(\"bank.routingNumber\")}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DialogFooter>\r\n                        <Button\r\n                            type=\"button\"\r\n                            variant=\"secondary\"\r\n                            onClick={() => setOpen(false)}\r\n                        >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button type=\"submit\" disabled={isLoading}>\r\n                            {isLoading && (\r\n                                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            )}\r\n                            Save Changes\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\staff\\salary-pin-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Lock' is defined but never used.","line":19,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2062,2065],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2062,2065],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2344,2347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2344,2347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2715,2718],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2715,2718],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from '@/components/ui/dialog';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n    useForgotSalaryPinMutation,\r\n    useSetSalaryPinMutation,\r\n    useVerifySalaryPinMutation,\r\n} from '@/redux/features/staff/staffApi';\r\nimport { Loader2, Lock, ArrowLeft } from 'lucide-react';\r\nimport { useState } from 'react';\r\nimport { toast } from 'sonner';\r\n\r\ninterface SalaryPinDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    staffId: string;\r\n    isPinSet: boolean;\r\n    onSuccess: () => void;\r\n}\r\n\r\nexport function SalaryPinDialog({\r\n    open,\r\n    onOpenChange,\r\n    staffId,\r\n    isPinSet,\r\n    onSuccess,\r\n}: SalaryPinDialogProps) {\r\n    const [pin, setPin] = useState('');\r\n    const [confirmPin, setConfirmPin] = useState('');\r\n    const [mode, setMode] = useState<'verify' | 'set' | 'forgot'>(\r\n        isPinSet ? 'verify' : 'set',\r\n    );\r\n\r\n    const [verifySalaryPin, { isLoading: isVerifying }] =\r\n        useVerifySalaryPinMutation();\r\n    const [setSalaryPin, { isLoading: isSetting }] = useSetSalaryPinMutation();\r\n    const [forgotSalaryPin, { isLoading: isSendingEmail }] =\r\n        useForgotSalaryPinMutation();\r\n\r\n    const isLoading = isVerifying || isSetting || isSendingEmail;\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (mode === 'set') {\r\n            if (pin.length < 4) {\r\n                toast.error('PIN must be at least 4 digits');\r\n                return;\r\n            }\r\n            if (pin !== confirmPin) {\r\n                toast.error('PINs do not match');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                await setSalaryPin({ staffId, pin }).unwrap();\r\n                toast.success('PIN set successfully');\r\n                onSuccess();\r\n            } catch (error: any) {\r\n                toast.error(error.data?.message || 'Failed to set PIN');\r\n            }\r\n        } else if (mode === 'verify') {\r\n            try {\r\n                await verifySalaryPin({ staffId, pin }).unwrap();\r\n                onSuccess();\r\n            } catch (error: any) {\r\n                toast.error(error.data?.message || 'Invalid PIN');\r\n                setPin('');\r\n            }\r\n        } else if (mode === 'forgot') {\r\n            try {\r\n                await forgotSalaryPin({ staffId }).unwrap();\r\n                toast.success('Reset link sent to your email');\r\n                setMode('verify');\r\n            } catch (error: any) {\r\n                toast.error(error.data?.message || 'Failed to send reset link');\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>\r\n                        {mode === 'set' && 'Set Salary PIN'}\r\n                        {mode === 'verify' && 'Enter Salary PIN'}\r\n                        {mode === 'forgot' && 'Reset Salary PIN'}\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        {mode === 'set' &&\r\n                            'Set a secure PIN to protect your salary information.'}\r\n                        {mode === 'verify' &&\r\n                            'Enter your PIN to view salary details.'}\r\n                        {mode === 'forgot' &&\r\n                            'We will send a password reset link to your registered email address.'}\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    {mode !== 'forgot' && (\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"pin\">PIN</Label>\r\n                            <Input\r\n                                id=\"pin\"\r\n                                type=\"password\"\r\n                                placeholder={\r\n                                    mode === 'set' ? 'Create PIN' : 'Enter PIN'\r\n                                }\r\n                                value={pin}\r\n                                onChange={(e) => setPin(e.target.value)}\r\n                                disabled={isLoading}\r\n                                autoFocus\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    {mode === 'set' && (\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"confirmPin\">Confirm PIN</Label>\r\n                            <Input\r\n                                id=\"confirmPin\"\r\n                                type=\"password\"\r\n                                placeholder=\"Confirm PIN\"\r\n                                value={confirmPin}\r\n                                onChange={(e) => setConfirmPin(e.target.value)}\r\n                                disabled={isLoading}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <DialogFooter className=\"flex-col !justify-start space-y-2 sm:space-y-0\">\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isLoading && (\r\n                                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                            )}\r\n                            {mode === 'set' && 'Set PIN & View'}\r\n                            {mode === 'verify' && 'Unlock'}\r\n                            {mode === 'forgot' && 'Send Reset Link'}\r\n                        </Button>\r\n\r\n                        {mode === 'verify' && (\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"link\"\r\n                                className=\"w-full text-xs text-muted-foreground\"\r\n                                onClick={() => setMode('forgot')}\r\n                            >\r\n                                Forgot PIN?\r\n                            </Button>\r\n                        )}\r\n\r\n                        {mode === 'forgot' && (\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"ghost\"\r\n                                className=\"w-full\"\r\n                                onClick={() => setMode('verify')}\r\n                            >\r\n                                <ArrowLeft className=\"mr-2 h-4 w-4\" />\r\n                                Back to Verification\r\n                            </Button>\r\n                        )}\r\n                    </DialogFooter>\r\n                </form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\staff\\view-salary-dialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2400,2403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2400,2403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from '@/components/ui/dialog';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Eye, EyeOff, Loader, DollarSign } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function ViewSalaryDialog() {\r\n    const [open, setOpen] = useState(false);\r\n    const [password, setPassword] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [salaryData, setSalaryData] = useState<{\r\n        salary: number;\r\n        salaryVisibleToEmployee: boolean;\r\n    } | null>(null);\r\n    const [showSalary, setShowSalary] = useState(false);\r\n\r\n    // Auto-hide salary after 30 seconds\r\n    useEffect(() => {\r\n        if (showSalary) {\r\n            const timer = setTimeout(() => {\r\n                setShowSalary(false);\r\n                setSalaryData(null);\r\n                toast.info('Salary information hidden for security');\r\n            }, 30000); // 30 seconds\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [showSalary]);\r\n\r\n    const handleVerify = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (!password) {\r\n            toast.error('Please enter your password');\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const response = await fetch('/api/staffs/view-salary', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify({ password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (!data.success) {\r\n                throw new Error(data.message || 'Failed to verify password');\r\n            }\r\n\r\n            setSalaryData(data.data);\r\n            setShowSalary(true);\r\n            setPassword('');\r\n            toast.success(\r\n                'Password verified! Salary will be hidden after 30 seconds.',\r\n            );\r\n        } catch (err: any) {\r\n            toast.error(err.message || 'Invalid password');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n        setPassword('');\r\n        setShowSalary(false);\r\n        setSalaryData(null);\r\n    };\r\n\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            onOpenChange={(isOpen) => {\r\n                if (!isOpen) handleClose();\r\n                else setOpen(true);\r\n            }}\r\n        >\r\n            <DialogTrigger asChild>\r\n                <Button variant=\"outline\">\r\n                    <DollarSign className=\" h-4 w-4\" />\r\n                    View My Salary\r\n                </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"max-w-md\">\r\n                <DialogHeader>\r\n                    <DialogTitle>View Salary Information</DialogTitle>\r\n                    <DialogDescription>\r\n                        Enter your password to view your salary details\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                {!showSalary ? (\r\n                    <form onSubmit={handleVerify} className=\"space-y-4\">\r\n                        <div>\r\n                            <Label htmlFor=\"password\">Password *</Label>\r\n                            <div className=\"relative\">\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    type={showPassword ? 'text' : 'password'}\r\n                                    value={password}\r\n                                    onChange={(e) =>\r\n                                        setPassword(e.target.value)\r\n                                    }\r\n                                    placeholder=\"Enter your password\"\r\n                                    required\r\n                                />\r\n                                <Button\r\n                                    type=\"button\"\r\n                                    variant=\"ghost\"\r\n                                    size=\"sm\"\r\n                                    className=\"absolute right-0 top-0 h-full px-3\"\r\n                                    onClick={() =>\r\n                                        setShowPassword(!showPassword)\r\n                                    }\r\n                                >\r\n                                    {showPassword ? (\r\n                                        <EyeOff className=\"h-4 w-4\" />\r\n                                    ) : (\r\n                                        <Eye className=\"h-4 w-4\" />\r\n                                    )}\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end gap-2\">\r\n                            <Button\r\n                                type=\"button\"\r\n                                variant=\"outline\"\r\n                                onClick={handleClose}\r\n                            >\r\n                                Cancel\r\n                            </Button>\r\n                            <Button type=\"submit\" disabled={isLoading}>\r\n                                {isLoading ? (\r\n                                    <>\r\n                                        <Loader className=\" h-4 w-4 animate-spin\" />\r\n                                        Verifying...\r\n                                    </>\r\n                                ) : (\r\n                                    'Verify & View'\r\n                                )}\r\n                            </Button>\r\n                        </div>\r\n                    </form>\r\n                ) : (\r\n                    <div className=\"space-y-4\">\r\n                        <Card className=\"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-800\">\r\n                            <CardContent className=\"pt-6\">\r\n                                <div className=\"text-center\">\r\n                                    <p className=\"text-sm text-muted-foreground mb-2\">\r\n                                        Your Monthly Salary\r\n                                    </p>\r\n                                    <p className=\"text-4xl font-bold text-green-600 dark:text-green-400\">\r\n                                        ৳{salaryData?.salary.toLocaleString()}\r\n                                    </p>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        <div className=\"p-4 bg-yellow-50 dark:bg-yellow-900/10 rounded-lg border border-yellow-200 dark:border-yellow-800\">\r\n                            <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\r\n                                🔒 <strong>Security Notice:</strong> This\r\n                                information will automatically hide after 30\r\n                                seconds for your security.\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end\">\r\n                            <Button onClick={handleClose}>Close</Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\calendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\chart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\collapsible.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":3,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport * as React from 'react';\r\nimport * as CollapsiblePrimitive from '@radix-ui/react-collapsible';\r\n\r\nconst Collapsible = CollapsiblePrimitive.Root;\r\n\r\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger;\r\n\r\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent;\r\n\r\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\sidebar.tsx:611:26\n  609 |   // Random width between 50 to 90%.\n  610 |   const width = React.useMemo(() => {\n> 611 |     return `${Math.floor(Math.random() * 40) + 50}%`\n      |                          ^^^^^^^^^^^^^ Cannot call impure function\n  612 |   }, [])\n  613 |\n  614 |   return (","line":611,"column":26,"nodeType":null,"endLine":611,"endColumn":39}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { PanelLeftIcon } from \"lucide-react\"\r\n\r\nimport { useIsMobile } from \"@/hooks/use-mobile\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Separator } from \"@/components/ui/separator\"\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetDescription,\r\n  SheetHeader,\r\n  SheetTitle,\r\n} from \"@/components/ui/sheet\"\r\nimport { Skeleton } from \"@/components/ui/skeleton\"\r\nimport {\r\n  Tooltip,\r\n  TooltipContent,\r\n  TooltipProvider,\r\n  TooltipTrigger,\r\n} from \"@/components/ui/tooltip\"\r\n\r\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\r\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\r\nconst SIDEBAR_WIDTH = \"16rem\"\r\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\r\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\r\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\r\n\r\ntype SidebarContextProps = {\r\n  state: \"expanded\" | \"collapsed\"\r\n  open: boolean\r\n  setOpen: (open: boolean) => void\r\n  openMobile: boolean\r\n  setOpenMobile: (open: boolean) => void\r\n  isMobile: boolean\r\n  toggleSidebar: () => void\r\n}\r\n\r\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\r\n\r\nfunction useSidebar() {\r\n  const context = React.useContext(SidebarContext)\r\n  if (!context) {\r\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nfunction SidebarProvider({\r\n  defaultOpen = true,\r\n  open: openProp,\r\n  onOpenChange: setOpenProp,\r\n  className,\r\n  style,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  defaultOpen?: boolean\r\n  open?: boolean\r\n  onOpenChange?: (open: boolean) => void\r\n}) {\r\n  const isMobile = useIsMobile()\r\n  const [openMobile, setOpenMobile] = React.useState(false)\r\n\r\n  // This is the internal state of the sidebar.\r\n  // We use openProp and setOpenProp for control from outside the component.\r\n  const [_open, _setOpen] = React.useState(defaultOpen)\r\n  const open = openProp ?? _open\r\n  const setOpen = React.useCallback(\r\n    (value: boolean | ((value: boolean) => boolean)) => {\r\n      const openState = typeof value === \"function\" ? value(open) : value\r\n      if (setOpenProp) {\r\n        setOpenProp(openState)\r\n      } else {\r\n        _setOpen(openState)\r\n      }\r\n\r\n      // This sets the cookie to keep the sidebar state.\r\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\r\n    },\r\n    [setOpenProp, open]\r\n  )\r\n\r\n  // Helper to toggle the sidebar.\r\n  const toggleSidebar = React.useCallback(() => {\r\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\r\n  }, [isMobile, setOpen, setOpenMobile])\r\n\r\n  // Adds a keyboard shortcut to toggle the sidebar.\r\n  React.useEffect(() => {\r\n    const handleKeyDown = (event: KeyboardEvent) => {\r\n      if (\r\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\r\n        (event.metaKey || event.ctrlKey)\r\n      ) {\r\n        event.preventDefault()\r\n        toggleSidebar()\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown)\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\r\n  }, [toggleSidebar])\r\n\r\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\r\n  // This makes it easier to style the sidebar with Tailwind classes.\r\n  const state = open ? \"expanded\" : \"collapsed\"\r\n\r\n  const contextValue = React.useMemo<SidebarContextProps>(\r\n    () => ({\r\n      state,\r\n      open,\r\n      setOpen,\r\n      isMobile,\r\n      openMobile,\r\n      setOpenMobile,\r\n      toggleSidebar,\r\n    }),\r\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\r\n  )\r\n\r\n  return (\r\n    <SidebarContext.Provider value={contextValue}>\r\n      <TooltipProvider delayDuration={0}>\r\n        <div\r\n          data-slot=\"sidebar-wrapper\"\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH,\r\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\r\n              ...style,\r\n            } as React.CSSProperties\r\n          }\r\n          className={cn(\r\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\r\n            className\r\n          )}\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </TooltipProvider>\r\n    </SidebarContext.Provider>\r\n  )\r\n}\r\n\r\nfunction Sidebar({\r\n  side = \"left\",\r\n  variant = \"sidebar\",\r\n  collapsible = \"offcanvas\",\r\n  className,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  side?: \"left\" | \"right\"\r\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\r\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\r\n}) {\r\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\r\n\r\n  if (collapsible === \"none\") {\r\n    return (\r\n      <div\r\n        data-slot=\"sidebar\"\r\n        className={cn(\r\n          \"bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (isMobile) {\r\n    return (\r\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\r\n        <SheetContent\r\n          data-sidebar=\"sidebar\"\r\n          data-slot=\"sidebar\"\r\n          data-mobile=\"true\"\r\n          className=\"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden\"\r\n          style={\r\n            {\r\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\r\n            } as React.CSSProperties\r\n          }\r\n          side={side}\r\n        >\r\n          <SheetHeader className=\"sr-only\">\r\n            <SheetTitle>Sidebar</SheetTitle>\r\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\r\n          </SheetHeader>\r\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\r\n        </SheetContent>\r\n      </Sheet>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"group peer text-sidebar-foreground hidden md:block\"\r\n      data-state={state}\r\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\r\n      data-variant={variant}\r\n      data-side={side}\r\n      data-slot=\"sidebar\"\r\n    >\r\n      {/* This is what handles the sidebar gap on desktop */}\r\n      <div\r\n        data-slot=\"sidebar-gap\"\r\n        className={cn(\r\n          \"relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear\",\r\n          \"group-data-[collapsible=offcanvas]:w-0\",\r\n          \"group-data-[side=right]:rotate-180\",\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]\"\r\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon)\"\r\n        )}\r\n      />\r\n      <div\r\n        data-slot=\"sidebar-container\"\r\n        className={cn(\r\n          \"fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex\",\r\n          side === \"left\"\r\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\r\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\r\n          // Adjust the padding for floating and inset variants.\r\n          variant === \"floating\" || variant === \"inset\"\r\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]\"\r\n            : \"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        <div\r\n          data-sidebar=\"sidebar\"\r\n          data-slot=\"sidebar-inner\"\r\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\r\n        >\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SidebarTrigger({\r\n  className,\r\n  onClick,\r\n  ...props\r\n}: React.ComponentProps<typeof Button>) {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <Button\r\n      data-sidebar=\"trigger\"\r\n      data-slot=\"sidebar-trigger\"\r\n      variant=\"ghost\"\r\n      size=\"icon\"\r\n      className={cn(\"size-7\", className)}\r\n      onClick={(event) => {\r\n        onClick?.(event)\r\n        toggleSidebar()\r\n      }}\r\n      {...props}\r\n    >\r\n      <PanelLeftIcon />\r\n      <span className=\"sr-only\">Toggle Sidebar</span>\r\n    </Button>\r\n  )\r\n}\r\n\r\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\r\n  const { toggleSidebar } = useSidebar()\r\n\r\n  return (\r\n    <button\r\n      data-sidebar=\"rail\"\r\n      data-slot=\"sidebar-rail\"\r\n      aria-label=\"Toggle Sidebar\"\r\n      tabIndex={-1}\r\n      onClick={toggleSidebar}\r\n      title=\"Toggle Sidebar\"\r\n      className={cn(\r\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\r\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\r\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\r\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\r\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\r\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\r\n  return (\r\n    <main\r\n      data-slot=\"sidebar-inset\"\r\n      className={cn(\r\n        \"bg-background relative flex w-full flex-1 flex-col\",\r\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarInput({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof Input>) {\r\n  return (\r\n    <Input\r\n      data-slot=\"sidebar-input\"\r\n      data-sidebar=\"input\"\r\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-header\"\r\n      data-sidebar=\"header\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-footer\"\r\n      data-sidebar=\"footer\"\r\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof Separator>) {\r\n  return (\r\n    <Separator\r\n      data-slot=\"sidebar-separator\"\r\n      data-sidebar=\"separator\"\r\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-content\"\r\n      data-sidebar=\"content\"\r\n      className={cn(\r\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-group\"\r\n      data-sidebar=\"group\"\r\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroupLabel({\r\n  className,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\r\n  const Comp = asChild ? Slot : \"div\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-group-label\"\r\n      data-sidebar=\"group-label\"\r\n      className={cn(\r\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroupAction({\r\n  className,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-group-action\"\r\n      data-sidebar=\"group-action\"\r\n      className={cn(\r\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 md:after:hidden\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarGroupContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-group-content\"\r\n      data-sidebar=\"group-content\"\r\n      className={cn(\"w-full text-sm\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\r\n  return (\r\n    <ul\r\n      data-slot=\"sidebar-menu\"\r\n      data-sidebar=\"menu\"\r\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\r\n  return (\r\n    <li\r\n      data-slot=\"sidebar-menu-item\"\r\n      data-sidebar=\"menu-item\"\r\n      className={cn(\"group/menu-item relative\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nconst sidebarMenuButtonVariants = cva(\r\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\r\n        outline:\r\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\r\n      },\r\n      size: {\r\n        default: \"h-8 text-sm\",\r\n        sm: \"h-7 text-xs\",\r\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction SidebarMenuButton({\r\n  asChild = false,\r\n  isActive = false,\r\n  variant = \"default\",\r\n  size = \"default\",\r\n  tooltip,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> & {\r\n  asChild?: boolean\r\n  isActive?: boolean\r\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\r\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n  const { isMobile, state } = useSidebar()\r\n\r\n  const button = (\r\n    <Comp\r\n      data-slot=\"sidebar-menu-button\"\r\n      data-sidebar=\"menu-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n\r\n  if (!tooltip) {\r\n    return button\r\n  }\r\n\r\n  if (typeof tooltip === \"string\") {\r\n    tooltip = {\r\n      children: tooltip,\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Tooltip>\r\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\r\n      <TooltipContent\r\n        side=\"right\"\r\n        align=\"center\"\r\n        hidden={state !== \"collapsed\" || isMobile}\r\n        {...tooltip}\r\n      />\r\n    </Tooltip>\r\n  )\r\n}\r\n\r\nfunction SidebarMenuAction({\r\n  className,\r\n  asChild = false,\r\n  showOnHover = false,\r\n  ...props\r\n}: React.ComponentProps<\"button\"> & {\r\n  asChild?: boolean\r\n  showOnHover?: boolean\r\n}) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-menu-action\"\r\n      data-sidebar=\"menu-action\"\r\n      className={cn(\r\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        // Increases the hit area of the button on mobile.\r\n        \"after:absolute after:-inset-2 md:after:hidden\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        showOnHover &&\r\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuBadge({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-menu-badge\"\r\n      data-sidebar=\"menu-badge\"\r\n      className={cn(\r\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\r\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\r\n        \"peer-data-[size=sm]/menu-button:top-1\",\r\n        \"peer-data-[size=default]/menu-button:top-1.5\",\r\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSkeleton({\r\n  className,\r\n  showIcon = false,\r\n  ...props\r\n}: React.ComponentProps<\"div\"> & {\r\n  showIcon?: boolean\r\n}) {\r\n  // Random width between 50 to 90%.\r\n  const width = React.useMemo(() => {\r\n    return `${Math.floor(Math.random() * 40) + 50}%`\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      data-slot=\"sidebar-menu-skeleton\"\r\n      data-sidebar=\"menu-skeleton\"\r\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\r\n      {...props}\r\n    >\r\n      {showIcon && (\r\n        <Skeleton\r\n          className=\"size-4 rounded-md\"\r\n          data-sidebar=\"menu-skeleton-icon\"\r\n        />\r\n      )}\r\n      <Skeleton\r\n        className=\"h-4 max-w-(--skeleton-width) flex-1\"\r\n        data-sidebar=\"menu-skeleton-text\"\r\n        style={\r\n          {\r\n            \"--skeleton-width\": width,\r\n          } as React.CSSProperties\r\n        }\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\r\n  return (\r\n    <ul\r\n      data-slot=\"sidebar-menu-sub\"\r\n      data-sidebar=\"menu-sub\"\r\n      className={cn(\r\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSubItem({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"li\">) {\r\n  return (\r\n    <li\r\n      data-slot=\"sidebar-menu-sub-item\"\r\n      data-sidebar=\"menu-sub-item\"\r\n      className={cn(\"group/menu-sub-item relative\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction SidebarMenuSubButton({\r\n  asChild = false,\r\n  size = \"md\",\r\n  isActive = false,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"a\"> & {\r\n  asChild?: boolean\r\n  size?: \"sm\" | \"md\"\r\n  isActive?: boolean\r\n}) {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"sidebar-menu-sub-button\"\r\n      data-sidebar=\"menu-sub-button\"\r\n      data-size={size}\r\n      data-active={isActive}\r\n      className={cn(\r\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\r\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\r\n        size === \"sm\" && \"text-xs\",\r\n        size === \"md\" && \"text-sm\",\r\n        \"group-data-[collapsible=icon]:hidden\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Sidebar,\r\n  SidebarContent,\r\n  SidebarFooter,\r\n  SidebarGroup,\r\n  SidebarGroupAction,\r\n  SidebarGroupContent,\r\n  SidebarGroupLabel,\r\n  SidebarHeader,\r\n  SidebarInput,\r\n  SidebarInset,\r\n  SidebarMenu,\r\n  SidebarMenuAction,\r\n  SidebarMenuBadge,\r\n  SidebarMenuButton,\r\n  SidebarMenuItem,\r\n  SidebarMenuSkeleton,\r\n  SidebarMenuSub,\r\n  SidebarMenuSubButton,\r\n  SidebarMenuSubItem,\r\n  SidebarProvider,\r\n  SidebarRail,\r\n  SidebarSeparator,\r\n  SidebarTrigger,\r\n  useSidebar,\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\sonner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\spinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\textarea.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\constants\\banks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\constants\\blocked-route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\constants\\role.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\constants\\sidebar.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'IconNotes' is defined but never used.","line":6,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Role } from \"@/constants/role\";\r\nimport {\r\n    IconLayoutDashboard,\r\n    IconArrowsShuffle,\r\n    IconCalendarOff,\r\n    IconNotes,\r\n    IconClock,\r\n    IconMail,\r\n    IconCalendarStats,\r\n    IconReceipt,\r\n    IconUsers,\r\n    IconPackage,\r\n    IconChartBar,\r\n    IconPigMoney,\r\n    IconCreditCard,\r\n    IconUserCircle,\r\n    IconSpeakerphone,\r\n    IconBriefcase,\r\n    IconCash,\r\n} from \"@tabler/icons-react\";\r\n\r\nexport interface SidebarItem {\r\n    title: string;\r\n    url: string;\r\n    icon: React.ComponentType<{ strokeWidth?: number; className?: string }>;\r\n    access: Role[];\r\n}\r\n\r\nexport interface SidebarGroup {\r\n    groupLabel: string;\r\n    items: SidebarItem[];\r\n}\r\n\r\nexport const sidebarGroups: SidebarGroup[] = [\r\n    {\r\n        groupLabel: \"Overview\",\r\n        items: [\r\n            {\r\n                title: \"Dashboard\",\r\n                url: \"/dashboard\",\r\n                icon: IconLayoutDashboard,\r\n                access: [\r\n                    Role.SUPER_ADMIN,\r\n                    Role.ADMIN,\r\n                    Role.HR_MANAGER,\r\n                    Role.TEAM_LEADER,\r\n                    Role.STAFF,\r\n                ],\r\n            },\r\n            {\r\n                title: \"Profile\",\r\n                url: \"/account\",\r\n                icon: IconUserCircle,\r\n                access: [Role.TEAM_LEADER, Role.STAFF],\r\n            },\r\n            {\r\n                title: \"Analytics\",\r\n                url: \"/analytics\",\r\n                icon: IconChartBar,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN],\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        groupLabel: \"Business\",\r\n        items: [\r\n            {\r\n                title: \"Clients\",\r\n                url: \"/clients\",\r\n                icon: IconUserCircle,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN],\r\n            },\r\n            {\r\n                title: \"Orders\",\r\n                url: \"/orders\",\r\n                icon: IconPackage,\r\n                access: [\r\n                    Role.SUPER_ADMIN,\r\n                    Role.ADMIN,\r\n                    Role.HR_MANAGER,\r\n                    Role.TEAM_LEADER,\r\n                ],\r\n            },\r\n            {\r\n                title: \"Earnings\",\r\n                url: \"/earnings\",\r\n                icon: IconReceipt,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN],\r\n            },\r\n            {\r\n                title: \"Profit Share\",\r\n                url: \"/profit-share\",\r\n                icon: IconPigMoney,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN],\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        groupLabel: \"Team Management\",\r\n        items: [\r\n            {\r\n                title: \"Staffs\",\r\n                url: \"/staffs\",\r\n                icon: IconUsers,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n            {\r\n                title: \"Invitations\",\r\n                url: \"/invitations\",\r\n                icon: IconMail,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n            {\r\n                title: \"Shifting\",\r\n                url: \"/shifting\",\r\n                icon: IconArrowsShuffle,\r\n                access: [\r\n                    Role.SUPER_ADMIN,\r\n                    Role.ADMIN,\r\n                    Role.HR_MANAGER,\r\n                    Role.TEAM_LEADER,\r\n                ],\r\n            },\r\n            {\r\n                title: \"Attendance\",\r\n                url: \"/attendance\",\r\n                icon: IconCalendarStats,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n            {\r\n                title: \"Careers\",\r\n                url: \"/careers\",\r\n                icon: IconBriefcase,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        groupLabel: \"HR & Leave\",\r\n        items: [\r\n            {\r\n                title: \"Leave Application\",\r\n                url: \"/leave/apply\",\r\n                icon: IconCalendarOff,\r\n                access: [\r\n                    Role.SUPER_ADMIN,\r\n                    Role.ADMIN,\r\n                    Role.HR_MANAGER,\r\n                    Role.TEAM_LEADER,\r\n                    Role.STAFF,\r\n                ],\r\n            },\r\n            {\r\n                title: \"Leave Management\",\r\n                url: \"/leave/manage\",\r\n                icon: IconCalendarStats,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n            {\r\n                title: \"Overtime\",\r\n                url: \"/overtime\",\r\n                icon: IconClock,\r\n                access: [\r\n                    Role.SUPER_ADMIN,\r\n                    Role.ADMIN,\r\n                    Role.HR_MANAGER,\r\n                    Role.TEAM_LEADER,\r\n                    Role.STAFF,\r\n                ],\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        groupLabel: \"Finance\",\r\n        items: [\r\n            {\r\n                title: \"Expense\",\r\n                url: \"/expense\",\r\n                icon: IconReceipt,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n            {\r\n                title: \"Debit\",\r\n                url: \"/debit\",\r\n                icon: IconCreditCard,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN],\r\n            },\r\n            {\r\n                title: \"Payroll\",\r\n                url: \"/payroll\",\r\n                icon: IconCash,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        groupLabel: \"Communication\",\r\n        items: [\r\n            {\r\n                title: \"Notices\",\r\n                url: \"/notices\",\r\n                icon: IconSpeakerphone,\r\n                access: [\r\n                    Role.SUPER_ADMIN,\r\n                    Role.ADMIN,\r\n                    Role.HR_MANAGER,\r\n                    Role.TEAM_LEADER,\r\n                    Role.STAFF,\r\n                ],\r\n            },\r\n            {\r\n                title: \"Notice Management\",\r\n                url: \"/notices/manage\",\r\n                icon: IconSpeakerphone,\r\n                access: [Role.SUPER_ADMIN, Role.ADMIN, Role.HR_MANAGER],\r\n            },\r\n        ],\r\n    },\r\n];\r\n\r\n// Flat array for backward compatibility\r\nexport const sidebarData = sidebarGroups.flatMap((group) => group.items);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\hooks\\use-debounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\hooks\\use-mobile.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\lib\\auth-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\api\\apiSlice.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_builder' is defined but never used.","line":46,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":25,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\analytics\\analyticsApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\attendance\\attendanceApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1170,1173],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1170,1173],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1560,1563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1560,1563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiSlice } from '@/redux/api/apiSlice';\r\n\r\nexport const attendanceApi = apiSlice.injectEndpoints({\r\n    endpoints: (builder) => ({\r\n        checkIn: builder.mutation({\r\n            query: (body) => ({\r\n                url: '/attendance/check-in',\r\n                method: 'POST',\r\n                body,\r\n            }),\r\n            invalidatesTags: ['Attendance'],\r\n        }),\r\n        checkOut: builder.mutation({\r\n            query: (body) => ({\r\n                url: '/attendance/check-out',\r\n                method: 'POST',\r\n                body,\r\n            }),\r\n            invalidatesTags: ['Attendance'],\r\n        }),\r\n        getTodayAttendance: builder.query({\r\n            query: () => ({\r\n                url: '/attendance/today',\r\n                method: 'GET',\r\n            }),\r\n            providesTags: ['Attendance'],\r\n        }),\r\n        getMonthlyStats: builder.query({\r\n            query: () => ({\r\n                url: '/attendance/monthly-stats',\r\n                method: 'GET',\r\n            }),\r\n            // Use transformResponse if data structure is { success: true, data: ... }\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Attendance', 'Overtime'], // Invalidate when Attendance OR Overtime changes\r\n        }),\r\n        getMyAttendanceHistory: builder.query({\r\n            query: (days = 7) => ({\r\n                url: `/attendance/my-history?days=${days}`,\r\n                method: 'GET',\r\n            }),\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Attendance'],\r\n        }),\r\n        getAllAttendance: builder.query({\r\n            query: (filters) => ({\r\n                url: '/attendance/admin/all',\r\n                params: filters,\r\n            }),\r\n            providesTags: ['Attendance'],\r\n        }),\r\n        updateAttendanceStatus: builder.mutation({\r\n            query: ({ id, status, notes }) => ({\r\n                url: `/attendance/admin/${id}`,\r\n                method: 'PATCH',\r\n                body: { status, notes },\r\n            }),\r\n            invalidatesTags: ['Attendance'],\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const {\r\n    useCheckInMutation,\r\n    useCheckOutMutation,\r\n    useGetTodayAttendanceQuery,\r\n    useGetMonthlyStatsQuery,\r\n    useGetMyAttendanceHistoryQuery,\r\n    useGetAllAttendanceQuery,\r\n    useUpdateAttendanceStatusMutation,\r\n} = attendanceApi;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\branch\\branchApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\career\\careerApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\client\\clientApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\currencyRate\\currencyRateApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\dashboard\\dashboardApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[354,357],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[354,357],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiSlice } from '@/redux/api/apiSlice';\r\n\r\nexport const dashboardApi = apiSlice.injectEndpoints({\r\n    endpoints: (builder) => ({\r\n        getAdminDashboard: builder.query({\r\n            query: () => ({\r\n                url: '/dashboard/admin',\r\n                method: 'GET',\r\n            }),\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Staff', 'Attendance', 'Overtime'],\r\n            // Refetch every 30 seconds\r\n            keepUnusedDataFor: 30,\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const { useGetAdminDashboardQuery } = dashboardApi;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\debit\\debitApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\earning\\earningApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\expense\\expenseApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\externalBusiness\\externalBusinessApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\invitation\\invitationApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\invoice\\invoiceApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\leave\\leaveApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":207,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":207,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6377,6380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6377,6380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiSlice } from '../../api/apiSlice';\r\nimport type {\r\n    ILeaveApplication,\r\n    ILeaveBalance,\r\n    ApplyLeaveInput,\r\n    ApproveLeaveInput,\r\n    LeaveFilters,\r\n} from '@/types/leave.type';\r\n\r\ninterface LeaveApplicationsResponse {\r\n    message: string;\r\n    data: ILeaveApplication[];\r\n    meta: {\r\n        total: number;\r\n        page: number;\r\n        totalPages: number;\r\n    };\r\n}\r\n\r\ninterface LeaveApplicationResponse {\r\n    message: string;\r\n    data: ILeaveApplication;\r\n}\r\n\r\ninterface LeaveBalanceResponse {\r\n    message: string;\r\n    data: ILeaveBalance;\r\n}\r\n\r\ninterface PendingLeavesResponse {\r\n    message: string;\r\n    data: ILeaveApplication[];\r\n    count: number;\r\n}\r\n\r\ninterface WorkingDaysResponse {\r\n    message: string;\r\n    data: {\r\n        dates: string[];\r\n        count: number;\r\n    };\r\n}\r\n\r\nexport const leaveApi = apiSlice.injectEndpoints({\r\n    endpoints: (builder) => ({\r\n        // Apply for leave\r\n        applyForLeave: builder.mutation<\r\n            LeaveApplicationResponse,\r\n            ApplyLeaveInput\r\n        >({\r\n            query: (data) => ({\r\n                url: '/leave',\r\n                method: 'POST',\r\n                body: data,\r\n            }),\r\n            invalidatesTags: [\r\n                { type: 'Leave', id: 'LIST' },\r\n                { type: 'Leave', id: 'MY_LIST' },\r\n                { type: 'Leave', id: 'PENDING' },\r\n                { type: 'Leave', id: 'BALANCE' },\r\n            ],\r\n        }),\r\n\r\n        // Get all leave applications (admin)\r\n        getLeaveApplications: builder.query<\r\n            LeaveApplicationsResponse,\r\n            LeaveFilters | void\r\n        >({\r\n            query: (params) => ({\r\n                url: '/leave',\r\n                params: params || {},\r\n            }),\r\n            providesTags: (result) =>\r\n                result\r\n                    ? [\r\n                          ...result.data.map(({ _id }) => ({\r\n                              type: 'Leave' as const,\r\n                              id: _id,\r\n                          })),\r\n                          { type: 'Leave', id: 'LIST' },\r\n                      ]\r\n                    : [{ type: 'Leave', id: 'LIST' }],\r\n        }),\r\n\r\n        // Get my leave applications\r\n        getMyLeaveApplications: builder.query<\r\n            LeaveApplicationsResponse,\r\n            { page?: number; limit?: number } | void\r\n        >({\r\n            query: (params) => ({\r\n                url: '/leave/my',\r\n                params: params || {},\r\n            }),\r\n            providesTags: [{ type: 'Leave', id: 'MY_LIST' }],\r\n        }),\r\n\r\n        // Get pending leaves (admin notification)\r\n        getPendingLeaves: builder.query<PendingLeavesResponse, void>({\r\n            query: () => '/leave/pending',\r\n            providesTags: [{ type: 'Leave', id: 'PENDING' }],\r\n        }),\r\n\r\n        // Get leave balance\r\n        getLeaveBalance: builder.query<\r\n            LeaveBalanceResponse,\r\n            { staffId?: string; year?: number } | void\r\n        >({\r\n            query: (params) => ({\r\n                url: params?.staffId\r\n                    ? `/leave/balance/${params.staffId}`\r\n                    : '/leave/balance',\r\n                params: params?.year ? { year: params.year } : {},\r\n            }),\r\n            providesTags: [{ type: 'Leave', id: 'BALANCE' }],\r\n        }),\r\n\r\n        // Calculate working days\r\n        calculateWorkingDays: builder.query<\r\n            WorkingDaysResponse,\r\n            { startDate: string; endDate: string }\r\n        >({\r\n            query: (params) => ({\r\n                url: '/leave/calculate-days',\r\n                params,\r\n            }),\r\n        }),\r\n\r\n        // Get single leave application\r\n        getLeaveApplicationById: builder.query<\r\n            LeaveApplicationResponse,\r\n            string\r\n        >({\r\n            query: (id) => `/leave/${id}`,\r\n            providesTags: (_result, _error, id) => [{ type: 'Leave', id }],\r\n        }),\r\n\r\n        // Approve leave\r\n        approveLeave: builder.mutation<\r\n            LeaveApplicationResponse,\r\n            { id: string; data: ApproveLeaveInput }\r\n        >({\r\n            query: ({ id, data }) => ({\r\n                url: `/leave/${id}/approve`,\r\n                method: 'PATCH',\r\n                body: data,\r\n            }),\r\n            invalidatesTags: (_result, _error, { id }) => [\r\n                { type: 'Leave', id },\r\n                { type: 'Leave', id: 'LIST' },\r\n                { type: 'Leave', id: 'PENDING' },\r\n                { type: 'Leave', id: 'BALANCE' },\r\n            ],\r\n        }),\r\n\r\n        // Reject leave\r\n        rejectLeave: builder.mutation<\r\n            LeaveApplicationResponse,\r\n            { id: string; comment?: string }\r\n        >({\r\n            query: ({ id, comment }) => ({\r\n                url: `/leave/${id}/reject`,\r\n                method: 'PATCH',\r\n                body: { comment },\r\n            }),\r\n            invalidatesTags: (_result, _error, { id }) => [\r\n                { type: 'Leave', id },\r\n                { type: 'Leave', id: 'LIST' },\r\n                { type: 'Leave', id: 'PENDING' },\r\n            ],\r\n        }),\r\n\r\n        // Revoke approved leave\r\n        revokeLeave: builder.mutation<\r\n            LeaveApplicationResponse,\r\n            { id: string; reason?: string }\r\n        >({\r\n            query: ({ id, reason }) => ({\r\n                url: `/leave/${id}/revoke`,\r\n                method: 'PATCH',\r\n                body: { reason },\r\n            }),\r\n            invalidatesTags: (_result, _error, { id }) => [\r\n                { type: 'Leave', id },\r\n                { type: 'Leave', id: 'LIST' },\r\n                { type: 'Leave', id: 'BALANCE' },\r\n            ],\r\n        }),\r\n\r\n        // Cancel own application\r\n        cancelLeaveApplication: builder.mutation<\r\n            LeaveApplicationResponse,\r\n            string\r\n        >({\r\n            query: (id) => ({\r\n                url: `/leave/${id}/cancel`,\r\n                method: 'PATCH',\r\n            }),\r\n            invalidatesTags: (_result, _error, id) => [\r\n                { type: 'Leave', id },\r\n                { type: 'Leave', id: 'MY_LIST' },\r\n                { type: 'Leave', id: 'PENDING' },\r\n            ],\r\n        }),\r\n\r\n        // Upload medical document\r\n        uploadMedicalDocument: builder.mutation<\r\n            { message: string; data: any },\r\n            { id: string; file: File }\r\n        >({\r\n            query: ({ id, file }) => {\r\n                const formData = new FormData();\r\n                formData.append('document', file);\r\n                return {\r\n                    url: `/leave/${id}/upload-document`,\r\n                    method: 'POST',\r\n                    body: formData,\r\n                };\r\n            },\r\n            invalidatesTags: (_result, _error, { id }) => [\r\n                { type: 'Leave', id },\r\n                { type: 'Leave', id: 'MY_LIST' },\r\n            ],\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const {\r\n    useApplyForLeaveMutation,\r\n    useGetLeaveApplicationsQuery,\r\n    useGetMyLeaveApplicationsQuery,\r\n    useGetPendingLeavesQuery,\r\n    useGetLeaveBalanceQuery,\r\n    useCalculateWorkingDaysQuery,\r\n    useLazyCalculateWorkingDaysQuery,\r\n    useGetLeaveApplicationByIdQuery,\r\n    useApproveLeaveMutation,\r\n    useRejectLeaveMutation,\r\n    useRevokeLeaveMutation,\r\n    useCancelLeaveApplicationMutation,\r\n    useUploadMedicalDocumentMutation,\r\n} = leaveApi;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\metadata\\metadataApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\notice\\noticeApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\notification\\notificationApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[385,388],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[385,388],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[691,694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[691,694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiSlice } from '@/redux/api/apiSlice';\r\n\r\nexport const notificationApi = apiSlice.injectEndpoints({\r\n    endpoints: (builder) => ({\r\n        getNotifications: builder.query({\r\n            query: (params) => ({\r\n                url: '/notifications',\r\n                method: 'GET',\r\n                params,\r\n            }),\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Notification'],\r\n        }),\r\n        getUnreadCount: builder.query({\r\n            query: () => ({\r\n                url: '/notifications/unread-count',\r\n                method: 'GET',\r\n            }),\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Notification'],\r\n        }),\r\n        markAsRead: builder.mutation({\r\n            query: (id) => ({\r\n                url: `/notifications/${id}/read`,\r\n                method: 'PATCH',\r\n            }),\r\n            invalidatesTags: ['Notification'],\r\n        }),\r\n        markAllAsRead: builder.mutation({\r\n            query: () => ({\r\n                url: '/notifications/read-all',\r\n                method: 'POST',\r\n            }),\r\n            invalidatesTags: ['Notification'],\r\n        }),\r\n        deleteNotification: builder.mutation({\r\n            query: (id) => ({\r\n                url: `/notifications/${id}`,\r\n                method: 'DELETE',\r\n            }),\r\n            invalidatesTags: ['Notification'],\r\n        }),\r\n        deleteAllNotifications: builder.mutation({\r\n            query: () => ({\r\n                url: '/notifications',\r\n                method: 'DELETE',\r\n            }),\r\n            invalidatesTags: ['Notification'],\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const {\r\n    useGetNotificationsQuery,\r\n    useGetUnreadCountQuery,\r\n    useMarkAsReadMutation,\r\n    useMarkAllAsReadMutation,\r\n    useDeleteNotificationMutation,\r\n    useDeleteAllNotificationsMutation,\r\n} = notificationApi;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\order\\orderApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\overtime\\overtimeApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[623,626],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[623,626],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[918,921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[918,921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2369,2372],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2369,2372],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiSlice } from '@/redux/api/apiSlice';\r\n\r\nexport const overtimeApi = apiSlice.injectEndpoints({\r\n    endpoints: (builder) => ({\r\n        createOvertime: builder.mutation({\r\n            query: (body) => ({\r\n                url: '/overtime/create',\r\n                method: 'POST',\r\n                body,\r\n            }),\r\n            invalidatesTags: ['Overtime'],\r\n        }),\r\n        getAllOvertime: builder.query({\r\n            query: (params) => ({\r\n                url: '/overtime',\r\n                method: 'GET',\r\n                params,\r\n            }),\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Overtime'],\r\n        }),\r\n        getMyOvertime: builder.query({\r\n            query: () => ({\r\n                url: '/overtime/my-overtime',\r\n                method: 'GET',\r\n            }),\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Overtime'],\r\n        }),\r\n        getOvertimeById: builder.query({\r\n            query: (id) => ({\r\n                url: `/overtime/${id}`,\r\n                method: 'GET',\r\n            }),\r\n            providesTags: ['Overtime'],\r\n        }),\r\n        updateOvertime: builder.mutation({\r\n            query: ({ id, ...body }) => ({\r\n                url: `/overtime/${id}`,\r\n                method: 'PATCH',\r\n                body,\r\n            }),\r\n            invalidatesTags: ['Overtime'],\r\n        }),\r\n        deleteOvertime: builder.mutation({\r\n            query: (id) => ({\r\n                url: `/overtime/${id}`,\r\n                method: 'DELETE',\r\n            }),\r\n            invalidatesTags: ['Overtime'],\r\n        }),\r\n        startOvertime: builder.mutation({\r\n            query: () => ({\r\n                url: '/overtime/start',\r\n                method: 'POST',\r\n            }),\r\n            invalidatesTags: ['Overtime'],\r\n        }),\r\n        stopOvertime: builder.mutation({\r\n            query: () => ({\r\n                url: '/overtime/stop',\r\n                method: 'POST',\r\n            }),\r\n            invalidatesTags: ['Overtime'],\r\n        }),\r\n        getScheduledOvertimeToday: builder.query({\r\n            query: () => ({\r\n                url: '/overtime/scheduled-today',\r\n                method: 'GET',\r\n            }),\r\n            transformResponse: (response: { data: any }) => response.data,\r\n            providesTags: ['Overtime'],\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const {\r\n    useCreateOvertimeMutation,\r\n    useGetAllOvertimeQuery,\r\n    useGetMyOvertimeQuery,\r\n    useGetOvertimeByIdQuery,\r\n    useUpdateOvertimeMutation,\r\n    useDeleteOvertimeMutation,\r\n    useStartOvertimeMutation,\r\n    useStopOvertimeMutation,\r\n    useGetScheduledOvertimeTodayQuery,\r\n} = overtimeApi;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\payroll\\payrollApi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[193,196],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[193,196],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[542,545],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[542,545],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":19,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[673,676],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[673,676],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1548,1551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1548,1551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":47,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1775,1778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1775,1778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2731,2734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2731,2734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":98,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3682,3685],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3682,3685],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":103,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":103,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3982,3985],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3982,3985],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":129,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5024,5027],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5024,5027],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":147,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5685,5688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5685,5688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":151,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":151,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5912,5915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5912,5915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6913,6916],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6913,6916],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":189,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7254,7257],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7254,7257],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":192,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7314,7317],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7314,7317],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":202,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7709,7712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7709,7712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":210,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":210,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8002,8005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8002,8005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":214,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":214,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8088,8091],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8088,8091],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":221,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":221,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8371,8374],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8371,8374],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":225,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8459,8462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8459,8462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":232,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":232,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8744,8747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8744,8747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { apiSlice } from \"@/redux/api/apiSlice\";\r\n\r\nexport const payrollApi = apiSlice.injectEndpoints({\r\n    endpoints: (builder) => ({\r\n        getPayrollPreview: builder.query<\r\n            any,\r\n            { month: string; branchId?: string }\r\n        >({\r\n            query: ({ month, branchId }) => ({\r\n                url: `/payroll/preview`,\r\n                params: { month, branchId: branchId || \"all\" },\r\n            }),\r\n            providesTags: (_result, _error, { month, branchId }) => [\r\n                { type: \"Payroll\" as any, id: `${month}-${branchId || \"all\"}` },\r\n            ],\r\n        }),\r\n\r\n        processPayment: builder.mutation<\r\n            any,\r\n            {\r\n                staffId: string;\r\n                month: string;\r\n                amount: number;\r\n                paymentMethod: string;\r\n                paymentType: string;\r\n                branchId?: string;\r\n                note?: string;\r\n                bonus?: number;\r\n                deduction?: number;\r\n                createdBy: string;\r\n            }\r\n        >({\r\n            query: (data) => ({\r\n                url: \"/payroll/process\",\r\n                method: \"POST\",\r\n                body: data,\r\n            }),\r\n            async onQueryStarted(arg, { dispatch, queryFulfilled }) {\r\n                const patchResult = dispatch(\r\n                    payrollApi.util.updateQueryData(\r\n                        \"getPayrollPreview\",\r\n                        { month: arg.month, branchId: arg.branchId },\r\n                        (draft: any) => {\r\n                            const data = draft?.data || draft;\r\n                            if (!Array.isArray(data)) return;\r\n                            const item = data.find(\r\n                                (s: any) =>\r\n                                    (s._id || s.staffId)?.toString() ===\r\n                                    arg.staffId,\r\n                            );\r\n                            if (item) {\r\n                                if (arg.paymentType === \"overtime\") {\r\n                                    item.otStatus = \"paid\";\r\n                                    item.otPaidAmount = arg.amount;\r\n                                } else {\r\n                                    item.status = \"paid\";\r\n                                    item.paidAmount = arg.amount;\r\n                                }\r\n                            }\r\n                        },\r\n                    ),\r\n                );\r\n                try {\r\n                    await queryFulfilled;\r\n                } catch {\r\n                    patchResult.undo();\r\n                }\r\n            },\r\n        }),\r\n\r\n        bulkProcessPayment: builder.mutation<\r\n            any,\r\n            {\r\n                month: string;\r\n                payments: {\r\n                    staffId: string;\r\n                    amount: number;\r\n                    bonus?: number;\r\n                    deduction?: number;\r\n                    note?: string;\r\n                }[];\r\n                paymentMethod: string;\r\n                paymentType: string;\r\n                createdBy: string;\r\n                branchId?: string;\r\n            }\r\n        >({\r\n            query: (data) => ({\r\n                url: \"/payroll/bulk-process\",\r\n                method: \"POST\",\r\n                body: data,\r\n            }),\r\n            async onQueryStarted(arg, { dispatch, queryFulfilled }) {\r\n                const patchResult = dispatch(\r\n                    payrollApi.util.updateQueryData(\r\n                        \"getPayrollPreview\",\r\n                        { month: arg.month, branchId: arg.branchId },\r\n                        (draft: any) => {\r\n                            const data = draft?.data || draft;\r\n                            if (!Array.isArray(data)) return;\r\n                            arg.payments.forEach((payment) => {\r\n                                const item = data.find(\r\n                                    (s: any) =>\r\n                                        (s._id || s.staffId)?.toString() ===\r\n                                        payment.staffId,\r\n                                );\r\n                                if (item) {\r\n                                    if (arg.paymentType === \"overtime\") {\r\n                                        item.otStatus = \"paid\";\r\n                                        item.otPaidAmount = payment.amount;\r\n                                    } else {\r\n                                        item.status = \"paid\";\r\n                                        item.paidAmount = payment.amount;\r\n                                    }\r\n                                }\r\n                            });\r\n                        },\r\n                    ),\r\n                );\r\n                try {\r\n                    await queryFulfilled;\r\n                } catch {\r\n                    patchResult.undo();\r\n                }\r\n            },\r\n        }),\r\n\r\n        undoPayment: builder.mutation<\r\n            any,\r\n            {\r\n                staffId: string;\r\n                month: string;\r\n                paymentType: string;\r\n                branchId?: string;\r\n            }\r\n        >({\r\n            query: (data) => ({\r\n                url: \"/payroll/undo\",\r\n                method: \"POST\",\r\n                body: data,\r\n            }),\r\n            async onQueryStarted(arg, { dispatch, queryFulfilled }) {\r\n                const patchResult = dispatch(\r\n                    payrollApi.util.updateQueryData(\r\n                        \"getPayrollPreview\",\r\n                        { month: arg.month, branchId: arg.branchId },\r\n                        (draft: any) => {\r\n                            const data = draft?.data || draft;\r\n                            if (!Array.isArray(data)) return;\r\n                            const item = data.find(\r\n                                (s: any) =>\r\n                                    (s._id || s.staffId)?.toString() ===\r\n                                    arg.staffId,\r\n                            );\r\n                            if (item) {\r\n                                if (arg.paymentType === \"overtime\") {\r\n                                    item.otStatus = \"pending\";\r\n                                    item.otPaidAmount = 0;\r\n                                } else {\r\n                                    item.status = \"pending\";\r\n                                    item.paidAmount = 0;\r\n                                    item.expenseId = null;\r\n                                }\r\n                            }\r\n                        },\r\n                    ),\r\n                );\r\n                try {\r\n                    await queryFulfilled;\r\n                } catch {\r\n                    patchResult.undo();\r\n                }\r\n            },\r\n        }),\r\n\r\n        graceAttendance: builder.mutation<\r\n            any,\r\n            {\r\n                staffId: string;\r\n                date: string;\r\n                note?: string;\r\n            }\r\n        >({\r\n            query: (data) => ({\r\n                url: \"/payroll/grace\",\r\n                method: \"POST\",\r\n                body: data,\r\n            }),\r\n            invalidatesTags: [\"Payroll\" as any],\r\n        }),\r\n\r\n        getAbsentDates: builder.query<any, { staffId: string; month: string }>({\r\n            query: ({ staffId, month }) => ({\r\n                url: \"/payroll/absent-dates\",\r\n                params: { staffId, month },\r\n            }),\r\n        }),\r\n\r\n        // ─── Payroll Lock ────────────────────────────────────────────\r\n\r\n        getLockStatus: builder.query<\r\n            { success: boolean; data: { isLocked: boolean; lock: any } },\r\n            { month: string }\r\n        >({\r\n            query: ({ month }) => ({\r\n                url: \"/payroll/lock-status\",\r\n                params: { month },\r\n            }),\r\n            providesTags: (_result, _error, { month }) => [\r\n                { type: \"PayrollLock\" as any, id: month },\r\n            ],\r\n        }),\r\n\r\n        lockMonth: builder.mutation<any, { month: string }>({\r\n            query: (data) => ({\r\n                url: \"/payroll/lock\",\r\n                method: \"POST\",\r\n                body: data,\r\n            }),\r\n            invalidatesTags: (_result, _error, { month }) => [\r\n                { type: \"PayrollLock\" as any, id: month },\r\n            ],\r\n        }),\r\n\r\n        unlockMonth: builder.mutation<any, { month: string }>({\r\n            query: (data) => ({\r\n                url: \"/payroll/unlock\",\r\n                method: \"POST\",\r\n                body: data,\r\n            }),\r\n            invalidatesTags: (_result, _error, { month }) => [\r\n                { type: \"PayrollLock\" as any, id: month },\r\n            ],\r\n        }),\r\n    }),\r\n});\r\n\r\nexport const {\r\n    useGetPayrollPreviewQuery,\r\n    useProcessPaymentMutation,\r\n    useBulkProcessPaymentMutation,\r\n    useUndoPaymentMutation,\r\n    useGraceAttendanceMutation,\r\n    useGetAbsentDatesQuery,\r\n    useGetLockStatusQuery,\r\n    useLockMonthMutation,\r\n    useUnlockMonthMutation,\r\n} = payrollApi;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\payroll\\payrollBankSettingsApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\profitShare\\profitShareApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\returnFileFormat\\returnFileFormatApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\service\\serviceApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\shiftAssignment\\shiftAssignmentApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\shift\\shiftApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\staff\\staffApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\features\\user\\userApi.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\redux\\store.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\analytics.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\branch.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\career.type.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":49,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":49,"endColumn":40,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[1121,1201],"text":"type UpdateJobPositionInput = Partial<CreateJobPositionInput>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Job Position Types\r\nexport interface IJobPosition {\r\n    _id: string;\r\n    slug: string;\r\n    isOpened: boolean;\r\n    title: string;\r\n    company: string;\r\n    location: string;\r\n    vacancies: number;\r\n    officeTime: string;\r\n    jobType: string;\r\n    salary: string;\r\n    deadline: string;\r\n    companyHistory: string;\r\n    description: string;\r\n    responsibilities: string[];\r\n    requirements: string[];\r\n    benefits: string[];\r\n    shift?: string;\r\n    gender?: string;\r\n    applyInstruction?: string;\r\n    createdBy: string;\r\n    updatedBy?: string;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface CreateJobPositionInput {\r\n    slug?: string;\r\n    title: string;\r\n    company: string;\r\n    location: string;\r\n    vacancies?: number;\r\n    officeTime?: string;\r\n    jobType?: string;\r\n    salary?: string;\r\n    deadline: string;\r\n    companyHistory?: string;\r\n    description: string;\r\n    responsibilities?: string[];\r\n    requirements?: string[];\r\n    benefits?: string[];\r\n    shift?: string;\r\n    gender?: string;\r\n    applyInstruction?: string;\r\n    isOpened?: boolean;\r\n}\r\n\r\nexport interface UpdateJobPositionInput\r\n    extends Partial<CreateJobPositionInput> {}\r\n\r\n// Job Application Types\r\nexport type ApplicationStatus =\r\n    | 'pending'\r\n    | 'reviewed'\r\n    | 'shortlisted'\r\n    | 'rejected'\r\n    | 'hired';\r\n\r\nexport interface IWorkExperience {\r\n    company: string;\r\n    position: string;\r\n    startDate: string;\r\n    endDate?: string;\r\n    isCurrent: boolean;\r\n}\r\n\r\nexport interface ICVFile {\r\n    url: string;\r\n    publicId: string;\r\n    fileName: string;\r\n}\r\n\r\nexport interface IJobApplication {\r\n    _id: string;\r\n    jobPosition: {\r\n        _id: string;\r\n        title: string;\r\n        company: string;\r\n        slug: string;\r\n        location?: string;\r\n        deadline?: string;\r\n    };\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    phone: string;\r\n    facebook?: string;\r\n    linkedin?: string;\r\n    portfolio?: string;\r\n    hasExperience: boolean;\r\n    experiences?: IWorkExperience[];\r\n    cvFile: ICVFile;\r\n    coverLetter?: string;\r\n    status: ApplicationStatus;\r\n    statusUpdatedBy?: string;\r\n    statusUpdatedAt?: string;\r\n    notes?: string;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\n// Filters\r\nexport interface JobPositionFilters {\r\n    isOpened?: boolean;\r\n    page?: number;\r\n    limit?: number;\r\n}\r\n\r\nexport interface JobApplicationFilters {\r\n    jobPosition?: string;\r\n    status?: ApplicationStatus;\r\n    hasExperience?: boolean;\r\n    search?: string;\r\n    page?: number;\r\n    limit?: number;\r\n}\r\n\r\n// Status Labels and Colors\r\nexport const APPLICATION_STATUS_LABELS: Record<ApplicationStatus, string> = {\r\n    pending: 'Pending',\r\n    reviewed: 'Reviewed',\r\n    shortlisted: 'Shortlisted',\r\n    rejected: 'Rejected',\r\n    hired: 'Hired',\r\n};\r\n\r\nexport const APPLICATION_STATUS_COLORS: Record<ApplicationStatus, string> = {\r\n    pending: 'bg-yellow-100 text-yellow-800',\r\n    reviewed: 'bg-blue-100 text-blue-800',\r\n    shortlisted: 'bg-green-100 text-green-800',\r\n    rejected: 'bg-red-100 text-red-800',\r\n    hired: 'bg-purple-100 text-purple-800',\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\client.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\currency-rate.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\dashboard.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\earning.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\invitation.type.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[551,554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[551,554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[571,574],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[571,574],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface IInvitationCreate {\r\n    email: string;\r\n    salary: number;\r\n    role: 'staff' | 'team_leader' | 'admin' | 'super_admin' | 'hr_manager';\r\n    department?: string;\r\n    designation: string;\r\n    branchId?: string;\r\n    shiftId?: string;\r\n    expiryHours?: number;\r\n}\r\n\r\nexport interface IInvitation {\r\n    _id: string;\r\n    email: string;\r\n    token: string;\r\n    expiresAt: string;\r\n    isUsed: boolean;\r\n    usedAt?: string;\r\n    salary: number;\r\n    role: string;\r\n    department?: string;\r\n    designation: string;\r\n    branchId: any;\r\n    shiftId?: any;\r\n    createdBy: string;\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface IAcceptInvitation {\r\n    name: string;\r\n    password: string;\r\n    phone: string;\r\n    address?: string;\r\n    dateOfBirth?: string;\r\n    bloodGroup?: string;\r\n    nationalId?: string;\r\n    emergencyContact?: {\r\n        name: string;\r\n        relation: string;\r\n        phone: string;\r\n    };\r\n    fathersName?: string;\r\n    mothersName?: string;\r\n    spouseName?: string;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\leave.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\notice.type.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":52,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":52,"endColumn":35,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[1116,1181],"text":"type UpdateNoticeInput = Partial<CreateNoticeInput>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type NoticePriority = 'low' | 'medium' | 'high' | 'urgent';\r\nexport type NoticeCategory =\r\n    | 'general'\r\n    | 'policy'\r\n    | 'event'\r\n    | 'holiday'\r\n    | 'maintenance'\r\n    | 'other';\r\n\r\nexport interface NoticeAttachment {\r\n    url: string;\r\n    fileName: string;\r\n    publicId?: string;\r\n}\r\n\r\nexport interface INotice {\r\n    _id: string;\r\n    title: string;\r\n    content: string;\r\n    priority: NoticePriority;\r\n    category: NoticeCategory;\r\n    isPublished: boolean;\r\n    publishedAt?: string;\r\n    expiresAt?: string;\r\n    isPinned: boolean;\r\n    attachments?: NoticeAttachment[];\r\n    createdBy: {\r\n        _id: string;\r\n        name: string;\r\n        email: string;\r\n    };\r\n    updatedBy?: {\r\n        _id: string;\r\n        name: string;\r\n        email: string;\r\n    };\r\n    viewedBy?: string[];\r\n    createdAt: string;\r\n    updatedAt: string;\r\n}\r\n\r\nexport interface CreateNoticeInput {\r\n    title: string;\r\n    content: string;\r\n    priority?: NoticePriority;\r\n    category?: NoticeCategory;\r\n    isPinned?: boolean;\r\n    expiresAt?: string;\r\n    attachments?: NoticeAttachment[];\r\n}\r\n\r\nexport interface UpdateNoticeInput extends Partial<CreateNoticeInput> {}\r\n\r\nexport interface NoticeFilters {\r\n    isPublished?: boolean;\r\n    category?: NoticeCategory;\r\n    priority?: NoticePriority;\r\n    page?: number;\r\n    limit?: number;\r\n}\r\n\r\nexport const NOTICE_PRIORITY_LABELS: Record<NoticePriority, string> = {\r\n    low: 'Low',\r\n    medium: 'Medium',\r\n    high: 'High',\r\n    urgent: 'Urgent',\r\n};\r\n\r\nexport const NOTICE_CATEGORY_LABELS: Record<NoticeCategory, string> = {\r\n    general: 'General',\r\n    policy: 'Policy Update',\r\n    event: 'Event',\r\n    holiday: 'Holiday',\r\n    maintenance: 'Maintenance',\r\n    other: 'Other',\r\n};\r\n\r\nexport const NOTICE_PRIORITY_COLORS: Record<NoticePriority, string> = {\r\n    low: 'bg-slate-100 text-slate-800',\r\n    medium: 'bg-blue-100 text-blue-800',\r\n    high: 'bg-orange-100 text-orange-800',\r\n    urgent: 'bg-red-100 text-red-800',\r\n};\r\n\r\nexport const NOTICE_CATEGORY_COLORS: Record<NoticeCategory, string> = {\r\n    general: 'bg-gray-100 text-gray-800',\r\n    policy: 'bg-purple-100 text-purple-800',\r\n    event: 'bg-green-100 text-green-800',\r\n    holiday: 'bg-pink-100 text-pink-800',\r\n    maintenance: 'bg-yellow-100 text-yellow-800',\r\n    other: 'bg-teal-100 text-teal-800',\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\order.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\overtime.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\payroll.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\shift.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\staff.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\types\\user.type.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\utils\\canAccess.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\utils\\generateRouteAccess.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\utils\\getSiteHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\validators\\order.validator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\validators\\profile.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
