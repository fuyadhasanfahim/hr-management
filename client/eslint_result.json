[{"filePath":"C:\\Users\\fuyad\\Codes\\Office\\hr-management\\client\\src\\app\\(root)\\attendance\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":3,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":204,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":204,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6382,6385],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6382,6385],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":572,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":572,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[28703,28706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[28703,28706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":686,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":686,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35761,35764],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35761,35764],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport {\r\n    useGetAllAttendanceQuery,\r\n    useUpdateAttendanceStatusMutation,\r\n} from \"@/redux/features/attendance/attendanceApi\";\r\nimport {\r\n    Card,\r\n    CardContent,\r\n    CardDescription,\r\n    CardHeader,\r\n    CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    Search,\r\n    ChevronsLeft,\r\n    ChevronsRight,\r\n    Calendar as CalendarIcon,\r\n    Users,\r\n    CheckCircle2,\r\n    Clock,\r\n    XCircle,\r\n    CalendarOff,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport {\r\n    format,\r\n    startOfMonth,\r\n    endOfMonth,\r\n    startOfYear,\r\n    endOfYear,\r\n} from \"date-fns\";\r\nimport {\r\n    Popover,\r\n    PopoverContent,\r\n    PopoverTrigger,\r\n} from \"@/components/ui/popover\";\r\nimport { Calendar } from \"@/components/ui/calendar\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { DateRange } from \"react-day-picker\";\r\nimport { Skeleton } from \"@/components/ui/skeleton\";\r\n\r\nconst statusOptions = [\r\n    { value: \"all\", label: \"All Status\" },\r\n    { value: \"present\", label: \"Present\", color: \"text-green-600\" },\r\n    { value: \"absent\", label: \"Absent\", color: \"text-red-600\" },\r\n    { value: \"late\", label: \"Late\", color: \"text-yellow-600\" },\r\n    { value: \"half_day\", label: \"Half Day\", color: \"text-orange-600\" },\r\n    { value: \"early_exit\", label: \"Early Exit\", color: \"text-purple-600\" },\r\n    { value: \"on_leave\", label: \"On Leave\", color: \"text-blue-600\" },\r\n    { value: \"weekend\", label: \"Weekend\", color: \"text-gray-600\" },\r\n    { value: \"holiday\", label: \"Holiday\", color: \"text-pink-600\" },\r\n];\r\n\r\nconst FILTER_TYPES = {\r\n    ALL: \"all\",\r\n    TODAY: \"today\",\r\n    WEEKLY: \"weekly\",\r\n    MONTHLY: \"monthly\",\r\n    YEARLY: \"yearly\",\r\n    CUSTOM: \"custom\",\r\n};\r\n\r\nconst MONTHS = [\r\n    { value: 1, label: \"January\" },\r\n    { value: 2, label: \"February\" },\r\n    { value: 3, label: \"March\" },\r\n    { value: 4, label: \"April\" },\r\n    { value: 5, label: \"May\" },\r\n    { value: 6, label: \"June\" },\r\n    { value: 7, label: \"July\" },\r\n    { value: 8, label: \"August\" },\r\n    { value: 9, label: \"September\" },\r\n    { value: 10, label: \"October\" },\r\n    { value: 11, label: \"November\" },\r\n    { value: 12, label: \"December\" },\r\n];\r\n\r\nconst YEARS = Array.from({ length: 5 }, (_, i) => new Date().getFullYear() - i);\r\nconst perPageOptions = [10, 20, 50, 100];\r\n\r\nexport default function AttendancePage() {\r\n    // UI State\r\n    const [page, setPage] = useState(1);\r\n    const [limit, setLimit] = useState(20);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n    // Filter State\r\n    const [filterType, setFilterType] = useState(FILTER_TYPES.TODAY);\r\n    const [selectedMonth, setSelectedMonth] = useState(\r\n        new Date().getMonth() + 1,\r\n    );\r\n    const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\r\n    const [dateRange, setDateRange] = useState<DateRange | undefined>(\r\n        undefined,\r\n    );\r\n    const [statusFilter, setStatusFilter] = useState(\"all\");\r\n\r\n    // Computed Filters for API\r\n    const [apiFilters, setApiFilters] = useState({\r\n        startDate: \"\",\r\n        endDate: \"\",\r\n        search: \"\",\r\n        status: \"\",\r\n    });\r\n\r\n    // Update API filters when UI state changes\r\n    useEffect(() => {\r\n        let start = \"\";\r\n        let end = \"\";\r\n\r\n        const now = new Date();\r\n\r\n        switch (filterType) {\r\n            case FILTER_TYPES.TODAY:\r\n                start = format(now, \"yyyy-MM-dd\");\r\n                end = format(now, \"yyyy-MM-dd\");\r\n                break;\r\n            case FILTER_TYPES.WEEKLY:\r\n                const wStart = new Date(now);\r\n                wStart.setDate(wStart.getDate() - 7);\r\n                start = format(wStart, \"yyyy-MM-dd\");\r\n                end = format(now, \"yyyy-MM-dd\");\r\n                break;\r\n            case FILTER_TYPES.MONTHLY:\r\n                const mStart = startOfMonth(\r\n                    new Date(selectedYear, selectedMonth - 1),\r\n                );\r\n                const mEnd = endOfMonth(\r\n                    new Date(selectedYear, selectedMonth - 1),\r\n                );\r\n                start = format(mStart, \"yyyy-MM-dd\");\r\n                end = format(mEnd, \"yyyy-MM-dd\");\r\n                break;\r\n            case FILTER_TYPES.YEARLY:\r\n                const yStart = startOfYear(new Date(selectedYear, 0));\r\n                const yEnd = endOfYear(new Date(selectedYear, 0));\r\n                start = format(yStart, \"yyyy-MM-dd\");\r\n                end = format(yEnd, \"yyyy-MM-dd\");\r\n                break;\r\n            case FILTER_TYPES.CUSTOM:\r\n                if (dateRange && dateRange.from)\r\n                    start = format(dateRange.from, \"yyyy-MM-dd\");\r\n                if (dateRange && dateRange.to)\r\n                    end = format(dateRange.to, \"yyyy-MM-dd\");\r\n                break;\r\n        }\r\n\r\n        // Debounce search\r\n        const timeoutId = setTimeout(() => {\r\n            setApiFilters({\r\n                startDate: start,\r\n                endDate: end,\r\n                search: searchTerm,\r\n                status: statusFilter === \"all\" ? \"\" : statusFilter,\r\n            });\r\n            setPage(1); // Reset page on filter change\r\n        }, 300);\r\n\r\n        return () => clearTimeout(timeoutId);\r\n    }, [\r\n        filterType,\r\n        selectedMonth,\r\n        selectedYear,\r\n        dateRange,\r\n        searchTerm,\r\n        statusFilter,\r\n    ]);\r\n\r\n    const { data, isLoading, isFetching } = useGetAllAttendanceQuery({\r\n        ...apiFilters,\r\n        page,\r\n        limit,\r\n    });\r\n\r\n    const [updateStatus] = useUpdateAttendanceStatusMutation();\r\n\r\n    const handleStatusChange = async (id: string, newStatus: string) => {\r\n        try {\r\n            await updateStatus({ id, status: newStatus }).unwrap();\r\n            toast.success(\"Attendance status updated successfully\");\r\n        } catch (error: any) {\r\n            toast.error(error?.data?.message || \"Failed to update status\");\r\n        }\r\n    };\r\n\r\n    const records = data?.data?.records || [];\r\n    const pagination = data?.data?.pagination;\r\n    const stats: Record<string, number> = data?.data?.stats || {};\r\n\r\n    return (\r\n        <div className=\"p-6 space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text\">\r\n                    Attendance Overview\r\n                </h2>\r\n                <p className=\"text-muted-foreground mt-1\">\r\n                    Track staff attendance, check-ins, and daily status.\r\n                </p>\r\n            </div>\r\n\r\n            {/* Statistics Cards */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n                {/* Total Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-gradient-to-br from-slate-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-slate-500/5 hover:border-slate-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-slate-500/10 blur-2xl transition-all duration-300 group-hover:bg-slate-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-slate-500/10 text-slate-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-slate-500/20\">\r\n                                <Users className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        {isLoading || isFetching ? (\r\n                            <Skeleton className=\"h-8 w-20\" />\r\n                        ) : (\r\n                            <h3 className=\"text-3xl font-bold tracking-tight text-slate-600 dark:text-slate-300\">\r\n                                {stats.total || 0}\r\n                            </h3>\r\n                        )}\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Total Records\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Present Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-gradient-to-br from-green-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-green-500/5 hover:border-green-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-green-500/10 blur-2xl transition-all duration-300 group-hover:bg-green-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-green-500/10 text-green-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-green-500/20\">\r\n                                <CheckCircle2 className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        {isLoading || isFetching ? (\r\n                            <Skeleton className=\"h-8 w-20\" />\r\n                        ) : (\r\n                            <h3 className=\"text-3xl font-bold tracking-tight text-green-600 dark:text-green-400\">\r\n                                {stats.present || 0}\r\n                            </h3>\r\n                        )}\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Present\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Late Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-gradient-to-br from-yellow-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-yellow-500/5 hover:border-yellow-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-yellow-500/10 blur-2xl transition-all duration-300 group-hover:bg-yellow-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-yellow-500/10 text-yellow-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-yellow-500/20\">\r\n                                <Clock className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        {isLoading || isFetching ? (\r\n                            <Skeleton className=\"h-8 w-20\" />\r\n                        ) : (\r\n                            <h3 className=\"text-3xl font-bold tracking-tight text-yellow-600 dark:text-yellow-400\">\r\n                                {stats.late || 0}\r\n                            </h3>\r\n                        )}\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Late\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Absent Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-gradient-to-br from-red-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-red-500/5 hover:border-red-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-red-500/10 blur-2xl transition-all duration-300 group-hover:bg-red-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-red-500/10 text-red-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-red-500/20\">\r\n                                <XCircle className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        {isLoading || isFetching ? (\r\n                            <Skeleton className=\"h-8 w-20\" />\r\n                        ) : (\r\n                            <h3 className=\"text-3xl font-bold tracking-tight text-red-600 dark:text-red-400\">\r\n                                {stats.absent || 0}\r\n                            </h3>\r\n                        )}\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            Absent\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* On Leave Card */}\r\n                <div className=\"group relative overflow-hidden rounded-2xl border bg-gradient-to-br from-blue-500/10 via-card to-card p-5 transition-all duration-300 hover:shadow-xl hover:shadow-blue-500/5 hover:border-blue-500/30\">\r\n                    <div className=\"absolute -right-4 -top-4 h-20 w-20 rounded-full bg-blue-500/10 blur-2xl transition-all duration-300 group-hover:bg-blue-500/20\" />\r\n                    <div className=\"relative\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-blue-500/10 text-blue-500 transition-all duration-300 group-hover:scale-110 group-hover:bg-blue-500/20\">\r\n                                <CalendarOff className=\"h-5 w-5\" />\r\n                            </div>\r\n                        </div>\r\n                        {isLoading || isFetching ? (\r\n                            <Skeleton className=\"h-8 w-20\" />\r\n                        ) : (\r\n                            <h3 className=\"text-3xl font-bold tracking-tight text-blue-600 dark:text-blue-400\">\r\n                                {stats.on_leave || 0}\r\n                            </h3>\r\n                        )}\r\n                        <p className=\"text-xs text-muted-foreground mt-1\">\r\n                            On Leave\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <Card className=\"border-border/60 shadow-md\">\r\n                <CardHeader className=\"pb-3\">\r\n                    <CardTitle className=\"flex items-center gap-2 text-xl\">\r\n                        Attendance Records\r\n                    </CardTitle>\r\n                </CardHeader>\r\n                <CardContent className=\"space-y-6\">\r\n                    {/* Filters Toolbar */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <div className=\"flex flex-col xl:flex-row gap-4 justify-between bg-muted/30 p-4 rounded-lg border border-border/50\">\r\n                            <div className=\"flex flex-col sm:flex-row gap-4 w-full xl:w-auto\">\r\n                                <div className=\"relative w-full sm:w-72\">\r\n                                    <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                                    <Input\r\n                                        placeholder=\"Search by staff name...\"\r\n                                        className=\"pl-8 bg-background/60\"\r\n                                        value={searchTerm}\r\n                                        onChange={(e) =>\r\n                                            setSearchTerm(e.target.value)\r\n                                        }\r\n                                    />\r\n                                </div>\r\n\r\n                                <Select\r\n                                    value={limit.toString()}\r\n                                    onValueChange={(value) => {\r\n                                        setLimit(parseInt(value));\r\n                                        setPage(1);\r\n                                    }}\r\n                                >\r\n                                    <SelectTrigger className=\"w-[100px] whitespace-nowrap bg-background/60\">\r\n                                        <SelectValue placeholder=\"Limit\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {perPageOptions.map((option) => (\r\n                                            <SelectItem\r\n                                                key={option}\r\n                                                value={option.toString()}\r\n                                            >\r\n                                                {option} / page\r\n                                            </SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-2 items-center flex-wrap\">\r\n                                <Select\r\n                                    value={filterType}\r\n                                    onValueChange={setFilterType}\r\n                                >\r\n                                    <SelectTrigger className=\"w-[140px] bg-background/60\">\r\n                                        <SelectValue placeholder=\"Date Options\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        <SelectItem value={FILTER_TYPES.ALL}>\r\n                                            All Time\r\n                                        </SelectItem>\r\n                                        <SelectItem value={FILTER_TYPES.TODAY}>\r\n                                            Today\r\n                                        </SelectItem>\r\n                                        <SelectItem value={FILTER_TYPES.WEEKLY}>\r\n                                            Weekly\r\n                                        </SelectItem>\r\n                                        <SelectItem\r\n                                            value={FILTER_TYPES.MONTHLY}\r\n                                        >\r\n                                            Monthly\r\n                                        </SelectItem>\r\n                                        <SelectItem value={FILTER_TYPES.YEARLY}>\r\n                                            Yearly\r\n                                        </SelectItem>\r\n                                        <SelectItem value={FILTER_TYPES.CUSTOM}>\r\n                                            Custom Range\r\n                                        </SelectItem>\r\n                                    </SelectContent>\r\n                                </Select>\r\n\r\n                                {filterType === FILTER_TYPES.MONTHLY && (\r\n                                    <>\r\n                                        <Select\r\n                                            value={selectedMonth.toString()}\r\n                                            onValueChange={(v) =>\r\n                                                setSelectedMonth(Number(v))\r\n                                            }\r\n                                        >\r\n                                            <SelectTrigger className=\"w-[120px] bg-background/60\">\r\n                                                <SelectValue />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {MONTHS.map((m) => (\r\n                                                    <SelectItem\r\n                                                        key={m.value}\r\n                                                        value={m.value.toString()}\r\n                                                    >\r\n                                                        {m.label}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                        <Select\r\n                                            value={selectedYear.toString()}\r\n                                            onValueChange={(v) =>\r\n                                                setSelectedYear(Number(v))\r\n                                            }\r\n                                        >\r\n                                            <SelectTrigger className=\"w-[100px] bg-background/60\">\r\n                                                <SelectValue />\r\n                                            </SelectTrigger>\r\n                                            <SelectContent>\r\n                                                {YEARS.map((y) => (\r\n                                                    <SelectItem\r\n                                                        key={y}\r\n                                                        value={y.toString()}\r\n                                                    >\r\n                                                        {y}\r\n                                                    </SelectItem>\r\n                                                ))}\r\n                                            </SelectContent>\r\n                                        </Select>\r\n                                    </>\r\n                                )}\r\n\r\n                                {filterType === FILTER_TYPES.YEARLY && (\r\n                                    <Select\r\n                                        value={selectedYear.toString()}\r\n                                        onValueChange={(v) =>\r\n                                            setSelectedYear(Number(v))\r\n                                        }\r\n                                    >\r\n                                        <SelectTrigger className=\"w-[100px] bg-background/60\">\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            {YEARS.map((y) => (\r\n                                                <SelectItem\r\n                                                    key={y}\r\n                                                    value={y.toString()}\r\n                                                >\r\n                                                    {y}\r\n                                                </SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                )}\r\n\r\n                                {filterType === FILTER_TYPES.CUSTOM && (\r\n                                    <Popover>\r\n                                        <PopoverTrigger asChild>\r\n                                            <Button\r\n                                                id=\"date\"\r\n                                                variant={\"outline\"}\r\n                                                className={cn(\r\n                                                    \"w-[240px] justify-start text-left font-normal bg-background/60\",\r\n                                                    !dateRange?.from &&\r\n                                                        \"text-muted-foreground\",\r\n                                                )}\r\n                                            >\r\n                                                <CalendarIcon className=\"mr-2 h-4 w-4\" />\r\n                                                {dateRange?.from ? (\r\n                                                    dateRange.to ? (\r\n                                                        <>\r\n                                                            {format(\r\n                                                                dateRange.from,\r\n                                                                \"LLL dd, y\",\r\n                                                            )}{\" \"}\r\n                                                            -{\" \"}\r\n                                                            {format(\r\n                                                                dateRange.to,\r\n                                                                \"LLL dd, y\",\r\n                                                            )}\r\n                                                        </>\r\n                                                    ) : (\r\n                                                        format(\r\n                                                            dateRange.from,\r\n                                                            \"LLL dd, y\",\r\n                                                        )\r\n                                                    )\r\n                                                ) : (\r\n                                                    <span>Pick a date</span>\r\n                                                )}\r\n                                            </Button>\r\n                                        </PopoverTrigger>\r\n                                        <PopoverContent\r\n                                            className=\"w-auto p-0\"\r\n                                            align=\"end\"\r\n                                        >\r\n                                            <Calendar\r\n                                                initialFocus\r\n                                                mode=\"range\"\r\n                                                defaultMonth={dateRange?.from}\r\n                                                selected={dateRange}\r\n                                                onSelect={setDateRange}\r\n                                                numberOfMonths={2}\r\n                                            />\r\n                                        </PopoverContent>\r\n                                    </Popover>\r\n                                )}\r\n\r\n                                {(searchTerm ||\r\n                                    filterType !== FILTER_TYPES.TODAY) && (\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        onClick={() => {\r\n                                            setSearchTerm(\"\");\r\n                                            setFilterType(FILTER_TYPES.TODAY);\r\n                                            setDateRange({\r\n                                                from: undefined,\r\n                                                to: undefined,\r\n                                            });\r\n                                        }}\r\n                                        className=\"h-10 px-3\"\r\n                                    >\r\n                                        Clear Filters\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Status Tabs */}\r\n                        <div className=\"w-full overflow-x-auto pb-2\">\r\n                            <Tabs\r\n                                value={statusFilter}\r\n                                onValueChange={(val) => {\r\n                                    setStatusFilter(val);\r\n                                    setPage(1);\r\n                                }}\r\n                                className=\"w-full\"\r\n                            >\r\n                                <TabsList className=\"h-10 bg-muted/50 p-1 w-max\">\r\n                                    {statusOptions.map((status) => {\r\n                                        // Find count from stats (if 'all', use total)\r\n                                        const count =\r\n                                            status.value === \"all\"\r\n                                                ? stats.total || 0\r\n                                                : (stats as any)[\r\n                                                      status.value\r\n                                                  ] || 0;\r\n\r\n                                        return (\r\n                                            <TabsTrigger\r\n                                                key={status.value}\r\n                                                value={status.value}\r\n                                                className=\"data-[state=active]:bg-background data-[state=active]:shadow-sm px-4 gap-2 text-sm\"\r\n                                            >\r\n                                                {status.label}\r\n                                                <Badge\r\n                                                    variant=\"secondary\"\r\n                                                    className=\"font-mono text-[10px] px-1.5 py-0 h-4 bg-muted-foreground/10\"\r\n                                                >\r\n                                                    {count}\r\n                                                </Badge>\r\n                                            </TabsTrigger>\r\n                                        );\r\n                                    })}\r\n                                </TabsList>\r\n                            </Tabs>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Table */}\r\n                    <div className=\"border rounded-lg overflow-hidden border-border/60\">\r\n                        <Table>\r\n                            <TableHeader>\r\n                                <TableRow className=\"bg-muted/40 hover:bg-muted/40 border-b-border/60\">\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Employee ID\r\n                                    </TableHead>\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Name\r\n                                    </TableHead>\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Shift\r\n                                    </TableHead>\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Branch\r\n                                    </TableHead>\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Date\r\n                                    </TableHead>\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Check In\r\n                                    </TableHead>\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Check Out\r\n                                    </TableHead>\r\n                                    <TableHead className=\"font-semibold\">\r\n                                        Status\r\n                                    </TableHead>\r\n                                    <TableHead className=\"text-right font-semibold\">\r\n                                        Action\r\n                                    </TableHead>\r\n                                </TableRow>\r\n                            </TableHeader>\r\n                            <TableBody>\r\n                                {isLoading || isFetching ? (\r\n                                    Array.from({ length: 10 }).map((_, i) => (\r\n                                        <TableRow key={i}>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-[80px]\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <div className=\"space-y-2\">\r\n                                                    <Skeleton className=\"h-4 w-[150px]\" />\r\n                                                    <Skeleton className=\"h-3 w-[100px]\" />\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-[80px]\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-[80px]\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-[100px]\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-[80px]\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-4 w-[80px]\" />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Skeleton className=\"h-6 w-[80px] rounded-full\" />\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-right\">\r\n                                                <Skeleton className=\"h-8 w-[100px] ml-auto\" />\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))\r\n                                ) : records.length === 0 ? (\r\n                                    <TableRow>\r\n                                        <TableCell\r\n                                            colSpan={9}\r\n                                            className=\"text-center py-16 text-muted-foreground\"\r\n                                        >\r\n                                            <div className=\"flex flex-col items-center gap-3\">\r\n                                                <Search className=\"h-10 w-10 text-muted-foreground/30\" />\r\n                                                <p className=\"text-base font-medium\">\r\n                                                    No attendance records found\r\n                                                </p>\r\n                                                <p className=\"text-sm\">\r\n                                                    Try adjusting your filters\r\n                                                    or date range\r\n                                                </p>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ) : (\r\n                                    records.map((record: any) => (\r\n                                        <TableRow\r\n                                            key={record._id}\r\n                                            className=\"hover:bg-muted/30\"\r\n                                        >\r\n                                            <TableCell className=\"font-mono text-sm\">\r\n                                                {record.staffId?.staffId || \"-\"}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"font-medium\">\r\n                                                <div className=\"text-sm font-semibold\">\r\n                                                    {record.staffId?.name ||\r\n                                                        \"Unknown Staff\"}\r\n                                                </div>\r\n                                                <div className=\"text-xs text-muted-foreground\">\r\n                                                    {record.staffId\r\n                                                        ?.designation || \"-\"}\r\n                                                </div>\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-muted-foreground text-sm\">\r\n                                                {record.shiftId?.name || \"-\"}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-muted-foreground text-sm\">\r\n                                                {record.staffId?.branchId\r\n                                                    ?.name || \"-\"}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-sm\">\r\n                                                {format(\r\n                                                    new Date(record.date),\r\n                                                    \"MMM dd, yyyy\",\r\n                                                )}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-sm font-mono text-muted-foreground\">\r\n                                                {record.checkInAt\r\n                                                    ? format(\r\n                                                          new Date(\r\n                                                              record.checkInAt,\r\n                                                          ),\r\n                                                          \"hh:mm a\",\r\n                                                      )\r\n                                                    : \"-\"}\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-sm font-mono text-muted-foreground\">\r\n                                                {record.checkOutAt\r\n                                                    ? format(\r\n                                                          new Date(\r\n                                                              record.checkOutAt,\r\n                                                          ),\r\n                                                          \"hh:mm a\",\r\n                                                      )\r\n                                                    : \"-\"}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Badge\r\n                                                    variant=\"outline\"\r\n                                                    className={cn(\r\n                                                        \"capitalize font-medium shadow-none\",\r\n                                                        statusOptions.find(\r\n                                                            (o) =>\r\n                                                                o.value ===\r\n                                                                record.status,\r\n                                                        )?.color,\r\n                                                    )}\r\n                                                >\r\n                                                    {record.status.replace(\r\n                                                        \"_\",\r\n                                                        \" \",\r\n                                                    )}\r\n                                                </Badge>\r\n                                            </TableCell>\r\n                                            <TableCell className=\"text-right\">\r\n                                                <Select\r\n                                                    value={record.status}\r\n                                                    onValueChange={(value) =>\r\n                                                        handleStatusChange(\r\n                                                            record._id,\r\n                                                            value,\r\n                                                        )\r\n                                                    }\r\n                                                    disabled={isFetching}\r\n                                                >\r\n                                                    <SelectTrigger className=\"h-8 text-xs font-medium w-[120px] ml-auto\">\r\n                                                        <SelectValue />\r\n                                                    </SelectTrigger>\r\n                                                    <SelectContent>\r\n                                                        {statusOptions\r\n                                                            .filter(\r\n                                                                (o) =>\r\n                                                                    o.value !==\r\n                                                                    \"all\",\r\n                                                            )\r\n                                                            .map((option) => (\r\n                                                                <SelectItem\r\n                                                                    key={\r\n                                                                        option.value\r\n                                                                    }\r\n                                                                    value={\r\n                                                                        option.value\r\n                                                                    }\r\n                                                                >\r\n                                                                    {\r\n                                                                        option.label\r\n                                                                    }\r\n                                                                </SelectItem>\r\n                                                            ))}\r\n                                                    </SelectContent>\r\n                                                </Select>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))\r\n                                )}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </div>\r\n\r\n                    {/* Pagination */}\r\n                    {pagination && (\r\n                        <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4 pt-4\">\r\n                            <p className=\"text-sm text-muted-foreground\">\r\n                                Showing {(page - 1) * limit + 1} to{\" \"}\r\n                                {Math.min(page * limit, pagination.total)} of{\" \"}\r\n                                <span className=\"font-semibold text-foreground\">\r\n                                    {pagination.total}\r\n                                </span>{\" \"}\r\n                                entries\r\n                            </p>\r\n\r\n                            {pagination.pages > 1 && (\r\n                                <div className=\"flex items-center gap-1\">\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8\"\r\n                                        onClick={() => setPage(1)}\r\n                                        disabled={page === 1 || isFetching}\r\n                                    >\r\n                                        <ChevronsLeft className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8\"\r\n                                        onClick={() =>\r\n                                            setPage((p) => Math.max(1, p - 1))\r\n                                        }\r\n                                        disabled={page === 1 || isFetching}\r\n                                    >\r\n                                        <ChevronLeft className=\"h-4 w-4\" />\r\n                                    </Button>\r\n\r\n                                    {/* Page Numbers Logic */}\r\n                                    {(() => {\r\n                                        const totalPages = pagination.pages;\r\n                                        const pageNumbers: (number | string)[] =\r\n                                            [];\r\n\r\n                                        if (totalPages <= 7) {\r\n                                            for (\r\n                                                let i = 1;\r\n                                                i <= totalPages;\r\n                                                i++\r\n                                            )\r\n                                                pageNumbers.push(i);\r\n                                        } else {\r\n                                            if (page <= 3) {\r\n                                                pageNumbers.push(\r\n                                                    1,\r\n                                                    2,\r\n                                                    3,\r\n                                                    4,\r\n                                                    \"...\",\r\n                                                    totalPages,\r\n                                                );\r\n                                            } else if (page >= totalPages - 2) {\r\n                                                pageNumbers.push(\r\n                                                    1,\r\n                                                    \"...\",\r\n                                                    totalPages - 3,\r\n                                                    totalPages - 2,\r\n                                                    totalPages - 1,\r\n                                                    totalPages,\r\n                                                );\r\n                                            } else {\r\n                                                pageNumbers.push(\r\n                                                    1,\r\n                                                    \"...\",\r\n                                                    page - 1,\r\n                                                    page,\r\n                                                    page + 1,\r\n                                                    \"...\",\r\n                                                    totalPages,\r\n                                                );\r\n                                            }\r\n                                        }\r\n\r\n                                        return pageNumbers.map((num, idx) =>\r\n                                            num === \"...\" ? (\r\n                                                <span\r\n                                                    key={`ellipsis-${idx}`}\r\n                                                    className=\"px-2 text-muted-foreground\"\r\n                                                >\r\n                                                    ...\r\n                                                </span>\r\n                                            ) : (\r\n                                                <Button\r\n                                                    key={num}\r\n                                                    variant={\r\n                                                        page === num\r\n                                                            ? \"default\"\r\n                                                            : \"outline\"\r\n                                                    }\r\n                                                    size=\"icon\"\r\n                                                    className=\"h-8 w-8\"\r\n                                                    onClick={() =>\r\n                                                        setPage(num as number)\r\n                                                    }\r\n                                                    disabled={isFetching}\r\n                                                >\r\n                                                    {num}\r\n                                                </Button>\r\n                                            ),\r\n                                        );\r\n                                    })()}\r\n\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8\"\r\n                                        onClick={() =>\r\n                                            setPage((p) =>\r\n                                                Math.min(\r\n                                                    pagination.pages,\r\n                                                    p + 1,\r\n                                                ),\r\n                                            )\r\n                                        }\r\n                                        disabled={\r\n                                            page === pagination.pages ||\r\n                                            isFetching\r\n                                        }\r\n                                    >\r\n                                        <ChevronRight className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8\"\r\n                                        onClick={() =>\r\n                                            setPage(pagination.pages)\r\n                                        }\r\n                                        disabled={\r\n                                            page === pagination.pages ||\r\n                                            isFetching\r\n                                        }\r\n                                    >\r\n                                        <ChevronsRight className=\"h-4 w-4\" />\r\n                                    </Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]}]
